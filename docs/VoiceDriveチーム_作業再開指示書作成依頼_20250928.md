# VoiceDriveチーム向け 作業再開指示書作成依頼

送信日: 2025年9月28日
宛先: VoiceDriveシステム開発チーム
送信元: 医療職員管理システム開発チーム
件名: エスポワール立神統合 - 共通DB構築後の作業再開指示書作成のお願い

---

## 1. 依頼内容

共通DB構築完了後の作業再開に向けて、VoiceDriveチーム側でも「作業再開指示書」の作成をお願いいたします。

両チームが同期して作業を再開できるよう、以下の内容を含む指示書の準備をお願いします。

---

## 2. 作業再開指示書に含めていただきたい項目

### 2.1 必須項目

#### A. 環境設定
- [ ] VoiceDrive側の環境変数設定手順
- [ ] 共通DBへの接続設定
- [ ] Webhook受信エンドポイントの設定
- [ ] 認証トークン・シークレットキーの設定

#### B. データ同期確認
- [ ] 施設マスターデータの同期確認手順
- [ ] 役職マッピングデータの照合手順
- [ ] エスポワール立神33役職の確認リスト

#### C. 連携テスト
- [ ] Webhook疎通テスト手順
- [ ] データ更新通知の受信確認
- [ ] エラーハンドリングのテスト

#### D. 特殊ケース対応
- [ ] 兼任職員（ESP_003, ESP_004）の権限処理確認
- [ ] 統括主任レベル7の反映確認
- [ ] フロア別承認フローの動作確認

### 2.2 推奨項目

#### E. 監視・ログ
- [ ] ログ出力設定
- [ ] エラー監視設定
- [ ] パフォーマンス監視

#### F. 障害対応
- [ ] ロールバック手順
- [ ] 緊急連絡体制
- [ ] トラブルシューティングガイド

---

## 3. 医療システム側の実装状況（参考）

### 3.1 完了済み実装
```typescript
// エスポワール立神の実装状況
{
  facilityId: 'espoir-tategami',
  positions: 33,  // 全役職実装完了
  testResults: {
    day1: '21/21 成功',
    day2: '10/11 成功'  // 一般職員除く
  },
  specialCases: {
    dualPosition: 'Math.max()で最高権限採用',
    chiefLevel: 'レベル5で統一',
    toukatsuChief: 'レベル7確定'
  }
}
```

### 3.2 テスト済み項目
- ✅ 基本機能テスト（レベル設定）
- ✅ フロー・権限テスト
- ✅ 兼任職員権限処理
- ✅ 施設間異動シミュレーション
- ⏳ Day 3負荷テスト（DB構築後実施）

---

## 4. 確認が必要な連携仕様

### 4.1 施設ID形式
```javascript
// 統一形式（ハイフン区切り）
const FACILITY_IDS = {
  小原病院: 'obara-hospital',
  立神リハビリ: 'tategami-rehabilitation',
  エスポワール立神: 'espoir-tategami'
};
```

### 4.2 Webhook通知形式
```json
{
  "event": "position_update",
  "facility_id": "espoir-tategami",
  "timestamp": "2025-09-28T13:30:00Z",
  "data": {
    "staff_id": "ESP_XXX",
    "position": "役職名",
    "level": 5,
    "department": "部門名"
  }
}
```

### 4.3 エラーレスポンス形式
```json
{
  "error": true,
  "code": "VALIDATION_ERROR",
  "message": "詳細メッセージ",
  "retry": true
}
```

---

## 5. 共有ファイル参照

以下のファイルをVoiceDriveチーム側でも参照可能です：

1. **作業完了報告書**
   - `/docs/エスポワール立神統合_作業完了報告書_20250928.md`

2. **医療システム側再開指示書**
   - `/docs/共通DB構築後_作業再開指示書_20250928.md`

3. **テスト結果**
   - `/docs/統合テスト実施記録_20250928.md`
   - `/tests/integration/test-results-day1.json`
   - `/tests/integration/test-results-day2.json`

---

## 6. 想定スケジュール

### Phase 1: 準備期間（DB構築中）
- 作業再開指示書の作成
- テスト環境の準備
- チーム内での手順確認

### Phase 2: DB構築完了直後
- 接続確認（両チーム同時）
- マスターデータ投入
- 初期同期テスト

### Phase 3: 統合テスト
- 両システム間連携テスト
- 負荷テスト
- 24時間連続稼働テスト

### Phase 4: 本番展開
- 段階的ロールアウト
- モニタリング強化期間
- 安定稼働確認

---

## 7. 連絡事項

### 確認依頼
1. 上記内容で作業再開指示書を作成いただけるか
2. 追加で必要な情報があるか
3. 想定される課題や懸念事項

### 今後の連携
- 定期同期ミーティングの設定（週1回推奨）
- Slackチャンネルでのリアルタイム連携
- 共有ドキュメントの更新通知

---

## 8. 参考: 統括主任レベル調整の最終確認

```typescript
// 両チームで以下の設定を統一
立神リハビリテーション温泉病院: {
  役職: '統括主任',
  レベル: 7,  // 6→7に修正済み
  備考: 'Phase 3調整完了'
}
```

この点についても、VoiceDrive側の実装で確実に反映されているか、再開時に確認をお願いします。

---

## 9. 締切と返答先

### 作業再開指示書作成期限
共通DB構築完了予定日の**3営業日前**まで

### 返答・問い合わせ先
- 医療システムチームSlack: #medical-system-dev
- メール: [medical-team@example.com]
- 担当者: [担当者名]

---

以上、よろしくお願いいたします。

両チーム協力して、エスポワール立神の統合を成功させましょう。

---

医療職員管理システム開発チーム
2025年9月28日