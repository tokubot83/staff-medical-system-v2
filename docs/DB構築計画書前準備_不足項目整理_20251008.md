# DBæ§‹ç¯‰è¨ˆç”»æ›¸å‰æº–å‚™ - ä¸è¶³é …ç›®æ•´ç†

**æ–‡æ›¸ç•ªå·**: DB-PREP-2025-1008-001
**ä½œæˆæ—¥**: 2025å¹´10æœˆ8æ—¥
**ä½œæˆè€…**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ 
**ç›®çš„**: DBæ§‹ç¯‰å‰ã«ä¸è¶³ã—ã¦ã„ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»ã‚«ãƒ©ãƒ ã‚’æ´—ã„å‡ºã—ã€å®Œå…¨ãªã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆã‚’è¡Œã†
**é‡è¦åº¦**: ğŸ”´ æœ€é‡è¦

---

## ğŸ“‹ ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

### èƒŒæ™¯
- VoiceDriveãƒãƒ¼ãƒ ãŒMySQLç§»è¡Œã‚’å®Ÿæ–½ä¸­
- åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã‚‚MySQLæ§‹ç¯‰ã‚’æ§ãˆã¦ã„ã‚‹
- **DBæ§‹ç¯‰å¾Œã®ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ã¯æ‰‹é–“ã¨ã‚³ã‚¹ãƒˆå¢—**
- **ä»Šã®æ®µéšã§å¯èƒ½ãªé™ã‚ŠæŠœã‘æ¼ã‚Œã‚’æ´—ã„å‡ºã™ã“ã¨ãŒé‡è¦**

### æ–¹é‡
1. âœ… ä¸è¶³é …ç›®ã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—
2. âœ… ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆæ¡ˆã‚’ä½œæˆ
3. âœ… ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ã¯å¾Œå›ã—ï¼ˆDBã«ç™»éŒ²å¯èƒ½ã«ã—ã¦ãŠãï¼‰
4. âœ… VoiceDriveå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å‚è€ƒã«ã™ã‚‹

---

## ğŸ”´ é‡å¤§ãªä¸è¶³é …ç›®ï¼ˆPriority 1: å¿…é ˆï¼‰

### 1. è³‡æ ¼ç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- `EmployeeSkill`ãƒ†ãƒ¼ãƒ–ãƒ«ã§ä»£ç”¨ã—ã¦ã„ã‚‹ãŒä¸ååˆ†
- å–å¾—æ—¥ã€æ›´æ–°æ—¥ã€ç®¡è½„å›£ä½“ãŒè¨˜éŒ²ã§ããªã„
- è³‡æ ¼ç•ªå·ãŒè¨˜éŒ²ã§ããªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `Certifications`

```prisma
model Certification {
  id                   String   @id @default(cuid())
  employeeId           String   @map("employee_id")
  certificationType    String   @map("certification_type")    // çœ‹è­·å¸«ã€å‡†çœ‹è­·å¸«ã€ä»‹è­·ç¦ç¥‰å£«ç­‰
  certificationNumber  String?  @map("certification_number")  // è³‡æ ¼ç•ªå·
  issuingAuthority     String   @map("issuing_authority")     // ç®¡è½„å›£ä½“ï¼ˆåšç”ŸåŠ´åƒçœã€çœ‹è­·å”ä¼šç­‰ï¼‰
  obtainedDate         DateTime @map("obtained_date")         // å–å¾—æ—¥
  issueDate            DateTime? @map("issue_date")            // äº¤ä»˜æ—¥
  expiryDate           DateTime? @map("expiry_date")           // æœ‰åŠ¹æœŸé™
  lastRenewalDate      DateTime? @map("last_renewal_date")     // æœ€çµ‚æ›´æ–°æ—¥
  renewalCycleYears    Int?     @map("renewal_cycle_years")   // æ›´æ–°å‘¨æœŸï¼ˆå¹´ï¼‰
  status               String   @default("active")            // active, expired, suspended, revoked
  documentPath         String?  @map("document_path")         // è³‡æ ¼è¨¼æ˜æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
  notes                String?                                // å‚™è€ƒ
  createdAt            DateTime @default(now()) @map("created_at")
  updatedAt            DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([certificationType])
  @@index([status])
  @@index([expiryDate])  // æœŸé™ç®¡ç†ç”¨
  @@map("certifications")
}
```

#### å½±éŸ¿ç¯„å›²
- ğŸ”´ çœ‹è­·å¸«å…è¨±æ›´æ–°ç®¡ç†ã«å¿…é ˆ
- ğŸ”´ ä»‹è­·ç¦ç¥‰å£«è³‡æ ¼ç®¡ç†ã«å¿…é ˆ
- ğŸ”´ åŒ»ç™‚å¾“äº‹è€…ã®è³‡æ ¼æœ‰åŠ¹æ€§ç¢ºèªã«å¿…é ˆ

---

### 2. çµ¦ä¸ãƒ»å ±é…¬æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- çµ¦ä¸æƒ…å ±ãŒä¸€åˆ‡è¨˜éŒ²ã§ããªã„
- æ˜‡çµ¦å±¥æ­´ãŒè¿½è·¡ã§ããªã„
- æ‰‹å½“æƒ…å ±ãŒç®¡ç†ã§ããªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `Salaries`ï¼ˆçµ¦ä¸ãƒã‚¹ã‚¿ï¼‰

```prisma
model Salary {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  effectiveDate   DateTime @map("effective_date")        // é©ç”¨é–‹å§‹æ—¥
  baseSalary      Decimal  @map("base_salary") @db.Decimal(10, 2)  // åŸºæœ¬çµ¦
  positionAllowance Decimal? @map("position_allowance") @db.Decimal(10, 2)  // å½¹è·æ‰‹å½“
  qualificationAllowance Decimal? @map("qualification_allowance") @db.Decimal(10, 2)  // è³‡æ ¼æ‰‹å½“
  nightShiftAllowance Decimal? @map("night_shift_allowance") @db.Decimal(10, 2)  // å¤œå‹¤æ‰‹å½“
  housingAllowance Decimal? @map("housing_allowance") @db.Decimal(10, 2)  // ä½å®…æ‰‹å½“
  familyAllowance Decimal? @map("family_allowance") @db.Decimal(10, 2)  // å®¶æ—æ‰‹å½“
  otherAllowances Decimal? @map("other_allowances") @db.Decimal(10, 2)  // ãã®ä»–æ‰‹å½“
  totalMonthlySalary Decimal @map("total_monthly_salary") @db.Decimal(10, 2)  // æœˆé¡åˆè¨ˆ
  raiseReason     String?  @map("raise_reason")          // æ˜‡çµ¦ç†ç”±ï¼ˆå®šæœŸæ˜‡çµ¦ã€æ˜‡æ ¼ç­‰ï¼‰
  notes           String?
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId, effectiveDate(sort: Desc)])
  @@map("salaries")
}
```

#### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®
- ğŸ”’ ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’å³æ ¼ã«åˆ¶é™ï¼ˆLevel 12ä»¥ä¸Šã®ã¿ï¼‰
- ğŸ”’ ç›£æŸ»ãƒ­ã‚°å¿…é ˆ
- ğŸ”’ æš—å·åŒ–æ¤œè¨

---

### 3. å‹¤æ€ ç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- å‡ºå‹¤ãƒ»æ¬ å‹¤è¨˜éŒ²ãŒãªã„
- ä¼‘æš‡å–å¾—å±¥æ­´ãŒãªã„
- åŠ´åƒæ™‚é–“ç®¡ç†ãŒã§ããªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `Attendances`ï¼ˆå‹¤æ€ è¨˜éŒ²ï¼‰

```prisma
model Attendance {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  workDate        DateTime @map("work_date") @db.Date  // å‹¤å‹™æ—¥
  status          String                               // present, absent, leave, holiday
  checkInTime     DateTime? @map("check_in_time")       // å‡ºå‹¤æ™‚åˆ»
  checkOutTime    DateTime? @map("check_out_time")      // é€€å‹¤æ™‚åˆ»
  workHours       Float?   @map("work_hours")          // å®ŸåŠ´åƒæ™‚é–“
  overtimeHours   Float?   @map("overtime_hours")      // æ®‹æ¥­æ™‚é–“
  nightShiftHours Float?   @map("night_shift_hours")   // å¤œå‹¤æ™‚é–“
  breakHours      Float?   @map("break_hours")         // ä¼‘æ†©æ™‚é–“
  leaveType       String?  @map("leave_type")          // annual, sick, special, maternityç­‰
  notes           String?
  approvedBy      String?  @map("approved_by")         // æ‰¿èªè€…ID
  approvedAt      DateTime? @map("approved_at")
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@unique([employeeId, workDate])
  @@index([employeeId, workDate(sort: Desc)])
  @@index([status])
  @@map("attendances")
}
```

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `LeaveBalances`ï¼ˆä¼‘æš‡æ®‹é«˜ï¼‰

```prisma
model LeaveBalance {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  fiscalYear      Int      @map("fiscal_year")         // å¹´åº¦
  leaveType       String   @map("leave_type")          // annual, sick, special
  totalDays       Float    @map("total_days")          // ä»˜ä¸æ—¥æ•°
  usedDays        Float    @map("used_days")           // ä½¿ç”¨æ—¥æ•°
  remainingDays   Float    @map("remaining_days")      // æ®‹æ—¥æ•°
  expiryDate      DateTime? @map("expiry_date")         // æœ‰åŠ¹æœŸé™
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@unique([employeeId, fiscalYear, leaveType])
  @@index([employeeId])
  @@map("leave_balances")
}
```

---

### 3-2. å‹¤å‹™ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ»ãƒ¯ãƒ¼ã‚¯ãƒ©ã‚¤ãƒ•ãƒãƒ©ãƒ³ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- ã‚·ãƒ•ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæ—¥å‹¤/å¤œå‹¤ã®å‰²åˆï¼‰ãŒè¨˜éŒ²ã§ããªã„
- ãƒ¯ãƒ¼ã‚¯ãƒ©ã‚¤ãƒ•ãƒãƒ©ãƒ³ã‚¹ã‚¹ã‚³ã‚¢ãŒç®—å‡ºãƒ»è¨˜éŒ²ã§ããªã„
- å‹¤å‹™å®‰å®šæ€§ã®è©•ä¾¡ãŒã§ããªã„
- å®šæ™‚é€€ç¤¾ç‡ã€é€£ç¶šå‹¤å‹™æ—¥æ•°ãªã©ã®è©³ç´°æŒ‡æ¨™ãŒãªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `WorkPatternAnalyses`ï¼ˆå‹¤å‹™ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æï¼‰

```prisma
model WorkPatternAnalysis {
  id                    String   @id @default(cuid())
  employeeId            String   @map("employee_id")
  analysisPeriod        String   @map("analysis_period")         // åˆ†ææœŸé–“ï¼ˆ2024-Q1ã€2024å¹´åº¦ç­‰ï¼‰

  // ã‚·ãƒ•ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆå‰²åˆ%ï¼‰
  dayShiftRatio         Float    @map("day_shift_ratio")         // æ—¥å‹¤å‰²åˆ
  nightShiftRatio       Float    @map("night_shift_ratio")       // å¤œå‹¤å‰²åˆ
  holidayWorkRatio      Float    @map("holiday_work_ratio")      // ä¼‘æ—¥å‡ºå‹¤å‰²åˆ

  // ãƒ¯ãƒ¼ã‚¯ãƒ©ã‚¤ãƒ•ãƒãƒ©ãƒ³ã‚¹æŒ‡æ¨™
  workLifeBalanceScore  String   @map("work_life_balance_score") // S, A+, A, B, Cç­‰
  onTimeLeaveRate       Float    @map("on_time_leave_rate")      // å®šæ™‚é€€ç¤¾ç‡ï¼ˆ%ï¼‰
  maxConsecutiveWorkDays Int     @map("max_consecutive_work_days") // æœ€å¤§é€£ç¶šå‹¤å‹™æ—¥æ•°
  averageWorkHoursPerDay Float?  @map("average_work_hours_per_day") // 1æ—¥å¹³å‡åŠ´åƒæ™‚é–“

  // å‹¤å‹™å®‰å®šæ€§æŒ‡æ¨™
  attendanceReliabilityScore String @map("attendance_reliability_score") // S, A, B, Cç­‰
  attendanceRate        Float    @map("attendance_rate")         // å‡ºå‹¤ç‡ï¼ˆ%ï¼‰
  latenessCount         Int      @default(0) @map("lateness_count")      // é…åˆ»å›æ•°
  earlyLeaveCount       Int      @default(0) @map("early_leave_count")   // æ—©é€€å›æ•°
  absenceCount          Int      @default(0) @map("absence_count")       // æ¬ å‹¤å›æ•°

  // åŠ´åƒæ™‚é–“é–¢é€£
  averageOvertimeHours  Float?   @map("average_overtime_hours")  // æœˆå¹³å‡æ®‹æ¥­æ™‚é–“
  totalOvertimeHours    Float?   @map("total_overtime_hours")    // æœŸé–“åˆè¨ˆæ®‹æ¥­æ™‚é–“
  holidayWorkDays       Int?     @default(0) @map("holiday_work_days")   // ä¼‘æ—¥å‡ºå‹¤æ—¥æ•°

  // ä¼‘æš‡å–å¾—é–¢é€£
  annualLeaveUsageRate  Float?   @map("annual_leave_usage_rate") // æœ‰çµ¦å–å¾—ç‡ï¼ˆ%ï¼‰
  annualLeaveUsedDays   Float?   @map("annual_leave_used_days")  // æœ‰çµ¦ä½¿ç”¨æ—¥æ•°
  annualLeaveTotalDays  Float?   @map("annual_leave_total_days") // æœ‰çµ¦ä»˜ä¸æ—¥æ•°

  // è©•ä¾¡ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆ
  evaluatorComment      String?  @map("evaluator_comment")
  improvementSuggestions String? @map("improvement_suggestions")  // æ”¹å–„ææ¡ˆ

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@unique([employeeId, analysisPeriod])
  @@index([employeeId])
  @@index([analysisPeriod(sort: Desc)])
  @@index([workLifeBalanceScore])
  @@index([attendanceReliabilityScore])
  @@map("work_pattern_analyses")
}
```

#### ãƒ¯ãƒ¼ã‚¯ãƒ©ã‚¤ãƒ•ãƒãƒ©ãƒ³ã‚¹ã‚¹ã‚³ã‚¢åŸºæº–

| ã‚¹ã‚³ã‚¢ | åŸºæº– |
|--------|------|
| **S** | å®šæ™‚é€€ç¤¾ç‡90%ä»¥ä¸Šã€é€£ç¶šå‹¤å‹™5æ—¥ä»¥ä¸‹ã€æ®‹æ¥­æœˆ10æ™‚é–“ä»¥ä¸‹ |
| **A+** | å®šæ™‚é€€ç¤¾ç‡80%ä»¥ä¸Šã€é€£ç¶šå‹¤å‹™6æ—¥ä»¥ä¸‹ã€æ®‹æ¥­æœˆ15æ™‚é–“ä»¥ä¸‹ |
| **A** | å®šæ™‚é€€ç¤¾ç‡70%ä»¥ä¸Šã€é€£ç¶šå‹¤å‹™7æ—¥ä»¥ä¸‹ã€æ®‹æ¥­æœˆ20æ™‚é–“ä»¥ä¸‹ |
| **B** | å®šæ™‚é€€ç¤¾ç‡60%ä»¥ä¸Šã€é€£ç¶šå‹¤å‹™8æ—¥ä»¥ä¸‹ã€æ®‹æ¥­æœˆ30æ™‚é–“ä»¥ä¸‹ |
| **C** | ä¸Šè¨˜æœªæº€ |

#### å‹¤å‹™å®‰å®šæ€§ã‚¹ã‚³ã‚¢åŸºæº–

| ã‚¹ã‚³ã‚¢ | åŸºæº– |
|--------|------|
| **S** | å‡ºå‹¤ç‡98%ä»¥ä¸Šã€é…åˆ»0å›ã€æ—©é€€2å›ä»¥ä¸‹ |
| **A** | å‡ºå‹¤ç‡95%ä»¥ä¸Šã€é…åˆ»1å›ä»¥ä¸‹ã€æ—©é€€3å›ä»¥ä¸‹ |
| **B** | å‡ºå‹¤ç‡90%ä»¥ä¸Šã€é…åˆ»2å›ä»¥ä¸‹ã€æ—©é€€5å›ä»¥ä¸‹ |
| **C** | ä¸Šè¨˜æœªæº€ |

---

### 3-3. æ¥­å‹™å‡ºå¼µå±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- æ¥­å‹™å‡ºå¼µã®è¨˜éŒ²ãŒã§ããªã„
- ç ”ä¿®ãƒ»ä¼šè­°ç­‰ã®å‡ºå¼µç›®çš„ãŒç®¡ç†ã§ããªã„
- äº¤é€šè²»ãƒ»å®¿æ³Šè²»ã®ç²¾ç®—æƒ…å ±ãŒç´ä»˜ã‘ã§ããªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `BusinessTrips`ï¼ˆæ¥­å‹™å‡ºå¼µå±¥æ­´ï¼‰

```prisma
model BusinessTrip {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  tripType        String   @map("trip_type")               // training, conference, meeting, inspection, other
  destination     String                                   // å‡ºå¼µå…ˆ
  purpose         String                                   // ç›®çš„
  startDate       DateTime @map("start_date") @db.Date
  endDate         DateTime @map("end_date") @db.Date
  durationDays    Int      @map("duration_days")           // æ—¥æ•°

  // è²»ç”¨é–¢é€£
  transportationCost Decimal? @map("transportation_cost") @db.Decimal(10, 2)  // äº¤é€šè²»
  accommodationCost  Decimal? @map("accommodation_cost") @db.Decimal(10, 2)   // å®¿æ³Šè²»
  mealAllowance     Decimal? @map("meal_allowance") @db.Decimal(10, 2)        // æ—¥å½“
  otherExpenses     Decimal? @map("other_expenses") @db.Decimal(10, 2)        // ãã®ä»–çµŒè²»
  totalCost         Decimal? @map("total_cost") @db.Decimal(10, 2)            // åˆè¨ˆè²»ç”¨

  // æ‰¿èªãƒ»ç²¾ç®—
  approvalStatus  String   @default("pending") @map("approval_status")  // pending, approved, rejected
  approvedBy      String?  @map("approved_by")
  approvedAt      DateTime? @map("approved_at")
  settlementStatus String  @default("pending") @map("settlement_status") // pending, settled
  settlementDate  DateTime? @map("settlement_date")

  // å ±å‘Šæ›¸
  reportSubmitted Boolean  @default(false) @map("report_submitted")
  reportPath      String?  @map("report_path")              // å‡ºå¼µå ±å‘Šæ›¸ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  notes           String?
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([tripType])
  @@index([startDate(sort: Desc)])
  @@index([approvalStatus])
  @@map("business_trips")
}
```

#### å‡ºå¼µã‚¿ã‚¤ãƒ—ï¼ˆtripTypeï¼‰å®šç¾©

| ã‚¿ã‚¤ãƒ— | èª¬æ˜ | ä¾‹ |
|--------|------|-----|
| `training` | ç ”ä¿®ãƒ»æ•™è‚² | æ±äº¬ç ”ä¿®ã‚»ãƒ³ã‚¿ãƒ¼ 3æ—¥é–“ |
| `conference` | å­¦ä¼šãƒ»ä¼šè­° | æ—¥æœ¬çœ‹è­·å”ä¼šç·ä¼š |
| `meeting` | ä¼šè­°ãƒ»æ‰“ã¡åˆã‚ã› | å¤§é˜ªæœ¬éƒ¨ çµŒå–¶ä¼šè­° |
| `inspection` | è¦–å¯Ÿãƒ»è¦‹å­¦ | å…ˆé€²ç—…é™¢è¦–å¯Ÿ |
| `other` | ãã®ä»– | ãã®ä»–ã®æ¥­å‹™å‡ºå¼µ |

---

### 4. æ‡²æˆ’ãƒ»è¡¨å½°å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `DisciplinaryActions`ï¼ˆæ‡²æˆ’è¨˜éŒ²ï¼‰

```prisma
model DisciplinaryAction {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  actionDate      DateTime @map("action_date")          // å‡¦åˆ†æ—¥
  actionType      String   @map("action_type")          // warning, reprimand, suspension, dismissal
  reason          String                                // ç†ç”±
  description     String?                               // è©³ç´°
  issuedBy        String   @map("issued_by")            // ç™ºä»¤è€…ID
  effectivePeriod String?  @map("effective_period")     // åŠ¹åŠ›æœŸé–“
  status          String   @default("active")           // active, expired, revoked
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([actionDate(sort: Desc)])
  @@map("disciplinary_actions")
}
```

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `Awards`ï¼ˆè¡¨å½°è¨˜éŒ²ï¼‰

```prisma
model Award {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  awardDate       DateTime @map("award_date")           // è¡¨å½°æ—¥
  awardType       String   @map("award_type")           // employee_of_month, outstanding_service, innovationç­‰
  awardName       String   @map("award_name")           // è¡¨å½°å
  reason          String                                // ç†ç”±
  description     String?                               // è©³ç´°
  issuedBy        String   @map("issued_by")            // æˆä¸è€…ID
  monetaryReward  Decimal? @map("monetary_reward") @db.Decimal(10, 2)  // è³é‡‘ãƒ»å ±å¥¨é‡‘
  certificatePath String?  @map("certificate_path")     // è¡¨å½°çŠ¶ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([awardDate(sort: Desc)])
  @@map("awards")
}
```

---

### 5. å®¶æ—æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- `Employee.emergencyPhone`ã®ã¿
- æ‰¶é¤Šå®¶æ—æƒ…å ±ãŒãªã„
- ç·Šæ€¥é€£çµ¡å…ˆã®è©³ç´°ãŒãªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `FamilyMembers`ï¼ˆå®¶æ—æƒ…å ±ï¼‰

```prisma
model FamilyMember {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  relationship    String                                // spouse, child, parent, sibling, other
  name            String
  nameKana        String?  @map("name_kana")
  birthDate       DateTime? @map("birth_date")
  gender          String?
  isDependent     Boolean  @default(false) @map("is_dependent")  // æ‰¶é¤Šå¯¾è±¡
  isEmergencyContact Boolean @default(false) @map("is_emergency_contact")  // ç·Šæ€¥é€£çµ¡å…ˆ
  phone           String?
  address         String?
  occupation      String?                               // è·æ¥­
  notes           String?
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@map("family_members")
}
```

---

### 6. é€€è·é–¢é€£æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ« âš ï¸ éƒ¨åˆ†çš„ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- `Employee.retiredAt`ã¯ã‚ã‚‹ãŒè©³ç´°æƒ…å ±ãŒãªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `RetirementDetails`ï¼ˆé€€è·è©³ç´°ï¼‰

```prisma
model RetirementDetail {
  id                  String   @id @default(cuid())
  employeeId          String   @unique @map("employee_id")  // 1è·å“¡1é€€è·è¨˜éŒ²
  retirementDate      DateTime @map("retirement_date")      // é€€è·æ—¥
  retirementType      String   @map("retirement_type")      // voluntary, mandatory_age, dismissal, health, other
  retirementReason    String   @map("retirement_reason")    // ç†ç”±ï¼ˆè©³ç´°ï¼‰
  retirementCategory  String   @map("retirement_category")  // personal, company, health, family, career
  isEligibleForRehire Boolean  @default(true) @map("is_eligible_for_rehire")  // å†é›‡ç”¨å¯å¦
  severancePay        Decimal? @map("severance_pay") @db.Decimal(10, 2)  // é€€è·é‡‘
  exitInterviewDate   DateTime? @map("exit_interview_date")  // é€€è·é¢è«‡æ—¥
  exitInterviewNotes  String?  @map("exit_interview_notes")  // é€€è·é¢è«‡ãƒ¡ãƒ¢
  rehiredDate         DateTime? @map("rehired_date")         // å†é›‡ç”¨æ—¥ï¼ˆè©²å½“æ™‚ï¼‰
  notes               String?
  createdAt           DateTime @default(now()) @map("created_at")
  updatedAt           DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([retirementDate])
  @@index([retirementType])
  @@map("retirement_details")
}
```

---

### 7. å¥‘ç´„æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- é›‡ç”¨å½¢æ…‹ãŒè¨˜éŒ²ã§ããªã„
- å¥‘ç´„æœŸé–“ãŒç®¡ç†ã§ããªã„
- å¥‘ç´„æ›´æ–°å±¥æ­´ãŒãªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `EmploymentContracts`ï¼ˆé›‡ç”¨å¥‘ç´„ï¼‰

```prisma
model EmploymentContract {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  contractType    String   @map("contract_type")        // permanent, contract, part_time, temporary
  contractNumber  String?  @map("contract_number")      // å¥‘ç´„ç•ªå·
  startDate       DateTime @map("start_date")            // å¥‘ç´„é–‹å§‹æ—¥
  endDate         DateTime? @map("end_date")              // å¥‘ç´„çµ‚äº†æ—¥ï¼ˆæœŸé™ä»˜ãå¥‘ç´„ã®å ´åˆï¼‰
  workingHours    Float    @map("working_hours")        // æ‰€å®šåŠ´åƒæ™‚é–“ï¼ˆé€±ï¼‰
  workingDays     Float    @map("working_days")         // æ‰€å®šåŠ´åƒæ—¥æ•°ï¼ˆé€±ï¼‰
  probationPeriod Int?     @map("probation_period")     // è©¦ç”¨æœŸé–“ï¼ˆæœˆæ•°ï¼‰
  probationEndDate DateTime? @map("probation_end_date")  // è©¦ç”¨æœŸé–“çµ‚äº†æ—¥
  renewalCount    Int      @default(0) @map("renewal_count")  // æ›´æ–°å›æ•°
  isActive        Boolean  @default(true) @map("is_active")
  contractPath    String?  @map("contract_path")        // å¥‘ç´„æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
  notes           String?
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([contractType])
  @@index([isActive])
  @@index([endDate])  // å¥‘ç´„æ›´æ–°ç®¡ç†ç”¨
  @@map("employment_contracts")
}
```

---

### 8. çµŒæ­´æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `EducationHistories`ï¼ˆå­¦æ­´ï¼‰

```prisma
model EducationHistory {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  schoolType      String   @map("school_type")          // high_school, vocational, junior_college, university, graduate
  schoolName      String   @map("school_name")          // å­¦æ ¡å
  major           String?                               // å°‚æ”»
  degree          String?                               // å­¦ä½
  startDate       DateTime @map("start_date")
  endDate         DateTime? @map("end_date")
  graduationStatus String  @map("graduation_status")    // graduated, dropped_out, in_progress
  notes           String?
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@map("education_histories")
}
```

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `WorkExperiences`ï¼ˆè·æ­´ï¼‰

```prisma
model WorkExperience {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  companyName     String   @map("company_name")         // ä¼šç¤¾å
  companyType     String?  @map("company_type")         // hospital, clinic, nursing_home, other
  position        String                                // å½¹è·
  department      String?                               // éƒ¨ç½²
  jobCategory     String?  @map("job_category")         // nurse, care_worker, adminç­‰
  startDate       DateTime @map("start_date")
  endDate         DateTime? @map("end_date")
  isCurrent       Boolean  @default(false) @map("is_current")  // ç¾è·
  responsibilities String?                              // è·å‹™å†…å®¹
  achievements    String?                               // å®Ÿç¸¾
  reasonForLeaving String? @map("reason_for_leaving")   // é€€è·ç†ç”±
  notes           String?
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([jobCategory])
  @@map("work_experiences")
}
```

---

## ğŸŸ¡ ä¸­ç¨‹åº¦ã®ä¸è¶³é …ç›®ï¼ˆPriority 2: é‡è¦ï¼‰

### 9. ã‚¦ã‚§ãƒ«ãƒ“ãƒ¼ã‚¤ãƒ³ã‚°ãƒ»å¥åº·ç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ« âš ï¸ éƒ¨åˆ†çš„ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- `HealthRecord`ãƒ†ãƒ¼ãƒ–ãƒ«ã§åŸºæœ¬çš„ãªå¥è¨ºãƒ‡ãƒ¼ã‚¿ã¯è¨˜éŒ²å¯èƒ½
- ã—ã‹ã—ã€ã‚¦ã‚§ãƒ«ãƒ“ãƒ¼ã‚¤ãƒ³ã‚°ç·åˆè©•ä¾¡ã€ã‚¹ãƒˆãƒ¬ã‚¹è¦å› è©³ç´°ã€é‹å‹•ç¿’æ…£ç­‰ãŒä¸è¶³
- ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ç›¸è«‡å±¥æ­´ãŒè¨˜éŒ²ã§ããªã„

#### æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰: `HealthRecords`

```prisma
model HealthRecord {
  id                  String   @id @default(cuid())
  employeeId          String
  checkupDate         DateTime

  // æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  healthStatus        String   // good, caution, alert
  healthScore         Float    // 0-100
  stressIndex         Float    // 0-100
  bmi                 Float?
  bloodPressure       String?

  // ğŸ†• è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  wellbeingGrade      String?  @map("wellbeing_grade")         // S, A, B, C, Dï¼ˆç·åˆè©•ä¾¡ï¼‰
  exerciseFrequency   String?  @map("exercise_frequency")      // é‹å‹•é »åº¦ï¼ˆ3å›/é€±ç­‰ï¼‰
  sleepQuality        String?  @map("sleep_quality")           // good, fair, poor
  smokingStatus       String?  @map("smoking_status")          // non_smoker, smoker, ex_smoker
  alcoholConsumption  String?  @map("alcohol_consumption")     // none, moderate, heavy

  // ã‚¹ãƒˆãƒ¬ã‚¹è¦å› ï¼ˆJSONé…åˆ—ï¼‰
  stressFactors       Json?    @map("stress_factors")          // [{factor: "overtime", level: "medium"}, ...]

  // å¥åº·æ”¹å–„ãƒã‚¤ãƒ³ãƒˆï¼ˆJSONé…åˆ—ï¼‰
  improvementPoints   Json?    @map("improvement_points")      // ["ç¡çœ æ”¹å–„", "é‹å‹•ç¿’æ…£ç¶™ç¶š", "ã‚¹ãƒˆãƒ¬ã‚¹ç®¡ç†"]

  // æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  risks               String?  // å¥åº·ãƒªã‚¹ã‚¯é …ç›®ï¼ˆJSONå½¢å¼ï¼‰
  recommendations     String?  // æ¨å¥¨äº‹é …ï¼ˆJSONå½¢å¼ï¼‰
  nextCheckupDate     DateTime
  occupationalDoctor  String?  // ç”£æ¥­åŒ»æ‰€è¦‹
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  employee Employee @relation(fields: [employeeId], references: [id])

  @@map("health_records")
}
```

#### ã‚¹ãƒˆãƒ¬ã‚¹è¦å› JSONä¾‹

```json
[
  {
    "factor": "overtime",
    "factorName": "æ®‹æ¥­æ™‚é–“",
    "level": "medium",
    "score": 40
  },
  {
    "factor": "relationships",
    "factorName": "äººé–“é–¢ä¿‚",
    "level": "low",
    "score": 15
  },
  {
    "factor": "workload",
    "factorName": "æ¥­å‹™è² è·",
    "level": "medium",
    "score": 35
  }
]
```

---

### 9-2. ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯è©³ç´°ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- æ³•å®šã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯ã®è©³ç´°çµæœãŒè¨˜éŒ²ã§ããªã„
- çµŒå¹´å¤‰åŒ–ãŒè¿½è·¡ã§ããªã„
- é«˜ã‚¹ãƒˆãƒ¬ã‚¹åˆ¤å®šè€…ã®ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—ãŒç®¡ç†ã§ããªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `StressCheckResults`ï¼ˆã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯çµæœï¼‰

```prisma
model StressCheckResult {
  id                    String   @id @default(cuid())
  employeeId            String   @map("employee_id")
  checkDate             DateTime @map("check_date")             // å®Ÿæ–½æ—¥

  // ç·åˆè©•ä¾¡
  overallResult         String   @map("overall_result")         // good, caution, high_stress
  totalScore            Int      @map("total_score")            // ç·åˆç‚¹æ•°

  // 3ã¤ã®é ˜åŸŸåˆ¥ã‚¹ã‚³ã‚¢ï¼ˆåšåŠ´çœåŸºæº–ï¼‰
  psychologicalBurdenScore Int   @map("psychological_burden_score")  // å¿ƒç†çš„ãªè² æ‹…
  physicalBurdenScore      Int   @map("physical_burden_score")       // èº«ä½“çš„ãªè² æ‹…
  supportScore             Int   @map("support_score")               // å‘¨å›²ã®ã‚µãƒãƒ¼ãƒˆ

  // é«˜ã‚¹ãƒˆãƒ¬ã‚¹åˆ¤å®š
  isHighStress          Boolean  @default(false) @map("is_high_stress")
  requiresInterview     Boolean  @default(false) @map("requires_interview")  // é¢æ¥æŒ‡å°æ¨å¥¨
  interviewRequested    Boolean  @default(false) @map("interview_requested") // æœ¬äººãŒé¢æ¥å¸Œæœ›

  // ç”£æ¥­åŒ»é¢æ¥
  interviewDate         DateTime? @map("interview_date")
  interviewDoctor       String?  @map("interview_doctor")
  interviewNotes        String?  @map("interview_notes")
  followUpRequired      Boolean  @default(false) @map("follow_up_required")

  // ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—
  followUpDate          DateTime? @map("follow_up_date")
  followUpStatus        String?  @map("follow_up_status")        // pending, completed, ongoing
  improvementObserved   Boolean? @map("improvement_observed")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  notes                 String?
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([checkDate(sort: Desc)])
  @@index([isHighStress])
  @@map("stress_check_results")
}
```

#### è©•ä¾¡åŸºæº–ï¼ˆåšç”ŸåŠ´åƒçœåŸºæº–æº–æ‹ ï¼‰

| ç·åˆè©•ä¾¡ | èª¬æ˜ | å¯¾å¿œ |
|---------|------|------|
| `good` | è‰¯å¥½ | çµŒéè¦³å¯Ÿä¸è¦ |
| `caution` | æ³¨æ„ | ã‚»ãƒ«ãƒ•ã‚±ã‚¢æ¨å¥¨ |
| `high_stress` | é«˜ã‚¹ãƒˆãƒ¬ã‚¹ | ç”£æ¥­åŒ»é¢æ¥æ¨å¥¨ |

---

### 9-3. ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ç›¸è«‡å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ç›¸è«‡ã®è¨˜éŒ²ãŒã§ããªã„
- ç›¸è«‡å†…å®¹ã®æ©Ÿå¯†æ€§ã‚’ä¿ã¡ã¤ã¤è¨˜éŒ²ã™ã‚‹ä»•çµ„ã¿ãŒå¿…è¦
- ã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°ç¶™ç¶šçŠ¶æ³ãŒè¿½è·¡ã§ããªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `MentalHealthConsultations`ï¼ˆãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ç›¸è«‡ï¼‰

```prisma
model MentalHealthConsultation {
  id                  String   @id @default(cuid())
  employeeId          String   @map("employee_id")
  consultationDate    DateTime @map("consultation_date")       // ç›¸è«‡æ—¥
  consultationType    String   @map("consultation_type")       // occupational_doctor, counselor, external_eap

  // ç›¸è«‡å†…å®¹ï¼ˆãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼é…æ…®ï¼‰
  consultationCategory String  @map("consultation_category")   // work_stress, relationships, health, life, other
  severityLevel       String?  @map("severity_level")          // low, medium, high, urgent

  // ç›¸è«‡å¯¾å¿œ
  counselorName       String?  @map("counselor_name")
  sessionDuration     Int?     @map("session_duration")        // ç›¸è«‡æ™‚é–“ï¼ˆåˆ†ï¼‰
  followUpRecommended Boolean  @default(false) @map("follow_up_recommended")

  // æ¬¡å›äºˆç´„
  nextSessionDate     DateTime? @map("next_session_date")
  isOngoing           Boolean  @default(false) @map("is_ongoing")  // ç¶™ç¶šç›¸è«‡ä¸­

  // ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·
  detailedNotes       String?  @map("detailed_notes")          // è©³ç´°è¨˜éŒ²ï¼ˆã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™ï¼‰
  accessLevel         String   @default("confidential") @map("access_level")  // public, limited, confidential

  // æ”¹å–„çŠ¶æ³
  improvementStatus   String?  @map("improvement_status")      // improving, stable, declining
  completedDate       DateTime? @map("completed_date")         // ç›¸è«‡å®Œäº†æ—¥

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt           DateTime @default(now()) @map("created_at")
  updatedAt           DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([consultationDate(sort: Desc)])
  @@index([isOngoing])
  @@map("mental_health_consultations")
}
```

#### ç›¸è«‡ã‚¿ã‚¤ãƒ—ï¼ˆconsultationTypeï¼‰

| ã‚¿ã‚¤ãƒ— | èª¬æ˜ |
|--------|------|
| `occupational_doctor` | ç”£æ¥­åŒ»é¢è«‡ |
| `counselor` | ç¤¾å†…ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼ |
| `external_eap` | å¤–éƒ¨EAPï¼ˆå¾“æ¥­å“¡æ”¯æ´ãƒ—ãƒ­ã‚°ãƒ©ãƒ ï¼‰ |
| `peer_support` | ãƒ”ã‚¢ã‚µãƒãƒ¼ãƒˆ |

#### ç›¸è«‡ã‚«ãƒ†ã‚´ãƒªï¼ˆconsultationCategoryï¼‰

| ã‚«ãƒ†ã‚´ãƒª | èª¬æ˜ |
|---------|------|
| `work_stress` | æ¥­å‹™ã‚¹ãƒˆãƒ¬ã‚¹ |
| `relationships` | äººé–“é–¢ä¿‚ |
| `health` | å¥åº·å•é¡Œ |
| `life` | ç”Ÿæ´»ãƒ»å®¶åº­ |
| `career` | ã‚­ãƒ£ãƒªã‚¢ç›¸è«‡ |
| `other` | ãã®ä»– |

#### ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·

- **accessLevel**ã§ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™
  - `public`: æœ¬äººãƒ»ä¸Šå¸ãƒ»äººäº‹ãŒé–²è¦§å¯èƒ½
  - `limited`: æœ¬äººãƒ»ç”£æ¥­åŒ»ãƒ»äººäº‹è²¬ä»»è€…ã®ã¿
  - `confidential`: æœ¬äººãƒ»æ‹…å½“ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼ã®ã¿

---

### 9-4. å¥åº·è¨ºæ–­è©³ç´°æ¤œæŸ»çµæœãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- `HealthRecord`ãƒ†ãƒ¼ãƒ–ãƒ«ã§ã¯åŸºæœ¬æƒ…å ±ã®ã¿
- **è©³ç´°ãªæ¤œæŸ»å€¤**ï¼ˆè¡€æ¶²æ¤œæŸ»ã€å°¿æ¤œæŸ»ç­‰ï¼‰ãŒåˆ¥ãƒ†ãƒ¼ãƒ–ãƒ«ã§å¿…è¦
- çµŒå¹´å¤‰åŒ–ã‚’è¿½è·¡ã™ã‚‹ã«ã¯æ¤œæŸ»é …ç›®ã”ã¨ã®ãƒ‡ãƒ¼ã‚¿ä¿å­˜ãŒå¿…é ˆ

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `HealthCheckupDetails`ï¼ˆå¥è¨ºè©³ç´°æ¤œæŸ»çµæœï¼‰

```prisma
model HealthCheckupDetail {
  id              String   @id @default(cuid())
  healthRecordId  String   @map("health_record_id")        // HealthRecordã¨ã®ç´ä»˜ã‘
  category        String                                   // blood, urine, xray, ecg, etc
  itemName        String   @map("item_name")               // æ¤œæŸ»é …ç›®åï¼ˆASTã€ALTã€HDLç­‰ï¼‰
  value           String                                   // æ¸¬å®šå€¤ï¼ˆæ•°å€¤ã¾ãŸã¯æ–‡å­—åˆ—ï¼‰
  unit            String?                                  // å˜ä½ï¼ˆmg/dlã€IU/lç­‰ï¼‰
  status          String   @default("normal")              // normal, caution, abnormal
  referenceMin    Float?   @map("reference_min")           // åŸºæº–å€¤ä¸‹é™
  referenceMax    Float?   @map("reference_max")           // åŸºæº–å€¤ä¸Šé™
  notes           String?                                  // å‚™è€ƒ
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  healthRecord HealthRecord @relation(fields: [healthRecordId], references: [id], onDelete: Cascade)

  @@index([healthRecordId])
  @@index([category])
  @@index([itemName])
  @@index([status])
  @@map("health_checkup_details")
}
```

#### æ¤œæŸ»ã‚«ãƒ†ã‚´ãƒªï¼ˆcategoryï¼‰

| ã‚«ãƒ†ã‚´ãƒª | èª¬æ˜ | å«ã¾ã‚Œã‚‹é …ç›®ä¾‹ |
|---------|------|--------------|
| `blood` | è¡€æ¶²æ¤œæŸ» | ASTã€ALTã€HDLã€LDLã€ä¸­æ€§è„‚è‚ªã€è¡€ç³–å€¤ã€HbA1cç­‰ |
| `urine` | å°¿æ¤œæŸ» | å°¿è›‹ç™½ã€å°¿ç³–ã€æ½œè¡€ç­‰ |
| `xray` | Xç·šæ¤œæŸ» | èƒ¸éƒ¨Xç·šæ‰€è¦‹ |
| `ecg` | å¿ƒé›»å›³ | å¿ƒé›»å›³æ‰€è¦‹ |
| `physical` | èº«ä½“æ¸¬å®š | è¦–åŠ›ã€è´åŠ›ã€è…¹å›²ç­‰ |
| `other` | ãã®ä»– | çœ¼åº•æ¤œæŸ»ç­‰ |

#### æ¤œæŸ»ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆstatusï¼‰

| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | èª¬æ˜ |
|-----------|------|
| `normal` | æ­£å¸¸ç¯„å›²å†… |
| `caution` | è¦æ³¨æ„ï¼ˆè»½åº¦ç•°å¸¸ï¼‰ |
| `abnormal` | ç•°å¸¸ï¼ˆè¦å†æ¤œæŸ»ï¼‰ |

---

### 9-5. ç—…æ­´ãƒ»æœè–¬æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- æ—¢å¾€æ­´ãŒè¨˜éŒ²ã§ããªã„
- ç¾åœ¨æœç”¨ä¸­ã®è–¬ãŒç®¡ç†ã§ããªã„
- ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æƒ…å ±ãŒè¨˜éŒ²ã§ããªã„
- å°±åŠ´é…æ…®ã«å¿…è¦ãªåŒ»ç™‚æƒ…å ±ãŒä¸è¶³

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `MedicalHistories`ï¼ˆç—…æ­´ï¼‰

```prisma
model MedicalHistory {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  diseaseCategory String   @map("disease_category")        // chronic, acute, past, family
  diseaseName     String   @map("disease_name")            // ç–¾æ‚£å
  diagnosisDate   DateTime? @map("diagnosis_date")          // è¨ºæ–­æ—¥
  isOngoing       Boolean  @default(false) @map("is_ongoing")  // æ²»ç™‚ç¶™ç¶šä¸­
  treatmentStatus String?  @map("treatment_status")        // ongoing, completed, monitoring
  hospitalName    String?  @map("hospital_name")           // å—è¨ºåŒ»ç™‚æ©Ÿé–¢
  doctorName      String?  @map("doctor_name")             // ä¸»æ²»åŒ»å

  // å°±åŠ´ã¸ã®å½±éŸ¿
  workImpact      String?  @map("work_impact")             // none, minor, moderate, significant
  requiredAccommodation String? @map("required_accommodation")  // å¿…è¦ãªé…æ…®

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  notes           String?
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([diseaseCategory])
  @@index([isOngoing])
  @@map("medical_histories")
}
```

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `Medications`ï¼ˆæœè–¬æƒ…å ±ï¼‰

```prisma
model Medication {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  medicationName  String   @map("medication_name")         // è–¬å‰¤å
  medicationType  String   @map("medication_type")         // chronic, acute, supplement
  purpose         String?                                  // æœç”¨ç›®çš„ãƒ»ç–¾æ‚£å
  dosage          String?                                  // ç”¨é‡
  frequency       String?                                  // æœç”¨é »åº¦ï¼ˆ1æ—¥3å›ç­‰ï¼‰
  startDate       DateTime @map("start_date")
  endDate         DateTime? @map("end_date")
  isOngoing       Boolean  @default(true) @map("is_ongoing")
  prescribedBy    String?  @map("prescribed_by")           // å‡¦æ–¹åŒ»

  // å°±åŠ´ã¸ã®å½±éŸ¿
  sideEffects     String?  @map("side_effects")            // å‰¯ä½œç”¨
  workRestrictions String? @map("work_restrictions")       // å°±åŠ´åˆ¶é™ï¼ˆé‹è»¢ç¦æ­¢ç­‰ï¼‰

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  notes           String?
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([isOngoing])
  @@map("medications")
}
```

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `Allergies`ï¼ˆã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æƒ…å ±ï¼‰

```prisma
model Allergy {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  allergyType     String   @map("allergy_type")            // food, drug, environmental, other
  allergen        String                                   // ã‚¢ãƒ¬ãƒ«ã‚²ãƒ³å
  severity        String                                   // mild, moderate, severe, life_threatening
  symptoms        String?                                  // ç—‡çŠ¶
  firstOccurrence DateTime? @map("first_occurrence")        // åˆç™ºæ™‚æœŸ
  lastReaction    DateTime? @map("last_reaction")           // æœ€çµ‚åå¿œæ—¥
  treatment       String?                                  // å¯¾å‡¦æ³•ï¼ˆã‚¨ãƒ”ãƒšãƒ³ç­‰ï¼‰

  // å°±åŠ´ã¸ã®å½±éŸ¿
  workplaceRisk   String?  @map("workplace_risk")          // è·å ´ã§ã®æš´éœ²ãƒªã‚¹ã‚¯
  emergencyAction String?  @map("emergency_action")        // ç·Šæ€¥æ™‚å¯¾å¿œ

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  notes           String?
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([allergyType])
  @@index([severity])
  @@map("allergies")
}
```

#### ç–¾æ‚£ã‚«ãƒ†ã‚´ãƒªï¼ˆdiseaseCategoryï¼‰

| ã‚«ãƒ†ã‚´ãƒª | èª¬æ˜ |
|---------|------|
| `chronic` | æ…¢æ€§ç–¾æ‚£ï¼ˆé«˜è¡€åœ§ã€ç³–å°¿ç—…ç­‰ï¼‰ |
| `acute` | æ€¥æ€§ç–¾æ‚£ï¼ˆç¾åœ¨æ²»ç™‚ä¸­ï¼‰ |
| `past` | æ—¢å¾€æ­´ï¼ˆå®Œæ²»æ¸ˆã¿ï¼‰ |
| `family` | å®¶æ—æ­´ |

#### ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã‚¿ã‚¤ãƒ—ï¼ˆallergyTypeï¼‰

| ã‚¿ã‚¤ãƒ— | èª¬æ˜ | ä¾‹ |
|--------|------|-----|
| `food` | é£Ÿç‰©ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ | å°éº¦ã€åµã€ç”²æ®»é¡ç­‰ |
| `drug` | è–¬å‰¤ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ | ãƒšãƒ‹ã‚·ãƒªãƒ³ã€é€ å½±å‰¤ç­‰ |
| `environmental` | ç’°å¢ƒã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ | èŠ±ç²‰ã€ãƒã‚¦ã‚¹ãƒ€ã‚¹ãƒˆç­‰ |
| `latex` | ãƒ©ãƒ†ãƒƒã‚¯ã‚¹ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ | åŒ»ç™‚ç”¨æ‰‹è¢‹ç­‰ |
| `other` | ãã®ä»– | - |

---

### 10. ç›®æ¨™ç®¡ç†ï¼ˆMBO/OKRï¼‰ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

```prisma
model Goal {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  goalType        String   @map("goal_type")            // annual, quarterly, monthly
  title           String
  description     String?
  category        String                                // performance, skill, career
  priority        String   @default("medium")           // high, medium, low

  // ç›®æ¨™å€¤
  currentValue    Float?   @map("current_value")        // ç¾åœ¨å€¤
  targetValue     Float?   @map("target_value")         // ç›®æ¨™å€¤
  targetDate      DateTime @map("target_date")

  // é€²æ—ç®¡ç†
  status          String   @default("in_progress")      // in_progress, achieved, not_achieved, cancelled
  progress        Int      @default(0)                  // é€²æ—ç‡ 0-100

  // è©•ä¾¡
  evaluatorId     String?  @map("evaluator_id")
  evaluationScore Float?   @map("evaluation_score")
  evaluationNotes String?  @map("evaluation_notes")

  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³é …ç›®ï¼ˆJSONé…åˆ—ï¼‰
  actions         Json?                                 // ["æ³•äººè¦æ¨¡PJå‚åŠ ", "ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³å‰µå‡º"]

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([status])
  @@index([priority])
  @@map("goals")
}
```

---

### 10-2. èƒ½åŠ›è©•ä¾¡ã‚¹ã‚³ã‚¢ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- ç·åˆè©•ä¾¡ã®ã¿ã§ã€åˆ†é‡åˆ¥ã‚¹ã‚³ã‚¢ãŒè¨˜éŒ²ã§ããªã„
- æŠ€è¡“åŠ›ã€ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã€çµ„ç¹”è²¢çŒ®ç­‰ã®è©³ç´°è©•ä¾¡ãŒãªã„
- çµŒå¹´å¤‰åŒ–ã®è¿½è·¡ãŒã§ããªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `CompetencyAssessments`ï¼ˆèƒ½åŠ›è©•ä¾¡ï¼‰

```prisma
model CompetencyAssessment {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  assessmentDate  DateTime @map("assessment_date")      // è©•ä¾¡æ—¥
  assessmentPeriod String  @map("assessment_period")    // 2024-H1ã€2024å¹´åº¦ç­‰

  // ç·åˆè©•ä¾¡
  overallGrade    String   @map("overall_grade")        // S, A, B, C, D
  overallScore    Float    @map("overall_score")        // 0-100ç‚¹
  yearsOfService  Float?   @map("years_of_service")     // å‹¤ç¶šå¹´æ•°

  // åˆ†é‡åˆ¥ã‚¹ã‚³ã‚¢
  technicalSkillScore    Float?  @map("technical_skill_score")     // æŠ€è¡“åŠ›ã‚¹ã‚³ã‚¢
  technicalSkillTrend    Int?    @map("technical_skill_trend")     // å‰å›æ¯”ï¼ˆÂ±ç‚¹æ•°ï¼‰
  leadershipScore        Float?  @map("leadership_score")          // ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚¹ã‚³ã‚¢
  leadershipTrend        Int?    @map("leadership_trend")          // å‰å›æ¯”
  organizationScore      Float?  @map("organization_score")        // çµ„ç¹”è²¢çŒ®ã‚¹ã‚³ã‚¢
  organizationTrend      Int?    @map("organization_trend")        // å‰å›æ¯”
  communicationScore     Float?  @map("communication_score")       // ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ã‚¢
  communicationTrend     Int?    @map("communication_trend")       // å‰å›æ¯”
  problemSolvingScore    Float?  @map("problem_solving_score")     // å•é¡Œè§£æ±ºã‚¹ã‚³ã‚¢
  problemSolvingTrend    Int?    @map("problem_solving_trend")     // å‰å›æ¯”

  // è©•ä¾¡ã‚³ãƒ¡ãƒ³ãƒˆ
  technicalComments      String? @map("technical_comments")
  leadershipComments     String? @map("leadership_comments")
  organizationComments   String? @map("organization_comments")

  // è©•ä¾¡è€…æƒ…å ±
  evaluatorId     String?  @map("evaluator_id")
  evaluatorComment String? @map("evaluator_comment")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([assessmentDate(sort: Desc)])
  @@index([overallGrade])
  @@map("competency_assessments")
}
```

#### ã‚°ãƒ¬ãƒ¼ãƒ‰åŸºæº–

| ã‚°ãƒ¬ãƒ¼ãƒ‰ | ã‚¹ã‚³ã‚¢ç¯„å›² | è©•ä¾¡ |
|---------|-----------|------|
| S | 95-100ç‚¹ | å“è¶Š |
| A | 85-94ç‚¹ | å„ªç§€ |
| B | 70-84ç‚¹ | è‰¯å¥½ |
| C | 60-69ç‚¹ | æ¨™æº– |
| D | 0-59ç‚¹ | è¦æ”¹å–„ |

---

### 10-3. V3è©•ä¾¡æ¨ç§»ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³ï¼ˆğŸ†• å¤§å¹…æ‹¡å¼µï¼‰

#### ç¾çŠ¶ã®å•é¡Œ
- V3è©•ä¾¡åˆ¶åº¦ã®è©³ç´°è¨˜éŒ²ãŒãªã„ï¼ˆæŠ€è¡“è©•ä¾¡50ç‚¹ãƒ»çµ„ç¹”è²¢çŒ®åº¦50ç‚¹ã®å†…è¨³ï¼‰
- ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆç”¨ã®è©•ä¾¡é …ç›®åˆ¥ã‚¹ã‚³ã‚¢ãŒä¸è¶³
- æ–½è¨­å†…ãƒ»æ³•äººå†…ã®é †ä½æƒ…å ±ãŒè¨˜éŒ²ã§ããªã„
- å¤å­£ãƒ»å†¬å­£è©•ä¾¡ã®çµ±åˆç®¡ç†ãŒã§ããªã„
- AIæŒ‡å°æ”¯æ´ã‚¢ãƒ‰ãƒã‚¤ã‚¹ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒãªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `V3Assessments`ï¼ˆV3è©•ä¾¡ - å®Œå…¨ç‰ˆï¼‰

```prisma
model V3Assessment {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  fiscalYear      Int      @map("fiscal_year")           // è©•ä¾¡å¹´åº¦
  assessmentDate  DateTime @map("assessment_date")

  // ğŸ†• è©•ä¾¡æœŸé–“ãƒ»ç¢ºå®šæƒ…å ±
  evaluationPeriodStart DateTime? @map("evaluation_period_start")  // 2023-04-01
  evaluationPeriodEnd   DateTime? @map("evaluation_period_end")    // 2024-03-31
  confirmedDate         DateTime? @map("confirmed_date")           // è©•ä¾¡ç¢ºå®šæ—¥
  experienceLevel       String?   @map("experience_level")
  // "new": æ–°äºº, "second_year": 2å¹´ç›®, "mid_career": ä¸­å …, "veteran": ãƒ™ãƒ†ãƒ©ãƒ³

  // V3è©•ä¾¡çµæœï¼ˆç·åˆï¼‰
  v3Grade         String   @map("v3_grade")              // C, B-, B, B+, A-, A, A+, S (7æ®µéš)
  v3Score         Float    @map("v3_score")              // 0-100ç‚¹ï¼ˆä¾‹: 81.25ç‚¹ï¼‰
  v3Points        Int      @map("v3_points")             // ç²å¾—ãƒã‚¤ãƒ³ãƒˆï¼ˆ3-12ptï¼‰

  // æˆé•·æŒ‡æ¨™
  growthRate      Float?   @map("growth_rate")           // æˆé•·ç‡ï¼ˆ%ï¼‰
  previousScore   Float?   @map("previous_score")        // å‰å¹´ã‚¹ã‚³ã‚¢
  scoreDifference Float?   @map("score_difference")      // ã‚¹ã‚³ã‚¢å·®åˆ†

  // ========================================
  // ğŸ†• æŠ€è¡“è©•ä¾¡è©³ç´°ï¼ˆ50ç‚¹æº€ç‚¹ï¼‰
  // ========================================
  technicalTotal        Float     @map("technical_total")         // åˆè¨ˆï¼ˆä¾‹: 40.0ç‚¹ï¼‰
  technicalPercentage   Float     @map("technical_percentage")    // é”æˆç‡ï¼ˆä¾‹: 80.0%ï¼‰

  // æ³•äººçµ±ä¸€é …ç›®ï¼ˆ30ç‚¹æº€ç‚¹ï¼‰
  commonC01Score        Float?    @map("common_c01_score")        // C01: å°‚é–€æŠ€è¡“ãƒ»ã‚¹ã‚­ãƒ«ï¼ˆ10ç‚¹æº€ç‚¹ï¼‰
  commonC01SupervisorScore Float? @map("common_c01_supervisor_score") // ä¸Šå¸è©•ä¾¡åˆ†
  commonC01SelfScore    Float?    @map("common_c01_self_score")   // æœ¬äººè©•ä¾¡åˆ†

  commonC02Score        Float?    @map("common_c02_score")        // C02: å¯¾äººé–¢ä¿‚ãƒ»ã‚±ã‚¢ï¼ˆ10ç‚¹æº€ç‚¹ï¼‰
  commonC02SupervisorScore Float? @map("common_c02_supervisor_score")
  commonC02SelfScore    Float?    @map("common_c02_self_score")

  commonC03Score        Float?    @map("common_c03_score")        // C03: å®‰å…¨ãƒ»å“è³ªç®¡ç†ï¼ˆ10ç‚¹æº€ç‚¹ï¼‰
  commonC03SupervisorScore Float? @map("common_c03_supervisor_score")
  commonC03SelfScore    Float?    @map("common_c03_self_score")

  // æ–½è¨­ç‰¹åŒ–é …ç›®ï¼ˆ20ç‚¹æº€ç‚¹ï¼‰
  facilityF01Score      Float?    @map("facility_f01_score")      // F01: æ–½è¨­å°‚é–€æ€§ï¼ˆ10ç‚¹æº€ç‚¹ï¼‰
  facilityF01Name       String?   @map("facility_f01_name")       // é …ç›®åï¼ˆä¾‹: å›å¾©æœŸãƒªãƒãƒ“ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å°‚é–€æ€§ï¼‰
  facilityF02Score      Float?    @map("facility_f02_score")      // F02: å¤šè·ç¨®é€£æºãƒ»ãƒãƒ¼ãƒ ã‚±ã‚¢ï¼ˆ10ç‚¹æº€ç‚¹ï¼‰
  facilityF02Name       String?   @map("facility_f02_name")

  // ========================================
  // ğŸ†• çµ„ç¹”è²¢çŒ®åº¦è©•ä¾¡è©³ç´°ï¼ˆ50ç‚¹æº€ç‚¹ï¼‰
  // ========================================
  contributionTotal     Float     @map("contribution_total")      // åˆè¨ˆï¼ˆä¾‹: 41.3ç‚¹ï¼‰
  contributionPercentage Float    @map("contribution_percentage") // é”æˆç‡ï¼ˆä¾‹: 82.6%ï¼‰

  // æ–½è¨­å†…è²¢çŒ®åº¦ï¼ˆ25ç‚¹æº€ç‚¹ï¼‰
  facilitySummerScore   Float?    @map("facility_summer_score")   // å¤å­£è©•ä¾¡ï¼ˆ12.5ç‚¹æº€ç‚¹ï¼‰
  facilitySummerGrade   String?   @map("facility_summer_grade")   // A, B, C, D, E (5æ®µéš)
  facilityWinterScore   Float?    @map("facility_winter_score")   // å†¬å­£è©•ä¾¡ï¼ˆ12.5ç‚¹æº€ç‚¹ï¼‰
  facilityWinterGrade   String?   @map("facility_winter_grade")

  // æ³•äººå†…è²¢çŒ®åº¦ï¼ˆ25ç‚¹æº€ç‚¹ï¼‰
  corporateSummerScore  Float?    @map("corporate_summer_score")  // å¤å­£è©•ä¾¡ï¼ˆ12.5ç‚¹æº€ç‚¹ï¼‰
  corporateSummerGrade  String?   @map("corporate_summer_grade")  // A, B, C, D, E (5æ®µéš)
  corporateWinterScore  Float?    @map("corporate_winter_score")  // å†¬å­£è©•ä¾¡ï¼ˆ12.5ç‚¹æº€ç‚¹ï¼‰
  corporateWinterGrade  String?   @map("corporate_winter_grade")

  // ========================================
  // ğŸ†• é †ä½ãƒ»ãƒ‘ãƒ¼ã‚»ãƒ³ã‚¿ã‚¤ãƒ«æƒ…å ±
  // ========================================
  facilityRank          Int?      @map("facility_rank")           // æ–½è¨­å†…é †ä½ï¼ˆä¾‹: 12ä½ï¼‰
  facilityTotalCount    Int?      @map("facility_total_count")    // æ–½è¨­ç·äººæ•°ï¼ˆä¾‹: 120äººï¼‰
  facilityPercentile    Float?    @map("facility_percentile")     // ä¸Šä½â—‹%ï¼ˆä¾‹: 10%ï¼‰
  facilityGrade         String?   @map("facility_grade")          // æ–½è¨­å†…ç·åˆè©•ä¾¡ï¼ˆA, B, Cç­‰ï¼‰

  corporateRank         Int?      @map("corporate_rank")          // æ³•äººå†…é †ä½ï¼ˆä¾‹: 89ä½ï¼‰
  corporateTotalCount   Int?      @map("corporate_total_count")   // æ³•äººç·äººæ•°ï¼ˆä¾‹: 850äººï¼‰
  corporatePercentile   Float?    @map("corporate_percentile")    // ä¸Šä½â—‹%ï¼ˆä¾‹: 11%ï¼‰
  corporateGrade        String?   @map("corporate_grade")         // æ³•äººå†…ç·åˆè©•ä¾¡

  // ========================================
  // ğŸ†• ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆæ¯”è¼ƒãƒ‡ãƒ¼ã‚¿ï¼ˆJSONï¼‰
  // ========================================
  radarChartData        Json?     @map("radar_chart_data")
  // æ§‹é€ ä¾‹:
  // {
  //   "technical": {
  //     "c01": { "self": 8.2, "average": 7.0, "target": 9.0 },
  //     "c02": { "self": 8.5, "average": 7.5, "target": 8.5 },
  //     "c03": { "self": 7.3, "average": 7.0, "target": 9.0 },
  //     "f01": { "self": 8.0, "average": 7.5, "target": 9.5 },
  //     "f02": { "self": 8.0, "average": 7.2, "target": 9.0 }
  //   },
  //   "contribution": {
  //     "facility_summer": { "self": 10.3, "average": 9.5, "target": 11.0 },
  //     "facility_winter": { "self": 11.2, "average": 9.5, "target": 11.0 },
  //     "corporate_summer": { "self": 10.0, "average": 9.0, "target": 11.0 },
  //     "corporate_winter": { "self": 10.0, "average": 9.0, "target": 11.0 }
  //   }
  // }

  // ========================================
  // ğŸ†• AIæŒ‡å°æ”¯æ´ã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼ˆå°†æ¥æ©Ÿèƒ½: ãƒ­ãƒ¼ã‚«ãƒ«LLMçµ±åˆï¼‰
  // ========================================
  aiAnalysisStrengths   String?   @db.Text @map("ai_analysis_strengths")
  // å„ªç§€ãªé ˜åŸŸã®è§£é‡ˆï¼ˆä¾‹: å¯¾äººé–¢ä¿‚ãƒ»ã‚±ã‚¢èƒ½åŠ›ãŒæ–½è¨­å¹³å‡ã‚’å¤§å¹…ã«ä¸Šå›ã‚‹ï¼‰

  aiAnalysisWeaknesses  String?   @db.Text @map("ai_analysis_weaknesses")
  // é‡ç‚¹æ”¹å–„é ˜åŸŸï¼ˆä¾‹: å®‰å…¨ãƒ»å“è³ªç®¡ç†ã®å‘ä¸ŠãŒå„ªå…ˆèª²é¡Œï¼‰

  aiGrowthPattern       String?   @db.Text @map("ai_growth_pattern")
  // æˆé•·ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æï¼ˆä¾‹: å†¬å­£ã®æ–½è¨­è²¢çŒ®ãŒå¤å­£ã‚’ä¸Šå›ã‚‹è‰¯å¥½ãªæˆé•·ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰

  aiNextGoals           String?   @db.Text @map("ai_next_goals")
  // æ¬¡æœŸç›®æ¨™ææ¡ˆï¼ˆä¾‹: Sã‚°ãƒ¬ãƒ¼ãƒ‰åˆ°é”ã«å‘ã‘æ–½è¨­æ¨ªæ–­ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ æ¨å¥¨ï¼‰

  aiShortTermActions    Json?     @map("ai_short_term_actions")
  // çŸ­æœŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³é…åˆ—ï¼ˆ1-3ãƒ¶æœˆï¼‰
  // ["å®‰å…¨ç®¡ç†ç ”ä¿®ã®å„ªå…ˆå—è¬›", "ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆäºˆé˜²ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆæ´»ç”¨"]

  aiLongTermGoals       Json?     @map("ai_long_term_goals")
  // ä¸­é•·æœŸç›®æ¨™é…åˆ—ï¼ˆ3-12ãƒ¶æœˆï¼‰
  // ["æ–°äººæŒ‡å°ãƒ¡ãƒ³ã‚¿ãƒ¼å½¹ã®ä»»å‘½", "æ³•äººå†…äº‹ä¾‹ç™ºè¡¨ä¼šã§ã®è¬›å¸«å½¹"]

  aiAnalysisDate        DateTime? @map("ai_analysis_date")
  // AIåˆ†æå®Ÿæ–½æ—¥

  // ========================================
  // æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆçµ±åˆï¼‰
  // ========================================
  performanceScore Float?  @map("performance_score")     // æ¥­ç¸¾è©•ä¾¡
  behaviorScore    Float?  @map("behavior_score")        // è¡Œå‹•è©•ä¾¡
  potentialScore   Float?  @map("potential_score")       // ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«è©•ä¾¡

  improvementAreas Json?   @map("improvement_areas")     // æ”¹å–„é ˜åŸŸé…åˆ—
  strengths        Json?   @map("strengths")             // å¼·ã¿é…åˆ—

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])
  comments V3AssessmentComment[]  // ğŸ†• è©•ä¾¡ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆ1:Nï¼‰

  @@unique([employeeId, fiscalYear])
  @@index([employeeId])
  @@index([fiscalYear(sort: Desc)])
  @@index([v3Grade])
  @@index([facilityRank])
  @@index([corporateRank])
  @@map("v3_assessments")
}
```

#### ğŸ†• V3è©•ä¾¡ã‚³ãƒ¡ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ–°è¦ï¼‰

V3è©•ä¾¡ã«ã¯è¤‡æ•°ã®è©•ä¾¡è€…ï¼ˆç›´å±ä¸Šå¸ã€éƒ¨é–€é•·ã€äººäº‹éƒ¨ç­‰ï¼‰ã‹ã‚‰ã®ã‚³ãƒ¡ãƒ³ãƒˆãŒä»˜ãã¾ã™ã€‚

```prisma
model V3AssessmentComment {
  id              String   @id @default(cuid())
  v3AssessmentId  String   @map("v3_assessment_id")
  evaluatorId     String   @map("evaluator_id")         // è©•ä¾¡è€…ã®EmployeeID
  evaluatorRole   String   @map("evaluator_role")
  // "direct_supervisor": ç›´å±ä¸Šå¸
  // "department_head": éƒ¨é–€é•·
  // "hr_manager": äººäº‹éƒ¨
  // "facility_director": æ–½è¨­é•·

  commentDate     DateTime @map("comment_date")         // ã‚³ãƒ¡ãƒ³ãƒˆæ—¥ä»˜
  commentText     String   @db.Text                     // è©•ä¾¡ã‚³ãƒ¡ãƒ³ãƒˆæœ¬æ–‡

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  v3Assessment    V3Assessment @relation(fields: [v3AssessmentId], references: [id], onDelete: Cascade)
  evaluator       Employee     @relation("V3Evaluator", fields: [evaluatorId], references: [id])

  @@index([v3AssessmentId])
  @@index([evaluatorId])
  @@map("v3_assessment_comments")
}
```

#### V3è©•ä¾¡ã‚³ãƒ¡ãƒ³ãƒˆä¾‹

```json
{
  "evaluatorRole": "direct_supervisor",
  "commentDate": "2025-01-15",
  "commentText": "V3è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ã«ãŠã„ã¦å„ªã‚ŒãŸæ¥­å‹™é‚è¡ŒåŠ›ã¨ãƒãƒ¼ãƒ å”èª¿æ€§ã‚’ç™ºæ®ã€‚æŠ€è¡“è©•ä¾¡80ç‚¹ã€çµ„ç¹”è²¢çŒ®åº¦81.5ç‚¹ã¨ã„ã†å®‰å®šã—ãŸæˆæœã‚’è©•ä¾¡ã—ã¾ã™ã€‚æ¬¡æœŸä¸»ä»»å€™è£œã¨ã—ã¦æœŸå¾…ã—ã¦ã„ã¾ã™ã€‚"
}
```

#### V3ã‚°ãƒ¬ãƒ¼ãƒ‰å®šç¾©

| ã‚°ãƒ¬ãƒ¼ãƒ‰ | ã‚¹ã‚³ã‚¢ç¯„å›² | ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|-----------|---------|------|
| S | 95-100 | 12pt | å“è¶Šã—ãŸæˆæœ |
| A+ | 92-94 | 10pt | æœŸå¾…ã‚’å¤§ããä¸Šå›ã‚‹ |
| A | 88-91 | 9pt | æœŸå¾…ã‚’ä¸Šå›ã‚‹ |
| A- | 85-87 | 8pt | æœŸå¾…é€šã‚Šï¼ˆä¸Šä½ï¼‰ |
| B+ | 82-84 | 7pt | æœŸå¾…é€šã‚Šï¼ˆä¸­ä¸Šä½ï¼‰ |
| B | 78-81 | 6pt | æœŸå¾…é€šã‚Š |
| B- | 70-77 | 5pt | æœŸå¾…é€šã‚Šï¼ˆä¸‹ä½ï¼‰ |
| C | 0-69 | 3pt | è¦æ”¹å–„ |

---

### 10-4. ãƒ¡ãƒ³ã‚¿ãƒªãƒ³ã‚°é–¢ä¿‚ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- ãƒ¡ãƒ³ã‚¿ãƒ¼ãƒ»ãƒ¡ãƒ³ãƒ†ã‚£ãƒ¼ã®é–¢ä¿‚ãŒè¨˜éŒ²ã§ããªã„
- æŒ‡å°è¨ˆç”»ãƒ»é€²æ—ãŒç®¡ç†ã§ããªã„
- ãƒ¡ãƒ³ã‚¿ãƒªãƒ³ã‚°æ´»å‹•ã®è©•ä¾¡ãŒã§ããªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `MentoringRelationships`ï¼ˆãƒ¡ãƒ³ã‚¿ãƒªãƒ³ã‚°é–¢ä¿‚ï¼‰

```prisma
model MentoringRelationship {
  id              String   @id @default(cuid())
  mentorId        String   @map("mentor_id")             // ãƒ¡ãƒ³ã‚¿ãƒ¼ï¼ˆæŒ‡å°è€…ï¼‰
  menteeId        String   @map("mentee_id")             // ãƒ¡ãƒ³ãƒ†ã‚£ãƒ¼ï¼ˆè¢«æŒ‡å°è€…ï¼‰
  relationshipType String  @map("relationship_type")     // formal, informal, peer
  startDate       DateTime @map("start_date")
  endDate         DateTime? @map("end_date")
  status          String   @default("active")            // active, completed, suspended

  // æŒ‡å°è¨ˆç”»
  mentoringGoals  Json?    @map("mentoring_goals")       // æŒ‡å°ç›®æ¨™é…åˆ—
  meetingFrequency String? @map("meeting_frequency")     // weekly, biweekly, monthly
  plannedSessions Int?     @default(0) @map("planned_sessions")
  completedSessions Int?   @default(0) @map("completed_sessions")

  // é€²æ—ç®¡ç†
  progress        Int      @default(0)                   // é€²æ—ç‡ 0-100
  milestones      Json?                                  // ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³é”æˆçŠ¶æ³

  // è©•ä¾¡
  mentorFeedback  String?  @map("mentor_feedback")       // ãƒ¡ãƒ³ã‚¿ãƒ¼ã‹ã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
  menteeFeedback  String?  @map("mentee_feedback")       // ãƒ¡ãƒ³ãƒ†ã‚£ãƒ¼ã‹ã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
  overallRating   Float?   @map("overall_rating")        // ç·åˆè©•ä¾¡ï¼ˆ1-5ï¼‰

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  notes           String?
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  mentor Employee @relation("MentorRelations", fields: [mentorId], references: [id])
  mentee Employee @relation("MenteeRelations", fields: [menteeId], references: [id])

  @@index([mentorId])
  @@index([menteeId])
  @@index([status])
  @@map("mentoring_relationships")
}
```

#### é–¢ä¿‚ã‚¿ã‚¤ãƒ—ï¼ˆrelationshipTypeï¼‰

| ã‚¿ã‚¤ãƒ— | èª¬æ˜ |
|--------|------|
| `formal` | å…¬å¼ãƒ¡ãƒ³ã‚¿ãƒªãƒ³ã‚°ï¼ˆä¼šç¤¾ãŒè¨­å®šï¼‰ |
| `informal` | éå…¬å¼ãƒ¡ãƒ³ã‚¿ãƒªãƒ³ã‚°ï¼ˆè‡ªç™ºçš„ï¼‰ |
| `peer` | ãƒ”ã‚¢ãƒ¡ãƒ³ã‚¿ãƒªãƒ³ã‚°ï¼ˆåŒåƒšé–“ï¼‰ |
| `reverse` | ãƒªãƒãƒ¼ã‚¹ãƒ¡ãƒ³ã‚¿ãƒªãƒ³ã‚°ï¼ˆè‹¥æ‰‹â†’ãƒ™ãƒ†ãƒ©ãƒ³ï¼‰ |

---

### 11. ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ãƒ»è‚²æˆè¨ˆç”»ãƒ†ãƒ¼ãƒ–ãƒ« âš ï¸ éƒ¨åˆ†çš„ã«ä¸è¶³

ç¾åœ¨ã¯é¢è«‡è¨˜éŒ²ã®`developmentPlan`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿ã€‚ä½“ç³»çš„ãªç®¡ç†ãŒå¿…è¦ã€‚

```prisma
model DevelopmentPlan {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  planType        String   @map("plan_type")            // short_term, mid_term, long_term
  targetPosition  String?  @map("target_position")      // ç›®æ¨™å½¹è·ï¼ˆã‚·ãƒ‹ã‚¢ã€ä¸»ä»»å€™è£œç­‰ï¼‰
  targetLevel     String?  @map("target_level")         // ç›®æ¨™ãƒ¬ãƒ™ãƒ«
  targetSkills    Json?    @map("target_skills")        // ç¿’å¾—ç›®æ¨™ã‚¹ã‚­ãƒ«
  planStartDate   DateTime @map("plan_start_date")
  planEndDate     DateTime @map("plan_end_date")

  // æœŸé™ç®¡ç†
  durationMonths  Int?     @map("duration_months")      // æœŸé–“ï¼ˆæœˆæ•°ï¼‰18ãƒ¶æœˆç­‰

  milestones      Json?                                 // ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³
  status          String   @default("active")           // active, achieved, cancelled
  createdBy       String   @map("created_by")
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@map("development_plans")
}
```

### 11. ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹é¸æŠåˆ¶åº¦ãƒ†ãƒ¼ãƒ–ãƒ« âš ï¸ è¨­è¨ˆæ¸ˆã¿ã ãŒschema.prismaæœªåæ˜ 

#### ç¾çŠ¶ã®å•é¡Œ
- **Phase5å®Ÿè£…è¨ˆç”»æ›¸ã«ã¯è©³ç´°è¨­è¨ˆã‚ã‚Š**
- **schema.prismaã«ã¯æœªå®Ÿè£…**
- APIã‚³ãƒ¼ãƒ‰ã«ã¯TODOã‚³ãƒ¡ãƒ³ãƒˆã§ä¿ç•™ä¸­

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«ç¾¤ï¼ˆPhase5è¨­è¨ˆã‚ˆã‚Šï¼‰

**1. course_definitionsï¼ˆã‚³ãƒ¼ã‚¹å®šç¾©ãƒã‚¹ã‚¿ï¼‰**
```prisma
model CourseDefinition {
  id                        String   @id @default(cuid())
  courseCode                String   @unique @map("course_code")       // A, B, C, D
  courseName                String   @map("course_name")               // Aã‚³ãƒ¼ã‚¹ï¼ˆç·åˆè·ï¼‰ç­‰
  description               String?                                    // èª¬æ˜
  departmentTransferAvailable Boolean @map("department_transfer_available")  // éƒ¨ç½²ç•°å‹•å¯å¦
  facilityTransferAvailable String   @map("facility_transfer_available")    // none/limited/full
  relocationRequired        Boolean  @map("relocation_required")       // è»¢å±…å¿…è¦æ€§
  nightShiftAvailable       String   @map("night_shift_available")     // none/selectable/required
  managementTrack           Boolean  @map("management_track")          // ç®¡ç†è·å€™è£œ
  baseSalaryMultiplier      Decimal  @map("base_salary_multiplier") @db.Decimal(3, 2)  // çµ¦ä¸ä¿‚æ•°
  isActive                  Boolean  @default(true) @map("is_active")
  displayOrder              Int      @default(0) @map("display_order")
  createdAt                 DateTime @default(now()) @map("created_at")
  updatedAt                 DateTime @updatedAt @map("updated_at")

  // Relations
  staffCourses              StaffCareerCourse[]
  changeRequestsCurrent     CareerCourseChangeRequest[] @relation("CurrentCourse")
  changeRequestsRequested   CareerCourseChangeRequest[] @relation("RequestedCourse")
  transferRulesFrom         CourseTransferRule[] @relation("FromCourse")
  transferRulesTo           CourseTransferRule[] @relation("ToCourse")

  @@map("course_definitions")
}
```

**2. staff_career_coursesï¼ˆè·å“¡ã‚³ãƒ¼ã‚¹æƒ…å ±ï¼‰**
```prisma
model StaffCareerCourse {
  id                      String   @id @default(cuid())
  staffId                 String   @map("staff_id")
  courseCode              String   @map("course_code")
  effectiveFrom           DateTime @map("effective_from") @db.Date      // é©ç”¨é–‹å§‹æ—¥
  effectiveTo             DateTime? @map("effective_to") @db.Date       // é©ç”¨çµ‚äº†æ—¥ï¼ˆç¾åœ¨æœ‰åŠ¹=NULLï¼‰
  nextChangeAvailableDate DateTime @map("next_change_available_date") @db.Date  // æ¬¡å›å¤‰æ›´å¯èƒ½æ—¥ï¼ˆå¹´1å›åˆ¶é™ï¼‰
  specialChangeReason     String?  @map("special_change_reason")       // ç‰¹ä¾‹äº‹ç”±
  approvedBy              String?  @map("approved_by")
  approvalStatus          String   @default("approved") @map("approval_status")  // approved, pending
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")

  // Relations
  employee        Employee         @relation(fields: [staffId], references: [id])
  courseDefinition CourseDefinition @relation(fields: [courseCode], references: [courseCode])

  @@index([staffId])
  @@index([courseCode])
  @@index([effectiveTo])  // ç¾åœ¨æœ‰åŠ¹ãªã‚³ãƒ¼ã‚¹æ¤œç´¢ç”¨
  @@map("staff_career_courses")
}
```

**3. career_course_change_requestsï¼ˆã‚³ãƒ¼ã‚¹å¤‰æ›´ç”³è«‹ï¼‰**
```prisma
model CareerCourseChangeRequest {
  id                      String   @id @default(cuid())
  staffId                 String   @map("staff_id")
  currentCourseCode       String   @map("current_course_code")
  requestedCourseCode     String   @map("requested_course_code")
  changeReason            String   @map("change_reason")             // life_event, career_change, special_nursing, special_caregiving
  reasonDetail            String?  @map("reason_detail")
  requestedEffectiveDate  DateTime @map("requested_effective_date") @db.Date
  attachments             Json?                                      // ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹é…åˆ—
  approvalStatus          String   @default("pending") @map("approval_status")  // pending, approved, rejected
  approvedBy              String?  @map("approved_by")
  approvedAt              DateTime? @map("approved_at")
  approvalComment         String?  @map("approval_comment")
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")

  // Relations
  employee          Employee         @relation(fields: [staffId], references: [id])
  currentCourse     CourseDefinition @relation("CurrentCourse", fields: [currentCourseCode], references: [courseCode])
  requestedCourse   CourseDefinition @relation("RequestedCourse", fields: [requestedCourseCode], references: [courseCode])

  @@index([staffId])
  @@index([approvalStatus])
  @@index([createdAt(sort: Desc)])
  @@map("career_course_change_requests")
}
```

**4. course_transfer_rulesï¼ˆã‚³ãƒ¼ã‚¹è»¢æ›ãƒ«ãƒ¼ãƒ«ï¼‰**
```prisma
model CourseTransferRule {
  id                   String   @id @default(cuid())
  fromCourseCode       String   @map("from_course_code")
  toCourseCode         String   @map("to_course_code")
  isAllowed            Boolean  @map("is_allowed")
  requiresApproval     Boolean  @default(true) @map("requires_approval")
  requiresReason       Boolean  @default(true) @map("requires_reason")
  minimumServiceYears  Decimal? @map("minimum_service_years") @db.Decimal(4, 1)
  notes                String?
  createdAt            DateTime @default(now()) @map("created_at")
  updatedAt            DateTime @updatedAt @map("updated_at")

  // Relations
  fromCourse CourseDefinition @relation("FromCourse", fields: [fromCourseCode], references: [courseCode])
  toCourse   CourseDefinition @relation("ToCourse", fields: [toCourseCode], references: [courseCode])

  @@unique([fromCourseCode, toCourseCode])
  @@map("course_transfer_rules")
}
```

#### å½±éŸ¿ç¯„å›²
- ğŸ”´ è·å“¡ã‚«ãƒ«ãƒ†å€‹äººãƒšãƒ¼ã‚¸ > ã‚­ãƒ£ãƒªã‚¢é¸æŠã‚³ãƒ¼ã‚¹ã‚¿ãƒ–
- ğŸ”´ ãƒã‚¤ãƒšãƒ¼ã‚¸ > ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹å¤‰æ›´ç”³è«‹
- ğŸ”´ ç®¡ç†ç”»é¢ > ã‚³ãƒ¼ã‚¹å¤‰æ›´ç”³è«‹æ‰¿èª

#### å¯¾å¿œæ–¹æ³•
Phase5å®Ÿè£…è¨ˆç”»æ›¸ã®è¨­è¨ˆã‚’schema.prismaã«åæ˜ ã—ã€MySQLæ§‹ç¯‰æ™‚ã«å«ã‚ã‚‹

---

### 12. å®Ÿç¸¾ãƒ»æˆæœç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- è¡¨å½°ä»¥å¤–ã®å®Ÿç¸¾ï¼ˆãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ ã€ç ”ç©¶ç™ºè¡¨ç­‰ï¼‰ãŒè¨˜éŒ²ã§ããªã„
- staffData.jsã«ã¯ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹ãŒã€DBãƒ†ãƒ¼ãƒ–ãƒ«ãŒãªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `Achievements`ï¼ˆå®Ÿç¸¾ãƒ»æˆæœï¼‰

```prisma
model Achievement {
  id              String   @id @default(cuid())
  employeeId      String   @map("employee_id")
  achievementDate DateTime @map("achievement_date")    // å®Ÿç¸¾æ—¥
  achievementType String   @map("achievement_type")    // leadership, project, research, innovation, committee, other
  title           String                               // ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆä¾‹: æ–°äººæŒ‡å°æ‹…å½“ã€ç—…æ£Ÿæ”¹å–„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ ï¼‰
  description     String?                              // è©³ç´°èª¬æ˜
  category        String?                              // ã‚«ãƒ†ã‚´ãƒªï¼ˆè‡ªç”±è¨˜è¿°ï¼‰
  impact          String?                              // å½±éŸ¿ãƒ»æˆæœ
  recognizedBy    String?  @map("recognized_by")       // èªå®šè€…ID
  isPublic        Boolean  @default(true) @map("is_public")  // å…¬é–‹è¨­å®š
  attachmentPath  String?  @map("attachment_path")     // é–¢é€£è³‡æ–™ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
  notes           String?
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([achievementDate(sort: Desc)])
  @@index([achievementType])
  @@map("achievements")
}
```

#### å¯¾è±¡ã¨ãªã‚‹å®Ÿç¸¾ã®ä¾‹
- **leadership**: æ–°äººæŒ‡å°æ‹…å½“ã€ãƒãƒ¼ãƒ ãƒªãƒ¼ãƒ€ãƒ¼çµŒé¨“
- **project**: ç—…æ£Ÿæ”¹å–„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€æ¥­å‹™åŠ¹ç‡åŒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
- **research**: çœ‹è­·ç ”ç©¶ç™ºè¡¨ã€å­¦ä¼šç™ºè¡¨
- **innovation**: æ¥­å‹™æ”¹å–„ææ¡ˆã€æ–°ã—ã„å–ã‚Šçµ„ã¿ã®å®Ÿæ–½
- **committee**: å§”å“¡ä¼šæ´»å‹•ï¼ˆæ„ŸæŸ“å¯¾ç­–å§”å“¡ä¼šç­‰ï¼‰
- **other**: ãã®ä»–ã®å®Ÿç¸¾

#### Awardãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã®ä½¿ã„åˆ†ã‘
- **Award**: æ­£å¼ãªè¡¨å½°ãƒ»å—è³ï¼ˆè¡¨å½°çŠ¶ã‚ã‚Šã€è³é‡‘ã‚ã‚Šï¼‰
- **Achievement**: æ—¥å¸¸çš„ãªå®Ÿç¸¾ãƒ»æˆæœï¼ˆè¡¨å½°ã«ãªã‚‰ãªã„ãŒè¨˜éŒ²ã™ã¹ãè²¢çŒ®ï¼‰

#### ğŸ†• æ¥­å‹™å®Ÿç¸¾ãƒ»çµ„ç¹”è²¢çŒ®åº¦ã®è¨˜éŒ²

Achievementãƒ†ãƒ¼ãƒ–ãƒ«ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ æ­´ã¯è¨˜éŒ²ã§ãã¾ã™ãŒã€**æ•°å€¤æŒ‡æ¨™ãƒ™ãƒ¼ã‚¹ã®æ¥­å‹™å®Ÿç¸¾**ã¨**çµ„ç¹”è²¢çŒ®åº¦ã‚¹ã‚³ã‚¢**ã¯åˆ¥é€”ç®¡ç†ãŒå¿…è¦ã§ã™ã€‚

---

### 12-2. æ¥­å‹™å®Ÿç¸¾æŒ‡æ¨™ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- æ‚£è€…æº€è¶³åº¦ã€æ¥­å‹™åŠ¹ç‡ã€å“è³ªæŒ‡æ¨™ãªã©ã®æ•°å€¤å®Ÿç¸¾ãŒè¨˜éŒ²ã§ããªã„
- å®Ÿç¸¾ã®ç¶™ç¶šæ€§ï¼ˆ3å¹´é€£ç¶šé”æˆç­‰ï¼‰ãŒè¿½è·¡ã§ããªã„
- VoiceDriveã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£æºï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŒ–ãƒ¢ãƒ¼ãƒ‰ï¼‰ã‚’è¦‹æ®ãˆãŸè¨­è¨ˆãŒå¿…è¦

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `PerformanceMetrics`ï¼ˆæ¥­å‹™å®Ÿç¸¾æŒ‡æ¨™ï¼‰

```prisma
model PerformanceMetric {
  id                  String   @id @default(cuid())
  employeeId          String   @map("employee_id")
  metricType          String   @map("metric_type")             // patient_satisfaction, quality, efficiency, safety
  metricName          String   @map("metric_name")             // æŒ‡æ¨™åï¼ˆæ‚£è€…æº€è¶³åº¦ã€æ¥­å‹™åŠ¹ç‡ç­‰ï¼‰
  period              String                                   // æœŸé–“ï¼ˆ2024-Q1ã€2024å¹´åº¦ç­‰ï¼‰
  targetValue         Float?   @map("target_value")            // ç›®æ¨™å€¤
  actualValue         Float    @map("actual_value")            // å®Ÿç¸¾å€¤
  unit                String                                   // å˜ä½ï¼ˆ%ã€ä»¶ã€æ™‚é–“ç­‰ï¼‰
  achievementRate     Float?   @map("achievement_rate")        // é”æˆç‡ï¼ˆ%ï¼‰
  consecutiveYears    Int?     @default(0) @map("consecutive_years")  // é€£ç¶šé”æˆå¹´æ•°

  // VoiceDriveé€£æºï¼ˆå°†æ¥çš„ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŒ–ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œï¼‰
  relatedProjectId    String?  @map("related_project_id")      // é–¢é€£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDï¼ˆVoiceDriveå´ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDï¼‰
  voiceDriveSyncStatus String? @default("not_synced") @map("voicedrive_sync_status")  // not_synced, synced, pending

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  notes               String?
  createdAt           DateTime @default(now()) @map("created_at")
  updatedAt           DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([metricType])
  @@index([period(sort: Desc)])
  @@map("performance_metrics")
}
```

#### æŒ‡æ¨™ã‚¿ã‚¤ãƒ—ï¼ˆmetricTypeï¼‰å®šç¾©

| ã‚¿ã‚¤ãƒ— | èª¬æ˜ | ä¾‹ |
|--------|------|-----|
| `patient_satisfaction` | æ‚£è€…æº€è¶³åº¦ | 95%ä»¥ä¸Šã‚’3å¹´é€£ç¶šé”æˆ |
| `quality` | å“è³ªæŒ‡æ¨™ | ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç™ºç”Ÿç‡ã€åŒ»ç™‚å®‰å…¨ã‚¹ã‚³ã‚¢ |
| `efficiency` | æ¥­å‹™åŠ¹ç‡ | å‡¦ç†æ™‚é–“çŸ­ç¸®ç‡ã€æ®‹æ¥­æ™‚é–“å‰Šæ¸›ç‡ |
| `safety` | å®‰å…¨æŒ‡æ¨™ | æ„ŸæŸ“ç‡ã€è»¢å€’è»¢è½ä»¶æ•° |
| `education` | æ•™è‚²å®Ÿç¸¾ | æ–°äººè‚²æˆæˆåŠŸç‡ã€ç ”ä¿®å®Ÿæ–½å›æ•° |
| `project` | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæˆæœ | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®Œäº†ç‡ã€ç›®æ¨™é”æˆç‡ |

---

### 12-3. çµ„ç¹”è²¢çŒ®åº¦ã‚¹ã‚³ã‚¢ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- çµ„ç¹”ã¸ã®è²¢çŒ®åº¦ã‚’ç·åˆçš„ã«è©•ä¾¡ãƒ»æ•°å€¤åŒ–ã§ããªã„
- è²¢çŒ®åº¦ã®æ™‚ç³»åˆ—å¤‰åŒ–ãŒè¿½è·¡ã§ããªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `OrganizationContributionScores`ï¼ˆçµ„ç¹”è²¢çŒ®åº¦ã‚¹ã‚³ã‚¢ï¼‰

```prisma
model OrganizationContributionScore {
  id                      String   @id @default(cuid())
  employeeId              String   @map("employee_id")
  evaluationPeriod        String   @map("evaluation_period")       // è©•ä¾¡æœŸé–“ï¼ˆ2024-H1ã€2024å¹´åº¦ç­‰ï¼‰

  // ç·åˆã‚¹ã‚³ã‚¢
  overallScore            Float    @map("overall_score")           // ç·åˆè²¢çŒ®åº¦ã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰

  // åˆ†é‡åˆ¥ã‚¹ã‚³ã‚¢
  performanceScore        Float?   @map("performance_score")       // æ¥­å‹™å®Ÿç¸¾ã‚¹ã‚³ã‚¢
  innovationScore         Float?   @map("innovation_score")        // ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»æ”¹å–„ææ¡ˆã‚¹ã‚³ã‚¢
  teamworkScore           Float?   @map("teamwork_score")          // ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ»å”åƒã‚¹ã‚³ã‚¢
  leadershipScore         Float?   @map("leadership_score")        // ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚¹ã‚³ã‚¢
  educationScore          Float?   @map("education_score")         // æ•™è‚²ãƒ»è‚²æˆã‚¹ã‚³ã‚¢
  projectScore            Float?   @map("project_score")           // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè²¢çŒ®ã‚¹ã‚³ã‚¢

  // ç®—å‡ºæ ¹æ‹ 
  calculationMethod       String?  @map("calculation_method")      // ç®—å‡ºæ–¹æ³•ï¼ˆè‡ªå‹•è¨ˆç®—/æ‰‹å‹•è©•ä¾¡/æ··åˆï¼‰
  calculationDetails      Json?    @map("calculation_details")     // ç®—å‡ºè©³ç´°ï¼ˆå„è¦ç´ ã®å†…è¨³ï¼‰

  // VoiceDriveé€£æº
  voiceDriveActivityScore Float?   @map("voicedrive_activity_score")  // VoiceDriveæ´»å‹•ã‚¹ã‚³ã‚¢
  voiceDriveProjectCount  Int?     @default(0) @map("voicedrive_project_count")  // å‚åŠ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ•°

  // è©•ä¾¡è€…æƒ…å ±
  evaluatorId             String?  @map("evaluator_id")
  evaluatorComment        String?  @map("evaluator_comment")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  status                  String   @default("draft") @map("status")  // draft, finalized
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@unique([employeeId, evaluationPeriod])
  @@index([employeeId])
  @@index([evaluationPeriod(sort: Desc)])
  @@index([overallScore(sort: Desc)])
  @@map("organization_contribution_scores")
}
```

#### ã‚¹ã‚³ã‚¢ç®—å‡ºæ–¹æ³•ã®ä¾‹

```json
{
  "calculationMethod": "weighted_average",
  "weights": {
    "performance": 0.30,
    "innovation": 0.15,
    "teamwork": 0.20,
    "leadership": 0.15,
    "education": 0.10,
    "project": 0.10
  },
  "rawScores": {
    "performance": 92,
    "innovation": 85,
    "teamwork": 88,
    "leadership": 80,
    "education": 90,
    "project": 87
  },
  "overallScore": 88
}
```

---

### 12-4. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- Achievementãƒ†ãƒ¼ãƒ–ãƒ«ã§ã‚‚è¨˜éŒ²å¯èƒ½ã ãŒã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå°‚ç”¨ã®ç®¡ç†ãŒæœ›ã¾ã—ã„
- VoiceDriveã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŒ–ãƒ¢ãƒ¼ãƒ‰ã¨ã®é€£æºã‚’è¦‹æ®ãˆãŸè¨­è¨ˆãŒå¿…è¦
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§ã®å½¹å‰²ãƒ»è²¢çŒ®åº¦ãŒæ˜ç¢ºã«è¨˜éŒ²ã§ããªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `ProjectParticipations`ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ å±¥æ­´ï¼‰

```prisma
model ProjectParticipation {
  id                  String   @id @default(cuid())
  employeeId          String   @map("employee_id")
  projectName         String   @map("project_name")            // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå
  projectType         String   @map("project_type")            // system, improvement, research, education, facility
  role                String                                   // leader, member, supporter, advisor
  startDate           DateTime @map("start_date")
  endDate             DateTime? @map("end_date")
  status              String   @default("in_progress") @map("status")  // in_progress, completed, on_hold, cancelled

  // è²¢çŒ®åº¦ãƒ»æˆæœ
  contributionLevel   String?  @map("contribution_level")      // high, medium, low
  achievements        String?                                  // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§ã®æˆæœ
  skillsGained        Json?    @map("skills_gained")           // ç¿’å¾—ã‚¹ã‚­ãƒ«é…åˆ—

  // VoiceDriveé€£æºï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŒ–ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œï¼‰
  voiceDriveProjectId String?  @map("voicedrive_project_id")   // VoiceDriveå´ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID
  isSyncedWithVoiceDrive Boolean @default(false) @map("is_synced_with_voicedrive")
  voiceDriveTaskCount Int?     @default(0) @map("voicedrive_task_count")  // VoiceDriveä¸Šã®ã‚¿ã‚¹ã‚¯æ•°
  voiceDriveCompletionRate Float? @map("voicedrive_completion_rate")      // VoiceDriveä¸Šã®å®Œäº†ç‡

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  department          String?                                  // ä¸»ç®¡éƒ¨ç½²
  budget              Decimal? @db.Decimal(12, 2)             // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆäºˆç®—
  notes               String?
  createdAt           DateTime @default(now()) @map("created_at")
  updatedAt           DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([projectType])
  @@index([status])
  @@index([startDate(sort: Desc)])
  @@index([voiceDriveProjectId])
  @@map("project_participations")
}
```

#### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¿ã‚¤ãƒ—ï¼ˆprojectTypeï¼‰å®šç¾©

| ã‚¿ã‚¤ãƒ— | èª¬æ˜ | ä¾‹ |
|--------|------|-----|
| `system` | ã‚·ã‚¹ãƒ†ãƒ å°å…¥ãƒ»åˆ·æ–° | é›»å­ã‚«ãƒ«ãƒ†å°å…¥ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ |
| `improvement` | æ¥­å‹™æ”¹å–„ãƒ»åŠ¹ç‡åŒ– | æ‚£è€…æº€è¶³åº¦å‘ä¸Šå§”å“¡ä¼š |
| `research` | ç ”ç©¶ãƒ»èª¿æŸ» | çœ‹è­·ç ”ç©¶ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ |
| `education` | æ•™è‚²ãƒ»è‚²æˆ | æ–°äººæ•™è‚²ãƒ—ãƒ­ã‚°ãƒ©ãƒ é–‹ç™º |
| `facility` | æ–½è¨­ãƒ»è¨­å‚™ | ç—…æ£Ÿãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ |
| `quality` | å“è³ªå‘ä¸Š | åŒ»ç™‚å®‰å…¨æ¨é€²ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ |

#### VoiceDriveé€£æºã®æƒ³å®š

å°†æ¥çš„ã«VoiceDriveã®ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŒ–ãƒ¢ãƒ¼ãƒ‰ã€ãŒè»Œé“ã«ä¹—ã£ãŸéš›ï¼š
- VoiceDriveä¸Šã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ å±¥æ­´ã‚’é€£æº
- ã‚¿ã‚¹ã‚¯å®Œäº†ç‡ã€ã‚¢ã‚¤ãƒ‡ã‚¢æŠ•ç¨¿æ•°ãªã©ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ
- çµ„ç¹”è²¢çŒ®åº¦ã‚¹ã‚³ã‚¢ã®è‡ªå‹•ç®—å‡ºã«æ´»ç”¨

---

### 13. ã‚¯ãƒªãƒ‹ã‚«ãƒ«ãƒ©ãƒ€ãƒ¼è©•ä¾¡ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- çœ‹è­·å”ä¼šã®ã‚¯ãƒªãƒ‹ã‚«ãƒ«ãƒ©ãƒ€ãƒ¼ãƒ¬ãƒ™ãƒ«ãŒè¨˜éŒ²ã§ããªã„
- ã‚¹ã‚­ãƒ«åˆ¥ã®ç¿’ç†Ÿåº¦ï¼ˆ%ï¼‰ãŒè¨˜éŒ²ã§ããªã„
- é™¢å†…èªå®šãƒ»å°‚é–€è³‡æ ¼ã®ç®¡ç†ãŒä¸ååˆ†

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `ClinicalLadderAssessments`ï¼ˆã‚¯ãƒªãƒ‹ã‚«ãƒ«ãƒ©ãƒ€ãƒ¼è©•ä¾¡ï¼‰

```prisma
model ClinicalLadderAssessment {
  id                      String   @id @default(cuid())
  employeeId              String   @map("employee_id")
  assessmentDate          DateTime @map("assessment_date")            // è©•ä¾¡æ—¥
  jobCategory             String   @map("job_category")               // nurse, care_worker, therapistç­‰

  // ã‚¯ãƒªãƒ‹ã‚«ãƒ«ãƒ©ãƒ€ãƒ¼ãƒ¬ãƒ™ãƒ«ï¼ˆçœ‹è­·å”ä¼šç‰ˆæº–æ‹ ï¼‰
  overallLadderLevel      String?  @map("overall_ladder_level")       // beginner, level1, level2, level3, level4

  // 4ã¤ã®èƒ½åŠ›è»¸åˆ¥è©•ä¾¡ï¼ˆçœ‹è­·å”ä¼šç‰ˆï¼‰
  needsIdentificationLevel String? @map("needs_identification_level") // ãƒ‹ãƒ¼ã‚ºã‚’ã¨ã‚‰ãˆã‚‹åŠ›
  careProvidingLevel      String?  @map("care_providing_level")       // ã‚±ã‚¢ã™ã‚‹åŠ›
  collaborationLevel      String?  @map("collaboration_level")        // å”åƒã™ã‚‹åŠ›
  decisionSupportLevel    String?  @map("decision_support_level")     // æ„æ€æ±ºå®šã‚’æ”¯ãˆã‚‹åŠ›

  // ã‚¹ã‚­ãƒ«åˆ¥ç¿’ç†Ÿåº¦ï¼ˆ0-100%ï¼‰
  nursingSkillProficiency    Float?   @map("nursing_skill_proficiency") @db.Decimal(5, 2)     // çœ‹è­·æŠ€è¡“
  infectionControlProficiency Float?  @map("infection_control_proficiency") @db.Decimal(5, 2) // æ„ŸæŸ“ç®¡ç†
  educationGuidanceProficiency Float? @map("education_guidance_proficiency") @db.Decimal(5, 2) // æ•™è‚²æŒ‡å°
  emergencyCareProficiency   Float?   @map("emergency_care_proficiency") @db.Decimal(5, 2)    // æ•‘æ€¥å¯¾å¿œ
  specializedCareProficiency Float?   @map("specialized_care_proficiency") @db.Decimal(5, 2)  // å°‚é–€ã‚±ã‚¢

  // é™¢å†…èªå®šãƒ»è³‡æ ¼
  inHouseCertifications   Json?    @map("in_house_certifications")    // é™¢å†…èªå®šé…åˆ—ï¼ˆæ„ŸæŸ“ç®¡ç†èªå®šã€ãƒ—ãƒªã‚»ãƒ—ã‚¿ãƒ¼ç­‰ï¼‰
  externalCertifications  Json?    @map("external_certifications")    // å¤–éƒ¨è³‡æ ¼é…åˆ—ï¼ˆèªå®šçœ‹è­·å¸«ç­‰ï¼‰

  // è©•ä¾¡è€…æƒ…å ±
  assessorId              String?  @map("assessor_id")                // è©•ä¾¡è€…ID
  assessorComment         String?  @map("assessor_comment")           // è©•ä¾¡ã‚³ãƒ¡ãƒ³ãƒˆ
  nextGoal                String?  @map("next_goal")                  // æ¬¡ã®ç›®æ¨™
  nextAssessmentDate      DateTime? @map("next_assessment_date")      // æ¬¡å›è©•ä¾¡äºˆå®šæ—¥

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  status                  String   @default("active") @map("status")  // active, archived
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId, assessmentDate(sort: Desc)])
  @@index([jobCategory])
  @@index([overallLadderLevel])
  @@map("clinical_ladder_assessments")
}
```

#### ãƒ¬ãƒ™ãƒ«å®šç¾©ï¼ˆæ—¥æœ¬çœ‹è­·å”ä¼šç‰ˆæº–æ‹ ï¼‰

**overallLadderLevelå€¤**:
- `beginner`: æ–°äººï¼ˆåŸºæœ¬çš„ã‚±ã‚¢ã€åŠ©è¨€ã‚’å¾—ã¦å®Ÿè·µï¼‰
- `level1`: ãƒ¬ãƒ™ãƒ«â… ï¼ˆä¸€èˆ¬çš„ãªçœ‹è­·è¨ˆç”»ã«åŸºã¥ãè‡ªç«‹å®Ÿè·µï¼‰
- `level2`: ãƒ¬ãƒ™ãƒ«â…¡ï¼ˆå€‹åˆ¥çš„ãªçœ‹è­·ã‚’å®Ÿè·µï¼‰
- `level3`: ãƒ¬ãƒ™ãƒ«â…¢ï¼ˆå¹…åºƒã„è¦–é‡ã§äºˆæ¸¬çš„åˆ¤æ–­ï¼‰
- `level4`: ãƒ¬ãƒ™ãƒ«â…£ï¼ˆè¤‡é›‘ãªçŠ¶æ³ã§QOLã‚’é«˜ã‚ã‚‹çœ‹è­·ï¼‰

**4ã¤ã®èƒ½åŠ›è»¸ã‚‚åŒã˜ãƒ¬ãƒ™ãƒ«ä½“ç³»**:
- ãƒ‹ãƒ¼ã‚ºã‚’ã¨ã‚‰ãˆã‚‹åŠ›ï¼ˆneedsIdentificationLevelï¼‰
- ã‚±ã‚¢ã™ã‚‹åŠ›ï¼ˆcareProvidingLevelï¼‰
- å”åƒã™ã‚‹åŠ›ï¼ˆcollaborationLevelï¼‰
- æ„æ€æ±ºå®šã‚’æ”¯ãˆã‚‹åŠ›ï¼ˆdecisionSupportLevelï¼‰

#### é™¢å†…èªå®šãƒ»å¤–éƒ¨è³‡æ ¼ã®JSONä¾‹

```json
// inHouseCertifications
[
  {
    "name": "é™¢å†…æ„ŸæŸ“ç®¡ç†èªå®š",
    "certifiedDate": "2023-04-01",
    "expiryDate": "2026-03-31",
    "renewalCycle": 3
  },
  {
    "name": "ãƒ—ãƒªã‚»ãƒ—ã‚¿ãƒ¼èªå®š",
    "certifiedDate": "2022-10-01",
    "expiryDate": null,
    "renewalCycle": null
  }
]

// externalCertifications
[
  {
    "name": "æ„ŸæŸ“ç®¡ç†èªå®šçœ‹è­·å¸«",
    "organization": "æ—¥æœ¬çœ‹è­·å”ä¼š",
    "certifiedDate": "2021-06-01",
    "expiryDate": "2026-05-31"
  }
]
```

#### å½±éŸ¿ç¯„å›²
- ğŸ”´ è·å“¡ã‚«ãƒ«ãƒ†å€‹äººãƒšãƒ¼ã‚¸ > è³‡æ ¼ãƒ»å°‚é–€æ€§ã‚¿ãƒ– > ã‚¹ã‚­ãƒ«è©•ä¾¡ãƒ»ã‚¯ãƒªãƒ‹ã‚«ãƒ«ãƒ©ãƒ€ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³
- ğŸ”´ çœ‹è­·éƒ¨æ•™è‚²è¨ˆç”»ï¼ˆãƒ©ãƒ€ãƒ¼åˆ¥ç ”ä¿®è¨ˆç”»ï¼‰
- ğŸ”´ äººæè‚²æˆãƒ»é…ç½®æœ€é©åŒ–

#### ä½¿ã„åˆ†ã‘
- **ClinicalLadderAssessment**: å®šæœŸçš„ãªç·åˆè©•ä¾¡ï¼ˆå¹´2å›ç­‰ï¼‰
- **EmployeeSkill**: æ—¥å¸¸çš„ãªã‚¹ã‚­ãƒ«ç®¡ç†ï¼ˆå€‹åˆ¥ã‚¹ã‚­ãƒ«å˜ä½ï¼‰
- **Certification**: å…¬çš„è³‡æ ¼ãƒ»å…è¨±

---

### 14. å­¦ä¼šãƒ»è·èƒ½å›£ä½“åŠ å…¥æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- å­¦ä¼šãƒ»è·èƒ½å›£ä½“ã¸ã®åŠ å…¥æƒ…å ±ãŒè¨˜éŒ²ã§ããªã„
- åŠ å…¥æ—¥ãƒ»é€€ä¼šæ—¥ãŒç®¡ç†ã§ããªã„
- ä¼šè²»æ”¯æ‰•ã„çŠ¶æ³ãŒè¿½è·¡ã§ããªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `ProfessionalAssociations`ï¼ˆå­¦ä¼šãƒ»è·èƒ½å›£ä½“åŠ å…¥æƒ…å ±ï¼‰

```prisma
model ProfessionalAssociation {
  id                  String   @id @default(cuid())
  employeeId          String   @map("employee_id")
  associationType     String   @map("association_type")        // nursing_association, academic_society, professional_body
  associationName     String   @map("association_name")        // å›£ä½“åï¼ˆæ—¥æœ¬çœ‹è­·å”ä¼šã€æ—¥æœ¬æ„ŸæŸ“ç®¡ç†å­¦ä¼šç­‰ï¼‰
  membershipNumber    String?  @map("membership_number")       // ä¼šå“¡ç•ªå·
  joinDate            DateTime @map("join_date") @db.Date      // åŠ å…¥æ—¥
  withdrawalDate      DateTime? @map("withdrawal_date") @db.Date // é€€ä¼šæ—¥
  status              String   @default("active") @map("status") // active, withdrawn, suspended

  // ä¼šè²»é–¢é€£
  annualFee           Decimal? @map("annual_fee") @db.Decimal(10, 2)  // å¹´ä¼šè²»
  feePaymentMethod    String?  @map("fee_payment_method")      // company_paid, self_paid, partial
  companySupport      Boolean  @default(false) @map("company_support")  // æ³•äººè£œåŠ©ã‚ã‚Š

  // å½¹è·ãƒ»å½¹å‰²
  role                String?                                  // member, committee_member, officer, director
  committeeNames      Json?    @map("committee_names")         // æ‰€å±å§”å“¡ä¼šãƒªã‚¹ãƒˆ

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  notes               String?                                  // å‚™è€ƒï¼ˆæ¨è–¦è€…ã€åŠ å…¥ç†ç”±ç­‰ï¼‰
  createdAt           DateTime @default(now()) @map("created_at")
  updatedAt           DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([associationType])
  @@index([status])
  @@index([joinDate(sort: Desc)])
  @@map("professional_associations")
}
```

#### å›£ä½“ã‚¿ã‚¤ãƒ—ï¼ˆassociationTypeï¼‰å®šç¾©

| ã‚¿ã‚¤ãƒ— | èª¬æ˜ | ä¾‹ |
|--------|------|-----|
| `nursing_association` | çœ‹è­·è·èƒ½å›£ä½“ | æ—¥æœ¬çœ‹è­·å”ä¼šã€éƒ½é“åºœçœŒçœ‹è­·å”ä¼š |
| `academic_society` | å­¦è¡“å­¦ä¼š | æ—¥æœ¬æ„ŸæŸ“ç®¡ç†å­¦ä¼šã€æ—¥æœ¬çœ‹è­·ç§‘å­¦å­¦ä¼š |
| `professional_body` | å°‚é–€è·å›£ä½“ | æ—¥æœ¬ä»‹è­·ç¦ç¥‰å£«ä¼šã€æ—¥æœ¬ç†å­¦ç™‚æ³•å£«å”ä¼š |
| `specialty_society` | å°‚é–€é ˜åŸŸå­¦ä¼š | æ—¥æœ¬æ•‘æ€¥çœ‹è­·å­¦ä¼šã€æ—¥æœ¬è€å¹´çœ‹è­·å­¦ä¼š |

#### ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆstatusï¼‰å®šç¾©

| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | èª¬æ˜ |
|-----------|------|
| `active` | åœ¨ç±ä¸­ |
| `withdrawn` | é€€ä¼šæ¸ˆã¿ |
| `suspended` | ä¸€æ™‚åœæ­¢ï¼ˆä¼‘ä¼šï¼‰ |

#### ä¼šè²»æ”¯æ‰•ã„æ–¹æ³•ï¼ˆfeePaymentMethodï¼‰

| æ–¹æ³• | èª¬æ˜ |
|------|------|
| `company_paid` | æ³•äººå…¨é¡è² æ‹… |
| `self_paid` | è‡ªå·±è² æ‹… |
| `partial` | æ³•äººä¸€éƒ¨è£œåŠ© |

#### å½¹è·ãƒ»å½¹å‰²ï¼ˆroleï¼‰

| å½¹è· | èª¬æ˜ |
|------|------|
| `member` | ä¸€èˆ¬ä¼šå“¡ |
| `committee_member` | å§”å“¡ä¼šå§”å“¡ |
| `officer` | å½¹å“¡ |
| `director` | ç†äº‹ |

#### å½±éŸ¿ç¯„å›²
- ğŸ”´ è·å“¡ã‚«ãƒ«ãƒ†å€‹äººãƒšãƒ¼ã‚¸ > è³‡æ ¼ãƒ»å°‚é–€æ€§ã‚¿ãƒ– > å­¦ä¼šãƒ»è·èƒ½å›£ä½“ã‚»ã‚¯ã‚·ãƒ§ãƒ³
- ğŸ”´ æ³•äººè£œåŠ©å¯¾è±¡è€…ãƒªã‚¹ãƒˆ
- ğŸ”´ å­¦ä¼šå‚åŠ ãƒ»ç ”ç©¶æ´»å‹•ã®æ´»æ€§åº¦åˆ†æ

#### ãƒ¡ãƒªãƒƒãƒˆ
- å°‚é–€æ€§ã®ç¶™ç¶šçš„ãªå‘ä¸Šã‚’ä¿ƒé€²
- å­¦ä¼šæ´»å‹•ã¸ã®å‚åŠ çŠ¶æ³ã‚’å¯è¦–åŒ–
- æ³•äººã®ç ”ç©¶ãƒ»æ•™è‚²æ´»å‹•ã¸ã®è²¢çŒ®åº¦ã‚’æ¸¬å®š

---

### 15. è·å“¡ãƒã‚¤ãƒ³ãƒ‰ãƒ»å¿—å‘æ€§ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- ã‚­ãƒ£ãƒªã‚¢å¿—å‘ã€ãƒ¯ãƒ¼ã‚¯ã‚¹ã‚¿ã‚¤ãƒ«ã€çµ„ç¹”è²¢çŒ®æ„æ¬²ç­‰ãŒè¨˜éŒ²ã§ããªã„
- staffData.jsã«ã¯ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹ãŒã€DBãƒ†ãƒ¼ãƒ–ãƒ«ãŒãªã„
- å‹•æ©Ÿã‚¿ã‚¤ãƒ—ä»¥å¤–ã®å¿—å‘æ€§æƒ…å ±ãŒç®¡ç†ã§ããªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `StaffMindsetProfiles`ï¼ˆè·å“¡ãƒã‚¤ãƒ³ãƒ‰ãƒ»å¿—å‘æ€§ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

```prisma
model StaffMindsetProfile {
  id                      String   @id @default(cuid())
  employeeId              String   @unique @map("employee_id")  // 1è·å“¡1ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«

  // ã‚­ãƒ£ãƒªã‚¢å¿—å‘
  careerOrientationType   String?  @map("career_orientation_type")     // balance, specialist, generalist, leader
  careerVision            String?  @map("career_vision")                // ã‚­ãƒ£ãƒªã‚¢ãƒ“ã‚¸ãƒ§ãƒ³ï¼ˆè‡ªç”±è¨˜è¿°ï¼‰
  desiredGrowthAreas      Json?    @map("desired_growth_areas")         // å¸Œæœ›ã™ã‚‹æˆé•·åˆ†é‡ï¼ˆã‚¿ã‚°é…åˆ—ï¼‰

  // ãƒ¯ãƒ¼ã‚¯ã‚¹ã‚¿ã‚¤ãƒ«
  workStyle               String?  @map("work_style")                   // team_oriented, individual, flexible
  workStyleDescription    String?  @map("work_style_description")       // ãƒ¯ãƒ¼ã‚¯ã‚¹ã‚¿ã‚¤ãƒ«èª¬æ˜

  // ä»•äº‹ã¸ã®å‘ãåˆã„æ–¹
  coreValues              Json?    @map("core_values")                  // é‡è¦–ã™ã‚‹ä¾¡å€¤è¦³ï¼ˆã‚¿ã‚°é…åˆ—ï¼‰
  motivationSources       Json?    @map("motivation_sources")           // ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³æºï¼ˆã‚¿ã‚°é…åˆ—ï¼‰
  strengths               Json?    @map("strengths")                    // å¼·ã¿ï¼ˆé…åˆ—ï¼‰
  areasForImprovement     Json?    @map("areas_for_improvement")        // æ”¹å–„ã—ãŸã„é ˜åŸŸï¼ˆé…åˆ—ï¼‰

  // åƒãæ–¹ã®å¸Œæœ›
  preferredWorkingHours   String?  @map("preferred_working_hours")      // full_time, part_time, flexible
  nightShiftPreference    String?  @map("night_shift_preference")       // possible, selectable, not_possible
  workLifeBalancePriority String?  @map("work_life_balance_priority")   // high, medium, low
  transferWillingness     String?  @map("transfer_willingness")         // willing, negotiable, not_willing
  preferredDepartments    Json?    @map("preferred_departments")        // å¸Œæœ›éƒ¨ç½²ï¼ˆé…åˆ—ï¼‰

  // çµ„ç¹”ã¸ã®è²¢çŒ®æ„æ¬²
  organizationCommitment  String?  @map("organization_commitment")      // high, medium, low
  mentorWillingness       String?  @map("mentor_willingness")           // high, medium, low, none
  projectParticipation    String?  @map("project_participation")        // active, selective, limited
  improvementProposal     String?  @map("improvement_proposal")         // frequent, sometimes, rarely
  leadershipAspiration    Boolean? @default(false) @map("leadership_aspiration")  // ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—å¿—å‘

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  lastUpdatedBy           String?  @map("last_updated_by")              // æœ€çµ‚æ›´æ–°è€…ID
  lastUpdatedAt           DateTime? @map("last_updated_at")              // æœ€çµ‚æ›´æ–°æ—¥æ™‚
  notes                   String?                                       // å‚™è€ƒ
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")

  // Relations
  employee Employee @relation(fields: [employeeId], references: [id])

  @@map("staff_mindset_profiles")
}
```

#### ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è©³ç´°

**ã‚­ãƒ£ãƒªã‚¢å¿—å‘ã‚¿ã‚¤ãƒ—**:
- `balance`: ãƒãƒ©ãƒ³ã‚¹å‹ï¼ˆå¤šæ§˜ãªçµŒé¨“ã‚’ç©ã‚€ï¼‰
- `specialist`: ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆå‹ï¼ˆå°‚é–€æ€§è¿½æ±‚ï¼‰
- `generalist`: ã‚¼ãƒãƒ©ãƒªã‚¹ãƒˆå‹ï¼ˆå¹…åºƒã„ã‚¹ã‚­ãƒ«ï¼‰
- `leader`: ãƒªãƒ¼ãƒ€ãƒ¼å‹ï¼ˆç®¡ç†è·å¿—å‘ï¼‰

**ãƒ¯ãƒ¼ã‚¯ã‚¹ã‚¿ã‚¤ãƒ«**:
- `team_oriented`: ãƒãƒ¼ãƒ é‡è¦–
- `individual`: å€‹äººä½œæ¥­é‡è¦–
- `flexible`: æŸ”è»Ÿå¯¾å¿œå‹

**å¤œå‹¤æ„å‘**:
- `possible`: å¯èƒ½
- `selectable`: é¸æŠå¯èƒ½
- `not_possible`: ä¸å¯

**è»¢å‹¤ãƒ»ç•°å‹•æ„å‘**:
- `willing`: ç©æ¥µçš„
- `negotiable`: è¦ç›¸è«‡
- `not_willing`: å¸Œæœ›ã—ãªã„

#### å½±éŸ¿ç¯„å›²
- ğŸ”´ è·å“¡ã‚«ãƒ«ãƒ†å€‹äººãƒšãƒ¼ã‚¸ > ãƒã‚¤ãƒ³ãƒ‰ãƒ»å¿—å‘æ€§ã‚¿ãƒ–ï¼ˆå…¨ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼‰
- ğŸ”´ äººäº‹é…ç½®è¨ˆç”»ã®æœ€é©åŒ–
- ğŸ”´ ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆå‘ä¸Šæ–½ç­–ã®ç«‹æ¡ˆ

#### ä½¿ã„æ–¹ã®æŸ”è»Ÿæ€§
- å…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒOptionalï¼ˆ`?`ä»˜ãï¼‰
- å¿…è¦ãªé …ç›®ã ã‘å…¥åŠ›ã™ã‚Œã°OK
- æœªå…¥åŠ›ã®é …ç›®ã¯`NULL`ã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹
- æ®µéšçš„ã«ãƒ‡ãƒ¼ã‚¿ã‚’å……å®Ÿã•ã›ã‚‹ã“ã¨ãŒå¯èƒ½

---

## ğŸŸ¢ ä½å„ªå…ˆåº¦ã®ä¸è¶³é …ç›®ï¼ˆPriority 3: ã‚ã‚Œã°è‰¯ã„ï¼‰

### 14. ç¤¾å†…ã‚¤ãƒ™ãƒ³ãƒˆå‚åŠ è¨˜éŒ²
### 15. ãƒ¡ãƒ³ã‚¿ãƒ¼ãƒ»ãƒ¡ãƒ³ãƒ†ã‚£ãƒ¼é–¢ä¿‚
### 16. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé…å±å±¥æ­´
### 17. ç¦åˆ©åšç”Ÿåˆ©ç”¨å±¥æ­´
### 18. ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå›ç­”å±¥æ­´

ï¼ˆè©³ç´°ã¯å¾Œæ—¥è¿½åŠ ï¼‰

---

## ğŸ“Š æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¸è¶³ã‚«ãƒ©ãƒ 

### Interview ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¿½åŠ ã™ã¹ãã‚«ãƒ©ãƒ 

#### ç¾çŠ¶ã®å•é¡Œ
- NotebookLMç­‰ã®å¤–éƒ¨AIãƒ„ãƒ¼ãƒ«ã¨ã®é€£æºæ©Ÿèƒ½ãŒãªã„
- é¢è«‡ã‚·ãƒ¼ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¸ã®ãƒªãƒ³ã‚¯ãŒä¿å­˜ã§ããªã„
- AIåˆ†æçµæœãŒè¨˜éŒ²ã§ããªã„
- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚µãƒãƒªãŒä¿å­˜ã§ããªã„

#### è¿½åŠ ã™ã¹ããƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

```prisma
model Interview {
  id                   String                   @id @default(cuid())
  employeeId           String                   @map("employee_id")
  interviewerId        String                   @map("interviewer_id")
  interviewDate        DateTime                 @map("interview_date")
  interviewType        String                   @map("interview_type")
  duration             Int?                     // é¢è«‡æ™‚é–“ï¼ˆåˆ†ï¼‰

  // ğŸ†• AIãƒ»å¤–éƒ¨ãƒ„ãƒ¼ãƒ«é€£æº
  notebookLmUrl        String?                  @map("notebook_lm_url")         // NotebookLMãƒªãƒ³ã‚¯
  interviewSheetUrl    String?                  @map("interview_sheet_url")     // é¢è«‡ã‚·ãƒ¼ãƒˆURL
  aiAnalysisResult     Json?                    @map("ai_analysis_result")      // AIåˆ†æçµæœï¼ˆJSONï¼‰
  aiAnalysisDate       DateTime?                @map("ai_analysis_date")        // AIåˆ†æå®Ÿæ–½æ—¥
  feedbackSummary      String?                  @map("feedback_summary")        // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚µãƒãƒª
  feedbackSummaryCreatedAt DateTime?            @map("feedback_summary_created_at")

  // ğŸ†• ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç®¡ç†
  attachments          Json?                    // æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«é…åˆ—ï¼ˆè¤‡æ•°ã®URLã‚’ä¿å­˜ï¼‰

  // ğŸ†• ã‚µãƒãƒ¼ãƒˆé¢è«‡å°‚ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ (2025-10-08è¿½åŠ )
  interviewerRole          String?  @map("interviewer_role")
  // career_consultant: ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆ
  // counselor: ç›¸è«‡å“¡
  // supervisor: ä¸»ä»»ãƒ»ç®¡ç†è·
  // occupational_doctor: ç”£æ¥­åŒ»
  // eap_counselor: EAPã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼
  // mentor: ãƒ¡ãƒ³ã‚¿ãƒ¼

  interviewerQualification String?  @map("interviewer_qualification")
  // ä¿æœ‰è³‡æ ¼ï¼ˆå›½å®¶è³‡æ ¼ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆã€ç”£æ¥­ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼ã€è‡¨åºŠå¿ƒç†å£«ç­‰ï¼‰

  isExternalInterviewer    Boolean  @default(false) @map("is_external_interviewer")
  // å¤–éƒ¨å°‚é–€å®¶ã®å ´åˆtrueï¼ˆEAPã€å¤–éƒ¨ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼ç­‰ï¼‰

  // ã‚µãƒãƒ¼ãƒˆåˆ†é‡åˆ†é¡ï¼ˆsupporté¢è«‡å°‚ç”¨ï¼‰
  supportCategory          String?  @map("support_category")
  // career_development: ã‚­ãƒ£ãƒªã‚¢é–‹ç™ºæ”¯æ´
  // workplace_environment: è·å ´ç’°å¢ƒæ”¹å–„æ”¯æ´
  // feedback: ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ»æŒ‡å°
  // mental_health: ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹æ”¯æ´
  // conflict_resolution: å¯¾äººé–¢ä¿‚ãƒ»ç´›äº‰è§£æ±º
  // skill_improvement: ã‚¹ã‚­ãƒ«å‘ä¸Šæ”¯æ´
  // work_life_balance: ãƒ¯ãƒ¼ã‚¯ãƒ©ã‚¤ãƒ•ãƒãƒ©ãƒ³ã‚¹æ”¯æ´

  supportCategoryDisplay   String?  @map("support_category_display")
  // è¡¨ç¤ºç”¨ï¼ˆã‚­ãƒ£ãƒªã‚¢æ”¯æ´é¢è«‡ã€è·å ´ç’°å¢ƒæ”¯æ´é¢è«‡ç­‰ï¼‰

  // æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  motivationTypeId     String?                  @map("motivation_type_id")
  motivationConfidence ConfidenceLevel?         @map("motivation_confidence")
  typeSpecificNotes    String?                  @map("type_specific_notes")
  overallEvaluation    String?                  @map("overall_evaluation")
  potentialEvaluation  String?                  @map("potential_evaluation")
  turnoverRisk         String?                  @map("turnover_risk")
  developmentPlan      String?                  @map("development_plan")
  nextActionItems      Json?                    @map("next_action_items")
  notes                String?
  createdAt            DateTime                 @default(now()) @map("created_at")
  updatedAt            DateTime                 @updatedAt @map("updated_at")

  // Relations
  employee           Employee                   @relation(fields: [employeeId], references: [id])
  interviewer        Employee                   @relation("InterviewerRelation", fields: [interviewerId], references: [id])
  motivationType     MotivationType?            @relation(fields: [motivationTypeId], references: [id])
  motivationHistory  StaffMotivationHistory[]

  @@index([employeeId])
  @@index([motivationTypeId])
  @@map("interviews")
}
```

#### AIåˆ†æçµæœã®JSONæ§‹é€ ä¾‹

```json
{
  "analysisVersion": "1.0",
  "analyzedAt": "2024-02-15T10:30:00Z",
  "sentiment": {
    "overall": "positive",
    "score": 0.85
  },
  "keyTopics": [
    {
      "topic": "ã‚­ãƒ£ãƒªã‚¢æˆé•·",
      "importance": "high",
      "sentiment": "positive"
    },
    {
      "topic": "ãƒ¯ãƒ¼ã‚¯ãƒ©ã‚¤ãƒ•ãƒãƒ©ãƒ³ã‚¹",
      "importance": "medium",
      "sentiment": "neutral"
    }
  ],
  "strengths": [
    "æ¥­å‹™ã«å¯¾ã™ã‚‹ç©æ¥µçš„ãªå§¿å‹¢",
    "æ‚£è€…æ§˜ã‹ã‚‰ã®é«˜è©•ä¾¡"
  ],
  "concerns": [
    "æ™‚é–“å¤–å‹¤å‹™ã®å¢—åŠ å‚¾å‘"
  ],
  "recommendations": [
    "ãƒãƒ¼ãƒ ãƒªãƒ¼ãƒ€ãƒ¼ç ”ä¿®ã®å—è¬›ã‚’æ¨å¥¨",
    "æ¥­å‹™é‡ã®èª¿æ•´ã‚’æ¤œè¨"
  ],
  "turnoverRiskScore": 15,
  "engagementScore": 82
}
```

#### æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã®JSONæ§‹é€ ä¾‹

```json
[
  {
    "type": "interview_sheet",
    "name": "2024å¹´2æœˆåº¦_é¢è«‡ã‚·ãƒ¼ãƒˆ.pdf",
    "url": "https://storage.example.com/interviews/2024-02-15-sheet.pdf",
    "uploadedAt": "2024-02-15T09:00:00Z"
  },
  {
    "type": "notebook_lm",
    "name": "NotebookLMåˆ†æçµæœ",
    "url": "https://notebooklm.google.com/notebook/abc123",
    "createdAt": "2024-02-15T10:00:00Z"
  },
  {
    "type": "feedback_summary",
    "name": "è·å“¡å‘ã‘ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚µãƒãƒª.pdf",
    "url": "https://storage.example.com/feedbacks/2024-02-15-summary.pdf",
    "uploadedAt": "2024-02-15T11:00:00Z"
  }
]
```

#### æ©Ÿèƒ½èª¬æ˜

**NotebookLMãƒªãƒ³ã‚¯ç™»éŒ²**:
- Google NotebookLMã¨ã®é€£æº
- é¢è«‡è¨˜éŒ²ã‚’AIã§åˆ†æãƒ»è¦ç´„
- `notebookLmUrl`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ä¿å­˜

**AIåˆ†æ**:
- é¢è«‡å†…å®¹ã®ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†æ
- é›¢è·ãƒªã‚¹ã‚¯ã‚¹ã‚³ã‚¢ç®—å‡º
- ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ç®—å‡º
- çµæœã‚’`aiAnalysisResult`ï¼ˆJSONï¼‰ã«ä¿å­˜

**ã‚µãƒãƒªä½œæˆ**:
- è·å“¡å‘ã‘ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ–‡æ›¸ã®è‡ªå‹•ç”Ÿæˆ
- `feedbackSummary`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ä¿å­˜
- PDFç­‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯attachmentsã«ä¿å­˜

---

### EmployeeSkill ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¿½åŠ ã™ã¹ãã‚«ãƒ©ãƒ 

#### ç¾çŠ¶ã®å•é¡Œ
- ã‚¹ã‚­ãƒ«ãƒ¬ãƒ™ãƒ«ï¼ˆ1-5ï¼‰ã¯ã‚ã‚‹ãŒã€çµŒé¨“å¹´æ•°ãŒè¨˜éŒ²ã§ããªã„
- ç›®æ¨™ï¼ˆè³‡æ ¼å–å¾—äºˆå®šç­‰ï¼‰ãŒè¨˜éŒ²ã§ããªã„
- ã‚¹ã‚­ãƒ«ç¿’å¾—æ—¥ãŒè¨˜éŒ²ã§ããªã„

#### è¿½åŠ ã™ã¹ããƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

```prisma
model EmployeeSkill {
  id           String   @id @default(cuid())
  employeeId   String
  skillId      String
  level        Int      // 1-5ï¼ˆ1: åˆç´šã€2-3: ä¸­ç´šã€4-5: ä¸Šç´šï¼‰

  // ğŸ†• è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  experienceYears   Float?   @map("experience_years")      // çµŒé¨“å¹´æ•°ï¼ˆ0.5å¹´å˜ä½ï¼‰
  acquiredDate      DateTime? @map("acquired_date")        // ç¿’å¾—é–‹å§‹æ—¥
  goal              String?                                // ç›®æ¨™ï¼ˆä¾‹: èªå®šçœ‹è­·å¸«å–å¾—äºˆå®šã€ãƒ—ãƒªã‚»ãƒ—ã‚¿ãƒ¼èªå®šï¼‰
  goalDeadline      DateTime? @map("goal_deadline")        // ç›®æ¨™é”æˆæœŸé™
  lastPracticedDate DateTime? @map("last_practiced_date")  // æœ€çµ‚å®Ÿè·µæ—¥ï¼ˆã‚¹ã‚­ãƒ«ç¶­æŒç¢ºèªç”¨ï¼‰

  // æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  certifiedAt  DateTime?
  certifiedBy  String?
  expiryDate   DateTime?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  employee Employee @relation(fields: [employeeId], references: [id])
  skill    Skill    @relation(fields: [skillId], references: [id])

  @@unique([employeeId, skillId])
  @@map("employee_skills")
}
```

#### ãƒ¬ãƒ™ãƒ«å®šç¾©ã®æ¨™æº–åŒ–

| levelå€¤ | è¡¨ç¤ºãƒ©ãƒ™ãƒ« | èª¬æ˜ |
|---------|-----------|------|
| 1 | åˆç´š | åŸºç¤çŸ¥è­˜ã‚ã‚Šã€æŒ‡å°ä¸‹ã§å®Ÿæ–½å¯èƒ½ |
| 2 | ä¸­ç´šï¼ˆä¸‹ï¼‰ | ä¸€äººã§å®Ÿæ–½å¯èƒ½ã€æŒ‡å°ã¯è¦ã‚µãƒãƒ¼ãƒˆ |
| 3 | ä¸­ç´šï¼ˆä¸Šï¼‰ | ä¸€äººã§å®Ÿæ–½ãƒ»æŒ‡å°å¯èƒ½ |
| 4 | ä¸Šç´šï¼ˆä¸‹ï¼‰ | é«˜åº¦ãªå®Ÿè·µãƒ»æŒ‡å°å¯èƒ½ |
| 5 | ä¸Šç´šï¼ˆä¸Šï¼‰ | ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«ã€æ•™è‚²ä½“ç³»æ§‹ç¯‰å¯èƒ½ |

#### å½±éŸ¿ç¯„å›²
- ğŸ”´ è·å“¡ã‚«ãƒ«ãƒ†å€‹äººãƒšãƒ¼ã‚¸ > è³‡æ ¼ãƒ»å°‚é–€æ€§ã‚¿ãƒ– > å°‚é–€åˆ†é‡ãƒ»ã‚¹ã‚­ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³
- ğŸ”´ ã‚¹ã‚­ãƒ«ãƒãƒˆãƒªãƒƒã‚¯ã‚¹ï¼ˆéƒ¨ç½²åˆ¥ã‚¹ã‚­ãƒ«ä¸€è¦§ï¼‰
- ğŸ”´ è‚²æˆè¨ˆç”»ç­–å®š

---

### Employee ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¿½åŠ ã™ã¹ãã‚«ãƒ©ãƒ 

```prisma
model Employee {
  // æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰...

  // ğŸ†• è¿½åŠ ã™ã¹ããƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  employmentType      String?  @map("employment_type")      // permanent, contract, part_time
  bloodType           String?  @map("blood_type")            // A, B, O, AB
  hometown            String?  @map("hometown")              // å‡ºèº«åœ°ï¼ˆéƒ½é“åºœçœŒã¾ãŸã¯å¸‚åŒºç”ºæ‘ï¼‰
  birthplace          String?  @map("birthplace")            // å‡ºç”Ÿåœ°ï¼ˆã‚ˆã‚Šè©³ç´°ãªå ´åˆï¼‰
  emergencyContactName String? @map("emergency_contact_name")
  emergencyContactRelation String? @map("emergency_contact_relation")
  bankName            String?  @map("bank_name")             // çµ¦ä¸æŒ¯è¾¼éŠ€è¡Œ
  bankBranch          String?  @map("bank_branch")           // æ”¯åº—å
  bankAccountNumber   String?  @map("bank_account_number")   // å£åº§ç•ªå·
  taxDependents       Int?     @default(0) @map("tax_dependents")  // æ‰¶é¤Šäººæ•°
  socialInsuranceNumber String? @map("social_insurance_number")  // ç¤¾ä¼šä¿é™ºç•ªå·

  // Relationsè¿½åŠ 
  certifications       Certification[]
  salaries            Salary[]
  attendances         Attendance[]
  leaveBalances       LeaveBalance[]
  disciplinaryActions DisciplinaryAction[]
  awards              Award[]
  achievements        Achievement[]        // ğŸ†• å®Ÿç¸¾ãƒ»æˆæœ
  familyMembers       FamilyMember[]
  retirementDetail    RetirementDetail?
  employmentContracts EmploymentContract[]
  educationHistories  EducationHistory[]
  workExperiences     WorkExperience[]
  goals               Goal[]
  developmentPlans    DevelopmentPlan[]
  careerCourses       StaffCareerCourse[]  // ğŸ†• ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹å±¥æ­´
  courseChangeRequests CareerCourseChangeRequest[]  // ğŸ†• ã‚³ãƒ¼ã‚¹å¤‰æ›´ç”³è«‹
  clinicalLadderAssessments ClinicalLadderAssessment[]  // ğŸ†• ã‚¯ãƒªãƒ‹ã‚«ãƒ«ãƒ©ãƒ€ãƒ¼è©•ä¾¡
  professionalAssociations ProfessionalAssociation[]  // ğŸ†• å­¦ä¼šãƒ»è·èƒ½å›£ä½“åŠ å…¥æƒ…å ±
  performanceMetrics  PerformanceMetric[]  // ğŸ†• æ¥­å‹™å®Ÿç¸¾æŒ‡æ¨™
  contributionScores  OrganizationContributionScore[]  // ğŸ†• çµ„ç¹”è²¢çŒ®åº¦ã‚¹ã‚³ã‚¢
  projectParticipations ProjectParticipation[]  // ğŸ†• ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ å±¥æ­´
  workPatternAnalyses WorkPatternAnalysis[]  // ğŸ†• å‹¤å‹™ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ
  businessTrips       BusinessTrip[]       // ğŸ†• æ¥­å‹™å‡ºå¼µå±¥æ­´
  stressCheckResults  StressCheckResult[]  // ğŸ†• ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯çµæœ
  mentalHealthConsultations MentalHealthConsultation[]  // ğŸ†• ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ç›¸è«‡å±¥æ­´
  medicalHistories    MedicalHistory[]     // ğŸ†• ç—…æ­´
  medications         Medication[]         // ğŸ†• æœè–¬æƒ…å ±
  allergies           Allergy[]            // ğŸ†• ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æƒ…å ±
  competencyAssessments CompetencyAssessment[]  // ğŸ†• èƒ½åŠ›è©•ä¾¡
  v3Assessments       V3Assessment[]       // ğŸ†• V3è©•ä¾¡æ¨ç§»ï¼ˆå¤§å¹…æ‹¡å¼µç‰ˆï¼‰
  v3EvaluatorComments V3AssessmentComment[] @relation("V3Evaluator")  // ğŸ†• V3è©•ä¾¡ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆè©•ä¾¡è€…ã¨ã—ã¦ï¼‰
  mentoringAsMentor   MentoringRelationship[] @relation("MentorRelations")  // ğŸ†• ãƒ¡ãƒ³ã‚¿ãƒ¼ã¨ã—ã¦ã®é–¢ä¿‚
  mentoringAsMentee   MentoringRelationship[] @relation("MenteeRelations")  // ğŸ†• ãƒ¡ãƒ³ãƒ†ã‚£ãƒ¼ã¨ã—ã¦ã®é–¢ä¿‚
  mindsetProfile      StaffMindsetProfile? // ğŸ†• ãƒã‚¤ãƒ³ãƒ‰ãƒ»å¿—å‘æ€§ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«
}
```

---

## ğŸ¯ Priority 3: è©•ä¾¡åˆ†æãƒ»ç ”ä¿®åŠ¹æœè¿½è·¡ï¼ˆè¿½åŠ é …ç›®ï¼‰

### 12-1. ç ”ä¿®åŠ¹æœãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- ç ”ä¿®å—è¬›å±¥æ­´ã¯TrainingHistoryã§ç®¡ç†ã—ã¦ã„ã‚‹ãŒã€**è©•ä¾¡ã¨ã®ç›¸é–¢**ãŒè¨˜éŒ²ã§ããªã„
- ç ”ä¿®å‰å¾Œã®ã‚¹ã‚³ã‚¢æ¯”è¼ƒãŒã§ããªã„
- ç ”ä¿®åŠ¹æœï¼ˆROIï¼‰ãŒæ¸¬å®šã§ããªã„
- ã©ã®ç ”ä¿®ãŒåŠ¹æœçš„ã‹ã®åˆ†æãŒã§ããªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `TrainingEffectTrackings`ï¼ˆç ”ä¿®åŠ¹æœæ¸¬å®šï¼‰

```prisma
model TrainingEffectTracking {
  id                    String   @id @default(cuid())
  employeeId            String   @map("employee_id")
  trainingHistoryId     String   @map("training_history_id")  // TrainingHistory.id

  // ç ”ä¿®æƒ…å ±
  trainingName          String   @map("training_name")
  trainingCategory      String   @map("training_category")
  // "specialized": å°‚é–€æŠ€è¡“ï¼ˆæ„ŸæŸ“ç®¡ç†ç ”ä¿®ã€åŒ»ç™‚å®‰å…¨ç®¡ç†ç­‰ï¼‰
  // "management": ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆï¼ˆãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ç ”ä¿®ç­‰ï¼‰
  // "mandatory": æ³•å®šç ”ä¿®ï¼ˆåŒ»ç™‚å®‰å…¨ã€æ„ŸæŸ“å¯¾ç­–ç­‰ï¼‰
  // "soft_skill": ã‚½ãƒ•ãƒˆã‚¹ã‚­ãƒ«ï¼ˆã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³æŠ€æ³•ç­‰ï¼‰

  trainingDate          DateTime @map("training_date")
  trainingHours         Float    @map("training_hours")

  // ğŸ†• ç ”ä¿®å‰è©•ä¾¡
  preTrainingScore      Float?   @map("pre_training_score")     // å—è¬›å‰ã‚¹ã‚³ã‚¢ï¼ˆ0-100ç‚¹ï¼‰
  preTrainingDate       DateTime? @map("pre_training_date")      // äº‹å‰è©•ä¾¡å®Ÿæ–½æ—¥

  // ğŸ†• ç ”ä¿®å¾Œè©•ä¾¡
  postTrainingScore     Float?   @map("post_training_score")    // å—è¬›å¾Œã‚¹ã‚³ã‚¢ï¼ˆ0-100ç‚¹ï¼‰
  postTrainingDate      DateTime? @map("post_training_date")     // äº‹å¾Œè©•ä¾¡å®Ÿæ–½æ—¥

  // ğŸ†• åŠ¹æœæ¸¬å®š
  scoreImprovement      Float?   @map("score_improvement")      // ã‚¹ã‚³ã‚¢å‘ä¸Šé‡ï¼ˆ+13ç‚¹ç­‰ï¼‰
  improvementRate       Float?   @map("improvement_rate")       // å‘ä¸Šç‡ï¼ˆ%ï¼‰
  impactLevel           String?  @map("impact_level")
  // "very_high": éå¸¸ã«é«˜ã„ï¼ˆ90%ä»¥ä¸Šï¼‰
  // "high": é«˜ã„ï¼ˆ70-89%ï¼‰
  // "moderate": ä¸­ç¨‹åº¦ï¼ˆ50-69%ï¼‰
  // "low": ä½ã„ï¼ˆ50%æœªæº€ï¼‰

  // ğŸ†• æ¸¬å®šå¯¾è±¡é ˜åŸŸ
  targetSkillArea       String?  @map("target_skill_area")      // å¯¾è±¡ã‚¹ã‚­ãƒ«é ˜åŸŸ
  // "infection_control": æ„ŸæŸ“ç®¡ç†
  // "safety_management": å®‰å…¨ç®¡ç†
  // "leadership": ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—
  // "communication": ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³
  // "specialized_nursing": å°‚é–€çœ‹è­·æŠ€è¡“
  // "medical_knowledge": åŒ»ç™‚çŸ¥è­˜
  // "team_work": ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
  // "problem_solving": å•é¡Œè§£æ±º

  // ğŸ†• æŠ•è³‡å¯¾åŠ¹æœï¼ˆROIï¼‰
  trainingCost          Decimal? @map("training_cost") @db.Decimal(10, 2)  // ç ”ä¿®è²»ç”¨ï¼ˆå††ï¼‰
  roi                   Float?                                  // ROI = (åŠ¹æœ / ã‚³ã‚¹ãƒˆ) Ã— 100
  // åŠ¹æœ = ã‚¹ã‚³ã‚¢å‘ä¸Š Ã— æƒ³å®šå¹´é–“åŠ¹æœé¡

  // ğŸ†• ç ”ä¿®åŠ¹æœã®æŒç¶šæ€§
  threeMonthScore       Float?   @map("three_month_score")      // 3ãƒ¶æœˆå¾Œã‚¹ã‚³ã‚¢
  sixMonthScore         Float?   @map("six_month_score")        // 6ãƒ¶æœˆå¾Œã‚¹ã‚³ã‚¢
  retentionRate         Float?   @map("retention_rate")         // åŠ¹æœä¿æŒç‡ï¼ˆ%ï¼‰

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")

  // Relations
  employee              Employee @relation(fields: [employeeId], references: [id])
  trainingHistory       TrainingHistory @relation(fields: [trainingHistoryId], references: [id])

  @@index([employeeId])
  @@index([trainingCategory])
  @@index([impactLevel])
  @@index([trainingDate(sort: Desc)])
  @@map("training_effect_trackings")
}
```

#### ä½¿ç”¨ä¾‹

**æ„ŸæŸ“ç®¡ç†ç ”ä¿®ã®åŠ¹æœæ¸¬å®š:**
```json
{
  "trainingName": "æ„ŸæŸ“ç®¡ç†ç ”ä¿®",
  "trainingCategory": "specialized",
  "trainingDate": "2023-06-15",
  "trainingHours": 8,
  "preTrainingScore": 65,
  "postTrainingScore": 78,
  "scoreImprovement": 13,
  "improvementRate": 20.0,
  "impactLevel": "very_high",
  "targetSkillArea": "infection_control",
  "trainingCost": 15000,
  "roi": 230
}
```

#### é›†è¨ˆãƒ»åˆ†æã‚¯ã‚¨ãƒªä¾‹

**ç ”ä¿®ã‚«ãƒ†ã‚´ãƒªåˆ¥å¹³å‡åŠ¹æœ:**
```sql
SELECT
  training_category,
  COUNT(*) as training_count,
  AVG(score_improvement) as avg_improvement,
  AVG(roi) as avg_roi
FROM training_effect_trackings
WHERE post_training_score IS NOT NULL
GROUP BY training_category
ORDER BY avg_improvement DESC;
```

**åŠ¹æœçš„ãªç ”ä¿®ãƒˆãƒƒãƒ—5:**
```sql
SELECT
  training_name,
  AVG(score_improvement) as avg_improvement,
  COUNT(*) as participant_count
FROM training_effect_trackings
GROUP BY training_name
HAVING COUNT(*) >= 5
ORDER BY avg_improvement DESC
LIMIT 5;
```

---

### 12-2. ã‚¹ã‚­ãƒ«è©•ä¾¡ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆãƒ†ãƒ¼ãƒ–ãƒ« âŒ å®Œå…¨ã«ä¸è¶³

#### ç¾çŠ¶ã®å•é¡Œ
- CompetencyAssessmentã¯ã‚ã‚‹ãŒã€**8è»¸ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ**ç”¨ã®è©³ç´°è©•ä¾¡ãŒãªã„
- å°‚é–€çŸ¥è­˜ã€å®Ÿå‹™ã‚¹ã‚­ãƒ«ã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç­‰ã®å€‹åˆ¥è©•ä¾¡ãŒã§ããªã„
- éƒ¨é–€å¹³å‡ã¨ã®æ¯”è¼ƒãƒ‡ãƒ¼ã‚¿ãŒãªã„
- å¼·ã¿ãƒ»æ”¹å–„ç‚¹ã®è‡ªå‹•åˆ¤å®šãŒã§ããªã„

#### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«: `SkillRadarAssessments`ï¼ˆ8è»¸ã‚¹ã‚­ãƒ«è©•ä¾¡ï¼‰

```prisma
model SkillRadarAssessment {
  id                      String   @id @default(cuid())
  employeeId              String   @map("employee_id")
  assessmentDate          DateTime @map("assessment_date")
  assessmentPeriod        String?  @map("assessment_period")  // "2023å¹´åº¦"

  // ğŸ†• 8è»¸è©•ä¾¡ï¼ˆ0-100ç‚¹ï¼‰
  specializedKnowledge    Float    @map("specialized_knowledge")    // å°‚é–€çŸ¥è­˜
  practicalSkills         Float    @map("practical_skills")         // å®Ÿå‹™ã‚¹ã‚­ãƒ«
  communication           Float                                     // ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³
  leadership              Float                                     // ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—
  problemSolving          Float    @map("problem_solving")          // å•é¡Œè§£æ±ºåŠ›
  teamwork                Float                                     // å”èª¿æ€§
  innovation              Float                                     // é©æ–°æ€§
  responsibility          Float                                     // è²¬ä»»æ„Ÿ

  // ğŸ†• çµ±è¨ˆå€¤
  overallAverage          Float    @map("overall_average")          // 8è»¸ã®å¹³å‡å€¤
  standardDeviation       Float?   @map("standard_deviation")       // æ¨™æº–åå·®ï¼ˆãƒãƒ©ãƒ³ã‚¹æŒ‡æ¨™ï¼‰

  // ğŸ†• éƒ¨é–€å¹³å‡ã¨ã®æ¯”è¼ƒ
  departmentAverage       Float?   @map("department_average")       // éƒ¨é–€å¹³å‡ã‚¹ã‚³ã‚¢
  differenceFromDeptAvg   Float?   @map("difference_from_dept_avg") // éƒ¨é–€å¹³å‡ã¨ã®å·®åˆ†

  // ğŸ†• åŒè·ç¨®å¹³å‡ã¨ã®æ¯”è¼ƒ
  positionAverage         Float?   @map("position_average")         // åŒè·ç¨®å¹³å‡
  differenceFromPosAvg    Float?   @map("difference_from_pos_avg")  // åŒè·ç¨®å¹³å‡ã¨ã®å·®åˆ†

  // ğŸ†• åŒå¹´ä»£å¹³å‡ã¨ã®æ¯”è¼ƒ
  ageGroupAverage         Float?   @map("age_group_average")        // åŒå¹´ä»£å¹³å‡
  differenceFromAgeAvg    Float?   @map("difference_from_age_avg")  // åŒå¹´ä»£å¹³å‡ã¨ã®å·®åˆ†

  // ğŸ†• å¼·ã¿ãƒ»æ”¹å–„ç‚¹ã®è‡ªå‹•åˆ¤å®šï¼ˆJSONé…åˆ—ï¼‰
  topStrengths            Json?    @map("top_strengths")
  // [
  //   { "skill": "å”èª¿æ€§", "score": 95, "rank": 1, "vsAverage": +18 },
  //   { "skill": "å®Ÿå‹™ã‚¹ã‚­ãƒ«", "score": 90, "rank": 2, "vsAverage": +12 },
  //   { "skill": "è²¬ä»»æ„Ÿ", "score": 88, "rank": 3, "vsAverage": +10 }
  // ]

  improvementAreas        Json?    @map("improvement_areas")
  // [
  //   { "skill": "é©æ–°æ€§", "score": 55, "rank": 8, "vsAverage": -8 },
  //   { "skill": "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—", "score": 60, "rank": 7, "vsAverage": -5 },
  //   { "skill": "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³", "score": 75, "rank": 6, "vsAverage": +2 }
  // ]

  // ğŸ†• è©•ä¾¡è€…æƒ…å ±
  assessorId              String?  @map("assessor_id")              // è©•ä¾¡è€…ã®EmployeeID
  assessmentMethod        String?  @map("assessment_method")
  // "self": è‡ªå·±è©•ä¾¡
  // "supervisor": ä¸Šå¸è©•ä¾¡
  // "360": 360åº¦è©•ä¾¡
  // "combined": è¤‡åˆè©•ä¾¡

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")

  // Relations
  employee                Employee @relation(fields: [employeeId], references: [id])
  assessor                Employee? @relation("SkillAssessor", fields: [assessorId], references: [id])

  @@index([employeeId])
  @@index([assessmentDate(sort: Desc)])
  @@index([assessmentPeriod])
  @@map("skill_radar_assessments")
}
```

#### 8è»¸è©•ä¾¡ã®å®šç¾©

| è»¸ | èª¬æ˜ | æ¸¬å®šé …ç›®ä¾‹ |
|----|------|-----------|
| å°‚é–€çŸ¥è­˜ | è·ç¨®ã«å¿…è¦ãªå°‚é–€çš„çŸ¥è­˜ | åŒ»ç™‚çŸ¥è­˜ã€çœ‹è­·ç†è«–ã€æœ€æ–°æŠ€è¡“ã®ç†è§£åº¦ |
| å®Ÿå‹™ã‚¹ã‚­ãƒ« | å®Ÿéš›ã®æ¥­å‹™é‚è¡Œèƒ½åŠ› | æŠ€è¡“ã®æ­£ç¢ºæ€§ã€å‡¦ç†é€Ÿåº¦ã€ãƒŸã‚¹ã®å°‘ãªã• |
| ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ | å¯¾äººã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ | æ‚£è€…å¯¾å¿œã€å ±é€£ç›¸ã€å¤šè·ç¨®é€£æº |
| ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ— | æŒ‡å°åŠ›ãƒ»çµ±ç‡åŠ› | å¾Œè¼©æŒ‡å°ã€ãƒãƒ¼ãƒ ç‰½å¼•ã€æ„æ€æ±ºå®š |
| å•é¡Œè§£æ±ºåŠ› | èª²é¡Œç™ºè¦‹ãƒ»è§£æ±ºèƒ½åŠ› | ãƒˆãƒ©ãƒ–ãƒ«å¯¾å¿œã€æ”¹å–„ææ¡ˆã€åˆ†æåŠ› |
| å”èª¿æ€§ | ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | å”åŠ›å§¿å‹¢ã€ç›¸äº’æ”¯æ´ã€æŸ”è»Ÿæ€§ |
| é©æ–°æ€§ | æ–°ã—ã„å–ã‚Šçµ„ã¿ | æ”¹å–„æ´»å‹•ã€æ–°æŠ€è¡“å°å…¥ã€å‰µæ„å·¥å¤« |
| è²¬ä»»æ„Ÿ | æ¥­å‹™ã¸ã®è²¬ä»»æ„è­˜ | æ¥­å‹™å®Œé‚ã€æ™‚é–“ç®¡ç†ã€è¦å¾‹éµå®ˆ |

#### ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆæç”»ã‚¯ã‚¨ãƒª

```sql
SELECT
  specialized_knowledge,
  practical_skills,
  communication,
  leadership,
  problem_solving,
  teamwork,
  innovation,
  responsibility,
  department_average
FROM skill_radar_assessments
WHERE employee_id = 'xxx'
ORDER BY assessment_date DESC
LIMIT 1;
```

#### éƒ¨é–€å¹³å‡è¨ˆç®—ã‚¯ã‚¨ãƒª

```sql
SELECT
  e.department_id,
  AVG(s.specialized_knowledge) as avg_specialized_knowledge,
  AVG(s.practical_skills) as avg_practical_skills,
  AVG(s.communication) as avg_communication,
  AVG(s.leadership) as avg_leadership,
  AVG(s.problem_solving) as avg_problem_solving,
  AVG(s.teamwork) as avg_teamwork,
  AVG(s.innovation) as avg_innovation,
  AVG(s.responsibility) as avg_responsibility
FROM skill_radar_assessments s
JOIN employees e ON s.employee_id = e.id
WHERE s.assessment_period = '2023å¹´åº¦'
GROUP BY e.department_id;
```

---

### 12-3. Employeeãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®é–¢é€£è¿½åŠ 

```prisma
model Employee {
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

  // ğŸ†• ç ”ä¿®åŠ¹æœè¿½è·¡
  trainingEffects       TrainingEffectTracking[]  // ğŸ†• ç ”ä¿®åŠ¹æœå±¥æ­´

  // ğŸ†• ã‚¹ã‚­ãƒ«è©•ä¾¡
  skillRadarAssessments SkillRadarAssessment[]    // ğŸ†• 8è»¸ã‚¹ã‚­ãƒ«è©•ä¾¡å±¥æ­´
  assessedSkills        SkillRadarAssessment[] @relation("SkillAssessor")  // ğŸ†• è©•ä¾¡è€…ã¨ã—ã¦

  // æ—¢å­˜Relations
  v3Assessments       V3Assessment[]
  v3EvaluatorComments V3AssessmentComment[] @relation("V3Evaluator")
  mentoringAsMentor   MentoringRelationship[] @relation("MentorRelations")
  mentoringAsMentee   MentoringRelationship[] @relation("MenteeRelations")
  mindsetProfile      StaffMindsetProfile?
}
```

---

## 13. âš¡ æ¨ªæ–­çš„çµ±åˆåˆ†æãƒ»æˆé•·ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ï¼ˆPriority 1ï¼‰

### èƒŒæ™¯
å€‹äººãƒšãƒ¼ã‚¸ã®ã€Œæ¨ªæ–­çš„çµ±åˆåˆ†æãƒ»æˆé•·ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã€ã‚¿ãƒ–ã§ã¯ã€ä»¥ä¸‹ã®é«˜åº¦ãªçµ±åˆåˆ†æãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ï¼š

1. **çµ±åˆåˆ†æã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³** - è©•ä¾¡ã€é¢è«‡ã€ç ”ä¿®ã€å®Ÿç¸¾ãªã©å…¨ã‚·ã‚¹ãƒ†ãƒ ã®å‡ºæ¥äº‹ã‚’çµ±ä¸€ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã§è¡¨ç¤º
2. **æˆé•·ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ** - V1/V2/V3è©•ä¾¡ã€é¢è«‡ã€ç ”ä¿®ã‚¹ã‚³ã‚¢ã®æ™‚ç³»åˆ—æ¨ç§»ã¨ç›¸é–¢åˆ†æ
3. **ã‚¿ãƒ¬ãƒ³ãƒˆãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª** - ã‚¹ã‚­ãƒ«Ã—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®9ãƒã‚¹ãƒãƒˆãƒªã‚¯ã‚¹åˆ†æ
4. **å¼·ã¿ãƒ»èª²é¡Œã®æ¨ªæ–­åˆ†æ** - å…¨ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰å°å‡ºã•ã‚ŒãŸç·åˆçš„ãªå¼·ã¿ãƒ»èª²é¡Œ
5. **AIæˆé•·äºˆæ¸¬** - æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹å°†æ¥ã®ã‚¹ã‚³ã‚¢äºˆæ¸¬ãƒ»æ˜‡é€²å¯èƒ½æ€§åˆ†æ

ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®3ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå¿…è¦ã§ã™ã€‚

---

### 13-1. IntegratedGrowthTimelineï¼ˆçµ±åˆæˆé•·ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼‰

#### ç›®çš„
è©•ä¾¡ã€é¢è«‡ã€ç ”ä¿®ã€å®Ÿç¸¾ã€è³‡æ ¼å–å¾—ãªã©ã€å…¨ã‚·ã‚¹ãƒ†ãƒ ã®é‡è¦ã‚¤ãƒ™ãƒ³ãƒˆã‚’çµ±ä¸€ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ä¸Šã§ç®¡ç†ãƒ»å¯è¦–åŒ–ã™ã‚‹ãŸã‚ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã€‚

#### ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

```prisma
model IntegratedGrowthTimeline {
  id                    String   @id @default(cuid())
  employeeId            String   @map("employee_id")

  // ã‚¤ãƒ™ãƒ³ãƒˆåŸºæœ¬æƒ…å ±
  eventDate             DateTime @map("event_date")
  eventType             String   @map("event_type")
  // hiring, promotion, evaluation_v1, evaluation_v2, evaluation_v3,
  // interview_regular, interview_special, interview_support,
  // training_internal, training_external, achievement, certification,
  // career_path_selection, mentoring_start, mentoring_end
  eventTitle            String   @map("event_title")
  eventDescription      String?  @db.Text @map("event_description")

  // ã‚¤ãƒ™ãƒ³ãƒˆã®é‡è¦åº¦ãƒ»å½±éŸ¿åº¦
  impactLevel           String?  @map("impact_level")
  // critical, high, medium, low
  isPositive            Boolean  @default(true) @map("is_positive")
  isMilestone           Boolean  @default(false) @map("is_milestone")

  // é–¢é€£ãƒ‡ãƒ¼ã‚¿ã¸ã®å‚ç…§ï¼ˆä»»æ„ï¼‰
  relatedAssessmentId   String?  @map("related_assessment_id")
  relatedInterviewId    String?  @map("related_interview_id")
  relatedTrainingId     String?  @map("related_training_id")
  relatedAchievementId  String?  @map("related_achievement_id")

  // ã‚¹ã‚³ã‚¢ãƒ»è©•ä¾¡ï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰
  scoreValue            Float?   @map("score_value")
  scoreType             String?  @map("score_type")
  // v1_score, v2_score, v3_total, training_score, interview_rating

  // ã‚¿ã‚°ä»˜ã‘
  tags                  Json?    // ["leadership", "skill_improvement", "promotion"]
  category              String?  // evaluation, development, achievement, career

  // AIåˆ†æ
  aiGeneratedSummary    String?  @db.Text @map("ai_generated_summary")
  relatedStrengths      Json?    @map("related_strengths")
  // ["communication", "technical_skill"]
  relatedWeaknesses     Json?    @map("related_weaknesses")

  // ãƒ¡ã‚¿æƒ…å ±
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  createdBy             String?  @map("created_by")
  dataSource            String?  @map("data_source")
  // auto_generated, manual_entry, imported

  // Relations
  employee              Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId, eventDate])
  @@index([eventType])
  @@index([impactLevel])
  @@index([isMilestone])
  @@map("integrated_growth_timelines")
}
```

#### ä½¿ç”¨ä¾‹

**ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤ºã‚¯ã‚¨ãƒª**
```sql
SELECT
  event_date,
  event_type,
  event_title,
  event_description,
  impact_level,
  is_milestone,
  score_value,
  tags
FROM integrated_growth_timelines
WHERE employee_id = 'emp123'
ORDER BY event_date DESC
LIMIT 20;
```

**ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã®ã¿æŠ½å‡º**
```sql
SELECT * FROM integrated_growth_timelines
WHERE employee_id = 'emp123'
  AND is_milestone = true
ORDER BY event_date DESC;
```

**ç‰¹å®šã‚«ãƒ†ã‚´ãƒªã®ã‚¤ãƒ™ãƒ³ãƒˆæ¨ç§»**
```sql
SELECT
  DATE_FORMAT(event_date, '%Y-%m') as month,
  COUNT(*) as event_count,
  AVG(score_value) as avg_score
FROM integrated_growth_timelines
WHERE employee_id = 'emp123'
  AND event_type IN ('evaluation_v3', 'training_internal', 'training_external')
  AND score_value IS NOT NULL
GROUP BY month
ORDER BY month;
```

---

### 13-2. TalentPortfolioAnalysisï¼ˆã‚¿ãƒ¬ãƒ³ãƒˆãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªåˆ†æï¼‰

#### ç›®çš„
ã‚¹ã‚­ãƒ«ï¼ˆèƒ½åŠ›ï¼‰Ã— ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼ˆå®Ÿç¸¾ï¼‰ã®9ãƒã‚¹ãƒãƒˆãƒªã‚¯ã‚¹ã«ã‚ˆã‚‹ã‚¿ãƒ¬ãƒ³ãƒˆåˆ†é¡ã‚’ç®¡ç†ã€‚å°†æ¥ã®ãƒã‚¤ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ¼å€™è£œã®ç‰¹å®šã‚„è‚²æˆæˆ¦ç•¥ç«‹æ¡ˆã«æ´»ç”¨ã€‚

#### ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

```prisma
model TalentPortfolioAnalysis {
  id                    String   @id @default(cuid())
  employeeId            String   @map("employee_id")

  // åˆ†ææœŸé–“
  analysisPeriod        String   @map("analysis_period") // "2023å¹´åº¦"
  analysisDate          DateTime @map("analysis_date")

  // ã‚¹ã‚­ãƒ«è»¸ï¼ˆèƒ½åŠ›ï¼‰0-100ç‚¹
  skillScore            Float    @map("skill_score")
  skillLevel            String   @map("skill_level")
  // high (67-100), medium (34-66), low (0-33)
  skillDataSources      Json?    @map("skill_data_sources")
  // ["v3_technical_score", "radar_chart", "training_results"]

  // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è»¸ï¼ˆå®Ÿç¸¾ï¼‰0-100ç‚¹
  performanceScore      Float    @map("performance_score")
  performanceLevel      String   @map("performance_level")
  // high, medium, low
  performanceDataSources Json?   @map("performance_data_sources")
  // ["v3_contribution_score", "achievements", "project_results"]

  // 9ãƒã‚¹ãƒãƒˆãƒªã‚¯ã‚¹åˆ†é¡
  matrixPosition        String   @map("matrix_position")
  // high_potential (ã‚¹ã‚­ãƒ«é«˜Ã—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é«˜)
  // consistent_performer (ã‚¹ã‚­ãƒ«ä¸­Ã—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é«˜)
  // future_star (ã‚¹ã‚­ãƒ«é«˜Ã—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä¸­)
  // core_performer (ã‚¹ã‚­ãƒ«ä¸­Ã—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä¸­)
  // growth_needed (ã‚¹ã‚­ãƒ«ä½Ã—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä¸­)
  // inconsistent (ã‚¹ã‚­ãƒ«é«˜Ã—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½)
  // solid_contributor (ã‚¹ã‚­ãƒ«ä¸­Ã—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½)
  // underperformer (ã‚¹ã‚­ãƒ«ä½Ã—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½)
  // developing (ã‚¹ã‚­ãƒ«ä½Ã—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é«˜ - ä¼¸ã³ç››ã‚Š)

  // åº§æ¨™ï¼ˆå¯è¦–åŒ–ç”¨ï¼‰
  xCoordinate           Float    @map("x_coordinate") // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è»¸
  yCoordinate           Float    @map("y_coordinate") // ã‚¹ã‚­ãƒ«è»¸

  // ãƒã‚¸ã‚·ãƒ§ãƒ³å¤‰åŒ–è¿½è·¡
  previousPosition      String?  @map("previous_position")
  positionChangeDate    DateTime? @map("position_change_date")
  isImproved            Boolean  @default(false) @map("is_improved")

  // éƒ¨é–€ãƒ»æ³•äººå†…æ¯”è¼ƒ
  departmentRank        Int?     @map("department_rank")
  departmentPercentile  Float?   @map("department_percentile")
  corporateRank         Int?     @map("corporate_rank")
  corporatePercentile   Float?   @map("corporate_percentile")

  // AIæ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  recommendedActions    Json?    @map("recommended_actions")
  // [
  //   {action: "leadership_training", priority: "high"},
  //   {action: "project_lead_opportunity", priority: "medium"}
  // ]
  potentialRoles        Json?    @map("potential_roles")
  // ["team_leader", "specialist", "manager_candidate"]

  // ãƒªã‚¹ã‚¯ãƒ»æ©Ÿä¼šåˆ†æ
  retentionRisk         String?  @map("retention_risk")
  // high, medium, low
  promotionReadiness    String?  @map("promotion_readiness")
  // ready, almost_ready, not_ready

  // ãƒ¡ã‚¿æƒ…å ±
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  calculatedBy          String?  @map("calculated_by")
  // system_auto, hr_manual

  // Relations
  employee              Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId, analysisPeriod])
  @@index([matrixPosition])
  @@index([skillLevel, performanceLevel])
  @@index([analysisDate])
  @@map("talent_portfolio_analyses")
}
```

#### 9ãƒã‚¹ãƒãƒˆãƒªã‚¯ã‚¹å®šç¾©

| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼¼ã‚¹ã‚­ãƒ« | ä½ (0-33) | ä¸­ (34-66) | é«˜ (67-100) |
|---------------------|----------|-----------|------------|
| **é«˜ (67-100)** | Developing<br>ä¼¸ã³ç››ã‚Š | Consistent Performer<br>å®‰å®šæˆæœ | High Potential<br>ãƒã‚¤ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«â­ |
| **ä¸­ (34-66)** | Growth Needed<br>è‚²æˆè¦ | Core Performer<br>ã‚³ã‚¢äººæ | Future Star<br>å°†æ¥ã®æ˜Ÿ |
| **ä½ (0-33)** | Underperformer<br>è¦æ”¯æ´ | Solid Contributor<br>å …å®Ÿå‹ | Inconsistent<br>ä¸å®‰å®š |

#### ä½¿ç”¨ä¾‹

**æœ€æ–°ã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªãƒã‚¸ã‚·ãƒ§ãƒ³å–å¾—**
```sql
SELECT
  e.name,
  t.skill_score,
  t.performance_score,
  t.matrix_position,
  t.department_percentile,
  t.recommended_actions
FROM talent_portfolio_analyses t
JOIN employees e ON t.employee_id = e.id
WHERE t.analysis_period = '2023å¹´åº¦'
  AND t.matrix_position = 'high_potential'
ORDER BY t.corporate_percentile DESC;
```

**ãƒã‚¸ã‚·ãƒ§ãƒ³å¤‰é·ã®è¿½è·¡**
```sql
SELECT
  analysis_period,
  matrix_position,
  skill_score,
  performance_score,
  department_rank
FROM talent_portfolio_analyses
WHERE employee_id = 'emp123'
ORDER BY analysis_date;
```

---

### 13-3. GrowthPredictionï¼ˆAIæˆé•·äºˆæ¸¬ï¼‰

#### ç›®çš„
æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹å°†æ¥ã®ã‚¹ã‚³ã‚¢äºˆæ¸¬ã€æ˜‡é€²å¯èƒ½æ€§ã€æˆé•·è»Œé“ã®äºˆæ¸¬ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ‰ãƒªãƒ–ãƒ³ãªäººæè‚²æˆè¨ˆç”»ã®ç«‹æ¡ˆã«æ´»ç”¨ã€‚

#### ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

```prisma
model GrowthPrediction {
  id                    String   @id @default(cuid())
  employeeId            String   @map("employee_id")

  // äºˆæ¸¬åŸºæº–æ—¥
  predictionDate        DateTime @map("prediction_date")
  basedOnDataUntil      DateTime @map("based_on_data_until")

  // ãƒ¢ãƒ‡ãƒ«æƒ…å ±
  modelVersion          String   @map("model_version") // "v1.2.3"
  modelType             String   @map("model_type")
  // regression, time_series, ensemble, neural_network
  confidenceLevel       Float    @map("confidence_level") // 0-1

  // å°†æ¥ã‚¹ã‚³ã‚¢äºˆæ¸¬ï¼ˆæ™‚ç³»åˆ—ï¼‰
  predictedScores       Json     @map("predicted_scores")
  // [
  //   {period: "2024-Q1", v3_total: 85.5, confidence: 0.82},
  //   {period: "2024-Q2", v3_total: 87.2, confidence: 0.75},
  //   {period: "2024-Q3", v3_total: 88.9, confidence: 0.68}
  // ]

  // æˆé•·é€Ÿåº¦äºˆæ¸¬
  predictedGrowthRate   Float?   @map("predicted_growth_rate")
  // å¹´é–“æˆé•·ç‡ï¼ˆ%ï¼‰
  growthTrajectory      String?  @map("growth_trajectory")
  // rapid, steady, plateau, declining

  // æ˜‡é€²å¯èƒ½æ€§äºˆæ¸¬
  promotionProbability  Json?    @map("promotion_probability")
  // {
  //   "next_level": "ä¸»ä»»",
  //   "1year": 0.15,
  //   "2year": 0.45,
  //   "3year": 0.72
  // }
  expectedPromotionDate DateTime? @map("expected_promotion_date")

  // ã‚¹ã‚­ãƒ«ç™ºå±•äºˆæ¸¬
  skillDevelopment      Json?    @map("skill_development")
  // [
  //   {skill: "leadership", current: 65, predicted_1y: 72, predicted_2y: 80},
  //   {skill: "technical", current: 85, predicted_1y: 88, predicted_2y: 90}
  // ]

  // ãƒªã‚¹ã‚¯äºˆæ¸¬
  turnoverRisk          Float?   @map("turnover_risk") // 0-1
  burnoutRisk           Float?   @map("burnout_risk")  // 0-1
  performanceRisk       String?  @map("performance_risk")
  // low, medium, high

  // æ¨å¥¨æ–½ç­–
  recommendedInterventions Json? @map("recommended_interventions")
  // [
  //   {type: "training", topic: "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ç ”ä¿®", impact: "high"},
  //   {type: "mentoring", duration: "6months", impact: "medium"}
  // ]

  // ç‰¹å¾´é‡ã®é‡è¦åº¦
  topInfluencingFactors Json?    @map("top_influencing_factors")
  // [
  //   {factor: "v3_technical_score", weight: 0.35},
  //   {factor: "training_completion_rate", weight: 0.22},
  //   {factor: "interview_positive_trend", weight: 0.18}
  // ]

  // äºˆæ¸¬ç²¾åº¦è©•ä¾¡ï¼ˆå®Ÿç¸¾ã¨ã®æ¯”è¼ƒï¼‰
  actualVsPredicted     Json?    @map("actual_vs_predicted")
  // {period: "2023-Q4", predicted: 85.5, actual: 84.2, error: -1.3}
  predictionAccuracy    Float?   @map("prediction_accuracy") // 0-1

  // ãƒ¡ã‚¿æƒ…å ±
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  isActive              Boolean  @default(true) @map("is_active")
  supersededBy          String?  @map("superseded_by")
  // æ–°ã—ã„äºˆæ¸¬ãŒä½œæˆã•ã‚ŒãŸå ´åˆã€å¤ã„äºˆæ¸¬ã®ID

  // Relations
  employee              Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId, predictionDate])
  @@index([isActive])
  @@index([growthTrajectory])
  @@map("growth_predictions")
}
```

#### ä½¿ç”¨ä¾‹

**æœ€æ–°ã®æˆé•·äºˆæ¸¬å–å¾—**
```sql
SELECT
  e.name,
  g.predicted_scores,
  g.predicted_growth_rate,
  g.promotion_probability,
  g.confidence_level,
  g.recommended_interventions
FROM growth_predictions g
JOIN employees e ON g.employee_id = e.id
WHERE g.is_active = true
  AND g.confidence_level >= 0.7
ORDER BY g.prediction_date DESC;
```

**ãƒã‚¤ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«äººæã®äºˆæ¸¬æŠ½å‡º**
```sql
SELECT
  employee_id,
  predicted_growth_rate,
  promotion_probability,
  growth_trajectory
FROM growth_predictions
WHERE is_active = true
  AND predicted_growth_rate > 10.0  -- å¹´é–“10%ä»¥ä¸Šæˆé•·äºˆæ¸¬
  AND growth_trajectory = 'rapid'
ORDER BY predicted_growth_rate DESC;
```

**äºˆæ¸¬ç²¾åº¦ã®æ¤œè¨¼**
```sql
SELECT
  model_version,
  AVG(prediction_accuracy) as avg_accuracy,
  AVG(confidence_level) as avg_confidence,
  COUNT(*) as prediction_count
FROM growth_predictions
WHERE actual_vs_predicted IS NOT NULL
GROUP BY model_version
ORDER BY avg_accuracy DESC;
```

---

### 13-4. Employeeãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®é–¢é€£è¿½åŠ 

```prisma
model Employee {
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

  // ğŸ†• çµ±åˆåˆ†æ
  growthTimeline           IntegratedGrowthTimeline[]   // ğŸ†• çµ±åˆæˆé•·ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³
  talentPortfolio          TalentPortfolioAnalysis[]    // ğŸ†• ã‚¿ãƒ¬ãƒ³ãƒˆãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª
  growthPredictions        GrowthPrediction[]           // ğŸ†• AIæˆé•·äºˆæ¸¬

  // æ—¢å­˜Relations
  trainingEffects          TrainingEffectTracking[]
  skillRadarAssessments    SkillRadarAssessment[]
  v3Assessments            V3Assessment[]
  v3EvaluatorComments      V3AssessmentComment[] @relation("V3Evaluator")
  mentoringAsMentor        MentoringRelationship[] @relation("MentorRelations")
  mentoringAsMentee        MentoringRelationship[] @relation("MenteeRelations")
  mindsetProfile           StaffMindsetProfile?
}
```

---

### 13-5. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

#### çµ±åˆã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è‡ªå‹•ç”Ÿæˆ
```typescript
// è©•ä¾¡ç¢ºå®šæ™‚ã«è‡ªå‹•è¿½åŠ 
async function onV3AssessmentConfirmed(assessment: V3Assessment) {
  await prisma.integratedGrowthTimeline.create({
    data: {
      employeeId: assessment.employeeId,
      eventDate: assessment.confirmedDate,
      eventType: 'evaluation_v3',
      eventTitle: `${assessment.evaluationPeriod} V3è©•ä¾¡ç¢ºå®š`,
      impactLevel: 'high',
      isMilestone: true,
      relatedAssessmentId: assessment.id,
      scoreValue: assessment.totalScore,
      scoreType: 'v3_total',
      category: 'evaluation',
      dataSource: 'auto_generated'
    }
  });
}
```

#### ã‚¿ãƒ¬ãƒ³ãƒˆãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªè¨ˆç®—
```typescript
async function calculateTalentPortfolio(employeeId: string, period: string) {
  // ã‚¹ã‚­ãƒ«ã‚¹ã‚³ã‚¢ç®—å‡ºï¼ˆV3æŠ€è¡“è©•ä¾¡ + ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆï¼‰
  const skillScore = await calculateSkillScore(employeeId, period);

  // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚¹ã‚³ã‚¢ç®—å‡ºï¼ˆV3è²¢çŒ®åº¦ + å®Ÿç¸¾ï¼‰
  const performanceScore = await calculatePerformanceScore(employeeId, period);

  // 9ãƒã‚¹ãƒãƒˆãƒªã‚¯ã‚¹åˆ†é¡
  const position = classifyMatrixPosition(skillScore, performanceScore);

  await prisma.talentPortfolioAnalysis.create({
    data: {
      employeeId,
      analysisPeriod: period,
      analysisDate: new Date(),
      skillScore,
      skillLevel: getLevel(skillScore),
      performanceScore,
      performanceLevel: getLevel(performanceScore),
      matrixPosition: position,
      xCoordinate: performanceScore,
      yCoordinate: skillScore,
      calculatedBy: 'system_auto'
    }
  });
}
```

#### AIäºˆæ¸¬ãƒ¢ãƒ‡ãƒ«å®Ÿè¡Œ
```typescript
async function runGrowthPrediction(employeeId: string) {
  // éå»ãƒ‡ãƒ¼ã‚¿å–å¾—
  const historicalData = await getEmployeeHistoricalData(employeeId);

  // MLäºˆæ¸¬å®Ÿè¡Œ
  const prediction = await mlModel.predict(historicalData);

  // äºˆæ¸¬çµæœä¿å­˜
  await prisma.growthPrediction.create({
    data: {
      employeeId,
      predictionDate: new Date(),
      basedOnDataUntil: new Date(),
      modelVersion: 'v1.2.3',
      modelType: 'ensemble',
      confidenceLevel: prediction.confidence,
      predictedScores: prediction.futureScores,
      predictedGrowthRate: prediction.growthRate,
      growthTrajectory: prediction.trajectory,
      promotionProbability: prediction.promotionProb,
      recommendedInterventions: prediction.recommendations,
      isActive: true
    }
  });
}
```

---

## 14. ğŸ“ æ¡ç”¨ãƒ»ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ»é…å±å±¥æ­´ãƒ»é©æ€§è©•ä¾¡ï¼ˆPriority 1ï¼‰

### èƒŒæ™¯
å€‹äººãƒšãƒ¼ã‚¸ã®ã€Œæ¡ç”¨ã‹ã‚‰ç¾åœ¨ã¾ã§ã®çµ±åˆåˆ†æã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ä»¥ä¸‹ã®é‡è¦ãªæƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ï¼š

1. **æ¡ç”¨ãƒ»ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ¦‚è¦** - æ¡ç”¨åŒºåˆ†ã€è©¦ç”¨æœŸé–“ã€ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°é€²æ—ï¼ˆ4ã‚¹ãƒ†ãƒƒãƒ—ï¼‰
2. **é…å±å±¥æ­´ãƒ»ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹** - éå»ã®å…¨é…å±æƒ…å ±ã€å„é…å±ã§ã®è©•ä¾¡ã€ç•°å‹•ç†ç”±
3. **é©æ€§è©•ä¾¡ãƒ»è·å‹™é©åˆåº¦** - ç·åˆé©æ€§ã‚¹ã‚³ã‚¢ã€5è»¸è©•ä¾¡ï¼ˆã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€æŠ€è¡“é©æ€§ã€é©å¿œæ€§ã€ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ï¼‰
4. **ã‚­ãƒ£ãƒªã‚¢é–‹ç™ºè¨ˆç”»** - å¸Œæœ›å°‚é–€åˆ†é‡ã€ã‚­ãƒ£ãƒªã‚¢ç›®æ¨™ã€ãƒ¡ãƒ³ã‚¿ãƒ¼ã‚·ãƒƒãƒ—ãƒ‹ãƒ¼ã‚ºã€æ¬¡æœŸé…å±æ¨å¥¨

ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®4ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ  + Employeeãƒ†ãƒ¼ãƒ–ãƒ«æ‹¡å¼µãŒå¿…è¦ã§ã™ã€‚

---

### 14-1. OnboardingProgressï¼ˆã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°é€²æ—ç®¡ç†ï¼‰

#### ç›®çš„
æ–°å…¥è·å“¡ã®ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ—ãƒ­ã‚»ã‚¹å…¨ä½“ã‚’ç®¡ç†ã€‚ã‚ªãƒªã‚¨ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ¡ãƒ³ã‚¿ãƒ¼é…ç½®ã€ã‚¹ã‚­ãƒ«è©•ä¾¡ã€è©¦ç”¨æœŸé–“è©•ä¾¡ã®4ã‚¹ãƒ†ãƒƒãƒ—ã®é€²æ—ã‚’è¿½è·¡ã€‚

#### ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

```prisma
model OnboardingProgress {
  id                    String    @id @default(cuid())
  employeeId            String    @unique @map("employee_id")

  // å…¨ä½“é€²æ—
  overallProgress       Float     @map("overall_progress") // 0-100%
  status                String    @map("status")
  // in_progress, completed, delayed, suspended
  startDate             DateTime  @map("start_date")
  completionDate        DateTime? @map("completion_date")
  expectedCompletionDate DateTime? @map("expected_completion_date")

  // å„ã‚¹ãƒ†ãƒƒãƒ—ã®å®Œäº†çŠ¶æ³
  orientationCompleted  Boolean   @default(false) @map("orientation_completed")
  orientationDate       DateTime? @map("orientation_date")

  mentorAssigned        Boolean   @default(false) @map("mentor_assigned")
  mentorId              String?   @map("mentor_id")
  mentorAssignedDate    DateTime? @map("mentor_assigned_date")

  skillAssessmentDone   Boolean   @default(false) @map("skill_assessment_done")
  skillAssessmentDate   DateTime? @map("skill_assessment_date")

  probationEvaluated    Boolean   @default(false) @map("probation_evaluated")
  probationEvalDate     DateTime? @map("probation_eval_date")

  // è©³ç´°ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼ˆJSONï¼‰
  checklistItems        Json?     @map("checklist_items")
  // [
  //   {item: "å…¥ç¤¾æ‰‹ç¶šã", completed: true, completedDate: "2024-04-01"},
  //   {item: "ã‚·ã‚¹ãƒ†ãƒ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ", completed: true, completedDate: "2024-04-02"},
  //   {item: "å®‰å…¨è¡›ç”Ÿæ•™è‚²", completed: false, dueDate: "2024-04-10"}
  // ]

  // é€²æ—ãƒ¡ãƒ¢
  progressNotes         String?   @db.Text @map("progress_notes")
  blockers              Json?     @map("blockers")
  // [{issue: "ãƒ¡ãƒ³ã‚¿ãƒ¼èª¿æ•´ä¸­", date: "2024-04-05"}]

  // ãƒ¡ã‚¿æƒ…å ±
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String?   @map("created_by")
  lastUpdatedBy         String?   @map("last_updated_by")

  // Relations
  employee              Employee  @relation(fields: [employeeId], references: [id])

  @@index([status])
  @@index([overallProgress])
  @@map("onboarding_progress")
}
```

#### ä½¿ç”¨ä¾‹

**ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã®è·å“¡ä¸€è¦§**
```sql
SELECT
  e.name,
  o.overall_progress,
  o.status,
  o.orientation_completed,
  o.mentor_assigned,
  o.skill_assessment_done,
  o.probation_evaluated
FROM onboarding_progress o
JOIN employees e ON o.employee_id = e.id
WHERE o.status = 'in_progress'
ORDER BY o.start_date DESC;
```

**å®Œäº†ç‡ã®è¨ˆç®—**
```typescript
function calculateProgress(onboarding: OnboardingProgress): number {
  const steps = [
    onboarding.orientationCompleted,
    onboarding.mentorAssigned,
    onboarding.skillAssessmentDone,
    onboarding.probationEvaluated
  ];
  const completedCount = steps.filter(Boolean).length;
  return (completedCount / steps.length) * 100;
}
```

---

### 14-2. AssignmentHistoryï¼ˆé…å±å±¥æ­´ï¼‰

#### ç›®çš„
è·å“¡ã®å…¨é…å±å±¥æ­´ã‚’æ™‚ç³»åˆ—ã§ç®¡ç†ã€‚å„é…å±ã§ã®è©•ä¾¡ã€ç•°å‹•ç†ç”±ã€ç²å¾—ã‚¹ã‚­ãƒ«ã‚’è¨˜éŒ²ã—ã€ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ã®å¯è¦–åŒ–ã«æ´»ç”¨ã€‚

#### ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

```prisma
model AssignmentHistory {
  id                    String    @id @default(cuid())
  employeeId            String    @map("employee_id")

  // é…å±å…ˆæƒ…å ±
  departmentId          String?   @map("department_id")
  departmentName        String    @map("department_name")
  facilityId            String?   @map("facility_id")
  facilityName          String    @map("facility_name")

  // å½¹è·ãƒ»è·ç¨®
  positionTitle         String    @map("position_title")
  // "çœ‹è­·å¸«ï¼ˆæ–°äººï¼‰", "çœ‹è­·å¸«", "ä¸»ä»»", "çœ‹è­·å¸«é•·"
  employmentType        String?   @map("employment_type")
  // full_time, part_time, contract

  // é…å±æœŸé–“
  startDate             DateTime  @map("start_date")
  endDate               DateTime? @map("end_date")
  isCurrent             Boolean   @default(false) @map("is_current")
  durationMonths        Int?      @map("duration_months") // åœ¨ç±æœˆæ•°

  // ç•°å‹•ç†ç”±ãƒ»ç¨®é¡
  assignmentReason      String?   @map("assignment_reason")
  // new_hire (æ–°äººé…å±), rotation (ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³),
  // promotion (æ˜‡é€²), transfer (ç•°å‹•),
  // skill_development (çµŒé¨“å¹´æ•°ã«ã‚ˆã‚‹é…ç½®è»¢æ›),
  // organizational_change (çµ„ç¹”æ”¹ç·¨)
  assignmentReasonDisplay String? @map("assignment_reason_display")
  // "æ–°äººé…å±", "ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³", "çµŒé¨“å¹´æ•°ã«ã‚ˆã‚‹é…ç½®è»¢æ›"

  // é…å±ã§ã®è©•ä¾¡
  performanceRating     String?   @map("performance_rating")
  // A, B+, B, C, D
  performanceComment    String?   @db.Text @map("performance_comment")

  // æˆæœãƒ»çµŒé¨“
  keyAchievements       Json?     @map("key_achievements")
  // ["æ–°äººæ•™è‚²æ‹…å½“", "æ„ŸæŸ“å¯¾ç­–å§”å“¡", "æ¥­å‹™æ”¹å–„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ "]
  skillsAcquired        Json?     @map("skills_acquired")
  // ["æ€¥æ€§æœŸçœ‹è­·", "ãƒãƒ¼ãƒ ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ", "é›»å­ã‚«ãƒ«ãƒ†é‹ç”¨"]

  // ä¸Šé•·è©•ä¾¡
  supervisorId          String?   @map("supervisor_id")
  supervisorFeedback    String?   @db.Text @map("supervisor_feedback")

  // ãƒ¡ã‚¿æƒ…å ±
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  recordedBy            String?   @map("recorded_by")

  // Relations
  employee              Employee  @relation(fields: [employeeId], references: [id])

  @@index([employeeId, startDate])
  @@index([isCurrent])
  @@index([facilityId])
  @@index([departmentId])
  @@map("assignment_history")
}
```

#### ä½¿ç”¨ä¾‹

**é…å±å±¥æ­´ã®å–å¾—ï¼ˆæ™‚ç³»åˆ—ï¼‰**
```sql
SELECT
  department_name,
  facility_name,
  position_title,
  start_date,
  end_date,
  duration_months,
  assignment_reason_display,
  performance_rating
FROM assignment_history
WHERE employee_id = 'emp123'
ORDER BY start_date DESC;
```

**ç¾åœ¨ã®é…å±æƒ…å ±**
```sql
SELECT * FROM assignment_history
WHERE employee_id = 'emp123'
  AND is_current = true;
```

**éƒ¨ç½²çµŒé¨“æ•°ã®ã‚«ã‚¦ãƒ³ãƒˆ**
```sql
SELECT
  employee_id,
  COUNT(DISTINCT department_id) as department_count,
  COUNT(DISTINCT facility_id) as facility_count
FROM assignment_history
GROUP BY employee_id;
```

---

### 14-3. FitnessAssessmentï¼ˆé©æ€§è©•ä¾¡ï¼‰

#### ç›®çš„
è·å“¡ã®è·å‹™é©æ€§ã‚’å¤šé¢çš„ã«è©•ä¾¡ã€‚ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€æŠ€è¡“é©æ€§ã€é©å¿œæ€§ã€ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãªã©ã®è»¸ã§0-100ç‚¹è©•ä¾¡ã‚’å®Ÿæ–½ã€‚

#### ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

```prisma
model FitnessAssessment {
  id                    String   @id @default(cuid())
  employeeId            String   @map("employee_id")

  // è©•ä¾¡æ—¥
  assessmentDate        DateTime @map("assessment_date")
  assessmentPeriod      String?  @map("assessment_period")
  // "2023å¹´åº¦", "å…¥è·æ™‚", "è©¦ç”¨æœŸé–“çµ‚äº†æ™‚"

  // ç·åˆé©æ€§ã‚¹ã‚³ã‚¢ï¼ˆ0-100ç‚¹ï¼‰
  totalFitnessScore     Float    @map("total_fitness_score")
  fitnessLevel          String?  @map("fitness_level")
  // excellent (90-100), good (75-89), average (60-74), needs_improvement (<60)

  // å„é …ç›®ã‚¹ã‚³ã‚¢ï¼ˆ0-100ç‚¹ï¼‰
  communicationScore    Float?   @map("communication_score")
  teamworkScore         Float?   @map("teamwork_score")
  technicalAptitudeScore Float?  @map("technical_aptitude_score")
  adaptabilityScore     Float?   @map("adaptability_score")
  leadershipScore       Float?   @map("leadership_score")
  problemSolvingScore   Float?   @map("problem_solving_score")
  stressToleranceScore  Float?   @map("stress_tolerance_score")
  learningAgilityScore  Float?   @map("learning_agility_score")

  // å¼·ã¿ãƒ»æ”¹å–„ç‚¹ã®ç‰¹å®š
  topStrength           String?  @map("top_strength")
  // "communication", "teamwork", "technical_aptitude"
  topStrengthScore      Float?   @map("top_strength_score")

  secondStrength        String?  @map("second_strength")
  secondStrengthScore   Float?   @map("second_strength_score")

  improvementArea       String?  @map("improvement_area")
  improvementAreaScore  Float?   @map("improvement_area_score")

  // è·å‹™é©åˆåº¦åˆ†æ
  currentRoleFitScore   Float?   @map("current_role_fit_score")
  // ç¾åœ¨ã®å½¹å‰²ã¸ã®é©åˆåº¦
  potentialScore        Float?   @map("potential_score")
  // å°†æ¥ã®æˆé•·ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«

  // ç·åˆè©•ä¾¡ã‚³ãƒ¡ãƒ³ãƒˆ
  overallComment        String?  @db.Text @map("overall_comment")
  strengthsComment      String?  @db.Text @map("strengths_comment")
  developmentComment    String?  @db.Text @map("development_comment")

  // è©•ä¾¡è€…æƒ…å ±
  assessorId            String?  @map("assessor_id")
  assessorRole          String?  @map("assessor_role")
  // direct_supervisor, hr_manager, external_consultant

  // æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  recommendedActions    Json?    @map("recommended_actions")
  // [
  //   {action: "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ç ”ä¿®å—è¬›", priority: "high"},
  //   {action: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ¼ãƒ€ãƒ¼çµŒé¨“", priority: "medium"}
  // ]

  // ãƒ¡ã‚¿æƒ…å ±
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")

  // Relations
  employee              Employee @relation(fields: [employeeId], references: [id])

  @@index([employeeId, assessmentDate])
  @@index([totalFitnessScore])
  @@index([assessmentPeriod])
  @@map("fitness_assessments")
}
```

#### è©•ä¾¡é …ç›®ã®å®šç¾©

| è©•ä¾¡é …ç›® | èª¬æ˜ | æ¸¬å®šå†…å®¹ |
|---------|------|---------|
| ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ | å¯¾äººã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³èƒ½åŠ› | æ‚£è€…ãƒ»å®¶æ—å¯¾å¿œã€å ±é€£ç›¸ã€å¤šè·ç¨®é€£æº |
| ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | ãƒãƒ¼ãƒ ã§ã®å”åƒèƒ½åŠ› | å”åŠ›å§¿å‹¢ã€ç›¸äº’æ”¯æ´ã€æŸ”è»Ÿæ€§ |
| æŠ€è¡“é©æ€§ | è·ç¨®ã«å¿…è¦ãªæŠ€è¡“ãƒ»çŸ¥è­˜ | å°‚é–€çŸ¥è­˜ã€å®Ÿå‹™ã‚¹ã‚­ãƒ«ã€æ­£ç¢ºæ€§ |
| é©å¿œæ€§ | å¤‰åŒ–ã¸ã®é©å¿œåŠ› | æ–°ç’°å¢ƒé©å¿œã€æŸ”è»Ÿãªå¯¾å¿œã€å­¦ç¿’æ„æ¬² |
| ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ— | æŒ‡å°åŠ›ãƒ»çµ±ç‡åŠ› | å¾Œè¼©æŒ‡å°ã€ãƒãƒ¼ãƒ ç‰½å¼•ã€æ„æ€æ±ºå®š |
| å•é¡Œè§£æ±ºåŠ› | èª²é¡Œç™ºè¦‹ãƒ»è§£æ±ºèƒ½åŠ› | ãƒˆãƒ©ãƒ–ãƒ«å¯¾å¿œã€æ”¹å–„ææ¡ˆã€åˆ†æåŠ› |
| ã‚¹ãƒˆãƒ¬ã‚¹è€æ€§ | é«˜è² è·ç’°å¢ƒã§ã®å¯¾å¿œåŠ› | å†·é™ãªåˆ¤æ–­ã€æ„Ÿæƒ…ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« |
| å­¦ç¿’æ•æ·æ€§ | æ–°ã—ã„ã‚¹ã‚­ãƒ«ç¿’å¾—é€Ÿåº¦ | å­¦ç¿’æ„æ¬²ã€çŸ¥è­˜å¿œç”¨åŠ›ã€æˆé•·é€Ÿåº¦ |

#### ä½¿ç”¨ä¾‹

**æœ€æ–°ã®é©æ€§è©•ä¾¡å–å¾—**
```sql
SELECT
  e.name,
  f.total_fitness_score,
  f.top_strength,
  f.top_strength_score,
  f.improvement_area,
  f.assessment_date
FROM fitness_assessments f
JOIN employees e ON f.employee_id = e.id
WHERE f.employee_id = 'emp123'
ORDER BY f.assessment_date DESC
LIMIT 1;
```

**é«˜é©æ€§äººæã®æŠ½å‡º**
```sql
SELECT
  employee_id,
  total_fitness_score,
  communication_score,
  leadership_score,
  potential_score
FROM fitness_assessments
WHERE total_fitness_score >= 85
  AND assessment_period = '2024å¹´åº¦'
ORDER BY total_fitness_score DESC;
```

---

### 14-4. CareerDevelopmentPlanï¼ˆã‚­ãƒ£ãƒªã‚¢é–‹ç™ºè¨ˆç”»ï¼‰

#### ç›®çš„
è·å“¡ã®ä¸­é•·æœŸçš„ãªã‚­ãƒ£ãƒªã‚¢é–‹ç™ºè¨ˆç”»ã‚’ç®¡ç†ã€‚å¸Œæœ›å°‚é–€åˆ†é‡ã€ã‚­ãƒ£ãƒªã‚¢ç›®æ¨™ã€ãƒ¡ãƒ³ã‚¿ãƒ¼ã‚·ãƒƒãƒ—ãƒ‹ãƒ¼ã‚ºã€æ¬¡æœŸé…å±æ¨å¥¨ãªã©ã‚’ä½“ç³»çš„ã«è¨˜éŒ²ã€‚

#### ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

```prisma
model CareerDevelopmentPlan {
  id                    String    @id @default(cuid())
  employeeId            String    @unique @map("employee_id")

  // è¨ˆç”»æœŸé–“
  planCreatedDate       DateTime  @map("plan_created_date")
  planVersion           Int       @default(1) @map("plan_version")
  targetPeriod          String?   @map("target_period")
  // "2å¹´ä»¥å†…", "3-5å¹´è¨ˆç”»", "10å¹´ãƒ“ã‚¸ãƒ§ãƒ³"
  lastReviewedDate      DateTime? @map("last_reviewed_date")
  nextReviewDate        DateTime? @map("next_review_date")

  // å¸Œæœ›å°‚é–€åˆ†é‡
  preferredSpecialty    String?   @map("preferred_specialty")
  // "å†…ç§‘ãƒ»æ…¢æ€§æœŸã‚±ã‚¢", "å¤–ç§‘ãƒ»æ€¥æ€§æœŸ", "ç²¾ç¥ç§‘",
  // "è¨ªå•çœ‹è­·", "ç®¡ç†è·", "æ•™è‚²ãƒ»æŒ‡å°"
  specialtyReason       String?   @db.Text @map("specialty_reason")
  // ãªãœãã®å°‚é–€åˆ†é‡ã‚’é¸ã‚“ã ã‹

  // ã‚­ãƒ£ãƒªã‚¢ç›®æ¨™ï¼ˆJSONé…åˆ—ï¼‰
  careerGoals           Json?     @map("career_goals")
  // [
  //   {
  //     goal: "ä¸»ä»»æ˜‡é€²",
  //     timeframe: "2å¹´ä»¥å†…",
  //     priority: "high",
  //     status: "on_track",
  //     progressPercent: 60
  //   },
  //   {
  //     goal: "å°‚é–€è³‡æ ¼å–å¾—",
  //     detail: "æ„ŸæŸ“ç®¡ç†èªå®šçœ‹è­·å¸«",
  //     timeframe: "3å¹´ä»¥å†…",
  //     priority: "high",
  //     status: "planning"
  //   },
  //   {
  //     goal: "éƒ¨ç½²æ¨ªæ–­ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ¼ãƒ€ãƒ¼",
  //     timeframe: "1å¹´ä»¥å†…",
  //     priority: "medium",
  //     status: "achieved"
  //   }
  // ]

  // ãƒ¡ãƒ³ã‚¿ãƒ¼ã‚·ãƒƒãƒ—ãƒ‹ãƒ¼ã‚º
  mentorshipNeeds       Json?     @map("mentorship_needs")
  // [
  //   {need: "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—é–‹ç™º", priority: "high"},
  //   {need: "æ³•äººè¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçµŒé¨“", priority: "high"},
  //   {need: "ç®¡ç†æ¥­å‹™ã‚¹ã‚­ãƒ«ç¿’å¾—", priority: "medium"}
  // ]
  currentMentorId       String?   @map("current_mentor_id")
  mentorAssignedDate    DateTime? @map("mentor_assigned_date")

  // æ¬¡æœŸé…å±æ¨å¥¨
  recommendedNextAssignment String? @map("recommended_next_assignment")
  // "å†…ç§‘ç³»ä¸»ä»»å€™è£œãƒã‚¸ã‚·ãƒ§ãƒ³", "ICUé…å±", "è¨ªå•çœ‹è­·ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³"
  recommendedPosition   String?   @map("recommended_position")
  // "ä¸»ä»»", "å‰¯å¸«é•·", "å°‚é–€çœ‹è­·å¸«"
  recommendationReason  String?   @db.Text @map("recommendation_reason")

  // æ˜‡é€²æº–å‚™çŠ¶æ³
  promotionReadiness    String?   @map("promotion_readiness")
  // ready (æº–å‚™å®Œäº†), almost_ready (ã»ã¼æº–å‚™å®Œäº†),
  // needs_development (è‚²æˆå¿…è¦), not_applicable (è©²å½“ãªã—)
  promotionTargetDate   DateTime? @map("promotion_target_date")
  promotionRequirements Json?     @map("promotion_requirements")
  // [
  //   {requirement: "ä¸»ä»»è³‡æ ¼è¦ä»¶", status: "achieved"},
  //   {requirement: "ãƒªãƒ¼ãƒ€ãƒ¼çµŒé¨“3å¹´ä»¥ä¸Š", status: "in_progress", current: "2å¹´"}
  // ]

  // ã‚¹ã‚­ãƒ«é–‹ç™ºè¨ˆç”»
  skillGaps             Json?     @map("skill_gaps")
  // ["ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—", "äºˆç®—ç®¡ç†", "å¤šè·ç¨®é€£æº"]
  trainingPlan          Json?     @map("training_plan")
  // [
  //   {training: "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ç ”ä¿®", status: "scheduled", date: "2024-06"},
  //   {training: "ç®¡ç†è€…é¤Šæˆè¬›åº§", status: "planned", target: "2024å¹´åº¦"}
  // ]

  // é€²æ—çŠ¶æ³
  planStatus            String?   @map("plan_status")
  // on_track (é †èª¿), delayed (é…å»¶), needs_revision (è¦è¦‹ç›´ã—),
  // on_hold (ä¿ç•™), completed (å®Œäº†)
  progressNotes         String?   @db.Text @map("progress_notes")
  achievementHighlights Json?     @map("achievement_highlights")
  // é”æˆã—ãŸä¸»è¦ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

  // æœ¬äººã®æ„å‘ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆ
  employeeComments      String?   @db.Text @map("employee_comments")
  lastEmployeeInput     DateTime? @map("last_employee_input")

  // HR/ä¸Šé•·ã®ã‚³ãƒ¡ãƒ³ãƒˆ
  hrComments            String?   @db.Text @map("hr_comments")
  supervisorComments    String?   @db.Text @map("supervisor_comments")
  supervisorId          String?   @map("supervisor_id")

  // ãƒ¡ã‚¿æƒ…å ±
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String?   @map("created_by")
  lastUpdatedBy         String?   @map("last_updated_by")

  // Relations
  employee              Employee  @relation(fields: [employeeId], references: [id])

  @@index([planStatus])
  @@index([promotionReadiness])
  @@index([nextReviewDate])
  @@map("career_development_plans")
}
```

#### ä½¿ç”¨ä¾‹

**ã‚­ãƒ£ãƒªã‚¢é–‹ç™ºè¨ˆç”»ã®å–å¾—**
```sql
SELECT
  e.name,
  c.preferred_specialty,
  c.career_goals,
  c.mentorship_needs,
  c.recommended_next_assignment,
  c.promotion_readiness,
  c.plan_status
FROM career_development_plans c
JOIN employees e ON c.employee_id = e.id
WHERE c.employee_id = 'emp123';
```

**æ˜‡é€²æº–å‚™å®Œäº†è€…ã®æŠ½å‡º**
```sql
SELECT
  e.name,
  e.position,
  c.promotion_readiness,
  c.promotion_target_date,
  c.recommended_position
FROM career_development_plans c
JOIN employees e ON c.employee_id = e.id
WHERE c.promotion_readiness IN ('ready', 'almost_ready')
  AND c.promotion_target_date <= DATE_ADD(NOW(), INTERVAL 6 MONTH)
ORDER BY c.promotion_target_date;
```

**ãƒ¬ãƒ“ãƒ¥ãƒ¼æœŸé™ãŒè¿‘ã„è¨ˆç”»**
```sql
SELECT
  employee_id,
  next_review_date,
  plan_status,
  DATEDIFF(next_review_date, NOW()) as days_until_review
FROM career_development_plans
WHERE next_review_date <= DATE_ADD(NOW(), INTERVAL 30 DAY)
ORDER BY next_review_date;
```

---

### 14-5. Employeeãƒ†ãƒ¼ãƒ–ãƒ«æ‹¡å¼µï¼ˆæ¡ç”¨æƒ…å ±ï¼‰

```prisma
model Employee {
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

  // ğŸ†• æ¡ç”¨æƒ…å ±
  hireDate              DateTime?  @map("hire_date")
  employmentType        String?    @map("employment_type")
  // new_graduate (æ–°å’), mid_career (ä¸­é€”),
  // contract_to_permanent (å¥‘ç´„â†’æ­£ç¤¾å“¡), rehire (å†é›‡ç”¨)

  probationPeriodMonths Int?       @map("probation_period_months")
  probationEndDate      DateTime?  @map("probation_end_date")
  probationResult       String?    @map("probation_result")
  // passed (åˆæ ¼), passed_with_conditions (æ¡ä»¶ä»˜ãåˆæ ¼),
  // extended (å»¶é•·), failed (ä¸åˆæ ¼)

  yearsOfService        Float?     @map("years_of_service")
  // å‹¤ç¶šå¹´æ•°ï¼ˆå¹´å˜ä½ã€å°æ•°ç‚¹å«ã‚€ï¼‰ä¾‹: 4.5
  monthsOfService       Int?       @map("months_of_service")
  // å‹¤ç¶šæœˆæ•° ä¾‹: 54ãƒ¶æœˆ

  // ğŸ†• Relations
  onboardingProgress    OnboardingProgress?      // ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°é€²æ—
  assignmentHistory     AssignmentHistory[]      // é…å±å±¥æ­´
  fitnessAssessments    FitnessAssessment[]      // é©æ€§è©•ä¾¡å±¥æ­´
  careerPlan            CareerDevelopmentPlan?   // ã‚­ãƒ£ãƒªã‚¢é–‹ç™ºè¨ˆç”»

  // æ—¢å­˜Relations
  growthTimeline        IntegratedGrowthTimeline[]
  talentPortfolio       TalentPortfolioAnalysis[]
  growthPredictions     GrowthPrediction[]
  trainingEffects       TrainingEffectTracking[]
  skillRadarAssessments SkillRadarAssessment[]
  v3Assessments         V3Assessment[]
  v3EvaluatorComments   V3AssessmentComment[] @relation("V3Evaluator")
  mentoringAsMentor     MentoringRelationship[] @relation("MentorRelations")
  mentoringAsMentee     MentoringRelationship[] @relation("MenteeRelations")
  mindsetProfile        StaffMindsetProfile?
}
```

---

### 14-6. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

#### æ¡ç”¨æ™‚ã®ãƒ‡ãƒ¼ã‚¿ä½œæˆ
```typescript
async function onEmployeeHired(employeeId: string, hireData: HireData) {
  // 1. EmployeeåŸºæœ¬æƒ…å ±æ›´æ–°
  await prisma.employee.update({
    where: { id: employeeId },
    data: {
      hireDate: hireData.hireDate,
      employmentType: hireData.employmentType,
      probationPeriodMonths: 6,
      probationEndDate: addMonths(hireData.hireDate, 6)
    }
  });

  // 2. ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°é€²æ—ä½œæˆ
  await prisma.onboardingProgress.create({
    data: {
      employeeId,
      startDate: hireData.hireDate,
      status: 'in_progress',
      overallProgress: 0
    }
  });

  // 3. åˆå›é…å±å±¥æ­´ä½œæˆ
  await prisma.assignmentHistory.create({
    data: {
      employeeId,
      departmentName: hireData.initialDepartment,
      positionTitle: hireData.initialPosition,
      startDate: hireData.hireDate,
      isCurrent: true,
      assignmentReason: 'new_hire',
      assignmentReasonDisplay: 'æ–°äººé…å±'
    }
  });

  // 4. ã‚­ãƒ£ãƒªã‚¢é–‹ç™ºè¨ˆç”»ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ
  await prisma.careerDevelopmentPlan.create({
    data: {
      employeeId,
      planCreatedDate: new Date(),
      planStatus: 'on_track'
    }
  });
}
```

#### é…å±ç•°å‹•æ™‚ã®å‡¦ç†
```typescript
async function onAssignmentChange(
  employeeId: string,
  newAssignment: AssignmentData
) {
  // 1. ç¾åœ¨ã®é…å±ã‚’çµ‚äº†
  await prisma.assignmentHistory.updateMany({
    where: { employeeId, isCurrent: true },
    data: {
      endDate: newAssignment.startDate,
      isCurrent: false,
      durationMonths: calculateMonths(startDate, newAssignment.startDate)
    }
  });

  // 2. æ–°ã—ã„é…å±ã‚’ä½œæˆ
  await prisma.assignmentHistory.create({
    data: {
      employeeId,
      ...newAssignment,
      isCurrent: true
    }
  });

  // 3. çµ±åˆã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã«ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ 
  await prisma.integratedGrowthTimeline.create({
    data: {
      employeeId,
      eventDate: newAssignment.startDate,
      eventType: 'assignment_change',
      eventTitle: `${newAssignment.departmentName}ã¸ç•°å‹•`,
      impactLevel: 'high',
      isMilestone: true
    }
  });
}
```

---

## 15. ğŸ“ˆ ã‚¹ã‚­ãƒ«è‚²æˆè¨ˆç”»ï¼ˆPriority 1ï¼‰

### èƒŒæ™¯
å€‹äººãƒšãƒ¼ã‚¸ã®ã€Œã‚­ãƒ£ãƒªã‚¢é–‹ç™ºè¨ˆç”»ã€å†…ã«ã€ã‚¹ã‚­ãƒ«å˜ä½ã§ã®è‚²æˆè¨ˆç”»ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ï¼š

```
ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—: 75ç‚¹ â†’ 85ç‚¹ï¼ˆç›®æ¨™ï¼‰
  æœŸé–“: 6ãƒ¶æœˆ
  æ–¹æ³•: ç®¡ç†è·ç ”ä¿® + OJT
  é€²æ—: 88.2%

æ³•äººè²¢çŒ®åº¦: 78ç‚¹ â†’ 88ç‚¹ï¼ˆç›®æ¨™ï¼‰
  æœŸé–“: 12ãƒ¶æœˆ
  æ–¹æ³•: ã‚¯ãƒ­ã‚¹ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒŠãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ 
  é€²æ—: 88.6%
```

ã“ã‚Œã¯**ã‚¹ã‚­ãƒ«å˜ä½ã®è‚²æˆé€²æ—ç®¡ç†**ã§ã‚ã‚Šã€ä»¥ä¸‹ã®æƒ…å ±ãŒå¿…è¦ï¼š
- ç¾åœ¨ã‚¹ã‚³ã‚¢ãƒ»ç›®æ¨™ã‚¹ã‚³ã‚¢
- è‚²æˆæœŸé–“ãƒ»æ–¹æ³•
- é€²æ—ç‡ã®è‡ªå‹•è¨ˆç®—
- ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ç®¡ç†

æ—¢å­˜ã®CareerDevelopmentPlanã¯ã‚­ãƒ£ãƒªã‚¢å…¨ä½“ã®è¨ˆç”»ã§ã‚ã‚Šã€**ã‚¹ã‚­ãƒ«å˜ä½ã®è©³ç´°ãªè‚²æˆè¨ˆç”»**ã‚’ç®¡ç†ã™ã‚‹å°‚ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå¿…è¦ã§ã™ã€‚

---

### 15-1. SkillDevelopmentPlanï¼ˆã‚¹ã‚­ãƒ«è‚²æˆè¨ˆç”»ï¼‰

#### ç›®çš„
è·å“¡ã®å€‹åˆ¥ã‚¹ã‚­ãƒ«ã”ã¨ã«è‚²æˆè¨ˆç”»ã‚’ç«‹ã¦ã€é€²æ—ã‚’è¿½è·¡ã€‚ç¾åœ¨ã‚¹ã‚³ã‚¢ã‹ã‚‰ç›®æ¨™ã‚¹ã‚³ã‚¢ã¸ã®æˆé•·ãƒ—ãƒ­ã‚»ã‚¹ã‚’å¯è¦–åŒ–ã—ã€è‚²æˆæ–¹æ³•ãƒ»ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã‚’ç®¡ç†ã€‚

#### ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

```prisma
model SkillDevelopmentPlan {
  id                    String    @id @default(cuid())
  employeeId            String    @map("employee_id")

  // ã‚¹ã‚­ãƒ«æƒ…å ±
  skillName             String    @map("skill_name")
  // "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—", "æ³•äººè²¢çŒ®åº¦", "å°‚é–€æŠ€è¡“", "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³",
  // "æ„ŸæŸ“ç®¡ç†", "ãƒãƒ¼ãƒ ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ", "äºˆç®—ç®¡ç†"
  skillCategory         String?   @map("skill_category")
  // leadership, technical, communication, organizational,
  // management, specialized

  // ç¾åœ¨å€¤ãƒ»ç›®æ¨™å€¤ï¼ˆ0-100ç‚¹ï¼‰
  currentScore          Float     @map("current_score")
  targetScore           Float     @map("target_score")
  improvementGap        Float     @map("improvement_gap")
  // targetScore - currentScore

  // é€²æ—çŠ¶æ³
  latestScore           Float?    @map("latest_score")
  progressPercent       Float?    @map("progress_percent")
  // (latestScore - currentScore) / (targetScore - currentScore) * 100
  lastMeasurementDate   DateTime? @map("last_measurement_date")

  // è¨ˆç”»æœŸé–“
  planStartDate         DateTime  @map("plan_start_date")
  planEndDate           DateTime  @map("plan_end_date")
  durationMonths        Int       @map("duration_months")
  // 3ãƒ¶æœˆ, 6ãƒ¶æœˆ, 12ãƒ¶æœˆ

  // è‚²æˆæ–¹æ³•
  developmentMethod     String    @map("development_method")
  // "ç®¡ç†è·ç ”ä¿® + OJT", "ã‚¯ãƒ­ã‚¹ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒŠãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ ",
  // "å°‚é–€è³‡æ ¼å–å¾—", "ãƒ¡ãƒ³ã‚¿ãƒªãƒ³ã‚°", "ç¾å ´å®Ÿè·µ"
  developmentActions    Json?     @map("development_actions")
  // [
  //   {action: "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ç ”ä¿®å—è¬›", status: "completed", date: "2024-01"},
  //   {action: "ãƒãƒ¼ãƒ ãƒªãƒ¼ãƒ€ãƒ¼çµŒé¨“", status: "in_progress", startDate: "2024-02"},
  //   {action: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆå®Ÿè·µ", status: "planned", targetDate: "2024-06"}
  // ]

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status                String    @map("status")
  // not_started (æœªé–‹å§‹), in_progress (é€²è¡Œä¸­),
  // on_track (é †èª¿), delayed (é…å»¶),
  // completed (å®Œäº†), cancelled (ä¸­æ­¢)

  // ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³
  milestones            Json?     @map("milestones")
  // [
  //   {
  //     month: 3,
  //     targetScore: 80,
  //     status: "achieved",
  //     actualScore: 81,
  //     achievedDate: "2024-03-15"
  //   },
  //   {
  //     month: 6,
  //     targetScore: 85,
  //     status: "pending",
  //     dueDate: "2024-06-15"
  //   }
  // ]

  // é–¢é€£æƒ…å ±
  relatedTrainings      Json?     @map("related_trainings")
  // ["training_id_123", "training_id_456"] é–¢é€£ã™ã‚‹ç ”ä¿®ã®ID
  relatedAssessments    Json?     @map("related_assessments")
  // é–¢é€£ã™ã‚‹V3è©•ä¾¡ã‚„ã‚¹ã‚­ãƒ«è©•ä¾¡ã®ID
  mentorId              String?   @map("mentor_id")
  supervisorId          String?   @map("supervisor_id")

  // è©•ä¾¡ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
  lastEvaluationDate    DateTime? @map("last_evaluation_date")
  supervisorFeedback    String?   @db.Text @map("supervisor_feedback")
  employeeReflection    String?   @db.Text @map("employee_reflection")
  // æœ¬äººã®æŒ¯ã‚Šè¿”ã‚Šãƒ»è‡ªå·±è©•ä¾¡

  // èª²é¡Œãƒ»éšœå£
  challenges            Json?     @map("challenges")
  // [
  //   {issue: "æ¥­å‹™å¤šå¿™ã§ç ”ä¿®æ™‚é–“ç¢ºä¿å›°é›£", date: "2024-03", status: "resolved"},
  //   {issue: "å®Ÿè·µæ©Ÿä¼šã®ä¸è¶³", date: "2024-04", status: "ongoing"}
  // ]

  // å„ªå…ˆåº¦
  priority              String?   @map("priority")
  // critical, high, medium, low
  isLinkedToPromotion   Boolean   @default(false) @map("is_linked_to_promotion")
  // æ˜‡é€²è¦ä»¶ã«é–¢é€£ã™ã‚‹ã‹

  // ãƒ¡ã‚¿æƒ…å ±
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String?   @map("created_by")
  approvedBy            String?   @map("approved_by")
  approvedDate          DateTime? @map("approved_date")

  // Relations
  employee              Employee  @relation(fields: [employeeId], references: [id])

  @@index([employeeId, status])
  @@index([planEndDate])
  @@index([skillCategory])
  @@index([priority])
  @@index([isLinkedToPromotion])
  @@map("skill_development_plans")
}
```

---

### 15-2. Employeeãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®é–¢é€£è¿½åŠ 

```prisma
model Employee {
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

  // ğŸ†• ã‚¹ã‚­ãƒ«è‚²æˆè¨ˆç”»
  skillDevelopmentPlans SkillDevelopmentPlan[]  // ã‚¹ã‚­ãƒ«å˜ä½ã®è‚²æˆè¨ˆç”»

  // æ—¢å­˜Relations
  onboardingProgress    OnboardingProgress?
  assignmentHistory     AssignmentHistory[]
  fitnessAssessments    FitnessAssessment[]
  careerPlan            CareerDevelopmentPlan?
  growthTimeline        IntegratedGrowthTimeline[]
  talentPortfolio       TalentPortfolioAnalysis[]
  growthPredictions     GrowthPrediction[]
  trainingEffects       TrainingEffectTracking[]
  skillRadarAssessments SkillRadarAssessment[]
  v3Assessments         V3Assessment[]
  v3EvaluatorComments   V3AssessmentComment[] @relation("V3Evaluator")
  mentoringAsMentor     MentoringRelationship[] @relation("MentorRelations")
  mentoringAsMentee     MentoringRelationship[] @relation("MenteeRelations")
  mindsetProfile        StaffMindsetProfile?
}
```

---

### 15-3. ä½¿ç”¨ä¾‹

#### ã‚¹ã‚­ãƒ«è‚²æˆè¨ˆç”»ã®å–å¾—

```typescript
// é€²è¡Œä¸­ã®ã‚¹ã‚­ãƒ«è‚²æˆè¨ˆç”»ã‚’å–å¾—
const activeSkillPlans = await prisma.skillDevelopmentPlan.findMany({
  where: {
    employeeId: 'emp123',
    status: { in: ['in_progress', 'on_track'] }
  },
  orderBy: { planEndDate: 'asc' }
});

// UIãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
activeSkillPlans.map(plan => ({
  skillName: plan.skillName,
  timeline: `${plan.durationMonths}ãƒ¶æœˆ`,
  currentScore: plan.currentScore,
  targetScore: plan.targetScore,
  latestScore: plan.latestScore,
  progressPercent: plan.progressPercent,
  method: plan.developmentMethod,
  status: plan.status
}));
```

**å‡ºåŠ›ä¾‹ï¼š**
```json
[
  {
    "skillName": "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—",
    "timeline": "6ãƒ¶æœˆ",
    "currentScore": 75,
    "targetScore": 85,
    "latestScore": 83.8,
    "progressPercent": 88.2,
    "method": "ç®¡ç†è·ç ”ä¿® + OJT",
    "status": "on_track"
  },
  {
    "skillName": "æ³•äººè²¢çŒ®åº¦",
    "timeline": "12ãƒ¶æœˆ",
    "currentScore": 78,
    "targetScore": 88,
    "latestScore": 86.86,
    "progressPercent": 88.6,
    "method": "ã‚¯ãƒ­ã‚¹ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒŠãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ ",
    "status": "on_track"
  }
]
```

---

#### é€²æ—ç‡ã®è‡ªå‹•è¨ˆç®—

```typescript
async function updateSkillProgress(
  planId: string,
  newScore: number
) {
  const plan = await prisma.skillDevelopmentPlan.findUnique({
    where: { id: planId }
  });

  if (!plan) throw new Error('Plan not found');

  // é€²æ—ç‡è¨ˆç®—
  const progressPercent =
    ((newScore - plan.currentScore) /
     (plan.targetScore - plan.currentScore)) * 100;

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è‡ªå‹•åˆ¤å®š
  let newStatus = plan.status;
  if (progressPercent >= 100) {
    newStatus = 'completed';
  } else if (progressPercent >= 75) {
    newStatus = 'on_track';
  } else if (new Date() > plan.planEndDate && progressPercent < 100) {
    newStatus = 'delayed';
  }

  // æ›´æ–°
  await prisma.skillDevelopmentPlan.update({
    where: { id: planId },
    data: {
      latestScore: newScore,
      progressPercent,
      lastMeasurementDate: new Date(),
      status: newStatus
    }
  });
}
```

---

#### ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³é”æˆãƒã‚§ãƒƒã‚¯

```typescript
async function checkMilestones(planId: string) {
  const plan = await prisma.skillDevelopmentPlan.findUnique({
    where: { id: planId }
  });

  const milestones = plan.milestones as any[];
  const today = new Date();

  milestones.forEach(milestone => {
    const monthsElapsed = differenceInMonths(today, plan.planStartDate);

    if (monthsElapsed >= milestone.month && milestone.status === 'pending') {
      // ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³åˆ°é”æ™‚ã®è©•ä¾¡
      if (plan.latestScore >= milestone.targetScore) {
        milestone.status = 'achieved';
        milestone.actualScore = plan.latestScore;
        milestone.achievedDate = today;
      } else {
        milestone.status = 'missed';
        milestone.actualScore = plan.latestScore;
      }
    }
  });

  await prisma.skillDevelopmentPlan.update({
    where: { id: planId },
    data: { milestones }
  });
}
```

---

#### æ˜‡é€²é–¢é€£ã‚¹ã‚­ãƒ«ã®é€²æ—ã‚µãƒãƒªãƒ¼

```typescript
// æ˜‡é€²ã«å¿…è¦ãªã‚¹ã‚­ãƒ«è‚²æˆã®é€²æ—ã‚’å–å¾—
const promotionSkills = await prisma.skillDevelopmentPlan.findMany({
  where: {
    employeeId: 'emp123',
    isLinkedToPromotion: true
  },
  orderBy: { priority: 'desc' }
});

const summary = {
  totalSkills: promotionSkills.length,
  completedSkills: promotionSkills.filter(s => s.status === 'completed').length,
  averageProgress: promotionSkills.reduce((sum, s) => sum + (s.progressPercent || 0), 0) / promotionSkills.length,
  onTrack: promotionSkills.filter(s => s.status === 'on_track').length,
  delayed: promotionSkills.filter(s => s.status === 'delayed').length
};

console.log(`æ˜‡é€²æº–å‚™åº¦: ${summary.averageProgress.toFixed(1)}%`);
```

---

#### CareerDevelopmentPlanã¨ã®é€£æº

```typescript
// ã‚­ãƒ£ãƒªã‚¢é–‹ç™ºè¨ˆç”»ã‹ã‚‰ã‚¹ã‚­ãƒ«è‚²æˆè¨ˆç”»ã‚’è‡ªå‹•ç”Ÿæˆ
async function generateSkillPlansFromCareer(employeeId: string) {
  const careerPlan = await prisma.careerDevelopmentPlan.findUnique({
    where: { employeeId }
  });

  const skillGaps = careerPlan.skillGaps as string[];

  for (const skill of skillGaps) {
    await prisma.skillDevelopmentPlan.create({
      data: {
        employeeId,
        skillName: skill,
        currentScore: await getCurrentSkillScore(employeeId, skill),
        targetScore: 85, // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç›®æ¨™
        planStartDate: new Date(),
        planEndDate: addMonths(new Date(), 6),
        durationMonths: 6,
        status: 'not_started',
        isLinkedToPromotion: careerPlan.promotionReadiness === 'almost_ready'
      }
    });
  }
}
```

---

#### è‚²æˆè¨ˆç”»å®Œäº†æ™‚ã®çµ±åˆã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¿½åŠ 

```typescript
async function onSkillPlanCompleted(planId: string) {
  const plan = await prisma.skillDevelopmentPlan.findUnique({
    where: { id: planId },
    include: { employee: true }
  });

  // çµ±åˆã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã«ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ 
  await prisma.integratedGrowthTimeline.create({
    data: {
      employeeId: plan.employeeId,
      eventDate: new Date(),
      eventType: 'skill_development_completed',
      eventTitle: `${plan.skillName}ã‚¹ã‚­ãƒ«è‚²æˆå®Œäº†`,
      eventDescription: `${plan.currentScore}ç‚¹ â†’ ${plan.latestScore}ç‚¹ï¼ˆç›®æ¨™${plan.targetScore}ç‚¹ï¼‰é”æˆ`,
      impactLevel: plan.isLinkedToPromotion ? 'high' : 'medium',
      isMilestone: plan.isLinkedToPromotion,
      scoreValue: plan.latestScore,
      scoreType: 'skill_score',
      category: 'development'
    }
  });
}
```

---

### 15-4. CareerDevelopmentPlanã¨ã®é•ã„

| é …ç›® | CareerDevelopmentPlan | SkillDevelopmentPlan |
|-----|----------------------|---------------------|
| ã‚¹ã‚³ãƒ¼ãƒ— | ã‚­ãƒ£ãƒªã‚¢å…¨ä½“ã®è¨ˆç”» | å€‹åˆ¥ã‚¹ã‚­ãƒ«å˜ä½ã®è¨ˆç”» |
| ç®¡ç†å˜ä½ | è·å“¡1äººã«ã¤ã1ãƒ¬ã‚³ãƒ¼ãƒ‰ | ã‚¹ã‚­ãƒ«ã”ã¨ã«è¤‡æ•°ãƒ¬ã‚³ãƒ¼ãƒ‰ |
| å†…å®¹ | å¸Œæœ›å°‚é–€åˆ†é‡ã€ã‚­ãƒ£ãƒªã‚¢ç›®æ¨™ã€ãƒ¡ãƒ³ã‚¿ãƒ¼ã‚·ãƒƒãƒ—ãƒ‹ãƒ¼ã‚º | ç¾åœ¨ã‚¹ã‚³ã‚¢â†’ç›®æ¨™ã‚¹ã‚³ã‚¢ã€è‚²æˆæ–¹æ³•ã€é€²æ—ç‡ |
| é€²æ—ç®¡ç† | å®šæ€§çš„ï¼ˆon_track/delayedï¼‰ | å®šé‡çš„ï¼ˆé€²æ—ç‡ï¼…ï¼‰ |
| ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ | å…¨ä½“çš„ãªé”æˆé …ç›® | ã‚¹ã‚­ãƒ«å˜ä½ã®ä¸­é–“ç›®æ¨™ |
| é–¢é€£æ€§ | è·å“¡ã®ã‚­ãƒ£ãƒªã‚¢ãƒ“ã‚¸ãƒ§ãƒ³ | å…·ä½“çš„ãªè‚²æˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |

ä¸¡ãƒ†ãƒ¼ãƒ–ãƒ«ã¯é€£æºã—ã¦ä½¿ç”¨ï¼š
- **CareerDevelopmentPlan** â†’ ã€Œãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãŒå¿…è¦ã€ï¼ˆskillGapsï¼‰
- **SkillDevelopmentPlan** â†’ ã€Œãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’75â†’85ç‚¹ã«6ãƒ¶æœˆã§è‚²æˆã€ï¼ˆå…·ä½“çš„è¨ˆç”»ï¼‰

---

---

## 16. ğŸ“š æ•™è‚²ç ”ä¿®ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆPriority 1ï¼‰

### èƒŒæ™¯
æ•™è‚²ç®¡ç†ãƒšãƒ¼ã‚¸ï¼ˆ/educationï¼‰ã§ã¯ã€è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ã¨é€£å‹•ã—ãŸé«˜åº¦ãªç ”ä¿®ç®¡ç†æ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®è¦æœ›ï¼š

> å€‹äººãƒ¬ãƒ™ãƒ«ã§èª°ãŒã©ã®ã‚ˆã†ãªç ”ä¿®ã‚’å—è¬›ã—ãŸã‹ã€å…¨ã¦ã®å±¥æ­´ã‚’æŠŠæ¡ã—ãŸã„ã€‚æ³•å®šç ”ä¿®ã€ä¼ç”»ç ”ä¿®ï¼ˆãƒãƒ©ã‚¹ãƒ¡ãƒ³ãƒˆç ”ä¿®ãªã©ï¼‰ã€å…¨ã¦ã®å±¥æ­´ã‚’ç®¡ç†ã€‚å€‹äººå˜ä½ãƒ»æ–½è¨­å˜ä½ãƒ»éƒ¨ç½²å˜ä½ã§ã®æŠŠæ¡ã‚‚å¿…è¦ã€‚

**ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ æ©Ÿèƒ½ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…æ¸ˆã¿ï¼‰:**
1. è©•ä¾¡é€£å‹•å‹å¹´é–“ç ”ä¿®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
2. å€‹äººåˆ¥ç ”ä¿®å±¥æ­´ã¨é€²æ—ç®¡ç†
3. ç ”ä¿®ROIåˆ†æãƒ»åŠ¹æœæ¸¬å®š
4. æ–½è¨­åˆ¥ãƒ»éƒ¨ç½²åˆ¥ã®ç ”ä¿®é€²æ—
5. æœªå—è¬›è€…ã‚¢ãƒ©ãƒ¼ãƒˆ
6. ä¿®äº†è¨¼ç™ºè¡Œ
7. ç ”ä¿®ã¨è©•ä¾¡ã‚¹ã‚³ã‚¢ã®ç›¸é–¢åˆ†æ
8. ç ”ä¿®åŠ¹æœäºˆæ¸¬ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

**ç¾åœ¨ã®DBãƒ†ãƒ¼ãƒ–ãƒ«:**
- **Training**ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆåŸºæœ¬çš„ãªç ”ä¿®å±¥æ­´ã®ã¿ï¼‰
  - ç ”ä¿®åã€ã‚«ãƒ†ã‚´ãƒªã€æ—¥ä»˜ã€æ™‚é–“æ•°ã€ã‚¹ã‚³ã‚¢ã€ä¿®äº†è¨¼ã®æœ‰ç„¡

**å•é¡Œç‚¹:**
- ç ”ä¿®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ï¼ˆã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ ï¼‰ã®å®šç¾©ãŒãªã„
- ç ”ä¿®ã®ç¨®åˆ¥ï¼ˆæ³•å®šç ”ä¿®ãƒ»ä¼ç”»ç ”ä¿®ãƒ»å¿…é ˆç ”ä¿®ï¼‰ã®åŒºåˆ¥ãŒãªã„
- å—è¬›çŠ¶æ³ï¼ˆç”³è¾¼â†’å—è¬›ä¸­â†’å®Œäº†ï¼‰ã®ç®¡ç†ãŒãªã„
- æ–½è¨­ãƒ»éƒ¨ç½²å˜ä½ã®å—è¬›çŠ¶æ³é›†è¨ˆãŒã§ããªã„
- ç ”ä¿®åŠ¹æœæ¸¬å®šï¼ˆå—è¬›å‰å¾Œã®ã‚¹ã‚³ã‚¢ï¼‰ã®ç®¡ç†ãŒãªã„
- è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£æºãƒ‡ãƒ¼ã‚¿ãŒãªã„
- ç ”ä¿®è¨ˆç”»ï¼ˆå¹´é–“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰ã®ç®¡ç†ãŒãªã„
- ç ”ä¿®ã‚«ãƒ†ã‚´ãƒªã®è©³ç´°åˆ†é¡ãŒãªã„

---

### 16-1. TrainingProgramï¼ˆç ”ä¿®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒ»ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ ï¼‰

#### ç›®çš„
å…¨ã¦ã®ç ”ä¿®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ï¼ˆã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ ï¼‰ã‚’å®šç¾©ãƒ»ç®¡ç†ã€‚æ³•å®šç ”ä¿®ã€ä¼ç”»ç ”ä¿®ã€å¿…é ˆç ”ä¿®ãªã©å…¨ã¦ã®ç ”ä¿®ã®ã€Œå‹ã€ã‚’ç®¡ç†ã€‚

#### ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

```prisma
model TrainingProgram {
  id                    String    @id @default(cuid())

  // ãƒ—ãƒ­ã‚°ãƒ©ãƒ åŸºæœ¬æƒ…å ±
  programCode           String    @unique @map("program_code")
  // "LEGAL-001", "PLAN-HARASSMENT-2024", "REQUIRED-SAFETY-001"
  programName           String    @map("program_name")
  programNameEn         String?   @map("program_name_en")

  // ç ”ä¿®ç¨®åˆ¥
  trainingType          String    @map("training_type")
  // legal (æ³•å®šç ”ä¿®), planned (ä¼ç”»ç ”ä¿®), required (å¿…é ˆç ”ä¿®),
  // optional (ä»»æ„ç ”ä¿®), external (å¤–éƒ¨ç ”ä¿®), certification (è³‡æ ¼ç ”ä¿®)

  trainingCategory      String    @map("training_category")
  // medical_safety (åŒ»ç™‚å®‰å…¨), infection_control (æ„ŸæŸ“å¯¾ç­–),
  // harassment (ãƒãƒ©ã‚¹ãƒ¡ãƒ³ãƒˆ), compliance (ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹),
  // leadership (ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—), specialized_skill (å°‚é–€æŠ€è¡“),
  // new_employee (æ–°äººç ”ä¿®), legal_required (æ³•å®šç¾©å‹™)

  // å¯¾è±¡è€…æ¡ä»¶
  targetFacilities      Json?     @map("target_facilities")
  // ["obara-hospital", "tategami-rehabilitation"] or null (å…¨æ–½è¨­å¯¾è±¡)
  targetDepartments     Json?     @map("target_departments")
  // ["nursing", "rehabilitation"] or null (å…¨éƒ¨ç½²å¯¾è±¡)
  targetJobCategories   Json?     @map("target_job_categories")
  // ["nurse", "care_worker"]
  targetExperienceLevels Json?    @map("target_experience_levels")
  // ["new", "junior"] or null (å…¨ãƒ¬ãƒ™ãƒ«å¯¾è±¡)

  // å¿…é ˆãƒ»ä»»æ„è¨­å®š
  isRequired            Boolean   @default(false) @map("is_required")
  isLegalRequired       Boolean   @default(false) @map("is_legal_required")
  // æ³•å®šç¾©å‹™ç ”ä¿®ã‹ã©ã†ã‹
  requirementConditions Json?     @map("requirement_conditions")
  // å¿…é ˆã¨ãªã‚‹æ¡ä»¶ã®è©³ç´°å®šç¾©

  // ç ”ä¿®å†…å®¹
  description           String?   @db.Text @map("description")
  objectives            Json?     @map("objectives")
  // ["åŒ»ç™‚å®‰å…¨ã®åŸºæœ¬ç†è§£", "ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œæ‰‹é †ç¿’å¾—"]
  syllabusUrl           String?   @map("syllabus_url")
  materialsUrl          String?   @map("materials_url")

  // å®Ÿæ–½å½¢å¼
  deliveryMethod        String    @map("delivery_method")
  // onsite (é›†åˆç ”ä¿®), online (ã‚ªãƒ³ãƒ©ã‚¤ãƒ³), elearning (e-ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°),
  // ojt (OJT), hybrid (ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰)
  durationHours         Float     @map("duration_hours")
  maxParticipants       Int?      @map("max_participants")

  // è©•ä¾¡ãƒ»ãƒ†ã‚¹ãƒˆ
  hasExam               Boolean   @default(false) @map("has_exam")
  passingScore          Float?    @map("passing_score")
  // åˆæ ¼åŸºæº–ç‚¹
  certificateIssued     Boolean   @default(false) @map("certificate_issued")
  certificateValidYears Int?      @map("certificate_valid_years")
  // ä¿®äº†è¨¼ã®æœ‰åŠ¹å¹´æ•°

  // å®Ÿæ–½é »åº¦ãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
  frequency             String?   @map("frequency")
  // annual (å¹´1å›), biannual (å¹´2å›), quarterly (å››åŠæœŸ), monthly,
  // ondemand (éšæ™‚), onetime (1å›ã®ã¿)
  scheduledMonths       Json?     @map("scheduled_months")
  // [4, 10] 4æœˆã¨10æœˆã«å®Ÿæ–½

  // è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ é€£å‹•
  linkedToEvaluation    Boolean   @default(false) @map("linked_to_evaluation")
  evaluationImpact      String?   @map("evaluation_impact")
  // "è©•ä¾¡ã‚¹ã‚³ã‚¢+2ç‚¹åŠ ç®—", "å¿…é ˆç ”ä¿®æœªå®Œäº†ã§æ¸›ç‚¹"
  relatedEvaluationItems Json?    @map("related_evaluation_items")
  // ["C03_safety", "F01_specialized"]

  // ã‚³ã‚¹ãƒˆ
  costPerPerson         Float?    @map("cost_per_person")
  totalBudget           Float?    @map("total_budget")

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  isActive              Boolean   @default(true) @map("is_active")
  startDate             DateTime? @map("start_date")
  endDate               DateTime? @map("end_date")

  // ãƒ¡ã‚¿æƒ…å ±
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String?   @map("created_by")

  // Relations
  trainingSessions      TrainingSession[]   // å®Ÿæ–½ã‚»ãƒƒã‚·ãƒ§ãƒ³
  trainingHistories     TrainingHistory[]   // å—è¬›å±¥æ­´

  @@index([trainingType])
  @@index([trainingCategory])
  @@index([isRequired])
  @@index([isLegalRequired])
  @@index([isActive])
  @@map("training_programs")
}
```

---

### 16-2. TrainingSessionï¼ˆç ”ä¿®å®Ÿæ–½ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰

#### ç›®çš„
ç ”ä¿®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å…·ä½“çš„ãªå®Ÿæ–½æ—¥ç¨‹ãƒ»ä¼šå ´ã‚’ç®¡ç†ã€‚1ã¤ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒè¤‡æ•°å›å®Ÿæ–½ã•ã‚Œã‚‹å ´åˆã€ãã‚Œãã‚ŒãŒã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨ãªã‚‹ã€‚

#### ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

```prisma
model TrainingSession {
  id                    String    @id @default(cuid())
  trainingProgramId     String    @map("training_program_id")

  // ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±
  sessionCode           String    @unique @map("session_code")
  // "LEGAL-001-2024-04-15"
  sessionName           String?   @map("session_name")
  // "2024å¹´åº¦ç¬¬1å›åŒ»ç™‚å®‰å…¨ç ”ä¿®"

  // å®Ÿæ–½æ—¥æ™‚ãƒ»å ´æ‰€
  sessionDate           DateTime  @map("session_date")
  sessionTime           String?   @map("session_time")
  // "14:00-16:00"
  facilityId            String?   @map("facility_id")
  venue                 String?   @map("venue")
  // "å°åŸç—…é™¢ 3éšä¼šè­°å®¤", "ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ï¼ˆZoomï¼‰"
  isOnline              Boolean   @default(false) @map("is_online")
  meetingUrl            String?   @map("meeting_url")

  // è¬›å¸«æƒ…å ±
  instructorName        String?   @map("instructor_name")
  instructorOrg         String?   @map("instructor_org")
  // å¤–éƒ¨è¬›å¸«ã®å ´åˆã®æ‰€å±
  isExternalInstructor  Boolean   @default(false) @map("is_external_instructor")

  // å®šå“¡ãƒ»ç”³è¾¼çŠ¶æ³
  capacity              Int?      @map("capacity")
  registeredCount       Int       @default(0) @map("registered_count")
  attendedCount         Int       @default(0) @map("attended_count")
  completedCount        Int       @default(0) @map("completed_count")

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status                String    @map("status")
  // planned (è¨ˆç”»ä¸­), open_for_registration (ç”³è¾¼å—ä»˜ä¸­),
  // closed_for_registration (ç”³è¾¼ç· åˆ‡), in_progress (å®Ÿæ–½ä¸­),
  // completed (å®Œäº†), cancelled (ä¸­æ­¢)

  registrationDeadline  DateTime? @map("registration_deadline")
  cancellationDeadline  DateTime? @map("cancellation_deadline")

  // å®Ÿæ–½çµæœ
  actualDurationHours   Float?    @map("actual_duration_hours")
  feedbackSummary       String?   @db.Text @map("feedback_summary")
  averageSatisfaction   Float?    @map("average_satisfaction")
  // æº€è¶³åº¦ 0-5
  averageScore          Float?    @map("average_score")
  // ãƒ†ã‚¹ãƒˆå¹³å‡ç‚¹

  // ã‚³ã‚¹ãƒˆå®Ÿç¸¾
  actualCost            Float?    @map("actual_cost")
  costPerAttendee       Float?    @map("cost_per_attendee")

  // ãƒ¡ã‚¿æƒ…å ±
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String?   @map("created_by")

  // Relations
  trainingProgram       TrainingProgram  @relation(fields: [trainingProgramId], references: [id])
  trainingHistories     TrainingHistory[]

  @@index([sessionDate])
  @@index([status])
  @@index([facilityId])
  @@map("training_sessions")
}
```

---

### 16-3. TrainingHistoryï¼ˆç ”ä¿®å—è¬›å±¥æ­´ï¼‰- æ—¢å­˜Trainingæ‹¡å¼µ

#### ç›®çš„
å€‹äººãƒ¬ãƒ™ãƒ«ã®ç ”ä¿®å—è¬›å±¥æ­´ã‚’è©³ç´°ã«ç®¡ç†ã€‚ç”³è¾¼ã‹ã‚‰å®Œäº†ã¾ã§ã®å…¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’è¿½è·¡ã€‚

#### ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

```prisma
model TrainingHistory {
  id                    String    @id @default(cuid())
  employeeId            String    @map("employee_id")
  trainingProgramId     String    @map("training_program_id")
  trainingSessionId     String?   @map("training_session_id")

  // å—è¬›çŠ¶æ³
  registrationStatus    String    @map("registration_status")
  // registered (ç”³è¾¼æ¸ˆ), waitlisted (ã‚­ãƒ£ãƒ³ã‚»ãƒ«å¾…ã¡),
  // confirmed (ç¢ºå®š), attended (å‡ºå¸­), absent (æ¬ å¸­),
  // cancelled (ã‚­ãƒ£ãƒ³ã‚»ãƒ«), completed (å®Œäº†), failed (ä¸åˆæ ¼)

  registrationDate      DateTime? @map("registration_date")
  attendanceDate        DateTime? @map("attendance_date")
  completionDate        DateTime? @map("completion_date")

  // å‡ºå¸­ç¢ºèª
  checkInTime           DateTime? @map("check_in_time")
  checkOutTime          DateTime? @map("check_out_time")
  attendanceRate        Float?    @map("attendance_rate")
  // å‡ºå¸­ç‡ï¼ˆé€”ä¸­é€€å¸­ãªã©ã‚’è€ƒæ…®ï¼‰

  // è©•ä¾¡ãƒ»ãƒ†ã‚¹ãƒˆçµæœ
  examScore             Float?    @map("exam_score")
  examPassed            Boolean?  @map("exam_passed")
  preTestScore          Float?    @map("pre_test_score")
  // å—è¬›å‰ãƒ†ã‚¹ãƒˆ
  postTestScore         Float?    @map("post_test_score")
  // å—è¬›å¾Œãƒ†ã‚¹ãƒˆ
  scoreImprovement      Float?    @map("score_improvement")
  // å‘ä¸Šã‚¹ã‚³ã‚¢

  // æº€è¶³åº¦ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
  satisfactionRating    Float?    @map("satisfaction_rating")
  // 0-5
  feedbackComment       String?   @db.Text @map("feedback_comment")
  improvementSuggestions String?  @db.Text @map("improvement_suggestions")

  // ä¿®äº†è¨¼
  certificateIssued     Boolean   @default(false) @map("certificate_issued")
  certificateNumber     String?   @map("certificate_number")
  certificateIssuedDate DateTime? @map("certificate_issued_date")
  certificateExpiryDate DateTime? @map("certificate_expiry_date")
  certificateFileUrl    String?   @map("certificate_file_url")

  // åŠ¹æœæ¸¬å®š
  effectiveness         Float?    @map("effectiveness")
  // ç ”ä¿®åŠ¹æœã‚¹ã‚³ã‚¢ï¼ˆ3ãƒ¶æœˆå¾Œãªã©ã«è©•ä¾¡ï¼‰
  effectMeasurementDate DateTime? @map("effect_measurement_date")
  behaviorChange        String?   @db.Text @map("behavior_change")
  // è¡Œå‹•å¤‰å®¹ã®è¨˜éŒ²

  // è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ é€£æº
  impactOnEvaluation    Float?    @map("impact_on_evaluation")
  // ã“ã®ç ”ä¿®ã«ã‚ˆã‚‹è©•ä¾¡ã‚¹ã‚³ã‚¢ã¸ã®å½±éŸ¿
  relatedAssessmentId   String?   @map("related_assessment_id")

  // æ‰¿èªãƒ•ãƒ­ãƒ¼
  approvalRequired      Boolean   @default(false) @map("approval_required")
  approvedBy            String?   @map("approved_by")
  approvedDate          DateTime? @map("approved_date")
  approvalComment       String?   @map("approval_comment")

  // ã‚³ã‚¹ãƒˆ
  participationCost     Float?    @map("participation_cost")
  travelCost            Float?    @map("travel_cost")
  totalCost             Float?    @map("total_cost")

  // å‚™è€ƒ
  notes                 String?   @db.Text @map("notes")
  cancellationReason    String?   @map("cancellation_reason")

  // ãƒ¡ã‚¿æƒ…å ±
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  recordedBy            String?   @map("recorded_by")

  // Relations
  employee              Employee         @relation(fields: [employeeId], references: [id])
  trainingProgram       TrainingProgram  @relation(fields: [trainingProgramId], references: [id])
  trainingSession       TrainingSession? @relation(fields: [trainingSessionId], references: [id])

  @@index([employeeId, completionDate])
  @@index([trainingProgramId])
  @@index([trainingSessionId])
  @@index([registrationStatus])
  @@index([completionDate])
  @@map("training_histories")
}
```

---

### 16-4. TrainingPlanï¼ˆå¹´é–“ç ”ä¿®è¨ˆç”»ï¼‰

#### ç›®çš„
å¹´é–“ãƒ»å››åŠæœŸãƒ»æœˆæ¬¡ã®ç ”ä¿®è¨ˆç”»ã‚’ç®¡ç†ã€‚è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£å‹•ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å®šç¾©ã€‚

#### ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

```prisma
model TrainingPlan {
  id                    String    @id @default(cuid())

  // è¨ˆç”»æœŸé–“
  planYear              Int       @map("plan_year") // 2024
  planPeriod            String    @map("plan_period")
  // annual (å¹´é–“), quarterly (å››åŠæœŸ), monthly (æœˆæ¬¡)
  planName              String    @map("plan_name")
  // "2024å¹´åº¦å¹´é–“ç ”ä¿®è¨ˆç”»", "2024å¹´ç¬¬2å››åŠæœŸè¨ˆç”»"

  // å¯¾è±¡ç¯„å›²
  targetFacilities      Json?     @map("target_facilities")
  targetDepartments     Json?     @map("target_departments")

  // è¨ˆç”»å†…å®¹
  trainingPrograms      Json      @map("training_programs")
  // [
  //   {
  //     programId: "xxx",
  //     scheduledMonth: 4,
  //     targetParticipants: 50,
  //     budget: 200000,
  //     evaluationLink: "3æœˆæŠ€è¡“è©•ä¾¡çµæœé€£å‹•"
  //   }
  // ]

  // ç›®æ¨™è¨­å®š
  targetCompletionRate  Float?    @map("target_completion_rate")
  // ç›®æ¨™å®Œäº†ç‡ (%)
  targetAverageScore    Float?    @map("target_average_score")
  targetROI             Float?    @map("target_roi")

  // äºˆç®—
  totalBudget           Float?    @map("total_budget")
  allocatedBudget       Float?    @map("allocated_budget")
  actualSpending        Float?    @map("actual_spending")

  // è©•ä¾¡é€£æº
  linkedEvaluationSchedule Json?  @map("linked_evaluation_schedule")
  // {
  //   "3æœˆ": "æŠ€è¡“è©•ä¾¡å®Ÿæ–½å‰ã«åŒ»ç™‚å®‰å…¨ç ”ä¿®å¿…é ˆ",
  //   "6æœˆ": "å¤å­£è²¢çŒ®åº¦è©•ä¾¡ã¨ç ”ä¿®åŠ¹æœæ¸¬å®šé€£æº"
  // }

  // å®Ÿç¸¾
  actualCompletionRate  Float?    @map("actual_completion_rate")
  actualAverageScore    Float?    @map("actual_average_score")
  actualROI             Float?    @map("actual_roi")
  achievementRate       Float?    @map("achievement_rate")
  // ç›®æ¨™é”æˆç‡

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status                String    @map("status")
  // draft (è‰æ¡ˆ), approved (æ‰¿èªæ¸ˆ), in_progress (å®Ÿæ–½ä¸­),
  // completed (å®Œäº†), archived (ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–)

  approvedBy            String?   @map("approved_by")
  approvedDate          DateTime? @map("approved_date")

  // ãƒ¡ã‚¿æƒ…å ±
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String?   @map("created_by")

  @@index([planYear, planPeriod])
  @@index([status])
  @@map("training_plans")
}
```

---

### 16-5. TrainingEffectAnalysisï¼ˆç ”ä¿®åŠ¹æœåˆ†æï¼‰

#### ç›®çš„
ç ”ä¿®ã®åŠ¹æœã‚’å®šé‡çš„ã«æ¸¬å®šãƒ»åˆ†æã€‚è©•ä¾¡ã‚¹ã‚³ã‚¢ã¨ã®ç›¸é–¢ã€ROIè¨ˆç®—ã€æ–½è¨­ãƒ»éƒ¨ç½²åˆ¥ã®åŠ¹æœæ¯”è¼ƒã€‚

#### ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

```prisma
model TrainingEffectAnalysis {
  id                    String    @id @default(cuid())
  trainingProgramId     String    @map("training_program_id")

  // åˆ†ææœŸé–“
  analysisDate          DateTime  @map("analysis_date")
  analysisPeriod        String    @map("analysis_period")
  // "2024-Q1", "2024å¹´åº¦"

  // å¯¾è±¡ç¯„å›²
  targetScope           String    @map("target_scope")
  // all (å…¨ä½“), facility (æ–½è¨­åˆ¥), department (éƒ¨ç½²åˆ¥),
  // job_category (è·ç¨®åˆ¥), experience_level (çµŒé¨“ãƒ¬ãƒ™ãƒ«åˆ¥)
  scopeIdentifier       String?   @map("scope_identifier")
  // æ–½è¨­IDã€éƒ¨ç½²IDãªã©

  // å—è¬›è€…ãƒ‡ãƒ¼ã‚¿
  totalParticipants     Int       @map("total_participants")
  completedParticipants Int       @map("completed_participants")
  completionRate        Float     @map("completion_rate")

  // ã‚¹ã‚³ã‚¢ãƒ‡ãƒ¼ã‚¿
  averagePreScore       Float?    @map("average_pre_score")
  averagePostScore      Float?    @map("average_post_score")
  averageImprovement    Float?    @map("average_improvement")
  averageExamScore      Float?    @map("average_exam_score")
  passRate              Float?    @map("pass_rate")

  // è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ é€£æºãƒ‡ãƒ¼ã‚¿
  evaluationScoreBefore Float?    @map("evaluation_score_before")
  // ç ”ä¿®å‰ã®è©•ä¾¡ã‚¹ã‚³ã‚¢å¹³å‡
  evaluationScoreAfter  Float?    @map("evaluation_score_after")
  // ç ”ä¿®å¾Œã®è©•ä¾¡ã‚¹ã‚³ã‚¢å¹³å‡
  evaluationImprovement Float?    @map("evaluation_improvement")
  correlationCoefficient Float?   @map("correlation_coefficient")
  // ç ”ä¿®ã‚¹ã‚³ã‚¢ã¨è©•ä¾¡ã‚¹ã‚³ã‚¢ã®ç›¸é–¢ä¿‚æ•°

  // ROIåˆ†æ
  totalCost             Float?    @map("total_cost")
  costPerPerson         Float?    @map("cost_per_person")
  estimatedValue        Float?    @map("estimated_value")
  // è©•ä¾¡å‘ä¸Šã«ã‚ˆã‚‹ä¾¡å€¤ç®—å‡º
  roi                   Float?    @map("roi")
  // ROI = (ä¾¡å€¤ - ã‚³ã‚¹ãƒˆ) / ã‚³ã‚¹ãƒˆ * 100

  // æº€è¶³åº¦
  averageSatisfaction   Float?    @map("average_satisfaction")
  recommendationRate    Float?    @map("recommendation_rate")

  // åŠ¹æœæŒç¶šæ€§
  threeMonthRetention   Float?    @map("three_month_retention")
  // 3ãƒ¶æœˆå¾Œã®åŠ¹æœæŒç¶šç‡
  sixMonthRetention     Float?    @map("six_month_retention")

  // åˆ†æçµæœã‚µãƒãƒªãƒ¼
  effectLevel           String?   @map("effect_level")
  // very_high, high, moderate, low, very_low
  keyFindings           Json?     @map("key_findings")
  // ä¸»è¦ãªç™ºè¦‹äº‹é …
  recommendations       Json?     @map("recommendations")
  // æ”¹å–„ææ¡ˆ

  // æ¯”è¼ƒãƒ‡ãƒ¼ã‚¿
  comparisonData        Json?     @map("comparison_data")
  // ä»–æ–½è¨­ãƒ»ä»–éƒ¨ç½²ã¨ã®æ¯”è¼ƒ

  // ãƒ¡ã‚¿æƒ…å ±
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  analyzedBy            String?   @map("analyzed_by")

  @@index([trainingProgramId, analysisDate])
  @@index([analysisPeriod])
  @@index([targetScope])
  @@map("training_effect_analyses")
}
```

---

### 16-6. Employeeãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®é–¢é€£è¿½åŠ 

```prisma
model Employee {
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

  // ğŸ†• ç ”ä¿®ç®¡ç†
  trainingHistories     TrainingHistory[]    // ç ”ä¿®å—è¬›å±¥æ­´

  // æ—¢å­˜Relations
  skillDevelopmentPlans SkillDevelopmentPlan[]
  onboardingProgress    OnboardingProgress?
  assignmentHistory     AssignmentHistory[]
  fitnessAssessments    FitnessAssessment[]
  careerPlan            CareerDevelopmentPlan?
  growthTimeline        IntegratedGrowthTimeline[]
  talentPortfolio       TalentPortfolioAnalysis[]
  growthPredictions     GrowthPrediction[]
  // ...
}
```

---

### 16-7. ä½¿ç”¨ä¾‹

#### å€‹äººãƒ¬ãƒ™ãƒ«ï¼šå…¨ç ”ä¿®å±¥æ­´ã®å–å¾—

```typescript
// è·å“¡ã®å…¨ç ”ä¿®å±¥æ­´ã‚’å–å¾—ï¼ˆæ³•å®šç ”ä¿®ãƒ»ä¼ç”»ç ”ä¿®å«ã‚€ï¼‰
const trainingHistory = await prisma.trainingHistory.findMany({
  where: { employeeId: 'emp123' },
  include: {
    trainingProgram: {
      select: {
        programName: true,
        trainingType: true,
        trainingCategory: true,
        isLegalRequired: true
      }
    },
    trainingSession: {
      select: {
        sessionDate: true,
        venue: true,
        instructorName: true
      }
    }
  },
  orderBy: { completionDate: 'desc' }
});

// ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦è¡¨ç¤º
const grouped = {
  legal: trainingHistory.filter(t => t.trainingProgram.isLegalRequired),
  planned: trainingHistory.filter(t => t.trainingProgram.trainingType === 'planned'),
  required: trainingHistory.filter(t => t.trainingProgram.isRequired),
  optional: trainingHistory.filter(t => !t.trainingProgram.isRequired)
};
```

#### æ–½è¨­å˜ä½ï¼šç ”ä¿®é€²æ—çŠ¶æ³

```typescript
// æ–½è¨­åˆ¥ã®ç ”ä¿®é€²æ—ã‚’å–å¾—
const facilityProgress = await prisma.$queryRaw`
  SELECT
    tp.training_type,
    tp.program_name,
    COUNT(DISTINCT th.employee_id) as total_registered,
    SUM(CASE WHEN th.registration_status = 'completed' THEN 1 ELSE 0 END) as completed_count,
    (SUM(CASE WHEN th.registration_status = 'completed' THEN 1 ELSE 0 END) * 100.0 / COUNT(DISTINCT th.employee_id)) as completion_rate
  FROM training_histories th
  JOIN training_programs tp ON th.training_program_id = tp.id
  JOIN employees e ON th.employee_id = e.id
  WHERE e.facility_id = 'obara-hospital'
    AND YEAR(th.created_at) = 2024
  GROUP BY tp.id, tp.training_type, tp.program_name
  ORDER BY tp.training_type, completion_rate DESC
`;
```

#### éƒ¨ç½²å˜ä½ï¼šæœªå—è¬›è€…ãƒªã‚¹ãƒˆ

```typescript
// éƒ¨ç½²åˆ¥ã®å¿…é ˆç ”ä¿®æœªå—è¬›è€…ã‚’æŠ½å‡º
const uncompletedByDepartment = await prisma.employee.findMany({
  where: {
    departmentId: 'nursing-dept',
    trainingHistories: {
      none: {
        trainingProgram: {
          isRequired: true,
          trainingCategory: 'medical_safety'
        },
        registrationStatus: 'completed'
      }
    }
  },
  select: {
    id: true,
    name: true,
    position: true,
    department: true
  }
});
```

#### æ³•å®šç ”ä¿®ã®ç®¡ç†

```typescript
// æ³•å®šç ”ä¿®ã®å—è¬›çŠ¶æ³ç¢ºèª
const legalTrainingStatus = await prisma.trainingHistory.findMany({
  where: {
    trainingProgram: {
      isLegalRequired: true
    },
    completionDate: {
      gte: new Date(new Date().getFullYear(), 0, 1) // ä»Šå¹´åº¦
    }
  },
  include: {
    employee: {
      select: { id: true, name: true, departmentId: true }
    },
    trainingProgram: {
      select: { programName: true, trainingCategory: true }
    }
  }
});

// æœŸé™åˆ‡ã‚Œé–“è¿‘ã®ä¿®äº†è¨¼ã‚’ãƒã‚§ãƒƒã‚¯
const expiringCertificates = await prisma.trainingHistory.findMany({
  where: {
    certificateExpiryDate: {
      lte: addMonths(new Date(), 3), // 3ãƒ¶æœˆä»¥å†…ã«æœŸé™åˆ‡ã‚Œ
      gte: new Date()
    },
    registrationStatus: 'completed'
  },
  include: {
    employee: true,
    trainingProgram: true
  }
});
```

---

### 16-8. æ—¢å­˜Trainingãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã®é–¢ä¿‚

**æ—¢å­˜Trainingãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆ181-200è¡Œï¼‰:**
- åŸºæœ¬çš„ãªç ”ä¿®å±¥æ­´ã®ã¿
- ãƒ—ãƒ­ã‚°ãƒ©ãƒ å®šç¾©ãªã—
- å—è¬›çŠ¶æ³ç®¡ç†ãªã—

**ç§»è¡Œæ–¹é‡:**
1. æ—¢å­˜Trainingãƒ†ãƒ¼ãƒ–ãƒ«ã¯**TrainingHistory**ã«çµ±åˆ
2. æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’TrainingHistoryã«ç§»è¡Œã—ã€å¯¾å¿œã™ã‚‹TrainingProgramã‚’ä½œæˆ
3. TrainingProgramã§ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ ã‚’ä¸€å…ƒç®¡ç†
4. TrainingSessionã§å®Ÿæ–½ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ç®¡ç†
5. TrainingHistoryã§å€‹äººã®å—è¬›å±¥æ­´ã‚’è©³ç´°è¿½è·¡

---

## 17. ç›®æ¨™ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ãƒ»ç­‰ç´šåˆ¶åº¦ãƒ»ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è©•ä¾¡ï¼ˆå°†æ¥å¯¾å¿œï¼‰

### èƒŒæ™¯ã¨è¦ä»¶
- ç¾åœ¨ã¯åŸºæœ¬çš„ãªOKRæ©Ÿèƒ½ã®ã¿ï¼ˆç›®æ¨™è¨­å®šãƒ»é€²æ—ç®¡ç†ãƒ»è©•ä¾¡ï¼‰
- **ç¬¬2æ®µéšï¼ˆ2026å¹´10æœˆï¼‰**: å…±é€š50ç­‰ç´šåˆ¶åº¦å°å…¥äºˆå®š
- **ç¬¬3æ®µéšï¼ˆ2027å¹´4æœˆï¼‰**: 100ç‚¹æº€ç‚¹è©•ä¾¡åˆ¶åº¦ + ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è©•ä¾¡å®Œæˆ
- ç­‰ç´šåˆ¶åº¦ã®è©³ç´°ã¯æœªå®šã ãŒã€**ä»Šã®æ®µéšã§ã‚ã‚‰ã‚†ã‚‹ç›®æ¨™ç®¡ç†ã«å¯¾å¿œã§ãã‚‹è¨­è¨ˆ**ãŒå¿…è¦

### äººäº‹åˆ¶åº¦ã®æ®µéšçš„å°å…¥è¨ˆç”»ï¼ˆå‚ç…§: hr-stationï¼‰
```
ç¬¬1æ®µéšï¼ˆ2026å¹´4æœˆã€œï¼‰
â””â”€ ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹åˆ¶åº¦å°å…¥ï¼ˆè©•ä¾¡ãƒ»ç­‰ç´šãªã—ï¼‰

ç¬¬2æ®µéšï¼ˆ2026å¹´10æœˆã€œï¼‰
â””â”€ å…±é€š50ç­‰ç´šåˆ¶åº¦å°å…¥
   â”œâ”€ Aã‚³ãƒ¼ã‚¹: 1-50ç´šï¼ˆä¿‚æ•°1.2ï¼‰
   â”œâ”€ Bã‚³ãƒ¼ã‚¹: 1-40ç´šï¼ˆä¿‚æ•°1.1ï¼‰
   â”œâ”€ Cã‚³ãƒ¼ã‚¹: 1-30ç´šï¼ˆä¿‚æ•°1.0ï¼‰
   â””â”€ Dã‚³ãƒ¼ã‚¹: 1-20ç´šï¼ˆä¿‚æ•°0.9ï¼‰

ç¬¬3æ®µéšï¼ˆ2027å¹´4æœˆã€œï¼‰- å®Œæˆå½¢
â””â”€ 100ç‚¹æº€ç‚¹è©•ä¾¡åˆ¶åº¦ + ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è©•ä¾¡
   â”œâ”€ 7æ®µéšè©•ä¾¡ï¼ˆS+/S/A+/A/B/C/Dï¼‰
   â”œâ”€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å±¤åˆ¥ï¼ˆä¸Šä½20%/ä¸­é–“60%/è¦æ”¯æ´20%ï¼‰
   â””â”€ ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è©•ä¾¡ï¼ˆè¡Œå‹•ç‰¹æ€§ãƒ»èƒ½åŠ›è©•ä¾¡ï¼‰
```

### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

#### 17-1. GradeSystemï¼ˆç­‰ç´šåˆ¶åº¦ãƒã‚¹ã‚¿ï¼‰

**ç›®çš„**: å°†æ¥ã®ç­‰ç´šåˆ¶åº¦å°å…¥ã«å¯¾å¿œã€‚50ç­‰ç´šåˆ¶åº¦Ã—4ã‚³ãƒ¼ã‚¹ã®å®šç¾©ã€‚

```prisma
model GradeSystem {
  id                    String    @id @default(cuid())
  systemCode            String    @unique @map("system_code")
  // ä¾‹: "GRADE-50-2026" ï¼ˆ50ç­‰ç´šåˆ¶åº¦2026å¹´ç‰ˆï¼‰
  systemName            String    @map("system_name")
  // ä¾‹: "å…±é€š50ç­‰ç´šåˆ¶åº¦"
  effectiveDate         DateTime  @map("effective_date")
  // é©ç”¨é–‹å§‹æ—¥ï¼ˆ2026-10-01ï¼‰
  endDate               DateTime? @map("end_date")
  // é©ç”¨çµ‚äº†æ—¥
  totalGrades           Int       @map("total_grades")
  // ç­‰ç´šæ•°ï¼ˆ50ï¼‰
  isActive              Boolean   @default(true) @map("is_active")

  // ã‚³ãƒ¼ã‚¹åˆ¥ä¸Šé™å®šç¾©ï¼ˆJSONé…åˆ—ï¼‰
  courseGradeLimits     Json?     @map("course_grade_limits")
  // [
  //   { "course": "A", "ceiling": 50, "coefficient": 1.2, "label": "å…¨ç¯„å›²ï¼ˆ1-50ç´šï¼‰" },
  //   { "course": "B", "ceiling": 40, "coefficient": 1.1, "label": "ä¸Šé™40ç´š" },
  //   { "course": "C", "ceiling": 30, "coefficient": 1.0, "label": "ä¸Šé™30ç´š" },
  //   { "course": "D", "ceiling": 20, "coefficient": 0.9, "label": "ä¸Šé™20ç´š" }
  // ]

  // ç­‰ç´šåˆ¥è©³ç´°å®šç¾©ï¼ˆJSONé…åˆ—ï¼‰
  gradeDefinitions      Json?     @map("grade_definitions")
  // [
  //   { "grade": 1, "minSalary": 180000, "maxSalary": 200000, "title": "åˆç´šè·å“¡" },
  //   { "grade": 25, "minSalary": 350000, "maxSalary": 400000, "title": "ä¸­å …è·å“¡" },
  //   { "grade": 50, "minSalary": 800000, "maxSalary": 1000000, "title": "æœ€ä¸Šç´šè·å“¡" }
  // ]

  description           String?   @map("description")
  notes                 String?   @map("notes")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  // Relations
  gradeHistories        EmployeeGradeHistory[]
  competencyTemplates   CompetencyTemplate[]

  @@index([systemCode])
  @@index([isActive])
  @@index([effectiveDate])
  @@map("grade_systems")
}
```

#### 17-2. EmployeeGradeHistoryï¼ˆè·å“¡ç­‰ç´šå±¥æ­´ï¼‰

**ç›®çš„**: å€‹äººã®ç­‰ç´šå¤‰é·ã‚’å®Œå…¨è¿½è·¡ã€‚æ˜‡æ ¼ãƒ»é™æ ¼ã®ç†ç”±ã¨è©•ä¾¡é€£å‹•ã‚’è¨˜éŒ²ã€‚

```prisma
model EmployeeGradeHistory {
  id                    String    @id @default(cuid())
  employeeId            String    @map("employee_id")
  gradeSystemId         String    @map("grade_system_id")

  // ç­‰ç´šæƒ…å ±
  currentGrade          Int       @map("current_grade")
  // 1-50ã®ç­‰ç´š
  previousGrade         Int?      @map("previous_grade")
  // å‰å›ã®ç­‰ç´š
  gradeChangeType       String?   @map("grade_change_type")
  // promotionï¼ˆæ˜‡æ ¼ï¼‰, demotionï¼ˆé™æ ¼ï¼‰, initialï¼ˆåˆå›ä»˜ä¸ï¼‰, adjustmentï¼ˆèª¿æ•´ï¼‰

  // ã‚³ãƒ¼ã‚¹æƒ…å ±
  currentCourse         String    @map("current_course")
  // A, B, C, D
  gradeCeiling          Int?      @map("grade_ceiling")
  // é¸æŠã‚³ãƒ¼ã‚¹ã®ä¸Šé™ç­‰ç´šï¼ˆAã‚³ãƒ¼ã‚¹=50, Bã‚³ãƒ¼ã‚¹=40ç­‰ï¼‰

  // æ—¥ä»˜ç®¡ç†
  effectiveDate         DateTime  @map("effective_date")
  // é©ç”¨é–‹å§‹æ—¥
  endDate               DateTime? @map("end_date")
  // é©ç”¨çµ‚äº†æ—¥
  isCurrent             Boolean   @default(true) @map("is_current")

  // æ˜‡æ ¼ç†ç”±ãƒ»è©•ä¾¡é€£å‹•
  changeReason          String?   @map("change_reason")
  // å®šæœŸæ˜‡æ ¼ã€ç‰¹åˆ¥æ˜‡æ ¼ã€è©•ä¾¡æ˜‡æ ¼ã€è©¦ç”¨æœŸé–“çµ‚äº†ç­‰
  linkedEvaluationId    String?   @map("linked_evaluation_id")
  // è©•ä¾¡åˆ¶åº¦é€£å‹•ï¼ˆV3Assessmentç­‰ã®IDï¼‰
  linkedGoalId          String?   @map("linked_goal_id")
  // ç›®æ¨™é”æˆã«ã‚ˆã‚‹æ˜‡æ ¼ã®å ´åˆ
  evaluationScore       Float?    @map("evaluation_score")
  // æ˜‡æ ¼æ™‚ã®è©•ä¾¡ç‚¹ï¼ˆ100ç‚¹æº€ç‚¹ç­‰ï¼‰

  // çµ¦ä¸é€£å‹•
  estimatedSalaryImpact Float?    @map("estimated_salary_impact")
  // æ˜‡æ ¼ã«ã‚ˆã‚‹çµ¦ä¸å½±éŸ¿é¡ï¼ˆå††ï¼‰
  coefficientApplied    Float?    @map("coefficient_applied")
  // é©ç”¨ã•ã‚ŒãŸä¿‚æ•°ï¼ˆ1.2, 1.1, 1.0, 0.9ï¼‰

  approvedBy            String?   @map("approved_by")
  // æ‰¿èªè€…ID
  approvalDate          DateTime? @map("approval_date")
  notes                 String?   @map("notes")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  // Relations
  employee              Employee  @relation(fields: [employeeId], references: [id])
  gradeSystem           GradeSystem @relation(fields: [gradeSystemId], references: [id])

  @@index([employeeId])
  @@index([gradeSystemId])
  @@index([currentGrade])
  @@index([currentCourse])
  @@index([isCurrent])
  @@index([effectiveDate])
  @@map("employee_grade_histories")
}
```

#### 17-3. CompetencyTemplateï¼ˆã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è©•ä¾¡ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰

**ç›®çš„**: è¡Œå‹•ç‰¹æ€§ãƒ»èƒ½åŠ›è©•ä¾¡ã®é …ç›®å®šç¾©ã€‚è·ç¨®åˆ¥ãƒ»ç­‰ç´šåˆ¥ã®ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è¦ä»¶ã‚’ç®¡ç†ã€‚

```prisma
model CompetencyTemplate {
  id                    String    @id @default(cuid())
  templateCode          String    @unique @map("template_code")
  // ä¾‹: "COMP-NURSE-2027" ï¼ˆçœ‹è­·å¸«ç”¨2027å¹´ç‰ˆï¼‰
  templateName          String    @map("template_name")
  // ä¾‹: "çœ‹è­·å¸«ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è©•ä¾¡ï¼ˆç¬¬3æ®µéšï¼‰"

  // é©ç”¨ç¯„å›²
  targetJobCategory     String?   @map("target_job_category")
  // nurse, doctor, therapist, clerk ç­‰
  targetGradeRange      Json?     @map("target_grade_range")
  // { "min": 1, "max": 50 } ã¾ãŸã¯ç‰¹å®šç­‰ç´š
  targetCourse          String?   @map("target_course")
  // A, B, C, D ã®ã„ãšã‚Œã‹ï¼ˆnull=å…¨ã‚³ãƒ¼ã‚¹å¯¾è±¡ï¼‰
  gradeSystemId         String?   @map("grade_system_id")
  // ç´ä»˜ãç­‰ç´šåˆ¶åº¦

  // ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼é …ç›®å®šç¾©ï¼ˆJSONé…åˆ—ï¼‰
  competencyItems       Json      @map("competency_items")
  // [
  //   {
  //     "id": "COMP-001",
  //     "category": "å¯¾äººé–¢ä¿‚èƒ½åŠ›",
  //     "itemName": "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³",
  //     "description": "æ‚£è€…ãƒ»å®¶æ—ãƒ»å¤šè·ç¨®ã¨é©åˆ‡ã«å¯¾è©±ã§ãã‚‹",
  //     "gradeLevels": {
  //       "1-10": "åŸºæœ¬çš„ãªæŒ¨æ‹¶ãƒ»å ±å‘ŠãŒã§ãã‚‹",
  //       "11-25": "çŠ¶æ³ã«å¿œã˜ãŸèª¬æ˜ãƒ»èª¿æ•´ãŒã§ãã‚‹",
  //       "26-40": "å›°é›£ãªäº¤æ¸‰ãƒ»èª¿æ•´ã‚’ãƒªãƒ¼ãƒ‰ã§ãã‚‹",
  //       "41-50": "çµ„ç¹”å…¨ä½“ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³æˆ¦ç•¥ã‚’ç«‹æ¡ˆã§ãã‚‹"
  //     },
  //     "weight": 15
  //   },
  //   {
  //     "id": "COMP-002",
  //     "category": "æ¥­å‹™é‚è¡Œèƒ½åŠ›",
  //     "itemName": "å•é¡Œè§£æ±ºåŠ›",
  //     "description": "èª²é¡Œã‚’ç™ºè¦‹ã—ã€é©åˆ‡ãªè§£æ±ºç­–ã‚’å®Ÿè¡Œã§ãã‚‹",
  //     "gradeLevels": { ... },
  //     "weight": 20
  //   },
  //   ... ä»–ã®é …ç›®
  // ]

  // è©•ä¾¡åŸºæº–
  evaluationScale       String?   @map("evaluation_scale")
  // 5æ®µéšè©•ä¾¡ã€7æ®µéšè©•ä¾¡ç­‰
  totalWeight           Int?      @map("total_weight")
  // åˆè¨ˆã‚¦ã‚§ã‚¤ãƒˆï¼ˆé€šå¸¸100%ï¼‰
  passingScore          Float?    @map("passing_score")
  // åˆæ ¼åŸºæº–ç‚¹

  effectiveDate         DateTime  @map("effective_date")
  endDate               DateTime? @map("end_date")
  isActive              Boolean   @default(true) @map("is_active")

  notes                 String?   @map("notes")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  // Relations
  gradeSystem           GradeSystem? @relation(fields: [gradeSystemId], references: [id])
  competencyEvaluations CompetencyEvaluation[]

  @@index([templateCode])
  @@index([targetJobCategory])
  @@index([isActive])
  @@index([effectiveDate])
  @@map("competency_templates")
}
```

#### 17-4. CompetencyEvaluationï¼ˆã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è©•ä¾¡è¨˜éŒ²ï¼‰

**ç›®çš„**: å€‹äººã®ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è©•ä¾¡çµæœã‚’è¨˜éŒ²ã€‚ç­‰ç´šæ˜‡æ ¼åˆ¤å®šãƒ»è‚²æˆè¨ˆç”»ã®æ ¹æ‹ ãƒ‡ãƒ¼ã‚¿ã€‚

```prisma
model CompetencyEvaluation {
  id                    String    @id @default(cuid())
  employeeId            String    @map("employee_id")
  competencyTemplateId  String    @map("competency_template_id")

  evaluationPeriod      String    @map("evaluation_period")
  // 2027-Q1, 2027-H1, 2027-Annualç­‰
  evaluationDate        DateTime  @map("evaluation_date")
  evaluatorId           String?   @map("evaluator_id")
  // è©•ä¾¡è€…ID

  // è©•ä¾¡çµæœï¼ˆJSONé…åˆ—ï¼‰
  evaluationResults     Json      @map("evaluation_results")
  // [
  //   {
  //     "competencyId": "COMP-001",
  //     "itemName": "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³",
  //     "score": 4.5,
  //     "maxScore": 5,
  //     "weight": 15,
  //     "weightedScore": 13.5,
  //     "evaluatorComment": "å¤šè·ç¨®ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã§ç©æ¥µçš„ã«ç™ºè¨€ã—ã€èª¿æ•´å½¹ã‚’æ‹…ã£ã¦ã„ã‚‹",
  //     "behaviorExamples": ["ã€‡ã€‡ã®å ´é¢ã§ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’ç™ºæ®", "â–³â–³ã®å›°é›£äº‹ä¾‹ã‚’è§£æ±º"]
  //   },
  //   { ... ä»–ã®é …ç›® }
  // ]

  // ç·åˆè©•ä¾¡
  totalScore            Float     @map("total_score")
  // åˆè¨ˆç‚¹ï¼ˆ100ç‚¹æº€ç‚¹ç­‰ï¼‰
  totalWeightedScore    Float     @map("total_weighted_score")
  // åŠ é‡åˆè¨ˆç‚¹
  competencyGrade       String?   @map("competency_grade")
  // S+, S, A+, A, B, C, D ç­‰
  overallRanking        String?   @map("overall_ranking")
  // top20%, middle60%, support20%

  // å¼·ã¿ãƒ»å¼±ã¿åˆ†æ
  topStrengths          Json?     @map("top_strengths")
  // [{ "item": "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³", "score": 4.8 }, ...]
  improvementAreas      Json?     @map("improvement_areas")
  // [{ "item": "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—", "score": 2.5, "action": "ç ”ä¿®å—è¬›æ¨å¥¨" }, ...]

  // æ˜‡æ ¼åˆ¤å®š
  isPromotionRecommended Boolean? @default(false) @map("is_promotion_recommended")
  recommendedNextGrade  Int?      @map("recommended_next_grade")
  promotionReadiness    String?   @map("promotion_readiness")
  // readyï¼ˆæº–å‚™å®Œäº†ï¼‰, developingï¼ˆè‚²æˆä¸­ï¼‰, needs_supportï¼ˆæ”¯æ´å¿…è¦ï¼‰

  // è‚²æˆè¨ˆç”»é€£æº
  developmentPriorities Json?     @map("development_priorities")
  // [
  //   { "competency": "å•é¡Œè§£æ±ºåŠ›", "priority": "high", "targetScore": 4.0, "method": "OJT + ç ”ä¿®" },
  //   ...
  // ]
  linkedGoalIds         Json?     @map("linked_goal_ids")
  // é€£å‹•ã™ã‚‹ç›®æ¨™ç®¡ç†ã®IDé…åˆ—

  evaluatorComment      String?   @map("evaluator_comment")
  selfAssessmentComment String?   @map("self_assessment_comment")
  // æœ¬äººã®è‡ªå·±è©•ä¾¡ã‚³ãƒ¡ãƒ³ãƒˆ

  status                String    @default("draft") @map("status")
  // draft, submitted, approved, finalized
  approvedBy            String?   @map("approved_by")
  approvalDate          DateTime? @map("approval_date")

  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  // Relations
  employee              Employee  @relation(fields: [employeeId], references: [id])
  competencyTemplate    CompetencyTemplate @relation(fields: [competencyTemplateId], references: [id])

  @@index([employeeId])
  @@index([competencyTemplateId])
  @@index([evaluationPeriod])
  @@index([competencyGrade])
  @@index([isPromotionRecommended])
  @@map("competency_evaluations")
}
```

#### 17-5. Goalï¼ˆç›®æ¨™ç®¡ç†ãƒ»OKRï¼‰- æ—¢å­˜æ‹¡å¼µ

**ç›®çš„**: æ—¢å­˜ã®ç›®æ¨™ç®¡ç†ã‚’ç­‰ç´šåˆ¶åº¦ãƒ»ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è©•ä¾¡ã¨å®Œå…¨é€£å‹•ã•ã›ã‚‹ã€‚

```prisma
model Goal {
  id                    String    @id @default(cuid())
  employeeId            String    @map("employee_id")

  // åŸºæœ¬æƒ…å ±ï¼ˆæ—¢å­˜ï¼‰
  goalTitle             String    @map("goal_title")
  goalDescription       String?   @map("goal_description")
  goalCategory          String    @map("goal_category")
  // ã‚¹ã‚­ãƒ«é–‹ç™ºã€ã‚­ãƒ£ãƒªã‚¢é–‹ç™ºã€æ¥­å‹™æ”¹å–„ã€çµ„ç¹”è²¢çŒ®ç­‰

  // OKRï¼ˆObjectives & Key Resultsï¼‰
  keyResults            Json?     @map("key_results")
  // [
  //   { "id": "kr1", "title": "é™è„ˆæ³¨å°„æˆåŠŸç‡", "targetValue": 95, "currentValue": 88, "unit": "%" },
  //   { "id": "kr2", "title": "ç ”ä¿®æ™‚é–“", "targetValue": 40, "currentValue": 26, "unit": "æ™‚é–“" }
  // ]

  // æœŸé–“ç®¡ç†
  fiscalYear            Int?      @map("fiscal_year")
  // å¹´åº¦ï¼ˆ2027ï¼‰
  period                String?   @map("period")
  // annual, semi-annual, quarterly, monthly
  startDate             DateTime  @map("start_date")
  targetDate            DateTime  @map("target_date")
  completionDate        DateTime? @map("completion_date")

  // é€²æ—ç®¡ç†
  status                String    @default("active") @map("status")
  // active, completed, paused, cancelled
  progressPercent       Float     @default(0) @map("progress_percent")
  // 0-100%
  lastUpdatedProgress   DateTime? @map("last_updated_progress")

  // ğŸ†• ç­‰ç´šåˆ¶åº¦é€£å‹•
  linkedGradeHistoryId  String?   @map("linked_grade_history_id")
  // æ˜‡æ ¼ã«ç´ã¥ãç›®æ¨™ã®å ´åˆ
  targetGrade           Int?      @map("target_grade")
  // ã“ã®ç›®æ¨™é”æˆã§åˆ°é”ã—ãŸã„ç­‰ç´š
  isPromotionLinked     Boolean   @default(false) @map("is_promotion_linked")
  // æ˜‡æ ¼è¦ä»¶ã«å«ã¾ã‚Œã‚‹ã‹

  // ğŸ†• ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼é€£å‹•
  linkedCompetencyIds   Json?     @map("linked_competency_ids")
  // ã“ã®ç›®æ¨™ãŒè‚²æˆå¯¾è±¡ã¨ã™ã‚‹ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼é …ç›®IDé…åˆ—
  // ["COMP-001", "COMP-003"] ç­‰
  targetCompetencyScore Float?    @map("target_competency_score")
  // ç›®æ¨™é”æˆæ™‚ã«æœŸå¾…ã•ã‚Œã‚‹ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼ã‚¹ã‚³ã‚¢

  // ğŸ†• 100ç‚¹æº€ç‚¹è©•ä¾¡é€£å‹•
  evaluationWeight      Float?    @map("evaluation_weight")
  // ã“ã®ç›®æ¨™ã®è©•ä¾¡å…¨ä½“ã¸ã®å¯„ä¸åº¦ï¼ˆ%ï¼‰
  achievementScore      Float?    @map("achievement_score")
  // é”æˆåº¦ã«åŸºã¥ãè©•ä¾¡ç‚¹ï¼ˆ100ç‚¹æº€ç‚¹ï¼‰
  evaluationGrade       String?   @map("evaluation_grade")
  // S+, S, A+, A, B, C, D

  // è©•ä¾¡ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼
  reviewerId            String?   @map("reviewer_id")
  reviewDate            DateTime? @map("review_date")
  reviewComment         String?   @map("review_comment")
  nextTermSuggestion    String?   @map("next_term_suggestion")
  // æ¬¡æœŸç›®æ¨™ã¸ã®æè¨€

  // æ‰¿èªãƒ•ãƒ­ãƒ¼
  submittedDate         DateTime? @map("submitted_date")
  approvedBy            String?   @map("approved_by")
  approvalDate          DateTime? @map("approval_date")

  priority              String?   @default("medium") @map("priority")
  // high, medium, low
  isPublic              Boolean   @default(false) @map("is_public")
  // ä»–è·å“¡ã¸ã®å…¬é–‹å¯å¦

  notes                 String?   @map("notes")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  // Relations
  employee              Employee  @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([fiscalYear])
  @@index([status])
  @@index([isPromotionLinked])
  @@index([targetDate])
  @@map("goals")
}
```

---

### Employeeãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®æ‹¡å¼µãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

æ—¢å­˜ã®Employeeãƒ†ãƒ¼ãƒ–ãƒ«ã«ä»¥ä¸‹ã‚’è¿½åŠ ï¼š

```prisma
model Employee {
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ ...

  // ğŸ†• ç­‰ç´šæƒ…å ±
  currentGrade          Int?      @map("current_grade")
  // ç¾åœ¨ã®ç­‰ç´šï¼ˆ1-50ï¼‰
  currentCourse         String?   @map("current_course")
  // ç¾åœ¨ã®ã‚³ãƒ¼ã‚¹ï¼ˆA/B/C/Dï¼‰
  gradeCeiling          Int?      @map("grade_ceiling")
  // ã‚³ãƒ¼ã‚¹ä¸Šé™ç­‰ç´š
  gradeCoefficient      Float?    @map("grade_coefficient")
  // çµ¦ä¸ä¿‚æ•°ï¼ˆ1.2/1.1/1.0/0.9ï¼‰

  // ğŸ†• è©•ä¾¡ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å±¤
  currentEvaluationGrade String?  @map("current_evaluation_grade")
  // æœ€æ–°ã®è©•ä¾¡ã‚°ãƒ¬ãƒ¼ãƒ‰ï¼ˆS+/S/A+/A/B/C/Dï¼‰
  performanceLayer      String?   @map("performance_layer")
  // top20%, middle60%, support20%
  lastEvaluationDate    DateTime? @map("last_evaluation_date")

  // ğŸ†• ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼ç·åˆã‚¹ã‚³ã‚¢
  latestCompetencyScore Float?    @map("latest_competency_score")
  // æœ€æ–°ã®ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼ç·åˆç‚¹
  competencyGrade       String?   @map("competency_grade")
  // ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è©•ä¾¡ã‚°ãƒ¬ãƒ¼ãƒ‰

  // Relations
  gradeHistories        EmployeeGradeHistory[]
  competencyEvaluations CompetencyEvaluation[]
  goals                 Goal[]

  // ... æ—¢å­˜Relations ...
}
```

---

### è¨­è¨ˆã®ãƒã‚¤ãƒ³ãƒˆ

#### 1. **æ®µéšçš„å°å…¥ã¸ã®å®Œå…¨å¯¾å¿œ**
- ç¬¬1æ®µéšï¼ˆ2026å¹´4æœˆï¼‰: Goalãƒ†ãƒ¼ãƒ–ãƒ«ã®ã¿ä½¿ç”¨ï¼ˆOKRæ©Ÿèƒ½ï¼‰
- ç¬¬2æ®µéšï¼ˆ2026å¹´10æœˆï¼‰: GradeSystem + EmployeeGradeHistoryè¿½åŠ 
- ç¬¬3æ®µéšï¼ˆ2027å¹´4æœˆï¼‰: CompetencyTemplate + CompetencyEvaluationè¿½åŠ 

#### 2. **æŸ”è»Ÿãªç­‰ç´šåˆ¶åº¦å®šç¾©**
```json
// 50ç­‰ç´šä»¥å¤–ã‚‚å¯¾å¿œå¯èƒ½ï¼ˆä¾‹: 100ç­‰ç´šåˆ¶åº¦ï¼‰
{
  "systemCode": "GRADE-100-2028",
  "totalGrades": 100,
  "courseGradeLimits": [
    { "course": "A", "ceiling": 100 },
    { "course": "B", "ceiling": 80 }
  ]
}
```

#### 3. **ã‚ã‚‰ã‚†ã‚‹ç›®æ¨™ç®¡ç†ã«å¯¾å¿œ**
- âœ… åŸºæœ¬çš„ãªOKRï¼ˆç¾åœ¨ï¼‰
- âœ… ç­‰ç´šæ˜‡æ ¼ç›®æ¨™ï¼ˆç¬¬2æ®µéšï¼‰
- âœ… ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è‚²æˆç›®æ¨™ï¼ˆç¬¬3æ®µéšï¼‰
- âœ… 100ç‚¹æº€ç‚¹è©•ä¾¡é€£å‹•ï¼ˆç¬¬3æ®µéšï¼‰

#### 4. **ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼é …ç›®ã®å®Œå…¨ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**
```json
// è·ç¨®åˆ¥ãƒ»ç­‰ç´šåˆ¥ã«ç•°ãªã‚‹ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼å®šç¾©ãŒå¯èƒ½
{
  "templateCode": "COMP-DOCTOR-HIGH",
  "targetJobCategory": "doctor",
  "targetGradeRange": { "min": 41, "max": 50 },
  "competencyItems": [
    {
      "itemName": "è¨ºç™‚æ–¹é‡æ±ºå®š",
      "description": "è¤‡é›‘ãªç—‡ä¾‹ã®æ²»ç™‚æ–¹é‡ã‚’ç‹¬è‡ªã«åˆ¤æ–­ã§ãã‚‹",
      "weight": 25
    }
  ]
}
```

---

### å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ä¾‹

#### ãƒ‘ã‚¿ãƒ¼ãƒ³1: åŸºæœ¬çš„ãªç›®æ¨™è¨­å®šï¼ˆç¬¬1æ®µéšï¼‰
```typescript
// 2026å¹´4æœˆ - OKRã®ã¿
const goal = await prisma.goal.create({
  data: {
    employeeId: "emp-001",
    goalTitle: "çœ‹è­·æŠ€è¡“å‘ä¸Šè¨ˆç”»",
    goalCategory: "ã‚¹ã‚­ãƒ«é–‹ç™º",
    keyResults: [
      { title: "é™è„ˆæ³¨å°„æˆåŠŸç‡", targetValue: 95, currentValue: 88, unit: "%" }
    ],
    startDate: new Date("2026-04-01"),
    targetDate: new Date("2026-09-30")
  }
});
```

#### ãƒ‘ã‚¿ãƒ¼ãƒ³2: ç­‰ç´šæ˜‡æ ¼ç›®æ¨™ï¼ˆç¬¬2æ®µéšï¼‰
```typescript
// 2026å¹´10æœˆ - ç­‰ç´šé€£å‹•
const promotionGoal = await prisma.goal.create({
  data: {
    employeeId: "emp-001",
    goalTitle: "25ç´šæ˜‡æ ¼ã®ãŸã‚ã®å°‚é–€æ€§å¼·åŒ–",
    isPromotionLinked: true,
    targetGrade: 25,
    linkedGradeHistoryId: "grade-hist-123",
    keyResults: [...],
    startDate: new Date("2026-10-01"),
    targetDate: new Date("2027-03-31")
  }
});
```

#### ãƒ‘ã‚¿ãƒ¼ãƒ³3: ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è‚²æˆç›®æ¨™ï¼ˆç¬¬3æ®µéšï¼‰
```typescript
// 2027å¹´4æœˆ - ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼é€£å‹•
const competencyGoal = await prisma.goal.create({
  data: {
    employeeId: "emp-001",
    goalTitle: "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼å‘ä¸Š",
    linkedCompetencyIds: ["COMP-005", "COMP-008"],
    targetCompetencyScore: 4.5,
    evaluationWeight: 30, // è©•ä¾¡å…¨ä½“ã®30%ã‚’å ã‚ã‚‹
    keyResults: [...],
    startDate: new Date("2027-04-01"),
    targetDate: new Date("2027-09-30")
  }
});
```

---

### ã¾ã¨ã‚

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€ä»¥ä¸‹ãŒå®Ÿç¾ã§ãã¾ã™ï¼š

âœ… **ç¾åœ¨ï¼ˆåŸºæœ¬çš„OKRï¼‰ã‹ã‚‰ç¬¬3æ®µéšï¼ˆå®Œæˆå½¢ï¼‰ã¾ã§å®Œå…¨å¯¾å¿œ**
âœ… **50ç­‰ç´šåˆ¶åº¦Ã—4ã‚³ãƒ¼ã‚¹Ã—7æ®µéšè©•ä¾¡ã®è¤‡é›‘ãªçµ„ã¿åˆã‚ã›ã‚’ç®¡ç†**
âœ… **è·ç¨®åˆ¥ãƒ»ç­‰ç´šåˆ¥ã®ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è©•ä¾¡ã‚’æŸ”è»Ÿã«å®šç¾©**
âœ… **ç›®æ¨™ç®¡ç†ã¨æ˜‡æ ¼åˆ¤å®šã‚’å®Œå…¨é€£å‹•**
âœ… **100ç‚¹æº€ç‚¹è©•ä¾¡åˆ¶åº¦ã¸ã®å¯¾å¿œ**
âœ… **ä¸Šä½20%/ä¸­é–“60%/è¦æ”¯æ´20%ã®å±¤åˆ¥ç®¡ç†**

**ç­‰ç´šåˆ¶åº¦ã®è©³ç´°ãŒæ±ºã¾ã£ã¦ã„ãªãã¦ã‚‚ã€ã“ã®è¨­è¨ˆãŒã‚ã‚Œã°ã‚ã‚‰ã‚†ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¯¾å¿œå¯èƒ½ã§ã™ã€‚**

---

## ğŸ“ æ›´æ–°å±¥æ­´

| æ—¥ä»˜ | æ›´æ–°å†…å®¹ | æ›´æ–°è€… |
|------|---------|--------|
| 2025-10-08 14:00 | åˆç‰ˆä½œæˆï¼ˆ15é …ç›®ã®ä¸è¶³é …ç›®ã‚’æ´—ã„å‡ºã—ï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 14:30 | Employeeãƒ†ãƒ¼ãƒ–ãƒ«ã«å‡ºèº«åœ°ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ï¼ˆhometown, birthplaceï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 15:00 | å®Ÿç¸¾ãƒ»æˆæœç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆAchievementï¼‰ã‚’è¿½åŠ ï¼ˆPriority 2ï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 15:15 | ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹é¸æŠåˆ¶åº¦ãƒ†ãƒ¼ãƒ–ãƒ«4ç¨®è¿½åŠ ï¼ˆPhase5è¨­è¨ˆã‚’åæ˜ ï¼‰| åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 15:30 | è·å“¡ãƒã‚¤ãƒ³ãƒ‰ãƒ»å¿—å‘æ€§ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ï¼ˆå…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰Optionalï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 16:00 | EmployeeSkillãƒ†ãƒ¼ãƒ–ãƒ«ã«çµŒé¨“å¹´æ•°ãƒ»ç›®æ¨™ãƒ»ç¿’å¾—æ—¥ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ  | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 16:15 | ã‚¯ãƒªãƒ‹ã‚«ãƒ«ãƒ©ãƒ€ãƒ¼è©•ä¾¡ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ï¼ˆæ—¥æœ¬çœ‹è­·å”ä¼šç‰ˆæº–æ‹ ã€5æ®µéšãƒ»4èƒ½åŠ›è»¸ï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 16:30 | å­¦ä¼šãƒ»è·èƒ½å›£ä½“åŠ å…¥æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ï¼ˆä¼šè²»æ”¯æ‰•ã„ãƒ»å½¹è·ç®¡ç†å«ã‚€ï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 16:45 | æ¥­å‹™å®Ÿç¸¾æŒ‡æ¨™ãƒ»çµ„ç¹”è²¢çŒ®åº¦ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ï¼ˆVoiceDriveé€£æºå¯¾å¿œï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 17:00 | å‹¤å‹™ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æãƒ»æ¥­å‹™å‡ºå¼µå±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ï¼ˆWLBã‚¹ã‚³ã‚¢ãƒ»å‹¤å‹™å®‰å®šæ€§è©•ä¾¡å«ã‚€ï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 17:15 | HealthRecordãƒ†ãƒ¼ãƒ–ãƒ«æ‹¡å¼µãƒ»ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯ãƒ»ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ç›¸è«‡ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ  | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 17:30 | å¥è¨ºè©³ç´°æ¤œæŸ»çµæœãƒ»ç—…æ­´ãƒ»æœè–¬ãƒ»ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ï¼ˆå°±åŠ´é…æ…®å¯¾å¿œï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 17:45 | èƒ½åŠ›è©•ä¾¡ãƒ»V3è©•ä¾¡ãƒ»ãƒ¡ãƒ³ã‚¿ãƒªãƒ³ã‚°é–¢ä¿‚ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ï¼ˆè©•ä¾¡è‚²æˆä½“ç³»å®Œå‚™ï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 18:00 | Interviewãƒ†ãƒ¼ãƒ–ãƒ«æ‹¡å¼µï¼ˆNotebookLMé€£æºãƒ»AIåˆ†æãƒ»ã‚µãƒãƒªä½œæˆæ©Ÿèƒ½è¿½åŠ ï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 18:15 | Interviewãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚µãƒãƒ¼ãƒˆé¢è«‡å°‚ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ï¼ˆæ‹…å½“è€…å½¹å‰²ãƒ»è³‡æ ¼ãƒ»ã‚µãƒãƒ¼ãƒˆåˆ†é‡åˆ†é¡ï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 18:30 | V3Assessmentãƒ†ãƒ¼ãƒ–ãƒ«å¤§å¹…æ‹¡å¼µï¼ˆæŠ€è¡“è©•ä¾¡ãƒ»çµ„ç¹”è²¢çŒ®åº¦è©³ç´°ã€ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆã€é †ä½æƒ…å ±ã€AIæŒ‡å°æ”¯æ´ï¼‰ + V3AssessmentCommentãƒ†ãƒ¼ãƒ–ãƒ«æ–°è¦è¿½åŠ  | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 18:45 | TrainingEffectTrackingãƒ†ãƒ¼ãƒ–ãƒ«æ–°è¦è¿½åŠ ï¼ˆç ”ä¿®å‰å¾Œã‚¹ã‚³ã‚¢æ¯”è¼ƒãƒ»ROIæ¸¬å®šãƒ»åŠ¹æœæŒç¶šæ€§ï¼‰+ SkillRadarAssessmentãƒ†ãƒ¼ãƒ–ãƒ«æ–°è¦è¿½åŠ ï¼ˆ8è»¸ã‚¹ã‚­ãƒ«è©•ä¾¡ãƒ»éƒ¨é–€å¹³å‡æ¯”è¼ƒãƒ»å¼·ã¿è‡ªå‹•åˆ¤å®šï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 19:00 | IntegratedGrowthTimelineãƒ†ãƒ¼ãƒ–ãƒ«æ–°è¦è¿½åŠ ï¼ˆå…¨ã‚·ã‚¹ãƒ†ãƒ çµ±åˆã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒ»ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ç®¡ç†ãƒ»AIåˆ†æï¼‰+ TalentPortfolioAnalysisãƒ†ãƒ¼ãƒ–ãƒ«æ–°è¦è¿½åŠ ï¼ˆ9ãƒã‚¹äººæãƒãƒˆãƒªã‚¯ã‚¹ãƒ»ã‚¹ã‚­ãƒ«Ã—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æï¼‰+ GrowthPredictionãƒ†ãƒ¼ãƒ–ãƒ«æ–°è¦è¿½åŠ ï¼ˆMLæˆé•·äºˆæ¸¬ãƒ»æ˜‡é€²å¯èƒ½æ€§ãƒ»ãƒªã‚¹ã‚¯äºˆæ¸¬ï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 19:15 | OnboardingProgressãƒ†ãƒ¼ãƒ–ãƒ«æ–°è¦è¿½åŠ ï¼ˆ4ã‚¹ãƒ†ãƒƒãƒ—é€²æ—ç®¡ç†ãƒ»ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼‰+ AssignmentHistoryãƒ†ãƒ¼ãƒ–ãƒ«æ–°è¦è¿½åŠ ï¼ˆé…å±å±¥æ­´ãƒ»è©•ä¾¡ãƒ»ç•°å‹•ç†ç”±ãƒ»ç²å¾—ã‚¹ã‚­ãƒ«ï¼‰+ FitnessAssessmentãƒ†ãƒ¼ãƒ–ãƒ«æ–°è¦è¿½åŠ ï¼ˆ8è»¸é©æ€§è©•ä¾¡ãƒ»å¼·ã¿ç‰¹å®šï¼‰+ CareerDevelopmentPlanãƒ†ãƒ¼ãƒ–ãƒ«æ–°è¦è¿½åŠ ï¼ˆå¸Œæœ›å°‚é–€åˆ†é‡ãƒ»ã‚­ãƒ£ãƒªã‚¢ç›®æ¨™ãƒ»ãƒ¡ãƒ³ã‚¿ãƒ¼ã‚·ãƒƒãƒ—ãƒ»æ˜‡é€²æº–å‚™ï¼‰+ Employeeãƒ†ãƒ¼ãƒ–ãƒ«æ¡ç”¨æƒ…å ±æ‹¡å¼µï¼ˆæ¡ç”¨åŒºåˆ†ãƒ»è©¦ç”¨æœŸé–“ãƒ»å‹¤ç¶šå¹´æ•°ï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 19:30 | SkillDevelopmentPlanãƒ†ãƒ¼ãƒ–ãƒ«æ–°è¦è¿½åŠ ï¼ˆã‚¹ã‚­ãƒ«å˜ä½è‚²æˆè¨ˆç”»ãƒ»ç¾åœ¨â†’ç›®æ¨™ã‚¹ã‚³ã‚¢ãƒ»é€²æ—ç‡è‡ªå‹•è¨ˆç®—ãƒ»ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ãƒ»æ˜‡é€²é€£æºï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 20:00 | TrainingProgramï¼ˆç ”ä¿®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒ»æ³•å®š/ä¼ç”»/å¿…é ˆç ”ä¿®ã®å®šç¾©ï¼‰+ TrainingSessionï¼ˆå®Ÿæ–½ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ»æ—¥ç¨‹ç®¡ç†ï¼‰+ TrainingHistoryï¼ˆè©³ç´°å—è¬›å±¥æ­´ãƒ»ç”³è¾¼â†’å®Œäº†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ»åŠ¹æœæ¸¬å®šï¼‰+ TrainingPlanï¼ˆå¹´é–“ç ”ä¿®è¨ˆç”»ãƒ»è©•ä¾¡é€£å‹•ï¼‰+ TrainingEffectAnalysisï¼ˆROIåˆ†æãƒ»æ–½è¨­éƒ¨ç½²åˆ¥åŠ¹æœæ¸¬å®šï¼‰ãƒ†ãƒ¼ãƒ–ãƒ«æ–°è¦è¿½åŠ  - æ—¢å­˜Trainingãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å¤§å¹…æ‹¡å¼µã—ãŸæ•™è‚²ç ”ä¿®ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ å®Œå…¨å¯¾å¿œ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 20:30 | GradeSystemï¼ˆç­‰ç´šåˆ¶åº¦ãƒã‚¹ã‚¿ãƒ»50ç­‰ç´šÃ—4ã‚³ãƒ¼ã‚¹å®šç¾©ï¼‰+ EmployeeGradeHistoryï¼ˆç­‰ç´šå±¥æ­´ãƒ»æ˜‡æ ¼é™æ ¼ç†ç”±ãƒ»çµ¦ä¸é€£å‹•ï¼‰+ CompetencyTemplateï¼ˆã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ»è·ç¨®åˆ¥ç­‰ç´šåˆ¥è¡Œå‹•ç‰¹æ€§è©•ä¾¡ï¼‰+ CompetencyEvaluationï¼ˆã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è©•ä¾¡è¨˜éŒ²ãƒ»å¼·ã¿å¼±ã¿åˆ†æãƒ»æ˜‡æ ¼åˆ¤å®šï¼‰+ Goalæ‹¡å¼µï¼ˆOKRãƒ»ç­‰ç´šé€£å‹•ãƒ»ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼é€£å‹•ãƒ»100ç‚¹æº€ç‚¹è©•ä¾¡å¯¾å¿œï¼‰+ Employeeæ‹¡å¼µï¼ˆç­‰ç´šæƒ…å ±ãƒ»è©•ä¾¡ã‚°ãƒ¬ãƒ¼ãƒ‰ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å±¤ï¼‰ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ  - ç¬¬1æ®µéšï¼ˆOKRï¼‰â†’ç¬¬2æ®µéšï¼ˆ50ç­‰ç´šåˆ¶åº¦ï¼‰â†’ç¬¬3æ®µéšï¼ˆ100ç‚¹æº€ç‚¹è©•ä¾¡+ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼ï¼‰ã®æ®µéšçš„å°å…¥ã«å®Œå…¨å¯¾å¿œ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 21:00 | StressCheckRecordï¼ˆ57é …ç›®è©³ç´°è¨˜éŒ²ãƒ»çµŒå¹´å¤‰åŒ–è‡ªå‹•æ¯”è¼ƒãƒ»é«˜ã‚¹ãƒˆãƒ¬ã‚¹åˆ¤å®šï¼‰+ InterviewGuidanceï¼ˆåŒ»å¸«é¢æ¥æŒ‡å°ãƒ»å°±æ¥­æªç½®è¨˜éŒ²ãƒ»VoiceDriveé€£æºï¼‰+ HealthRiskAssessmentï¼ˆå¥è¨ºÃ—ã‚¹ãƒˆãƒ¬ã‚¹Ã—ãƒ¡ãƒ³ã‚¿ãƒ«çµ±åˆè©•ä¾¡ãƒ»ç·åˆãƒªã‚¹ã‚¯è‡ªå‹•åˆ¤å®šï¼‰+ HealthGuidanceï¼ˆä¿å¥æŒ‡å°è¨˜éŒ²ãƒ»ç”Ÿæ´»ç¿’æ…£æ”¹å–„æ”¯æ´ãƒ»åŠ¹æœæ¸¬å®šï¼‰+ GroupStressAnalysisï¼ˆé›†å›£åˆ†æãƒ»è·å ´ç’°å¢ƒæ”¹å–„ç­–ãƒ»è¡›ç”Ÿå§”å“¡ä¼šå ±å‘Šï¼‰+ Employeeæ‹¡å¼µï¼ˆã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«ãƒ»å¥è¨ºçµæœãƒ»å¥åº·ãƒªã‚¹ã‚¯ï¼‰ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ  - åŠ´åƒå®‰å…¨è¡›ç”Ÿæ³•å®Œå…¨æº–æ‹ ãƒ»å€‹äººãƒ¬ãƒ™ãƒ«å®Œå…¨è¿½è·¡ãƒ»äºˆé˜²çš„ä»‹å…¥å¯¾å¿œ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |
| 2025-10-08 21:30 | AttendanceRecordæ‹¡å¼µï¼ˆVoiceDriveã‚·ãƒ•ãƒˆIDé€£æºãƒ»äºˆå®šå®Ÿç¸¾å·®ç•°è‡ªå‹•è¨ˆç®—ãƒ»é…åˆ»æ—©é€€åˆ¤å®šï¼‰+ LeaveApplicationï¼ˆä¼‘æš‡ç”³è«‹æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ»VoiceDriveé€šçŸ¥ãƒ»ä»£æ›¿è¦å“¡æ‰‹é…ï¼‰+ PaidLeaveBalanceï¼ˆæœ‰çµ¦æ®‹é«˜è‡ªå‹•è¨ˆç®—ãƒ»æ³•å®š5æ—¥ç¾©å‹™ç®¡ç†ãƒ»å¤±åŠ¹ã‚¢ãƒ©ãƒ¼ãƒˆï¼‰+ OvertimeManagementï¼ˆ36å”å®šå®Œå…¨ç®¡ç†ãƒ»æœˆ45hå¹´360hä¸Šé™ãƒ»ç‰¹åˆ¥æ¡é …ãƒ»è¤‡æ•°æœˆå¹³å‡80hãƒ»ç”£æ¥­åŒ»é¢æ¥è‡ªå‹•è¨­å®šï¼‰+ WorkScheduleVariationï¼ˆ1ãƒ¶æœˆå˜ä½å¤‰å½¢åŠ´åƒæ™‚é–“åˆ¶ãƒ»å¤œå‹¤æ—¥å‹¤ãƒ‘ã‚¿ãƒ¼ãƒ³ç®¡ç†ï¼‰+ Employeeæ‹¡å¼µï¼ˆæ®‹æ¥­æ™‚é–“ãƒ»æœ‰çµ¦æ®‹æ—¥æ•°ãƒ»å„ç¨®ã‚¢ãƒ©ãƒ¼ãƒˆï¼‰ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ  - åŠ´åƒåŸºæº–æ³•å®Œå…¨æº–æ‹ ãƒ»VoiceDriveå®Œå…¨é€£æºãƒ»åŒ»ç™‚æ©Ÿé–¢ç‰¹æœ‰å‹¤å‹™å½¢æ…‹å¯¾å¿œ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ  |

---

## 19. å‹¤æ€ ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ãƒ»VoiceDriveé€£æºï¼ˆã‚·ãƒ•ãƒˆå®Ÿç¸¾çµ±åˆï¼‰

### èƒŒæ™¯ã¨è¦ä»¶
- ç¾åœ¨ã®å®Ÿè£…: åŸºæœ¬çš„ãªå‡ºé€€å‹¤è¨˜éŒ²ã®ã¿ï¼ˆã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼‰
- **VoiceDrive**: ã‚·ãƒ•ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆäºˆå®šï¼‰ã‚’æ—¢ã«ç¨¼åƒä¸­
- **ä¸è¶³é …ç›®**: äºˆå®šã‚·ãƒ•ãƒˆ vs å®Ÿç¸¾å‹¤æ€ ã®å·®ç•°ç®¡ç†ã€ä¼‘æš‡ç”³è«‹æ‰¿èªã€36å”å®šç®¡ç†
- **æ³•ä»¤è¦ä»¶**: åŠ´åƒåŸºæº–æ³•ã€36å”å®šã€å¹´æ¬¡æœ‰çµ¦ä¼‘æš‡ç®¡ç†ç¾©å‹™

### ç¾çŠ¶ã®å•é¡Œç‚¹
```
âŒ VoiceDriveï¼ˆã‚·ãƒ•ãƒˆäºˆå®šï¼‰ã¨å‹¤æ€ å®Ÿç¸¾ãŒåˆ†é›¢
âŒ äºˆå®š vs å®Ÿç¸¾ã®å·®ç•°åˆ†æãŒã§ããªã„
âŒ ä¼‘æš‡ç”³è«‹ãƒ»æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒæœªæ•´å‚™
âŒ 36å”å®šã®ä¸Šé™ç®¡ç†ï¼ˆæœˆ45h/å¹´360hï¼‰ãŒæœªå¯¾å¿œ
âŒ æœ‰çµ¦ä¼‘æš‡ã®è‡ªå‹•ä»˜ä¸ãƒ»æ®‹æ—¥æ•°ç®¡ç†ãŒæœªå¯¾å¿œ
âŒ å¤‰å½¢åŠ´åƒæ™‚é–“åˆ¶ï¼ˆåŒ»ç™‚æ©Ÿé–¢ç‰¹æœ‰ï¼‰ã¸ã®å¯¾å¿œãªã—
```

### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

#### 19-1. AttendanceRecordï¼ˆå‹¤æ€ å®Ÿç¸¾è¨˜éŒ²ï¼‰- æ—¢å­˜æ‹¡å¼µ

**ç›®çš„**: VoiceDriveã®ã‚·ãƒ•ãƒˆäºˆå®šã¨é€£æºã—ã€å®Ÿç¸¾å‹¤æ€ ã‚’è¨˜éŒ²ã€‚äºˆå®šã¨ã®å·®ç•°ã‚’ç®¡ç†ã€‚

```prisma
model AttendanceRecord {
  id                    String    @id @default(cuid())
  employeeId            String    @map("employee_id")

  // å‹¤å‹™æ—¥æƒ…å ±
  workDate              DateTime  @map("work_date")
  // å‹¤å‹™æ—¥
  fiscalYear            Int?      @map("fiscal_year")
  fiscalMonth           Int?      @map("fiscal_month")
  dayOfWeek             String?   @map("day_of_week")
  // æœˆ, ç«, æ°´, æœ¨, é‡‘, åœŸ, æ—¥

  // ğŸ†• VoiceDriveé€£æºï¼ˆã‚·ãƒ•ãƒˆäºˆå®šã¨ã®ç´ä»˜ã‘ï¼‰
  voicedriveShiftId     String?   @map("voicedrive_shift_id")
  // VoiceDriveã‚·ãƒ•ãƒˆID
  scheduledShiftType    String?   @map("scheduled_shift_type")
  // dayï¼ˆæ—¥å‹¤ï¼‰, nightï¼ˆå¤œå‹¤ï¼‰, eveningï¼ˆæº–å¤œå‹¤ï¼‰, offï¼ˆä¼‘ã¿ï¼‰
  scheduledStartTime    String?   @map("scheduled_start_time")
  // äºˆå®šå‡ºå‹¤æ™‚åˆ»
  scheduledEndTime      String?   @map("scheduled_end_time")
  // äºˆå®šé€€å‹¤æ™‚åˆ»

  // å®Ÿç¸¾æ‰“åˆ»
  actualCheckIn         DateTime? @map("actual_check_in")
  // å®Ÿéš›ã®å‡ºå‹¤æ‰“åˆ»
  actualCheckOut        DateTime? @map("actual_check_out")
  // å®Ÿéš›ã®é€€å‹¤æ‰“åˆ»
  actualShiftType       String?   @map("actual_shift_type")
  // å®Ÿéš›ã®ã‚·ãƒ•ãƒˆç¨®åˆ¥

  // ğŸ†• äºˆå®šã¨ã®å·®ç•°åˆ†æ
  startTimeDifference   Int?      @map("start_time_difference")
  // å‡ºå‹¤æ™‚åˆ»å·®ï¼ˆåˆ†ï¼‰â€»æ­£=é…åˆ»ã€è² =æ—©å‡º
  endTimeDifference     Int?      @map("end_time_difference")
  // é€€å‹¤æ™‚åˆ»å·®ï¼ˆåˆ†ï¼‰â€»æ­£=æ—©é€€ã€è² =æ®‹æ¥­
  isLate                Boolean   @default(false) @map("is_late")
  // é…åˆ»ãƒ•ãƒ©ã‚°
  isEarlyLeave          Boolean   @default(false) @map("is_early_leave")
  // æ—©é€€ãƒ•ãƒ©ã‚°

  // å‹¤å‹™æ™‚é–“è¨ˆç®—
  breakTime             Int?      @map("break_time")
  // ä¼‘æ†©æ™‚é–“ï¼ˆåˆ†ï¼‰
  actualWorkingMinutes  Int?      @map("actual_working_minutes")
  // å®ŸåŠ´åƒæ™‚é–“ï¼ˆåˆ†ï¼‰
  scheduledWorkingMinutes Int?    @map("scheduled_working_minutes")
  // äºˆå®šåŠ´åƒæ™‚é–“ï¼ˆåˆ†ï¼‰

  // æ®‹æ¥­ç®¡ç†
  overtimeMinutes       Int?      @map("overtime_minutes")
  // æ®‹æ¥­æ™‚é–“ï¼ˆåˆ†ï¼‰
  overtimeApproved      Boolean   @default(false) @map("overtime_approved")
  // æ®‹æ¥­æ‰¿èªæ¸ˆã¿
  overtimeApprovalId    String?   @map("overtime_approval_id")
  // æ®‹æ¥­ç”³è«‹ID
  isExcessiveOvertime   Boolean   @default(false) @map("is_excessive_overtime")
  // éé‡åŠ´åƒãƒ•ãƒ©ã‚°ï¼ˆæœˆ45hè¶…ãˆï¼‰

  // å¤œå‹¤ãƒ»æ·±å¤œå‹¤å‹™
  nightShiftMinutes     Int?      @map("night_shift_minutes")
  // å¤œå‹¤æ™‚é–“ï¼ˆ22:00-5:00ã®åˆ†æ•°ï¼‰
  midnightWorkMinutes   Int?      @map("midnight_work_minutes")
  // æ·±å¤œå‹¤å‹™æ™‚é–“ï¼ˆåˆ†ï¼‰

  // å‹¤æ€ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  attendanceStatus      String    @map("attendance_status")
  // normalï¼ˆæ­£å¸¸ï¼‰, lateï¼ˆé…åˆ»ï¼‰, early_leaveï¼ˆæ—©é€€ï¼‰, absentï¼ˆæ¬ å‹¤ï¼‰,
  // paid_leaveï¼ˆæœ‰çµ¦ï¼‰, sick_leaveï¼ˆç—…æ¬ ï¼‰, special_leaveï¼ˆç‰¹åˆ¥ä¼‘æš‡ï¼‰

  // æ¬ å‹¤ãƒ»ä¼‘æš‡
  isAbsent              Boolean   @default(false) @map("is_absent")
  absentReason          String?   @map("absent_reason")
  leaveApplicationId    String?   @map("leave_application_id")
  // ä¼‘æš‡ç”³è«‹ID

  // å‚™è€ƒãƒ»ä¿®æ­£
  remarks               String?   @map("remarks")
  isCorrected           Boolean   @default(false) @map("is_corrected")
  // æ‰“åˆ»ä¿®æ­£æœ‰ç„¡
  correctionReason      String?   @map("correction_reason")
  correctedBy           String?   @map("corrected_by")
  correctionDate        DateTime? @map("correction_date")

  // æ‰¿èª
  approvedBy            String?   @map("approved_by")
  approvalDate          DateTime? @map("approval_date")
  approvalStatus        String    @default("pending") @map("approval_status")
  // pending, approved, rejected

  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  // Relations
  employee              Employee  @relation(fields: [employeeId], references: [id])
  leaveApplication      LeaveApplication? @relation(fields: [leaveApplicationId], references: [id])

  @@index([employeeId])
  @@index([workDate])
  @@index([fiscalYear, fiscalMonth])
  @@index([voicedriveShiftId])
  @@index([attendanceStatus])
  @@index([approvalStatus])
  @@map("attendance_records")
}
```

#### 19-2. LeaveApplicationï¼ˆä¼‘æš‡ç”³è«‹ï¼‰

**ç›®çš„**: å¹´æ¬¡æœ‰çµ¦ä¼‘æš‡ã€ç‰¹åˆ¥ä¼‘æš‡ã€ç—…æ°—ä¼‘æš‡ãªã©ã®ç”³è«‹ãƒ»æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ç®¡ç†ã€‚

```prisma
model LeaveApplication {
  id                    String    @id @default(cuid())
  employeeId            String    @map("employee_id")

  // ç”³è«‹æƒ…å ±
  leaveType             String    @map("leave_type")
  // paid_leaveï¼ˆå¹´ä¼‘ï¼‰, sick_leaveï¼ˆç—…æ¬ ï¼‰, special_leaveï¼ˆç‰¹åˆ¥ä¼‘æš‡ï¼‰,
  // maternity_leaveï¼ˆç”£ä¼‘ï¼‰, childcare_leaveï¼ˆè‚²ä¼‘ï¼‰, condolence_leaveï¼ˆå¿Œå¼•ï¼‰

  leaveCategory         String?   @map("leave_category")
  // full_dayï¼ˆå…¨æ—¥ï¼‰, half_day_amï¼ˆåˆå‰åŠä¼‘ï¼‰, half_day_pmï¼ˆåˆå¾ŒåŠä¼‘ï¼‰, hourlyï¼ˆæ™‚é–“ä¼‘ï¼‰

  // æœŸé–“
  startDate             DateTime  @map("start_date")
  endDate               DateTime  @map("end_date")
  totalDays             Float     @map("total_days")
  // 0.5ï¼ˆåŠæ—¥ï¼‰, 1.0ï¼ˆå…¨æ—¥ï¼‰, è¤‡æ•°æ—¥ã®å ´åˆã¯åˆè¨ˆ
  totalHours            Float?    @map("total_hours")
  // æ™‚é–“ä¼‘ã®å ´åˆ

  // ç†ç”±
  reason                String    @map("reason")
  // ç”³è«‹ç†ç”±
  isEmergency           Boolean   @default(false) @map("is_emergency")
  // ç·Šæ€¥ä¼‘æš‡ãƒ•ãƒ©ã‚°

  // ğŸ†• æœ‰çµ¦ä¼‘æš‡è¨ˆç®—
  paidLeaveBalance      Float?    @map("paid_leave_balance")
  // ç”³è«‹æ™‚ç‚¹ã®æœ‰çµ¦æ®‹æ—¥æ•°
  paidLeaveAfter        Float?    @map("paid_leave_after")
  // ç”³è«‹å¾Œã®æœ‰çµ¦æ®‹æ—¥æ•°

  // ğŸ†• VoiceDriveé€£æº
  affectedShiftIds      Json?     @map("affected_shift_ids")
  // å½±éŸ¿ã‚’å—ã‘ã‚‹VoiceDriveã‚·ãƒ•ãƒˆIDé…åˆ—
  // ["shift-001", "shift-002"]
  voicedriveNotified    Boolean   @default(false) @map("voicedrive_notified")
  // VoiceDriveã¸ã®é€šçŸ¥æ¸ˆã¿ãƒ•ãƒ©ã‚°

  // ä»£æ›¿è¦å“¡æ‰‹é…
  substituteRequired    Boolean   @default(false) @map("substitute_required")
  // ä»£æ›¿è¦å“¡å¿…è¦
  substituteEmployeeId  String?   @map("substitute_employee_id")
  substituteArranged    Boolean   @default(false) @map("substitute_arranged")

  // æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
  approvalStatus        String    @default("pending") @map("approval_status")
  // pendingï¼ˆç”³è«‹ä¸­ï¼‰, approvedï¼ˆæ‰¿èªï¼‰, rejectedï¼ˆå´ä¸‹ï¼‰, cancelledï¼ˆå–æ¶ˆï¼‰

  approverLevel1Id      String?   @map("approver_level1_id")
  // ç¬¬1æ‰¿èªè€…ï¼ˆç›´å±ä¸Šå¸ï¼‰
  approvalDate1         DateTime? @map("approval_date1")
  approvalComment1      String?   @map("approval_comment1")

  approverLevel2Id      String?   @map("approver_level2_id")
  // ç¬¬2æ‰¿èªè€…ï¼ˆéƒ¨é–€é•·ï¼‰
  approvalDate2         DateTime? @map("approval_date2")
  approvalComment2      String?   @map("approval_comment2")

  finalApprover         String?   @map("final_approver")
  finalApprovalDate     DateTime? @map("final_approval_date")

  rejectionReason       String?   @map("rejection_reason")
  cancelReason          String?   @map("cancel_reason")
  cancelledBy           String?   @map("cancelled_by")
  cancellationDate      DateTime? @map("cancellation_date")

  // ç”³è«‹ãƒ¡ã‚¿æƒ…å ±
  applicationDate       DateTime  @default(now()) @map("application_date")
  isRetroactive         Boolean   @default(false) @map("is_retroactive")
  // äº‹å¾Œç”³è«‹ãƒ•ãƒ©ã‚°

  attachments           Json?     @map("attachments")
  // æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆè¨ºæ–­æ›¸ç­‰ï¼‰
  // [{ "type": "medical_certificate", "url": "...", "filename": "..." }]

  notes                 String?   @map("notes")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  // Relations
  employee              Employee  @relation(fields: [employeeId], references: [id])
  attendanceRecords     AttendanceRecord[]

  @@index([employeeId])
  @@index([leaveType])
  @@index([approvalStatus])
  @@index([startDate])
  @@index([applicationDate])
  @@map("leave_applications")
}
```

#### 19-3. PaidLeaveBalanceï¼ˆæœ‰çµ¦ä¼‘æš‡æ®‹é«˜ç®¡ç†ï¼‰

**ç›®çš„**: è·å“¡ã”ã¨ã®æœ‰çµ¦ä¼‘æš‡ã®ä»˜ä¸ãƒ»æ¶ˆåŒ–ãƒ»æ®‹é«˜ã‚’è‡ªå‹•è¨ˆç®—ãƒ»ç®¡ç†ã€‚

```prisma
model PaidLeaveBalance {
  id                    String    @id @default(cuid())
  employeeId            String    @map("employee_id")

  // å¹´åº¦ç®¡ç†
  fiscalYear            Int       @map("fiscal_year")
  // å¹´åº¦ï¼ˆ2024, 2025...ï¼‰
  grantDate             DateTime  @map("grant_date")
  // ä»˜ä¸æ—¥ï¼ˆå…¥ç¤¾æ—¥ or åŸºæº–æ—¥ï¼‰

  // ä»˜ä¸æ—¥æ•°
  grantedDays           Float     @map("granted_days")
  // ä»˜ä¸æ—¥æ•°ï¼ˆå…¥ç¤¾å¹´æ•°ã«ã‚ˆã‚Š10-20æ—¥ï¼‰
  carryOverDays         Float     @default(0) @map("carry_over_days")
  // å‰å¹´ç¹°è¶Šæ—¥æ•°ï¼ˆæœ€å¤§20æ—¥ï¼‰
  totalAvailableDays    Float     @map("total_available_days")
  // åˆ©ç”¨å¯èƒ½åˆè¨ˆï¼ˆä»˜ä¸+ç¹°è¶Šï¼‰

  // æ¶ˆåŒ–å®Ÿç¸¾
  usedDays              Float     @default(0) @map("used_days")
  // ä½¿ç”¨æ¸ˆã¿æ—¥æ•°
  remainingDays         Float     @map("remaining_days")
  // æ®‹æ—¥æ•°
  expiringDays          Float?    @map("expiring_days")
  // å¹´åº¦æœ«å¤±åŠ¹äºˆå®šæ—¥æ•°

  // ğŸ†• åŠæ—¥ãƒ»æ™‚é–“ä¼‘å¯¾å¿œ
  usedHalfDays          Float     @default(0) @map("used_half_days")
  // åŠæ—¥ä¼‘ä½¿ç”¨å›æ•°
  usedHourlyLeave       Float     @default(0) @map("used_hourly_leave")
  // æ™‚é–“ä¼‘ä½¿ç”¨æ™‚é–“

  // æ³•å®šå–å¾—ç¾©å‹™ï¼ˆå¹´5æ—¥ï¼‰
  mandatoryUseDays      Int       @default(5) @map("mandatory_use_days")
  // æ³•å®šå–å¾—ç¾©å‹™æ—¥æ•°
  mandatoryUsed         Float     @default(0) @map("mandatory_used")
  // ç¾©å‹™å–å¾—æ¸ˆã¿æ—¥æ•°
  mandatoryRemaining    Int       @map("mandatory_remaining")
  // ç¾©å‹™å–å¾—æ®‹æ—¥æ•°ï¼ˆè‡ªå‹•è¨ˆç®—: 5 - mandatoryUsedï¼‰

  // ã‚¢ãƒ©ãƒ¼ãƒˆ
  isLowBalance          Boolean   @default(false) @map("is_low_balance")
  // æ®‹æ—¥æ•°å°‘ï¼ˆ5æ—¥ä»¥ä¸‹ï¼‰
  isMandatoryAlert      Boolean   @default(false) @map("is_mandatory_alert")
  // ç¾©å‹™å–å¾—æœªé”æˆã‚¢ãƒ©ãƒ¼ãƒˆï¼ˆå¹´åº¦æœ«3ãƒ¶æœˆå‰ï¼‰
  isExpiryAlert         Boolean   @default(false) @map("is_expiry_alert")
  // å¤±åŠ¹è­¦å‘Šï¼ˆå¹´åº¦æœ«1ãƒ¶æœˆå‰ï¼‰

  // æ¬¡å¹´åº¦ç¹°è¶Šè¨ˆç®—
  nextYearCarryOver     Float?    @map("next_year_carry_over")
  // æ¬¡å¹´åº¦ç¹°è¶Šäºˆå®šï¼ˆæœ€å¤§20æ—¥ï¼‰
  nextYearExpiry        Float?    @map("next_year_expiry")
  // æ¬¡å¹´åº¦å¤±åŠ¹äºˆå®š

  notes                 String?   @map("notes")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  // Relations
  employee              Employee  @relation(fields: [employeeId], references: [id])

  @@unique([employeeId, fiscalYear])
  @@index([employeeId])
  @@index([fiscalYear])
  @@index([isMandatoryAlert])
  @@index([isExpiryAlert])
  @@map("paid_leave_balances")
}
```

#### 19-4. OvertimeManagementï¼ˆæ®‹æ¥­ç®¡ç†ãƒ»36å”å®šï¼‰

**ç›®çš„**: 36å”å®šã®ä¸Šé™ç®¡ç†ï¼ˆæœˆ45h/å¹´360hï¼‰ã€ç‰¹åˆ¥æ¡é …ã®é©ç”¨ã‚’å®Œå…¨ç®¡ç†ã€‚

```prisma
model OvertimeManagement {
  id                    String    @id @default(cuid())
  employeeId            String    @map("employee_id")

  // æœŸé–“ç®¡ç†
  fiscalYear            Int       @map("fiscal_year")
  fiscalMonth           Int       @map("fiscal_month")
  targetMonth           String    @map("target_month")
  // 2025-10

  // ğŸ†• 36å”å®šåŸºæº–
  standardLimitMonthly  Int       @default(45) @map("standard_limit_monthly")
  // æœˆ45æ™‚é–“ï¼ˆåŸå‰‡ï¼‰
  standardLimitYearly   Int       @default(360) @map("standard_limit_yearly")
  // å¹´360æ™‚é–“ï¼ˆåŸå‰‡ï¼‰

  // ğŸ†• ç‰¹åˆ¥æ¡é …
  specialClauseLimitMonthly Int?   @map("special_clause_limit_monthly")
  // ç‰¹åˆ¥æ¡é …ä¸Šé™ï¼ˆæœˆ100æ™‚é–“æœªæº€ï¼‰
  specialClauseLimitYearly  Int?   @map("special_clause_limit_yearly")
  // ç‰¹åˆ¥æ¡é …ä¸Šé™ï¼ˆå¹´720æ™‚é–“ï¼‰
  specialClauseApplied  Boolean   @default(false) @map("special_clause_applied")
  specialClauseReason   String?   @map("special_clause_reason")
  // ç‰¹åˆ¥æ¡é …é©ç”¨ç†ç”±

  // å®Ÿç¸¾é›†è¨ˆ
  totalOvertimeMinutes  Int       @default(0) @map("total_overtime_minutes")
  // æœˆé–“æ®‹æ¥­æ™‚é–“ï¼ˆåˆ†ï¼‰
  totalOvertimeHours    Float     @map("total_overtime_hours")
  // æœˆé–“æ®‹æ¥­æ™‚é–“ï¼ˆæ™‚é–“ï¼‰â€»è‡ªå‹•è¨ˆç®—
  yearlyOvertimeHours   Float?    @map("yearly_overtime_hours")
  // å¹´é–“ç´¯è¨ˆæ®‹æ¥­æ™‚é–“

  // ğŸ†• è¤‡æ•°æœˆå¹³å‡ï¼ˆ2-6ãƒ¶æœˆå¹³å‡80håˆ¶é™ï¼‰
  average2Months        Float?    @map("average_2_months")
  average3Months        Float?    @map("average_3_months")
  average4Months        Float?    @map("average_4_months")
  average5Months        Float?    @map("average_5_months")
  average6Months        Float?    @map("average_6_months")

  // ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†
  isOver45Hours         Boolean   @default(false) @map("is_over_45_hours")
  // æœˆ45hè¶…é
  isOver80Hours         Boolean   @default(false) @map("is_over_80_hours")
  // æœˆ80hè¶…éï¼ˆéåŠ´æ­»ãƒ©ã‚¤ãƒ³ï¼‰
  isOver100Hours        Boolean   @default(false) @map("is_over_100_hours")
  // æœˆ100hè¶…éï¼ˆé•æ³•ï¼‰
  isAverageViolation    Boolean   @default(false) @map("is_average_violation")
  // è¤‡æ•°æœˆå¹³å‡80hé•å

  alertLevel            String?   @map("alert_level")
  // safeï¼ˆå®‰å…¨ï¼‰, warningï¼ˆè­¦å‘Šï¼‰, dangerï¼ˆå±é™ºï¼‰, criticalï¼ˆé•æ³•ï¼‰
  alertMessage          String?   @map("alert_message")

  // ğŸ†• åŒ»å¸«é¢æ¥æŒ‡å°ï¼ˆæœˆ80hè¶…éæ™‚ã®ç¾©å‹™ï¼‰
  requiresDoctorInterview Boolean @default(false) @map("requires_doctor_interview")
  // ç”£æ¥­åŒ»é¢æ¥å¿…è¦ãƒ•ãƒ©ã‚°
  doctorInterviewCompleted Boolean @default(false) @map("doctor_interview_completed")
  interviewDate         DateTime? @map("interview_date")

  // æ‰¿èªç®¡ç†
  monthlyApprovalStatus String    @default("pending") @map("monthly_approval_status")
  // pending, approved, rejected
  approvedBy            String?   @map("approved_by")
  approvalDate          DateTime? @map("approval_date")

  notes                 String?   @map("notes")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  // Relations
  employee              Employee  @relation(fields: [employeeId], references: [id])

  @@unique([employeeId, fiscalYear, fiscalMonth])
  @@index([employeeId])
  @@index([fiscalYear])
  @@index([isOver45Hours])
  @@index([isOver80Hours])
  @@index([requiresDoctorInterview])
  @@map("overtime_managements")
}
```

#### 19-5. WorkScheduleVariationï¼ˆå¤‰å½¢åŠ´åƒæ™‚é–“åˆ¶ç®¡ç†ï¼‰

**ç›®çš„**: åŒ»ç™‚æ©Ÿé–¢ç‰¹æœ‰ã®1ãƒ¶æœˆå˜ä½å¤‰å½¢åŠ´åƒæ™‚é–“åˆ¶ã«å¯¾å¿œã€‚å¤œå‹¤ãƒ»æ—¥å‹¤ã®çµ„ã¿åˆã‚ã›ç®¡ç†ã€‚

```prisma
model WorkScheduleVariation {
  id                    String    @id @default(cuid())
  employeeId            String    @map("employee_id")

  // é©ç”¨æœŸé–“
  fiscalYear            Int       @map("fiscal_year")
  fiscalMonth           Int       @map("fiscal_month")
  variationPeriod       String    @map("variation_period")
  // 2025-10 (1ãƒ¶æœˆå˜ä½)

  // å¤‰å½¢åŠ´åƒæ™‚é–“åˆ¶ã®ç¨®é¡
  variationType         String    @map("variation_type")
  // one_monthï¼ˆ1ãƒ¶æœˆå˜ä½ï¼‰, one_yearï¼ˆ1å¹´å˜ä½ï¼‰, flex_timeï¼ˆãƒ•ãƒ¬ãƒƒã‚¯ã‚¹ã‚¿ã‚¤ãƒ ï¼‰

  // æ‰€å®šåŠ´åƒæ™‚é–“è¨­å®š
  totalScheduledHours   Float     @map("total_scheduled_hours")
  // æœŸé–“å†…ç·æ‰€å®šåŠ´åƒæ™‚é–“
  averageDailyHours     Float?    @map("average_daily_hours")
  // 1æ—¥å¹³å‡æ‰€å®šåŠ´åƒæ™‚é–“
  totalWorkingDays      Int       @map("total_working_days")
  // æœŸé–“å†…æ‰€å®šåŠ´åƒæ—¥æ•°

  // ğŸ†• ã‚·ãƒ•ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ç®¡ç†
  shiftPattern          Json      @map("shift_pattern")
  // {
  //   "week1": ["day", "day", "night", "night", "off", "off", "off"],
  //   "week2": ["day", "day", "day", "night", "night", "off", "off"],
  //   ...
  // }

  dayShiftCount         Int?      @map("day_shift_count")
  // æ—¥å‹¤å›æ•°
  nightShiftCount       Int?      @map("night_shift_count")
  // å¤œå‹¤å›æ•°
  eveningShiftCount     Int?      @map("evening_shift_count")
  // æº–å¤œå‹¤å›æ•°

  // æ³•å®šåŠ´åƒæ™‚é–“ã¨ã®æ¯”è¼ƒ
  legalWorkingHours     Float     @map("legal_working_hours")
  // æ³•å®šåŠ´åƒæ™‚é–“ï¼ˆé€±40h Ã— æœŸé–“ã®é€±æ•° Ã· 7 Ã— ç·æ—¥æ•°ï¼‰
  excessHours           Float?    @map("excess_hours")
  // è¶…éæ™‚é–“ï¼ˆç·æ‰€å®š - æ³•å®šï¼‰

  // å®Ÿç¸¾é›†è¨ˆ
  actualWorkedHours     Float?    @map("actual_worked_hours")
  // å®ŸåŠ´åƒæ™‚é–“
  actualOvertimeHours   Float?    @map("actual_overtime_hours")
  // å®Ÿæ®‹æ¥­æ™‚é–“ï¼ˆå®ŸåŠ´åƒ - ç·æ‰€å®šï¼‰

  // ä¼‘æ—¥ãƒ»ä¼‘æš‡
  totalRestDays         Int       @map("total_rest_days")
  // ä¼‘æ—¥æ—¥æ•°
  legalHolidays         Int?      @map("legal_holidays")
  // æ³•å®šä¼‘æ—¥æ—¥æ•°
  statutoryHolidays     Int?      @map("statutory_holidays")
  // æ³•å®šå¤–ä¼‘æ—¥æ—¥æ•°

  // æ‰¿èª
  approvalStatus        String    @default("pending") @map("approval_status")
  approvedBy            String?   @map("approved_by")
  approvalDate          DateTime? @map("approval_date")

  notes                 String?   @map("notes")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  // Relations
  employee              Employee  @relation(fields: [employeeId], references: [id])

  @@unique([employeeId, variationPeriod])
  @@index([employeeId])
  @@index([fiscalYear, fiscalMonth])
  @@index([variationType])
  @@map("work_schedule_variations")
}
```

---

### Employeeãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®æ‹¡å¼µãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

æ—¢å­˜ã®Employeeãƒ†ãƒ¼ãƒ–ãƒ«ã«ä»¥ä¸‹ã‚’è¿½åŠ ï¼š

```prisma
model Employee {
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ ...

  // ğŸ†• å‹¤æ€ ç®¡ç†æƒ…å ±
  currentOvertimeHours  Float?    @default(0) @map("current_overtime_hours")
  // ä»Šæœˆã®æ®‹æ¥­æ™‚é–“
  yearlyOvertimeHours   Float?    @default(0) @map("yearly_overtime_hours")
  // å¹´é–“ç´¯è¨ˆæ®‹æ¥­æ™‚é–“
  paidLeaveRemaining    Float?    @map("paid_leave_remaining")
  // æœ‰çµ¦æ®‹æ—¥æ•°
  mandatoryLeaveRemaining Int?    @map("mandatory_leave_remaining")
  // æ³•å®šå–å¾—ç¾©å‹™æ®‹æ—¥æ•°

  isOvertimeAlert       Boolean   @default(false) @map("is_overtime_alert")
  // æ®‹æ¥­ã‚¢ãƒ©ãƒ¼ãƒˆï¼ˆ45hè¶…ãˆï¼‰
  isPaidLeaveAlert      Boolean   @default(false) @map("is_paid_leave_alert")
  // æœ‰çµ¦å–å¾—ç¾©å‹™ã‚¢ãƒ©ãƒ¼ãƒˆ

  // Relations
  attendanceRecords     AttendanceRecord[]
  leaveApplications     LeaveApplication[]
  paidLeaveBalances     PaidLeaveBalance[]
  overtimeManagements   OvertimeManagement[]
  workScheduleVariations WorkScheduleVariation[]

  // ... æ—¢å­˜Relations ...
}
```

---

### è¨­è¨ˆã®ãƒã‚¤ãƒ³ãƒˆ

#### 1. **VoiceDriveå®Œå…¨é€£æº**
```typescript
// ã‚·ãƒ•ãƒˆäºˆå®š vs å‹¤æ€ å®Ÿç¸¾ã®å·®ç•°ã‚’è‡ªå‹•è¨ˆç®—
const attendance = await prisma.attendanceRecord.create({
  data: {
    employeeId: "emp-001",
    voicedriveShiftId: "shift-12345",
    scheduledStartTime: "09:00",
    actualCheckIn: "09:15",  // 15åˆ†é…åˆ»
    startTimeDifference: 15,
    isLate: true
  }
});
```

#### 2. **36å”å®šè‡ªå‹•ç®¡ç†**
```typescript
// æœˆ45hè¶…éã§è‡ªå‹•ã‚¢ãƒ©ãƒ¼ãƒˆ
const overtime = await calculateMonthlyOvertime(employeeId, "2025-10");
if (overtime.totalOvertimeHours > 45) {
  await prisma.overtimeManagement.update({
    where: { id: overtime.id },
    data: {
      isOver45Hours: true,
      alertLevel: "warning",
      specialClauseApplied: true,  // ç‰¹åˆ¥æ¡é …é©ç”¨
      specialClauseReason: "æ¥­å‹™ç¹å¿™æœŸ"
    }
  });
}
```

#### 3. **æœ‰çµ¦ä¼‘æš‡è‡ªå‹•ç®¡ç†**
```typescript
// æœ‰çµ¦ç”³è«‹ã§æ®‹æ—¥æ•°ã‚’è‡ªå‹•æ›´æ–°
const leave = await prisma.leaveApplication.create({
  data: {
    employeeId: "emp-001",
    leaveType: "paid_leave",
    totalDays: 1.0,
    paidLeaveBalance: 15.0,      // ç”³è«‹å‰
    paidLeaveAfter: 14.0         // ç”³è«‹å¾Œï¼ˆè‡ªå‹•è¨ˆç®—ï¼‰
  }
});

// PaidLeaveBalanceã‚‚è‡ªå‹•æ›´æ–°
await updatePaidLeaveBalance(employeeId, -1.0);
```

#### 4. **æ³•å®šå–å¾—ç¾©å‹™ï¼ˆå¹´5æ—¥ï¼‰ã‚¢ãƒ©ãƒ¼ãƒˆ**
```typescript
// å¹´åº¦æœ«3ãƒ¶æœˆå‰ã«ã‚¢ãƒ©ãƒ¼ãƒˆ
const balance = await prisma.paidLeaveBalance.findUnique({
  where: { employeeId_fiscalYear: { employeeId: "emp-001", fiscalYear: 2025 } }
});

if (balance.mandatoryRemaining > 0 && isWithin3MonthsOfYearEnd()) {
  await sendMandatoryLeaveAlert(employeeId);
}
```

---

### å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ä¾‹

#### ãƒ‘ã‚¿ãƒ¼ãƒ³1: ä¼‘æš‡ç”³è«‹ã¨VoiceDriveé€£æº
```typescript
// ä¼‘æš‡ç”³è«‹ â†’ æ‰¿èª â†’ VoiceDriveã‚·ãƒ•ãƒˆå‰Šé™¤
const leaveApp = await prisma.leaveApplication.create({
  data: {
    employeeId: "emp-001",
    leaveType: "paid_leave",
    startDate: "2025-11-10",
    endDate: "2025-11-12",
    totalDays: 3.0,
    affectedShiftIds: ["shift-100", "shift-101", "shift-102"],
    approvalStatus: "approved"
  }
});

// VoiceDriveã«é€šçŸ¥ â†’ ã‚·ãƒ•ãƒˆå‰Šé™¤
await notifyVoiceDrive({
  type: "leave_approved",
  employeeId: "emp-001",
  shiftIds: leaveApp.affectedShiftIds,
  action: "delete_shifts"
});
```

#### ãƒ‘ã‚¿ãƒ¼ãƒ³2: æ®‹æ¥­80hè¶…éã§ç”£æ¥­åŒ»é¢æ¥è‡ªå‹•è¨­å®š
```typescript
// æœˆ80hè¶…éã‚’æ¤œçŸ¥
if (overtime.totalOvertimeHours >= 80) {
  await prisma.overtimeManagement.update({
    where: { id: overtime.id },
    data: {
      isOver80Hours: true,
      requiresDoctorInterview: true,
      alertLevel: "danger"
    }
  });

  // ç”£æ¥­åŒ»é¢æ¥ã‚’è‡ªå‹•äºˆç´„
  await scheduleOccupationalDoctorInterview(employeeId);
}
```

#### ãƒ‘ã‚¿ãƒ¼ãƒ³3: å¤‰å½¢åŠ´åƒæ™‚é–“åˆ¶ã®é©ç”¨
```typescript
// 1ãƒ¶æœˆå˜ä½å¤‰å½¢åŠ´åƒæ™‚é–“åˆ¶
const variation = await prisma.workScheduleVariation.create({
  data: {
    employeeId: "emp-001",
    variationType: "one_month",
    variationPeriod: "2025-11",
    shiftPattern: {
      week1: ["day", "day", "night", "night", "off", "off", "off"],
      week2: ["day", "day", "day", "night", "night", "off", "off"]
    },
    dayShiftCount: 10,
    nightShiftCount: 6,
    totalScheduledHours: 160.0
  }
});
```

---

### ã¾ã¨ã‚

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€ä»¥ä¸‹ãŒå®Ÿç¾ã§ãã¾ã™ï¼š

âœ… **VoiceDriveå®Œå…¨é€£æº**
- ã‚·ãƒ•ãƒˆäºˆå®š vs å‹¤æ€ å®Ÿç¸¾ã®å·®ç•°ç®¡ç†
- ä¼‘æš‡ç”³è«‹æ™‚ã®è‡ªå‹•ã‚·ãƒ•ãƒˆèª¿æ•´

âœ… **36å”å®šå®Œå…¨éµå®ˆ**
- æœˆ45h/å¹´360hä¸Šé™ç®¡ç†
- ç‰¹åˆ¥æ¡é …é©ç”¨ç®¡ç†
- è¤‡æ•°æœˆå¹³å‡80håˆ¶é™

âœ… **æœ‰çµ¦ä¼‘æš‡è‡ªå‹•ç®¡ç†**
- æ®‹æ—¥æ•°è‡ªå‹•è¨ˆç®—
- æ³•å®šå–å¾—ç¾©å‹™ï¼ˆå¹´5æ—¥ï¼‰ã‚¢ãƒ©ãƒ¼ãƒˆ
- ç¹°è¶Šãƒ»å¤±åŠ¹ç®¡ç†

âœ… **åŒ»ç™‚æ©Ÿé–¢ç‰¹æœ‰ã®å‹¤å‹™å½¢æ…‹å¯¾å¿œ**
- 1ãƒ¶æœˆå˜ä½å¤‰å½¢åŠ´åƒæ™‚é–“åˆ¶
- å¤œå‹¤ãƒ»æ—¥å‹¤çµ„ã¿åˆã‚ã›ç®¡ç†
- æœˆ80hè¶…éæ™‚ã®ç”£æ¥­åŒ»é¢æ¥è‡ªå‹•è¨­å®š

**æ³•ä»¤éµå®ˆã—ãªãŒã‚‰ã€VoiceDriveã¨å®Œå…¨é€£æºã—ãŸå‹¤æ€ ç®¡ç†ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ï¼**

---

## 20. ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹é¸æŠåˆ¶åº¦ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆPhase 5å®Ÿè£…æ¸ˆã¿ãƒ»å°†æ¥æ‹¡å¼µå¯¾å¿œï¼‰

### èƒŒæ™¯ã¨è¦ä»¶
- ç¾åœ¨ã®å®Ÿè£…: **Phase 5-2å®Œå…¨å®Ÿè£…æ¸ˆã¿** - Aï½D 4ã‚³ãƒ¼ã‚¹ã®å®šç¾©ãƒ»è·å“¡å‰²ã‚Šå½“ã¦ãƒ»å¤‰æ›´ç”³è«‹å¯©æŸ»æ©Ÿèƒ½
- TypeScriptå‹å®šç¾©: å®Œå…¨å®Ÿè£…æ¸ˆã¿ï¼ˆCourseDefinition, CareerCourseSelection, CareerCourseChangeRequestç­‰ï¼‰
- **ä¸è¶³ã—ã¦ã„ã‚‹é …ç›®**:
  - ã‚³ãƒ¼ã‚¹å¤‰æ›´å±¥æ­´ã®å®Œå…¨ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ï¼ˆå¤‰æ›´ç†ç”±ãƒ»æ‰¿èªè€…ãƒ»æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ä¿ç®¡ï¼‰
  - ã‚³ãƒ¼ã‚¹é–“è»¢æ›ãƒ«ãƒ¼ãƒ«ã®è©³ç´°å®šç¾©ï¼ˆç¾åœ¨ã¯å‹å®šç¾©ã®ã¿ã€DBãƒ†ãƒ¼ãƒ–ãƒ«æœªè¨­å®šï¼‰
  - å°†æ¥ã®E/Fã‚³ãƒ¼ã‚¹è¿½åŠ å¯¾å¿œï¼ˆç¾åœ¨Aï½Dã®4ã‚³ãƒ¼ã‚¹ã®ã¿ï¼‰
  - VoiceDriveã‹ã‚‰ã®ç”³è«‹ãƒ‡ãƒ¼ã‚¿ã®æ­£å¼ãªä¿ç®¡ãƒ†ãƒ¼ãƒ–ãƒ«
  - çµ±è¨ˆåˆ†æç”¨ã®é›†è¨ˆãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæœˆæ¬¡ãƒ»å¹´æ¬¡ã®ã‚³ãƒ¼ã‚¹åˆ¥äººå“¡æ¨ç§»ï¼‰

### ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹é¸æŠåˆ¶åº¦ã®æ¦‚è¦
```
âœ… Aã‚³ãƒ¼ã‚¹ï¼ˆå…¨é¢å”åŠ›å‹ï¼‰: åŸºæœ¬çµ¦ä¿‚æ•°1.2å€ã€ç®¡ç†è·å€™è£œã€è»¢å±…ã‚’ä¼´ã†è»¢å‹¤OKã€å¤œå‹¤å¿…é ˆ
âœ… Bã‚³ãƒ¼ã‚¹ï¼ˆæ–½è¨­å†…å”åŠ›å‹ï¼‰: åŸºæœ¬çµ¦ä¿‚æ•°1.1å€ã€æ–½è¨­å†…éƒ¨ç½²ç•°å‹•ã®ã¿ã€å¤œå‹¤å¿…é ˆ
âœ… Cã‚³ãƒ¼ã‚¹ï¼ˆå°‚é–€è·å‹ï¼‰: åŸºæœ¬çµ¦ä¿‚æ•°1.0å€ã€ç•°å‹•ãªã—ã€å¤œå‹¤é¸æŠå¯ã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆå„ªå…ˆ
âœ… Dã‚³ãƒ¼ã‚¹ï¼ˆæ™‚çŸ­ãƒ»åˆ¶ç´„ã‚ã‚Šå‹ï¼‰: åŸºæœ¬çµ¦ä¿‚æ•°0.9å€ã€è‚²å…ãƒ»ä»‹è­·ç­‰é…æ…®ã€å¤œå‹¤ãªã—ã€ç•°å‹•ãªã—
```

### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

#### 20-1. CareerCourseDefinitionï¼ˆã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹å®šç¾©ãƒã‚¹ã‚¿ãƒ¼ï¼‰

**ç›®çš„**: Aï½Dï¼ˆå°†æ¥çš„ã«E/Fç­‰è¿½åŠ å¯èƒ½ï¼‰ã®ã‚³ãƒ¼ã‚¹å®šç¾©ã‚’ç®¡ç†ã€‚çµ¦ä¸ä¿‚æ•°ãƒ»ç•°å‹•æ¡ä»¶ãƒ»å¤œå‹¤è¦ä»¶ç­‰ã‚’ä¸€å…ƒç®¡ç†ã€‚

```prisma
model CareerCourseDefinition {
  id                    String    @id @default(cuid())

  // ã‚³ãƒ¼ã‚¹åŸºæœ¬æƒ…å ±
  courseCode            String    @unique @map("course_code")
  // A, B, C, D, E, F...ï¼ˆå°†æ¥æ‹¡å¼µå¯èƒ½ï¼‰
  courseName            String    @map("course_name")
  // Aã‚³ãƒ¼ã‚¹ï¼ˆå…¨é¢å”åŠ›å‹ï¼‰
  description           String?   @db.Text
  // è©³ç´°èª¬æ˜

  // ç•°å‹•ãƒ»è»¢å‹¤æ¡ä»¶
  departmentTransferAvailable Boolean @default(false) @map("department_transfer_available")
  // éƒ¨ç½²ç•°å‹•å¯å¦
  facilityTransferAvailable   String  @map("facility_transfer_available")
  // none, limited, full
  relocationRequired          Boolean @default(false) @map("relocation_required")
  // è»¢å±…ã‚’ä¼´ã†è»¢å‹¤

  // å‹¤å‹™æ¡ä»¶
  nightShiftAvailable   String    @map("night_shift_available")
  // none, selectable, required

  // ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹
  managementTrack       Boolean   @default(false) @map("management_track")
  // ç®¡ç†è·ç™»ç”¨å¯¾è±¡

  // çµ¦ä¸è¨­å®šï¼ˆ3ãƒ‘ã‚¿ãƒ¼ãƒ³å¯¾å¿œ: ä¿‚æ•°ã®ã¿/ç­‰ç´šã®ã¿/ä¸¡æ–¹ï¼‰
  baseSalaryMultiplier  Float     @map("base_salary_multiplier")
  // åŸºæœ¬çµ¦ä¿‚æ•°ï¼ˆä¾‹: 1.2ï¼‰
  salaryGrade           Int?      @map("salary_grade")
  // çµ¦ä¸ç­‰ç´šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  salaryNotes           String?   @db.Text @map("salary_notes")
  // çµ¦ä¸è¨ˆç®—ã«é–¢ã™ã‚‹ãƒ¡ãƒ¢

  // å°†æ¥æ‹¡å¼µ: ç­‰ç´šåˆ¶åº¦ã¨ã®é€£æº
  maxGradeLimit         Int?      @map("max_grade_limit")
  // ã“ã®ã‚³ãƒ¼ã‚¹ã®æœ€å¤§åˆ°é”å¯èƒ½ç­‰ç´šï¼ˆå°†æ¥ã®Phase 2å¯¾å¿œï¼‰
  gradeCoefficient      Float?    @default(1.0) @map("grade_coefficient")
  // ç­‰ç´šæ˜‡çµ¦æ™‚ã®ä¿‚æ•°ï¼ˆAã‚³ãƒ¼ã‚¹: 1.2, Bã‚³ãƒ¼ã‚¹: 1.1ç­‰ï¼‰

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  isActive              Boolean   @default(true) @map("is_active")
  displayOrder          Int       @map("display_order")
  effectiveFrom         DateTime? @map("effective_from")
  // ã“ã®å®šç¾©ã®æœ‰åŠ¹é–‹å§‹æ—¥
  effectiveTo           DateTime? @map("effective_to")
  // NULL = ç¾åœ¨æœ‰åŠ¹

  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([courseCode])
  @@index([isActive])
  @@map("career_course_definitions")
}
```

#### 20-2. EmployeeCareerCourseï¼ˆè·å“¡ã®ã‚³ãƒ¼ã‚¹é¸æŠãƒ»å¤‰æ›´å±¥æ­´ï¼‰

**ç›®çš„**: å„è·å“¡ã®ç¾åœ¨ã®ã‚³ãƒ¼ã‚¹ãƒ»éå»ã®å¤‰æ›´å±¥æ­´ã‚’å®Œå…¨è¨˜éŒ²ã€‚å¹´1å›åˆ¶é™ãƒ»ç‰¹ä¾‹å¤‰æ›´ã®ç®¡ç†ã€‚

```prisma
model EmployeeCareerCourse {
  id                    String    @id @default(cuid())
  employeeId            String    @map("employee_id")

  // ã‚³ãƒ¼ã‚¹æƒ…å ±
  courseCode            String    @map("course_code")
  // A, B, C, D

  // é©ç”¨æœŸé–“
  effectiveFrom         DateTime  @map("effective_from")
  // YYYY-MM-DD
  effectiveTo           DateTime? @map("effective_to")
  // NULL = ç¾åœ¨æœ‰åŠ¹

  // æ¬¡å›å¤‰æ›´å¯èƒ½æ—¥ï¼ˆå¹´1å›åˆ¶é™ï¼‰
  nextChangeAvailableDate DateTime? @map("next_change_available_date")
  // å®šæœŸå¤‰æ›´ã®å ´åˆã€æ¬¡å›å¤‰æ›´å¯èƒ½æ—¥ã‚’è¨˜éŒ²

  // ç‰¹ä¾‹å¤‰æ›´äº‹ç”±
  specialChangeReason   String?   @map("special_change_reason")
  // pregnancy, caregiving, illness, null
  specialChangeNote     String?   @db.Text @map("special_change_note")
  // ç‰¹ä¾‹äº‹ç”±ã®è©³ç´°ï¼ˆè¨ºæ–­æ›¸å†…å®¹ç­‰ï¼‰
  specialChangeAttachments Json?  @map("special_change_attachments")
  // [
  //   { "fileName": "å¦Šå¨ è¨ºæ–­æ›¸.pdf", "fileUrl": "https://...", "uploadedAt": "2025-10-01T10:00:00Z" },
  //   { "fileName": "æ¯å­å¥åº·æ‰‹å¸³.pdf", "fileUrl": "https://...", "uploadedAt": "2025-10-01T10:05:00Z" }
  // ]

  // æ‰¿èªæƒ…å ±
  changeRequestId       String?   @map("change_request_id")
  // CareerCourseChangeRequestã¨ã®ç´ä»˜ã‘
  changeRequestedAt     DateTime? @map("change_requested_at")
  changeRequestedBy     String?   @map("change_requested_by")
  // VoiceDriveã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID

  approvedAt            DateTime? @map("approved_at")
  approvedBy            String?   @map("approved_by")
  // äººäº‹éƒ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
  approvedByName        String?   @map("approved_by_name")
  approvalStatus        String    @default("approved") @map("approval_status")
  // approved, pending, rejected, withdrawn
  rejectionReason       String?   @db.Text @map("rejection_reason")

  // VoiceDriveé€£æº
  syncedToVoiceDrive    Boolean   @default(false) @map("synced_to_voicedrive")
  voicedriveSyncedAt    DateTime? @map("voicedrive_synced_at")
  voicedriveRecordId    String?   @map("voicedrive_record_id")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([employeeId])
  @@index([courseCode])
  @@index([effectiveFrom])
  @@index([effectiveTo])
  @@index([approvalStatus])
  @@map("employee_career_courses")
}
```

#### 20-3. CareerCourseChangeRequestï¼ˆã‚³ãƒ¼ã‚¹å¤‰æ›´ç”³è«‹ï¼‰

**ç›®çš„**: VoiceDriveã‹ã‚‰é€ä¿¡ã•ã‚Œã‚‹å¤‰æ›´ç”³è«‹ã‚’ç®¡ç†ã€‚æ‰¿èªãƒ•ãƒ­ãƒ¼ãƒ»æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»å¯©æŸ»ã‚³ãƒ¡ãƒ³ãƒˆä¿ç®¡ã€‚

```prisma
model CareerCourseChangeRequest {
  id                    String    @id @default(cuid())

  // ç”³è«‹è·å“¡æƒ…å ±
  employeeId            String    @map("employee_id")
  staffId               String    @map("staff_id")
  // OH-NS-2023-005ç­‰
  staffName             String?   @map("staff_name")
  facility              String?
  department            String?
  position              String?

  // å¤‰æ›´å†…å®¹
  currentCourseCode     String    @map("current_course_code")
  requestedCourseCode   String    @map("requested_course_code")
  requestedEffectiveDate DateTime @map("requested_effective_date")
  // å¸Œæœ›é©ç”¨æ—¥

  // å¤‰æ›´ç†ç”±
  changeReason          String    @map("change_reason")
  // annual, special_pregnancy, special_caregiving, special_illness, special_other
  reasonDetail          String?   @db.Text @map("reason_detail")
  // ç”³è«‹è€…ãŒå…¥åŠ›ã—ãŸç†ç”±è©³ç´°

  // æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«
  attachments           Json?
  // [
  //   { "fileName": "å¦Šå¨ è¨ºæ–­æ›¸.pdf", "fileUrl": "https://...", "uploadedAt": "2025-10-01T10:00:00Z" }
  // ]

  // VoiceDriveé€£æºæƒ…å ±
  voicedriveRequestId   String?   @map("voicedrive_request_id")
  submittedFromVoiceDrive Boolean @default(true) @map("submitted_from_voicedrive")
  submittedAt           DateTime  @default(now()) @map("submitted_at")
  submittedBy           String    @map("submitted_by")
  // VoiceDriveã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID

  // æ‰¿èªãƒ•ãƒ­ãƒ¼
  approvalStatus        String    @default("pending") @map("approval_status")
  // pending, approved, rejected, withdrawn

  hrReviewerId          String?   @map("hr_reviewer_id")
  // äººäº‹éƒ¨å¯©æŸ»è€…ID
  hrReviewerName        String?   @map("hr_reviewer_name")
  reviewedAt            DateTime? @map("reviewed_at")
  reviewComment         String?   @db.Text @map("review_comment")
  // æ‰¿èªãƒ»å´ä¸‹æ™‚ã®ã‚³ãƒ¡ãƒ³ãƒˆ

  rejectionReason       String?   @db.Text @map("rejection_reason")
  withdrawnAt           DateTime? @map("withdrawn_at")
  withdrawnReason       String?   @db.Text @map("withdrawn_reason")

  // åæ˜ çŠ¶æ…‹
  appliedToRecord       Boolean   @default(false) @map("applied_to_record")
  // EmployeeCareerCourseã«åæ˜ æ¸ˆã¿ã‹
  appliedAt             DateTime? @map("applied_at")
  appliedRecordId       String?   @map("applied_record_id")
  // EmployeeCareerCourse.id

  // é€šçŸ¥ç®¡ç†
  hrNotificationSent    Boolean   @default(false) @map("hr_notification_sent")
  // äººäº‹éƒ¨ã¸ã®é€šçŸ¥é€ä¿¡æ¸ˆã¿
  applicantNotificationSent Boolean @default(false) @map("applicant_notification_sent")
  // ç”³è«‹è€…ã¸ã®çµæœé€šçŸ¥é€ä¿¡æ¸ˆã¿

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([employeeId])
  @@index([approvalStatus])
  @@index([submittedAt])
  @@index([requestedEffectiveDate])
  @@index([voicedriveRequestId])
  @@map("career_course_change_requests")
}
```

#### 20-4. CourseTransferRuleï¼ˆã‚³ãƒ¼ã‚¹é–“è»¢æ›ãƒ«ãƒ¼ãƒ«ï¼‰

**ç›®çš„**: Aâ†’Bã€Câ†’Dç­‰ã®ã‚³ãƒ¼ã‚¹é–“è»¢æ›ã®å¯å¦ãƒ»æ¡ä»¶ã‚’å®šç¾©ã€‚è»¢æ›æ™‚ã®è¨“ç·´è¦ä»¶ãƒ»æ‰¿èªãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ã€‚

```prisma
model CourseTransferRule {
  id                    String    @id @default(cuid())

  // è»¢æ›å…ƒãƒ»è»¢æ›å…ˆ
  fromCourseCode        String    @map("from_course_code")
  toCourseCode          String    @map("to_course_code")

  // è»¢æ›æ¡ä»¶
  isAllowed             Boolean   @default(true) @map("is_allowed")
  // ã“ã®è»¢æ›ã‚’è¨±å¯ã™ã‚‹ã‹
  requiresApproval      Boolean   @default(true) @map("requires_approval")
  // æ‰¿èªå¿…é ˆã‹ï¼ˆé€šå¸¸ã¯trueï¼‰

  // è¨“ç·´ãƒ»ç ”ä¿®è¦ä»¶
  requiresTraining      Boolean   @default(false) @map("requires_training")
  // ã‚­ãƒ£ãƒªã‚¢ãƒ«ãƒ¼ãƒˆã®é•ã„ã‚’è€ƒæ…®ã—ãŸè¨“ç·´ãŒå¿…è¦ã‹
  trainingProgramId     String?   @map("training_program_id")
  // EducationTrainingProgram.idï¼ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³16ã§å®šç¾©ï¼‰
  trainingProgramName   String?   @map("training_program_name")
  trainingDurationDays  Int?      @map("training_duration_days")

  // åˆ¶ç´„æ¡ä»¶
  minimumServiceYears   Int?      @map("minimum_service_years")
  // æœ€ä½å‹¤ç¶šå¹´æ•°
  requiresManagerRecommendation Boolean @default(false) @map("requires_manager_recommendation")
  // ä¸Šå¸æ¨è–¦ãŒå¿…è¦ã‹
  requiresInterviewWithHR Boolean @default(false) @map("requires_interview_with_hr")
  // äººäº‹éƒ¨ã¨ã®é¢è«‡ãŒå¿…è¦ã‹

  // ç‰¹åˆ¥æ¡ä»¶
  allowedOnlyForSpecialReasons Boolean @default(false) @map("allowed_only_for_special_reasons")
  // ç‰¹ä¾‹ã®ã¿è¨±å¯ï¼ˆä¾‹: Câ†’Dã€å¦Šå¨ ãƒ»è‚²å…ã®ã¿ï¼‰
  specialReasonsAllowed Json?     @map("special_reasons_allowed")
  // ["pregnancy", "caregiving", "illness"]

  // èª¬æ˜ãƒ»æ³¨æ„äº‹é …
  ruleDescription       String?   @db.Text @map("rule_description")
  // ã“ã®ãƒ«ãƒ¼ãƒ«ã®èª¬æ˜
  notes                 String?   @db.Text
  // æ³¨æ„äº‹é …

  // æœ‰åŠ¹æœŸé–“
  effectiveFrom         DateTime? @map("effective_from")
  effectiveTo           DateTime? @map("effective_to")
  isActive              Boolean   @default(true) @map("is_active")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@unique([fromCourseCode, toCourseCode])
  @@index([fromCourseCode])
  @@index([toCourseCode])
  @@index([isActive])
  @@map("course_transfer_rules")
}
```

#### 20-5. CareerCourseStatisticsï¼ˆæœˆæ¬¡ã‚³ãƒ¼ã‚¹åˆ¥çµ±è¨ˆï¼‰

**ç›®çš„**: æ¯æœˆã®ã‚³ãƒ¼ã‚¹åˆ¥äººå“¡æ•°ãƒ»å¤‰æ›´ä»¶æ•°ã‚’é›†è¨ˆã€‚çµŒå–¶å±¤ãƒ»äººäº‹éƒ¨ã¸ã®å ±å‘Šç”¨ãƒ‡ãƒ¼ã‚¿ã€‚

```prisma
model CareerCourseStatistics {
  id                    String    @id @default(cuid())

  // é›†è¨ˆæœŸé–“
  fiscalYear            Int       @map("fiscal_year")
  // å¹´åº¦
  month                 Int
  // 1-12
  snapshotDate          DateTime  @map("snapshot_date")
  // é›†è¨ˆæ—¥ï¼ˆé€šå¸¸ã¯æœˆæœ«æ—¥ï¼‰

  // ã‚³ãƒ¼ã‚¹åˆ¥é›†è¨ˆ
  courseCode            String    @map("course_code")
  totalStaffCount       Int       @map("total_staff_count")
  // ã“ã®ã‚³ãƒ¼ã‚¹ã®è·å“¡æ•°
  percentageOfTotal     Float     @map("percentage_of_total")
  // å…¨ä½“ã«å¯¾ã™ã‚‹å‰²åˆï¼ˆ%ï¼‰

  // æ–½è¨­åˆ¥å†…è¨³
  byFacility            Json?     @map("by_facility")
  // [
  //   { "facilityId": "obara-hospital", "facilityName": "å°åŸç—…é™¢", "count": 45, "percentage": 62.5 },
  //   { "facilityId": "tategami-rehabilitation", "facilityName": "ç«‹ç¥ãƒªãƒãƒ“ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ¸©æ³‰ç—…é™¢", "count": 27, "percentage": 37.5 }
  // ]

  // è·ç¨®åˆ¥å†…è¨³
  byPosition            Json?     @map("by_position")
  // [
  //   { "position": "çœ‹è­·å¸«", "count": 30 },
  //   { "position": "ç†å­¦ç™‚æ³•å£«", "count": 15 }
  // ]

  // å¤‰æ›´çµ±è¨ˆ
  newAssignments        Int       @default(0) @map("new_assignments")
  // å½“æœˆã®æ–°è¦å‰²ã‚Šå½“ã¦ï¼ˆæ–°å…¥è·ç­‰ï¼‰
  changesFromOtherCourse Int      @default(0) @map("changes_from_other_course")
  // ä»–ã‚³ãƒ¼ã‚¹ã‹ã‚‰å¤‰æ›´ã—ã¦ããŸäººæ•°
  changesToOtherCourse   Int      @default(0) @map("changes_to_other_course")
  // ä»–ã‚³ãƒ¼ã‚¹ã¸å¤‰æ›´ã—ãŸäººæ•°

  // ç‰¹ä¾‹å¤‰æ›´ã®å†…è¨³
  specialChangeBreakdown Json?    @map("special_change_breakdown")
  // {
  //   "pregnancy": 2,
  //   "caregiving": 1,
  //   "illness": 0
  // }

  // å‰æœˆæ¯”è¼ƒ
  previousMonthCount    Int?      @map("previous_month_count")
  countChange           Int?      @map("count_change")
  // ãƒ—ãƒ©ã‚¹/ãƒã‚¤ãƒŠã‚¹

  // è‡ªå‹•é›†è¨ˆæƒ…å ±
  calculatedAt          DateTime  @default(now()) @map("calculated_at")
  calculatedBy          String?   @map("calculated_by")
  // system, batch-jobç­‰

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@unique([fiscalYear, month, courseCode])
  @@index([fiscalYear])
  @@index([courseCode])
  @@index([snapshotDate])
  @@map("career_course_statistics")
}
```

### Employeeãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

```prisma
// æ—¢å­˜ã®Employeeãƒ¢ãƒ‡ãƒ«ã«è¿½åŠ 
model Employee {
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

  // ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹é–¢é€£ï¼ˆPhase 5ï¼‰
  currentCareerCourse   String?   @map("current_career_course")
  // A, B, C, D - æœ€æ–°ã®ã‚³ãƒ¼ã‚¹ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  careerCourseChangedAt DateTime? @map("career_course_changed_at")
  // æœ€å¾Œã«ã‚³ãƒ¼ã‚¹ã‚’å¤‰æ›´ã—ãŸæ—¥æ™‚
  nextCourseChangeAvailableDate DateTime? @map("next_course_change_available_date")
  // æ¬¡å›å¤‰æ›´å¯èƒ½æ—¥ï¼ˆå¹´1å›åˆ¶é™ï¼‰

  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
}
```

### å®Ÿè£…ã«ã‚ˆã‚‹åŠ¹æœ

âœ… **å®Œå…¨ãªå¤‰æ›´å±¥æ­´ç®¡ç†**
- å…¨ã¦ã®å¤‰æ›´å±¥æ­´ã‚’ä¿ç®¡ï¼ˆç†ç”±ãƒ»æ‰¿èªè€…ãƒ»æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- ç‰¹ä¾‹å¤‰æ›´ã®ç›£æŸ»è¨¼è·¡
- VoiceDriveé€£æºã®å®Œå…¨ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£

âœ… **å°†æ¥æ‹¡å¼µå¯¾å¿œ**
- E/Fã‚³ãƒ¼ã‚¹ç­‰ã®è¿½åŠ ãŒå®¹æ˜“
- ç­‰ç´šåˆ¶åº¦ï¼ˆPhase 2ï¼‰ã¨ã®é€£æºæº–å‚™å®Œäº†
- maxGradeLimitã€gradeCoefficientè¿½åŠ æ¸ˆã¿

âœ… **ã‚³ãƒ¼ã‚¹é–“è»¢æ›ãƒ«ãƒ¼ãƒ«å®šç¾©**
- Aâ†’Bã€Câ†’Dç­‰ã®è»¢æ›æ¡ä»¶ã‚’æ˜ç¢ºåŒ–
- è¨“ç·´è¦ä»¶ãƒ»æ‰¿èªãƒ—ãƒ­ã‚»ã‚¹ã®æ¨™æº–åŒ–
- ç‰¹ä¾‹å¤‰æ›´ã®ãƒ«ãƒ¼ãƒ«ç®¡ç†

âœ… **çµ±è¨ˆåˆ†æã¨çµŒå–¶å ±å‘Š**
- æœˆæ¬¡ã®ã‚³ãƒ¼ã‚¹åˆ¥äººå“¡æ¨ç§»
- æ–½è¨­åˆ¥ãƒ»è·ç¨®åˆ¥ã®å†…è¨³è‡ªå‹•é›†è¨ˆ
- ç‰¹ä¾‹å¤‰æ›´ã®å‚¾å‘åˆ†æ

âœ… **VoiceDriveã¨ã®å®Œå…¨é€£æº**
- ç”³è«‹ãƒ‡ãƒ¼ã‚¿ã®æ­£å¼ä¿ç®¡
- æ‰¿èªçµæœã®è‡ªå‹•åŒæœŸ
- æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã®å®‰å…¨ãªä¿ç®¡

**Phase 5å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ã«å¯¾ã—ã¦ã€å°†æ¥ã®ç­‰ç´šåˆ¶åº¦å°å…¥ï¼ˆPhase 2ï¼‰ã¨ãƒ‡ãƒ¼ã‚¿åˆ†æå¼·åŒ–ã«å¯¾å¿œã—ãŸè¨­è¨ˆå®Œäº†ï¼**

---

## 18. ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯ãƒ»å¥åº·ç®¡ç†çµ±åˆã‚·ã‚¹ãƒ†ãƒ ï¼ˆå€‹äººãƒ¬ãƒ™ãƒ«å®Œå…¨å¯¾å¿œï¼‰

### èƒŒæ™¯ã¨è¦ä»¶
- ç¾åœ¨ã®å®Ÿè£…: åŸºæœ¬çš„ãªå¥è¨ºãƒ‡ãƒ¼ã‚¿å…¥åŠ›ã€ç”£æ¥­åŒ»è¨ºæ–­ã€ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯é›†å›£åˆ†æ
- **ä¸è¶³ã—ã¦ã„ã‚‹é …ç›®**: å€‹äººãƒ¬ãƒ™ãƒ«ã®ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯è©³ç´°å±¥æ­´ã€çµŒå¹´å¤‰åŒ–è¿½è·¡ã€é¢æ¥æŒ‡å°ç®¡ç†
- å¥è¨ºã¨ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯ã®**çµ±åˆçš„ãªå¥åº·ãƒªã‚¹ã‚¯è©•ä¾¡**ãŒå¿…è¦
- ä¿å¥å¸«ãƒ»ç”£æ¥­åŒ»ã®**ä»‹å…¥å±¥æ­´ã¨åŠ¹æœæ¸¬å®š**ãŒä¸è¶³

### æ³•ä»¤è¦ä»¶ï¼ˆåŠ´åƒå®‰å…¨è¡›ç”Ÿæ³•ï¼‰
```
âœ… ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯å¹´1å›å®Ÿæ–½ç¾©å‹™ï¼ˆ50äººä»¥ä¸Šäº‹æ¥­å ´ï¼‰
âœ… é«˜ã‚¹ãƒˆãƒ¬ã‚¹è€…ã¸ã®åŒ»å¸«é¢æ¥æŒ‡å°
âœ… é›†å›£åˆ†æã®å®Ÿæ–½ã¨çµæœæ´»ç”¨
âœ… 5å¹´é–“ã®è¨˜éŒ²ä¿å­˜ç¾©å‹™
âœ… å€‹äººæƒ…å ±ä¿è­·ï¼ˆæœ¬äººåŒæ„ãªã—ã®äººäº‹åˆ©ç”¨ç¦æ­¢ï¼‰
```

### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

#### 18-1. StressCheckRecordï¼ˆã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯å®Ÿæ–½è¨˜éŒ²ï¼‰

**ç›®çš„**: å€‹äººã®ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯å—æ¤œå±¥æ­´ã‚’å®Œå…¨ç®¡ç†ã€‚57é …ç›®ã®è©³ç´°ã‚¹ã‚³ã‚¢ãƒ»çµŒå¹´å¤‰åŒ–ã‚’è¿½è·¡ã€‚

```prisma
model StressCheckRecord {
  id                    String    @id @default(cuid())
  employeeId            String    @map("employee_id")

  // å®Ÿæ–½æƒ…å ±
  fiscalYear            Int       @map("fiscal_year")
  // å¹´åº¦ï¼ˆ2024, 2025...ï¼‰
  implementationDate    DateTime  @map("implementation_date")
  // å®Ÿæ–½æ—¥
  implementationMethod  String?   @map("implementation_method")
  // online, paper, hybrid

  // 57é …ç›®èª¿æŸ»çµæœï¼ˆJSONé…åˆ—ï¼‰
  questionnaireResults  Json      @map("questionnaire_results")
  // [
  //   { "questionNo": 1, "dimension": "ä»•äº‹ã®è² æ‹…", "question": "éå¸¸ã«ãŸãã•ã‚“ã®ä»•äº‹ã‚’ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„", "answer": 4 },
  //   { "questionNo": 2, "dimension": "ä»•äº‹ã®è² æ‹…", "question": "æ™‚é–“å†…ã«ä»•äº‹ãŒå‡¦ç†ã—ãã‚Œãªã„", "answer": 3 },
  //   ... 57é …ç›®
  // ]

  // 3å°ºåº¦è©•ä¾¡ã‚¹ã‚³ã‚¢
  stressFactorScore     Int?      @map("stress_factor_score")
  // ä»•äº‹ã®ã‚¹ãƒˆãƒ¬ã‚¹è¦å› ï¼ˆ29é …ç›®ã€29-116ç‚¹ï¼‰
  physicalMentalScore   Int?      @map("physical_mental_score")
  // å¿ƒèº«ã®ã‚¹ãƒˆãƒ¬ã‚¹åå¿œï¼ˆ29é …ç›®ã€29-116ç‚¹ï¼‰
  supportFactorScore    Int?      @map("support_factor_score")
  // å‘¨å›²ã®ã‚µãƒãƒ¼ãƒˆï¼ˆ9é …ç›®ã€9-36ç‚¹ï¼‰

  // ç·åˆè©•ä¾¡
  totalStressScore      Int?      @map("total_stress_score")
  // åˆè¨ˆç‚¹
  stressLevel           String?   @map("stress_level")
  // lowï¼ˆä½ï¼‰, moderateï¼ˆä¸­ï¼‰, highï¼ˆé«˜ï¼‰, very_highï¼ˆæœ€é«˜ï¼‰
  isHighStress          Boolean   @default(false) @map("is_high_stress")
  // é«˜ã‚¹ãƒˆãƒ¬ã‚¹åˆ¤å®š

  // é«˜ã‚¹ãƒˆãƒ¬ã‚¹åˆ¤å®šåŸºæº–
  highStressReason      String?   @map("high_stress_reason")
  // physical_mental_highï¼ˆå¿ƒèº«åå¿œé«˜ï¼‰, total_highï¼ˆç·åˆç‚¹é«˜ï¼‰, bothï¼ˆä¸¡æ–¹ï¼‰

  // é¢æ¥æŒ‡å°ç”³å‡º
  interviewRequested    Boolean   @default(false) @map("interview_requested")
  // åŒ»å¸«é¢æ¥æŒ‡å°ã®ç”³å‡ºæœ‰ç„¡
  interviewRequestDate  DateTime? @map("interview_request_date")
  interviewCompleted    Boolean   @default(false) @map("interview_completed")
  interviewCompletedDate DateTime? @map("interview_completed_date")

  // å€‹äººã¸ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
  feedbackProvided      Boolean   @default(false) @map("feedback_provided")
  feedbackDate          DateTime? @map("feedback_date")
  feedbackComment       String?   @map("feedback_comment")
  // æœ¬äººã¸ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹

  // ğŸ†• VoiceDriveé…ä¿¡ç®¡ç†
  voicedriveNotificationSent Boolean @default(false) @map("voicedrive_notification_sent")
  // VoiceDriveã¸ã®çµæœé€šçŸ¥é€ä¿¡æ¸ˆã¿
  voicedriveNotificationId String? @map("voicedrive_notification_id")
  // StaffNotification.idï¼ˆSection 27é€£æºï¼‰
  voicedriveNotificationDate DateTime? @map("voicedrive_notification_date")
  // é€šçŸ¥é€ä¿¡æ—¥æ™‚
  voicedriveNotificationStatus String? @map("voicedrive_notification_status")
  // pending, sent, delivered, opened, failed
  personalResultUrl     String?   @map("personal_result_url")
  // å€‹äººçµæœãƒšãƒ¼ã‚¸URLï¼ˆVoiceDriveå†…ï¼‰

  // å‰å›ã¨ã®æ¯”è¼ƒï¼ˆè‡ªå‹•è¨ˆç®—ï¼‰
  previousRecordId      String?   @map("previous_record_id")
  stressChangePercent   Float?    @map("stress_change_percent")
  // å‰å›æ¯”å¤‰åŒ–ç‡ï¼ˆ%ï¼‰
  isImproving           Boolean?  @map("is_improving")
  // æ”¹å–„å‚¾å‘ã‹ã©ã†ã‹

  // åŒæ„ãƒ»å€‹äººæƒ…å ±ç®¡ç†
  consentToShare        Boolean   @default(false) @map("consent_to_share")
  // çµæœã®äº‹æ¥­è€…ã¸ã®æä¾›åŒæ„
  consentDate           DateTime? @map("consent_date")

  // å®Ÿæ–½è€…æƒ…å ±
  conductedBy           String?   @map("conducted_by")
  // å®Ÿæ–½è€…ï¼ˆåŒ»å¸«ãƒ»ä¿å¥å¸«ï¼‰

  notes                 String?   @map("notes")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  // Relations
  employee              Employee  @relation(fields: [employeeId], references: [id])
  interviewGuidance     InterviewGuidance?
  healthRiskAssessment  HealthRiskAssessment?

  @@index([employeeId])
  @@index([fiscalYear])
  @@index([isHighStress])
  @@index([interviewRequested])
  @@index([implementationDate])
  @@map("stress_check_records")
}
```

#### 18-2. InterviewGuidanceï¼ˆåŒ»å¸«é¢æ¥æŒ‡å°è¨˜éŒ²ï¼‰

**ç›®çš„**: é«˜ã‚¹ãƒˆãƒ¬ã‚¹è€…ã¸ã®åŒ»å¸«é¢æ¥æŒ‡å°ã®å®Ÿæ–½å†…å®¹ãƒ»å°±æ¥­ä¸Šã®æªç½®ã‚’è¨˜éŒ²ã€‚

```prisma
model InterviewGuidance {
  id                    String    @id @default(cuid())
  stressCheckRecordId   String    @unique @map("stress_check_record_id")
  employeeId            String    @map("employee_id")

  // é¢æ¥å®Ÿæ–½æƒ…å ±
  interviewDate         DateTime  @map("interview_date")
  doctorId              String?   @map("doctor_id")
  // å®Ÿæ–½åŒ»å¸«ID
  doctorName            String    @map("doctor_name")
  interviewDuration     Int?      @map("interview_duration")
  // é¢æ¥æ™‚é–“ï¼ˆåˆ†ï¼‰
  interviewLocation     String?   @map("interview_location")
  // ã‚ªãƒ³ãƒ©ã‚¤ãƒ³/å¯¾é¢

  // åŒ»å¸«ã®æ„è¦‹ï¼ˆæ³•å®šé …ç›®ï¼‰
  workloadAssessment    String?   @map("workload_assessment")
  // å‹¤å‹™çŠ¶æ³ã®è©•ä¾¡
  healthStatus          String?   @map("health_status")
  // å¿ƒèº«ã®çŠ¶æ³
  medicalOpinion        String    @map("medical_opinion")
  // åŒ»å¸«ã®æ„è¦‹ï¼ˆè‡ªç”±è¨˜è¿°ï¼‰

  // å°±æ¥­ä¸Šã®æªç½®ï¼ˆæ³•å®šé …ç›®ï¼‰
  workMeasuresRequired  Boolean   @default(false) @map("work_measures_required")
  // å°±æ¥­ä¸Šã®æªç½®ã®å¿…è¦æ€§
  workMeasures          Json?     @map("work_measures")
  // [
  //   { "measure": "åŠ´åƒæ™‚é–“ã®çŸ­ç¸®", "duration": "3ãƒ¶æœˆ", "detail": "1æ—¥8æ™‚é–“ä»¥å†…" },
  //   { "measure": "å¤œå‹¤ãƒ»äº¤ä»£å‹¤å‹™ã®åˆ¶é™", "duration": "1ãƒ¶æœˆ", "detail": "æ—¥å‹¤ã®ã¿" },
  //   { "measure": "å‡ºå¼µã®åˆ¶é™", "duration": "2ãƒ¶æœˆ" }
  // ]

  // å‹¤å‹™åˆ¶é™
  overtimeRestriction   Boolean   @default(false) @map("overtime_restriction")
  // æ®‹æ¥­åˆ¶é™
  nightShiftRestriction Boolean   @default(false) @map("night_shift_restriction")
  // å¤œå‹¤åˆ¶é™
  businessTripRestriction Boolean @default(false) @map("business_trip_restriction")
  // å‡ºå¼µåˆ¶é™
  workloadReduction     Boolean   @default(false) @map("workload_reduction")
  // ä½œæ¥­é‡ã®è»½æ¸›

  // æªç½®æœŸé–“
  measureStartDate      DateTime? @map("measure_start_date")
  measureEndDate        DateTime? @map("measure_end_date")
  measureDurationMonths Int?      @map("measure_duration_months")

  // æ²»ç™‚ãƒ»é€šé™¢
  medicalTreatmentRecommended Boolean @default(false) @map("medical_treatment_recommended")
  // æ²»ç™‚å‹§å¥¨
  referredToSpecialist  Boolean   @default(false) @map("referred_to_specialist")
  // å°‚é–€åŒ»ç´¹ä»‹
  specialistType        String?   @map("specialist_type")
  // ç²¾ç¥ç§‘ã€å¿ƒç™‚å†…ç§‘ç­‰

  // ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—
  followUpRequired      Boolean   @default(false) @map("follow_up_required")
  followUpSchedule      Json?     @map("follow_up_schedule")
  // [{ "date": "2025-11-01", "type": "é¢è«‡", "status": "scheduled" }, ...]
  nextInterviewDate     DateTime? @map("next_interview_date")

  // äº‹æ¥­è€…ã¸ã®æ„è¦‹æ›¸æå‡º
  reportSubmittedToEmployer Boolean @default(false) @map("report_submitted_to_employer")
  reportSubmissionDate  DateTime? @map("report_submission_date")

  // VoiceDriveé€£æºï¼ˆå°±æ¥­æªç½®ã®è‡ªå‹•åæ˜ ï¼‰
  sentToVoiceDrive      Boolean   @default(false) @map("sent_to_voicedrive")
  voicedriveSentDate    DateTime? @map("voicedrive_sent_date")

  status                String    @default("completed") @map("status")
  // scheduled, in_progress, completed
  notes                 String?   @map("notes")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  // Relations
  stressCheckRecord     StressCheckRecord @relation(fields: [stressCheckRecordId], references: [id])
  employee              Employee  @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([interviewDate])
  @@index([workMeasuresRequired])
  @@index([followUpRequired])
  @@map("interview_guidances")
}
```

#### 18-3. HealthRiskAssessmentï¼ˆç·åˆå¥åº·ãƒªã‚¹ã‚¯è©•ä¾¡ï¼‰

**ç›®çš„**: å¥è¨ºçµæœ Ã— ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯ Ã— ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ç›¸è«‡ã‚’çµ±åˆã—ã€ç·åˆçš„ãªå¥åº·ãƒªã‚¹ã‚¯ã‚’è©•ä¾¡ã€‚

```prisma
model HealthRiskAssessment {
  id                    String    @id @default(cuid())
  employeeId            String    @map("employee_id")

  assessmentDate        DateTime  @map("assessment_date")
  assessmentPeriod      String    @map("assessment_period")
  // 2024-Q4, 2025-H1 ç­‰

  // å¥è¨ºãƒ‡ãƒ¼ã‚¿é€£æº
  healthCheckupId       String?   @map("health_checkup_id")
  checkupResult         String?   @map("checkup_result")
  // A, B, C, D, E
  hasAbnormalFindings   Boolean   @default(false) @map("has_abnormal_findings")
  abnormalItems         Json?     @map("abnormal_items")
  // [{ "item": "è¡€åœ§", "value": "150/95", "status": "high" }, ...]

  // ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯é€£æº
  stressCheckRecordId   String?   @unique @map("stress_check_record_id")
  stressLevel           String?   @map("stress_level")
  // low, moderate, high, very_high
  isHighStress          Boolean   @default(false) @map("is_high_stress")

  // ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ç›¸è«‡é€£æº
  recentMentalHealthConsultation Boolean @default(false) @map("recent_mental_health_consultation")
  // ç›´è¿‘3ãƒ¶æœˆä»¥å†…ã®ç›¸è«‡æœ‰ç„¡
  consultationCount     Int?      @map("consultation_count")
  // ç›´è¿‘1å¹´é–“ã®ç›¸è«‡å›æ•°

  // ç·åˆãƒªã‚¹ã‚¯è©•ä¾¡ï¼ˆè‡ªå‹•è¨ˆç®—ï¼‰
  overallRiskLevel      String    @map("overall_risk_level")
  // lowï¼ˆä½ãƒªã‚¹ã‚¯ï¼‰, moderateï¼ˆä¸­ãƒªã‚¹ã‚¯ï¼‰, highï¼ˆé«˜ãƒªã‚¹ã‚¯ï¼‰, criticalï¼ˆæœ€é«˜ãƒªã‚¹ã‚¯ï¼‰

  riskFactors           Json      @map("risk_factors")
  // [
  //   { "factor": "é«˜è¡€åœ§ + é«˜ã‚¹ãƒˆãƒ¬ã‚¹", "riskLevel": "high", "weight": 0.8 },
  //   { "factor": "é•·æ™‚é–“åŠ´åƒ", "riskLevel": "moderate", "weight": 0.5 },
  //   { "factor": "ãƒ¡ãƒ³ã‚¿ãƒ«ä¸èª¿ã®å…†å€™", "riskLevel": "high", "weight": 0.7 }
  // ]

  riskScore             Float?    @map("risk_score")
  // 0-100ç‚¹ã®ãƒªã‚¹ã‚¯ã‚¹ã‚³ã‚¢

  // æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  recommendedActions    Json?     @map("recommended_actions")
  // [
  //   { "priority": "high", "action": "ç”£æ¥­åŒ»é¢è«‡ã®å®Ÿæ–½", "deadline": "2é€±é–“ä»¥å†…" },
  //   { "priority": "high", "action": "å‹¤å‹™æ™‚é–“ã®åˆ¶é™", "deadline": "å³æ™‚" },
  //   { "priority": "medium", "action": "ä¿å¥å¸«ãƒ•ã‚©ãƒ­ãƒ¼", "deadline": "1ãƒ¶æœˆä»¥å†…" }
  // ]

  // ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ã‚£ãƒ¼ã‚ºãƒ è©•ä¾¡
  presenteeismScore     Float?    @map("presenteeism_score")
  // 0-100ï¼ˆå¥åº·å•é¡Œã«ã‚ˆã‚‹ç”Ÿç”£æ€§ä½ä¸‹åº¦ï¼‰
  absenteeismRisk       String?   @map("absenteeism_risk")
  // low, moderate, highï¼ˆæ¬ å‹¤ãƒªã‚¹ã‚¯ï¼‰

  // è·å ´ç’°å¢ƒè¦å› 
  workloadStatus        String?   @map("workload_status")
  // normal, moderate_overtime, excessive_overtime
  overtimeHours         Float?    @map("overtime_hours")
  // ç›´è¿‘3ãƒ¶æœˆå¹³å‡æ®‹æ¥­æ™‚é–“
  nightShiftFrequency   String?   @map("night_shift_frequency")
  // none, occasional, frequent

  // ä»‹å…¥å®Ÿæ–½çŠ¶æ³
  interventionRequired  Boolean   @default(false) @map("intervention_required")
  interventionStatus    String?   @map("intervention_status")
  // not_started, in_progress, completed
  interventionStartDate DateTime? @map("intervention_start_date")

  // è©•ä¾¡è€…
  assessedBy            String?   @map("assessed_by")
  // ä¿å¥å¸«ãƒ»ç”£æ¥­åŒ»ID
  assessorRole          String?   @map("assessor_role")
  // occupational_physician, public_health_nurse

  notes                 String?   @map("notes")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  // Relations
  employee              Employee  @relation(fields: [employeeId], references: [id])
  stressCheckRecord     StressCheckRecord? @relation(fields: [stressCheckRecordId], references: [id])

  @@index([employeeId])
  @@index([overallRiskLevel])
  @@index([assessmentDate])
  @@index([interventionRequired])
  @@map("health_risk_assessments")
}
```

#### 18-4. HealthGuidanceï¼ˆä¿å¥æŒ‡å°è¨˜éŒ²ï¼‰

**ç›®çš„**: ä¿å¥å¸«ã«ã‚ˆã‚‹å€‹åˆ¥ä¿å¥æŒ‡å°ãƒ»ç”Ÿæ´»ç¿’æ…£æ”¹å–„æ”¯æ´ã®å®Ÿæ–½è¨˜éŒ²ã€‚

```prisma
model HealthGuidance {
  id                    String    @id @default(cuid())
  employeeId            String    @map("employee_id")

  // æŒ‡å°æƒ…å ±
  guidanceType          String    @map("guidance_type")
  // specificï¼ˆç‰¹å®šä¿å¥æŒ‡å°ï¼‰, motivationalï¼ˆå‹•æ©Ÿä»˜ã‘æ”¯æ´ï¼‰, activeï¼ˆç©æ¥µçš„æ”¯æ´ï¼‰, generalï¼ˆä¸€èˆ¬ä¿å¥æŒ‡å°ï¼‰
  triggerReason         String    @map("trigger_reason")
  // health_checkupï¼ˆå¥è¨ºï¼‰, stress_checkï¼ˆã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯ï¼‰, high_riskï¼ˆé«˜ãƒªã‚¹ã‚¯ï¼‰, self_requestï¼ˆæœ¬äººå¸Œæœ›ï¼‰

  guidanceDate          DateTime  @map("guidance_date")
  nurseId               String?   @map("nurse_id")
  // ä¿å¥å¸«ID
  nurseName             String    @map("nurse_name")
  guidanceDuration      Int?      @map("guidance_duration")
  // æŒ‡å°æ™‚é–“ï¼ˆåˆ†ï¼‰
  guidanceMethod        String?   @map("guidance_method")
  // face_to_face, online, phone

  // æŒ‡å°å†…å®¹ï¼ˆæ³•å®šé …ç›®ï¼‰
  currentHealthStatus   String?   @map("current_health_status")
  // ç¾åœ¨ã®å¥åº·çŠ¶æ…‹è©•ä¾¡
  lifestyleAssessment   Json?     @map("lifestyle_assessment")
  // { "diet": "ä¸è¦å‰‡", "exercise": "ä¸è¶³", "sleep": "ä¸ååˆ†", "alcohol": "é©é‡", "smoking": "ãªã—" }

  healthRisks           Json?     @map("health_risks")
  // [{ "risk": "ãƒ¡ã‚¿ãƒœãƒªãƒƒã‚¯ã‚·ãƒ³ãƒ‰ãƒ­ãƒ¼ãƒ ", "level": "high" }, ...]

  improvementGoals      Json      @map("improvement_goals")
  // [
  //   { "goal": "ä½“é‡5kgæ¸›", "target": "3ãƒ¶æœˆ", "method": "é£Ÿäº‹ç®¡ç† + é‹å‹•" },
  //   { "goal": "æ®‹æ¥­æ™‚é–“å‰Šæ¸›", "target": "1ãƒ¶æœˆ", "method": "æ¥­å‹™åŠ¹ç‡åŒ–" }
  // ]

  actionPlan            Json?     @map("action_plan")
  // [
  //   { "action": "é€±3å›30åˆ†ã‚¦ã‚©ãƒ¼ã‚­ãƒ³ã‚°", "frequency": "é€±3å›", "startDate": "2025-11-01" },
  //   { "action": "é‡èœæ‘‚å–é‡å¢—åŠ ", "target": "1æ—¥350g", "method": "æ¯é£Ÿã‚µãƒ©ãƒ€è¿½åŠ " }
  // ]

  // ç”Ÿæ´»ç¿’æ…£æ”¹å–„æ”¯æ´
  dietGuidance          String?   @map("diet_guidance")
  exerciseGuidance      String?   @map("exercise_guidance")
  sleepGuidance         String?   @map("sleep_guidance")
  stressManagementGuidance String? @map("stress_management_guidance")

  // ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—è¨ˆç”»
  followUpSchedule      Json?     @map("follow_up_schedule")
  // [
  //   { "date": "2025-12-01", "type": "é›»è©±ãƒ•ã‚©ãƒ­ãƒ¼", "status": "scheduled" },
  //   { "date": "2026-01-01", "type": "å¯¾é¢é¢è«‡", "status": "scheduled" }
  // ]

  nextGuidanceDate      DateTime? @map("next_guidance_date")

  // åŠ¹æœæ¸¬å®š
  initialWeight         Float?    @map("initial_weight")
  initialBMI            Float?    @map("initial_bmi")
  initialWaist          Float?    @map("initial_waist")
  targetWeight          Float?    @map("target_weight")
  targetWaist           Float?    @map("target_waist")

  currentWeight         Float?    @map("current_weight")
  currentBMI            Float?    @map("current_bmi")
  currentWaist          Float?    @map("current_waist")

  improvementRate       Float?    @map("improvement_rate")
  // æ”¹å–„ç‡ï¼ˆ%ï¼‰
  goalAchievement       String?   @map("goal_achievement")
  // not_achieved, partially_achieved, fully_achieved

  // æ²»ç™‚å‹§å¥¨
  medicalReferralRequired Boolean @default(false) @map("medical_referral_required")
  referralReason        String?   @map("referral_reason")
  referredDate          DateTime? @map("referred_date")

  status                String    @default("active") @map("status")
  // active, completed, discontinued
  completionDate        DateTime? @map("completion_date")

  notes                 String?   @map("notes")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  // Relations
  employee              Employee  @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([guidanceType])
  @@index([guidanceDate])
  @@index([status])
  @@map("health_guidances")
}
```

#### 18-5. GroupStressAnalysisï¼ˆé›†å›£åˆ†æçµæœï¼‰

**ç›®çš„**: éƒ¨ç½²ãƒ»æ–½è¨­åˆ¥ã®ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯é›†å›£åˆ†æçµæœã‚’è¨˜éŒ²ã€‚è·å ´ç’°å¢ƒæ”¹å–„ã«æ´»ç”¨ã€‚

```prisma
model GroupStressAnalysis {
  id                    String    @id @default(cuid())

  // åˆ†æå¯¾è±¡
  fiscalYear            Int       @map("fiscal_year")
  analysisDate          DateTime  @map("analysis_date")
  analysisLevel         String    @map("analysis_level")
  // facilityï¼ˆæ–½è¨­ï¼‰, departmentï¼ˆéƒ¨ç½²ï¼‰, teamï¼ˆãƒãƒ¼ãƒ ï¼‰
  targetFacilityId      String?   @map("target_facility_id")
  targetDepartmentId    String?   @map("target_department_id")
  targetGroupName       String    @map("target_group_name")

  // å¯¾è±¡äººæ•°
  totalEmployees        Int       @map("total_employees")
  // å¯¾è±¡è·å“¡æ•°
  respondents           Int       @map("respondents")
  // å›ç­”è€…æ•°
  responseRate          Float     @map("response_rate")
  // å›ç­”ç‡ï¼ˆ%ï¼‰

  // é›†å›£åˆ†æçµæœï¼ˆæ³•å®šé …ç›®ï¼‰
  avgStressFactorScore  Float     @map("avg_stress_factor_score")
  // ä»•äº‹ã®ã‚¹ãƒˆãƒ¬ã‚¹è¦å› å¹³å‡
  avgPhysicalMentalScore Float    @map("avg_physical_mental_score")
  // å¿ƒèº«ã®ã‚¹ãƒˆãƒ¬ã‚¹åå¿œå¹³å‡
  avgSupportFactorScore Float     @map("avg_support_factor_score")
  // å‘¨å›²ã®ã‚µãƒãƒ¼ãƒˆå¹³å‡

  // é«˜ã‚¹ãƒˆãƒ¬ã‚¹è€…å‰²åˆ
  highStressCount       Int       @map("high_stress_count")
  highStressRate        Float     @map("high_stress_rate")
  // é«˜ã‚¹ãƒˆãƒ¬ã‚¹è€…ç‡ï¼ˆ%ï¼‰

  // ä»•äº‹ã®è² æ‹…è©•ä¾¡
  quantitativeWorkload  Float?    @map("quantitative_workload")
  // é‡çš„è² æ‹…ã‚¹ã‚³ã‚¢
  qualitativeWorkload   Float?    @map("qualitative_workload")
  // è³ªçš„è² æ‹…ã‚¹ã‚³ã‚¢
  physicalWorkload      Float?    @map("physical_workload")
  // èº«ä½“çš„è² æ‹…ã‚¹ã‚³ã‚¢

  // è·å ´ç’°å¢ƒè©•ä¾¡
  workControl           Float?    @map("work_control")
  // ä»•äº‹ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚¹ã‚³ã‚¢
  skillUtilization      Float?    @map("skill_utilization")
  // æŠ€èƒ½ã®æ´»ç”¨åº¦
  interpersonalRelations Float?   @map("interpersonal_relations")
  // å¯¾äººé–¢ä¿‚ã‚¹ã‚³ã‚¢
  workplaceSupport      Float?    @map("workplace_support")
  // è·å ´ã®æ”¯æ´ã‚¹ã‚³ã‚¢

  // å…¨å›½å¹³å‡ãƒ»æ³•äººå¹³å‡ã¨ã®æ¯”è¼ƒ
  comparisonToNational  Json?     @map("comparison_to_national")
  // { "stressFactor": "+15%", "physicalMental": "+8%", ... }
  comparisonToCorporate Json?     @map("comparison_to_corporate")
  // æ³•äººå…¨ä½“å¹³å‡ã¨ã®æ¯”è¼ƒ

  // ãƒªã‚¹ã‚¯è©•ä¾¡
  overallRiskLevel      String    @map("overall_risk_level")
  // low, moderate, high, critical
  riskFactors           Json?     @map("risk_factors")
  // [{ "factor": "é•·æ™‚é–“åŠ´åƒ", "severity": "high" }, ...]

  // æ¨å¥¨ã•ã‚Œã‚‹è·å ´ç’°å¢ƒæ”¹å–„ç­–
  recommendedImprovements Json?   @map("recommended_improvements")
  // [
  //   { "priority": "high", "area": "æ¥­å‹™é‡ã®é©æ­£åŒ–", "action": "æ¥­å‹™åˆ†æ‹…ã®è¦‹ç›´ã—" },
  //   { "priority": "medium", "area": "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³", "action": "å®šæœŸãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°å®Ÿæ–½" }
  // ]

  // è¡›ç”Ÿå§”å“¡ä¼šå ±å‘Š
  reportedToCommittee   Boolean   @default(false) @map("reported_to_committee")
  reportDate            DateTime? @map("report_date")

  // æ”¹å–„æªç½®ã®å®Ÿæ–½çŠ¶æ³
  improvementMeasures   Json?     @map("improvement_measures")
  // [
  //   { "measure": "æ®‹æ¥­å‰Šæ¸›æ–½ç­–", "startDate": "2025-11-01", "status": "in_progress" },
  //   ...
  // ]

  // æ¬¡å›åˆ†æäºˆå®š
  nextAnalysisDate      DateTime? @map("next_analysis_date")

  notes                 String?   @map("notes")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([fiscalYear])
  @@index([analysisLevel])
  @@index([targetFacilityId])
  @@index([targetDepartmentId])
  @@index([overallRiskLevel])
  @@map("group_stress_analyses")
}
```

---

### Employeeãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®æ‹¡å¼µãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

æ—¢å­˜ã®Employeeãƒ†ãƒ¼ãƒ–ãƒ«ã«ä»¥ä¸‹ã‚’è¿½åŠ ï¼š

```prisma
model Employee {
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ ...

  // ğŸ†• ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯ãƒ»å¥åº·ç®¡ç†æƒ…å ±
  latestStressCheckDate DateTime? @map("latest_stress_check_date")
  // æœ€æ–°ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯å®Ÿæ–½æ—¥
  latestStressLevel     String?   @map("latest_stress_level")
  // æœ€æ–°ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«ï¼ˆlow/moderate/high/very_highï¼‰
  isCurrentHighStress   Boolean   @default(false) @map("is_current_high_stress")
  // ç¾åœ¨é«˜ã‚¹ãƒˆãƒ¬ã‚¹çŠ¶æ…‹ã‹

  latestHealthCheckupDate DateTime? @map("latest_health_checkup_date")
  // æœ€æ–°å¥è¨ºæ—¥
  latestCheckupResult   String?   @map("latest_checkup_result")
  // æœ€æ–°å¥è¨ºçµæœï¼ˆA/B/C/D/Eï¼‰

  healthRiskLevel       String?   @map("health_risk_level")
  // ç·åˆå¥åº·ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«ï¼ˆlow/moderate/high/criticalï¼‰
  requiresIntervention  Boolean   @default(false) @map("requires_intervention")
  // ä»‹å…¥å¿…è¦ãƒ•ãƒ©ã‚°

  // Relations
  stressCheckRecords    StressCheckRecord[]
  interviewGuidances    InterviewGuidance[]
  healthRiskAssessments HealthRiskAssessment[]
  healthGuidances       HealthGuidance[]

  // ... æ—¢å­˜Relations ...
}
```

---

### è¨­è¨ˆã®ãƒã‚¤ãƒ³ãƒˆ

#### 1. **å€‹äººãƒ¬ãƒ™ãƒ«ã®å®Œå…¨è¿½è·¡**
- âœ… 57é …ç›®ã®è©³ç´°ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯çµæœã‚’è¨˜éŒ²
- âœ… çµŒå¹´å¤‰åŒ–ã‚’è‡ªå‹•è¨ˆç®—ï¼ˆå‰å›æ¯”è¼ƒï¼‰
- âœ… é«˜ã‚¹ãƒˆãƒ¬ã‚¹åˆ¤å®š â†’ é¢æ¥æŒ‡å° â†’ ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—ã®å®Œå…¨ãƒ•ãƒ­ãƒ¼

#### 2. **å¥è¨ºÃ—ã‚¹ãƒˆãƒ¬ã‚¹Ã—ãƒ¡ãƒ³ã‚¿ãƒ«ã®çµ±åˆè©•ä¾¡**
```typescript
// ç·åˆãƒªã‚¹ã‚¯è‡ªå‹•è©•ä¾¡ã®ä¾‹
const riskScore = calculateOverallRisk({
  checkupResult: 'D',           // å¥è¨º: è¦ç²¾å¯†æ¤œæŸ»
  stressLevel: 'very_high',     // ã‚¹ãƒˆãƒ¬ã‚¹: æœ€é«˜ãƒ¬ãƒ™ãƒ«
  consultationCount: 3,         // ãƒ¡ãƒ³ã‚¿ãƒ«ç›¸è«‡: 3å›/å¹´
  overtimeHours: 80             // æ®‹æ¥­: 80æ™‚é–“/æœˆ
});
// â†’ overallRiskLevel: 'critical' ï¼ˆæœ€é«˜ãƒªã‚¹ã‚¯ï¼‰
```

#### 3. **æ³•ä»¤éµå®ˆã®å®Œå…¨å¯¾å¿œ**
- âœ… é«˜ã‚¹ãƒˆãƒ¬ã‚¹è€…ã¸ã®åŒ»å¸«é¢æ¥æŒ‡å°ï¼ˆç¾©å‹™ï¼‰
- âœ… å°±æ¥­ä¸Šã®æªç½®ã®è¨˜éŒ²ï¼ˆç¾©å‹™ï¼‰
- âœ… é›†å›£åˆ†æã®å®Ÿæ–½ã¨æ´»ç”¨ï¼ˆç¾©å‹™ï¼‰
- âœ… 5å¹´é–“ã®è¨˜éŒ²ä¿å­˜ï¼ˆä¿å­˜æœŸé–“ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ å¯èƒ½ï¼‰
- âœ… å€‹äººæƒ…å ±ä¿è­·ï¼ˆconsentToShare ãƒ•ãƒ©ã‚°ï¼‰

#### 4. **VoiceDriveé€£æºã«ã‚ˆã‚‹å°±æ¥­æªç½®ã®è‡ªå‹•åæ˜ **
```typescript
// åŒ»å¸«é¢æ¥æŒ‡å°ã§ã€Œå¤œå‹¤åˆ¶é™ã€ãŒæ±ºå®š
const interview = await prisma.interviewGuidance.create({
  data: {
    nightShiftRestriction: true,
    measureStartDate: '2025-11-01',
    measureEndDate: '2026-01-31',
    sentToVoiceDrive: true
  }
});

// â†’ VoiceDriveã‚·ãƒ•ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã«è‡ªå‹•é€ä¿¡
// â†’ è©²å½“è·å“¡ã®å¤œå‹¤ã‚·ãƒ•ãƒˆãŒè‡ªå‹•åˆ¶é™ã•ã‚Œã‚‹
```

---

### å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ä¾‹

#### ãƒ‘ã‚¿ãƒ¼ãƒ³1: ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯å®Ÿæ–½ã¨é«˜ã‚¹ãƒˆãƒ¬ã‚¹åˆ¤å®š + VoiceDriveé…ä¿¡
```typescript
// ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯çµæœç™»éŒ²
const stressCheck = await prisma.stressCheckRecord.create({
  data: {
    employeeId: "emp-001",
    fiscalYear: 2025,
    implementationDate: new Date("2025-10-15"),
    questionnaireResults: [...], // 57é …ç›®
    stressFactorScore: 85,
    physicalMentalScore: 95,     // â† åŸºæº–å€¤77ä»¥ä¸Šã§é«˜ã‚¹ãƒˆãƒ¬ã‚¹
    supportFactorScore: 20,
    isHighStress: true,          // è‡ªå‹•åˆ¤å®š
    highStressReason: "physical_mental_high",
    feedbackProvided: true,
    feedbackComment: "ã‚¹ãƒˆãƒ¬ã‚¹åå¿œãŒé«˜ã„çŠ¶æ…‹ã§ã™ã€‚å¿…è¦ã«å¿œã˜ã¦åŒ»å¸«é¢æ¥æŒ‡å°ã‚’å—ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚"
  }
});

// ğŸ†• VoiceDriveã¸ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯çµæœã‚’é…ä¿¡
const notification = await prisma.staffNotification.create({
  data: {
    notificationNumber: "STRESS-2025-001",
    title: "ã€é‡è¦ã€‘2025å¹´åº¦ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯çµæœã®ãŠçŸ¥ã‚‰ã›",
    content: `
      2025å¹´åº¦ã®ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯ã‚’å—æ¤œã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚
      ã‚ãªãŸã®çµæœã‚’ãŠçŸ¥ã‚‰ã›ã—ã¾ã™ã€‚

      ã€çµæœæ¦‚è¦ã€‘
      - ã‚¹ãƒˆãƒ¬ã‚¹è¦å› : 85ç‚¹
      - å¿ƒèº«ã®åå¿œ: 95ç‚¹ï¼ˆé«˜ã‚¹ãƒˆãƒ¬ã‚¹åˆ¤å®šï¼‰
      - å‘¨å›²ã®ã‚µãƒãƒ¼ãƒˆ: 20ç‚¹

      ã€ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã€‘
      ${stressCheck.feedbackComment}

      è©³ç´°çµæœã¯ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰ã”ç¢ºèªãã ã•ã„ã€‚
      åŒ»å¸«é¢æ¥æŒ‡å°ã‚’ã”å¸Œæœ›ã®æ–¹ã¯ã€äººäº‹éƒ¨ã¾ã§ã”é€£çµ¡ãã ã•ã„ã€‚
    `,
    category: "survey",
    priority: "high",
    targetType: "individuals",
    targetEmployeeIds: ["emp-001"],
    status: "approved",
    hasResponseForm: true,
    responseFormData: {
      questions: [
        {
          id: "interview_request",
          type: "choice",
          question: "åŒ»å¸«é¢æ¥æŒ‡å°ã‚’å¸Œæœ›ã—ã¾ã™ã‹ï¼Ÿ",
          options: ["å¸Œæœ›ã™ã‚‹", "å¸Œæœ›ã—ãªã„"]
        }
      ]
    },
    createdBy: "system",
    approvedBy: "system",
    approvedAt: new Date()
  }
});

// StressCheckRecordã«VoiceDriveé…ä¿¡æƒ…å ±ã‚’è¨˜éŒ²
await prisma.stressCheckRecord.update({
  where: { id: stressCheck.id },
  data: {
    voicedriveNotificationSent: true,
    voicedriveNotificationId: notification.id,
    voicedriveNotificationDate: new Date(),
    voicedriveNotificationStatus: "sent",
    personalResultUrl: `https://voicedrive.app/stress-check/${stressCheck.id}`
  }
});

// StaffNotificationDeliveryã§å€‹åˆ¥é…ä¿¡ã‚’è¿½è·¡
await prisma.staffNotificationDelivery.create({
  data: {
    notificationId: notification.id,
    employeeId: "emp-001",
    deliveryChannel: "voicedrive",
    deliveryStatus: "sent",
    sentAt: new Date()
  }
});
```

#### ãƒ‘ã‚¿ãƒ¼ãƒ³2: ç·åˆå¥åº·ãƒªã‚¹ã‚¯è©•ä¾¡
```typescript
// å¥è¨º + ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯ + ãƒ¡ãƒ³ã‚¿ãƒ«ç›¸è«‡ã‚’çµ±åˆè©•ä¾¡
const riskAssessment = await prisma.healthRiskAssessment.create({
  data: {
    employeeId: "emp-001",
    healthCheckupId: "checkup-123",
    checkupResult: "D",           // è¦ç²¾å¯†æ¤œæŸ»
    stressCheckRecordId: "stress-456",
    isHighStress: true,
    recentMentalHealthConsultation: true,
    consultationCount: 3,
    overallRiskLevel: "critical", // è‡ªå‹•åˆ¤å®š: æœ€é«˜ãƒªã‚¹ã‚¯
    riskFactors: [
      { factor: "é«˜è¡€åœ§ + é«˜ã‚¹ãƒˆãƒ¬ã‚¹", riskLevel: "high", weight: 0.8 },
      { factor: "ãƒ¡ãƒ³ã‚¿ãƒ«ä¸èª¿ã®å…†å€™", riskLevel: "high", weight: 0.7 }
    ],
    recommendedActions: [
      { priority: "high", action: "ç”£æ¥­åŒ»é¢è«‡ã®å®Ÿæ–½", deadline: "2é€±é–“ä»¥å†…" },
      { priority: "high", action: "å‹¤å‹™æ™‚é–“ã®åˆ¶é™", deadline: "å³æ™‚" }
    ],
    interventionRequired: true
  }
});
```

#### ãƒ‘ã‚¿ãƒ¼ãƒ³3: é›†å›£åˆ†æã¨è·å ´ç’°å¢ƒæ”¹å–„
```typescript
// éƒ¨ç½²åˆ¥ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯é›†å›£åˆ†æ
const groupAnalysis = await prisma.groupStressAnalysis.create({
  data: {
    fiscalYear: 2025,
    analysisLevel: "department",
    targetDepartmentId: "dept-nursing",
    targetGroupName: "çœ‹è­·éƒ¨",
    totalEmployees: 50,
    respondents: 48,
    responseRate: 96.0,
    avgStressFactorScore: 78.5,  // å…¨å›½å¹³å‡ã‚ˆã‚Š+15%é«˜ã„
    avgPhysicalMentalScore: 72.3,
    highStressRate: 28.0,        // é«˜ã‚¹ãƒˆãƒ¬ã‚¹è€…ç‡28% (å…¨å›½å¹³å‡10%)
    overallRiskLevel: "high",
    recommendedImprovements: [
      { priority: "high", area: "æ¥­å‹™é‡ã®é©æ­£åŒ–", action: "å¤œå‹¤äººå“¡ã®å¢—å“¡" },
      { priority: "high", area: "è·å ´ã®æ”¯æ´", action: "ãƒ¡ãƒ³ã‚¿ãƒ¼åˆ¶åº¦ã®å°å…¥" }
    ]
  }
});

// è¡›ç”Ÿå§”å“¡ä¼šã«å ±å‘Š
await reportToSafetyCommittee(groupAnalysis.id);
```

---

### ã¾ã¨ã‚

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€ä»¥ä¸‹ãŒå®Ÿç¾ã§ãã¾ã™ï¼š

âœ… **å€‹äººãƒ¬ãƒ™ãƒ«ã®å®Œå…¨è¿½è·¡**
- 57é …ç›®ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯è©³ç´°è¨˜éŒ²
- çµŒå¹´å¤‰åŒ–ã®è‡ªå‹•æ¯”è¼ƒ
- é«˜ã‚¹ãƒˆãƒ¬ã‚¹ â†’ é¢æ¥æŒ‡å° â†’ ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—ã®å®Œå…¨ç®¡ç†

âœ… **å¥è¨ºÃ—ã‚¹ãƒˆãƒ¬ã‚¹Ã—ãƒ¡ãƒ³ã‚¿ãƒ«ã®çµ±åˆè©•ä¾¡**
- ç·åˆå¥åº·ãƒªã‚¹ã‚¯ã®è‡ªå‹•è©•ä¾¡
- è¤‡åˆçš„ãªãƒªã‚¹ã‚¯å› å­ã®å¯è¦–åŒ–
- ãƒ‡ãƒ¼ã‚¿ãƒ‰ãƒªãƒ–ãƒ³ãªä»‹å…¥åˆ¤æ–­

âœ… **æ³•ä»¤å®Œå…¨éµå®ˆ**
- åŠ´åƒå®‰å…¨è¡›ç”Ÿæ³•ã®å…¨è¦ä»¶å¯¾å¿œ
- 5å¹´é–“ã®è¨˜éŒ²ä¿å­˜
- å€‹äººæƒ…å ±ä¿è­·ï¼ˆåŒæ„ç®¡ç†ï¼‰

âœ… **VoiceDriveé€£æºã«ã‚ˆã‚‹å°±æ¥­æªç½®ã®è‡ªå‹•åŒ–**
- å¤œå‹¤åˆ¶é™ãƒ»æ®‹æ¥­åˆ¶é™ã®è‡ªå‹•åæ˜ 
- ã‚·ãƒ•ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£å‹•

**å€‹äººã®å¥åº·çŠ¶æ…‹ã‚’å¤šè§’çš„ã«æŠŠæ¡ã—ã€äºˆé˜²çš„ä»‹å…¥ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ï¼**

---

## 21. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰çµ±åˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆè©•ä¾¡é€²æ—ãƒ»ã‚·ã‚¹ãƒ†ãƒ é€£æºãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†ï¼‰

### èƒŒæ™¯ã¨è¦ä»¶
- ç¾åœ¨ã®å®Ÿè£…: **åŒ…æ‹¬çš„ãªãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å®Ÿè£…æ¸ˆã¿** - è©•ä¾¡é€²æ—ã€ã‚·ã‚¹ãƒ†ãƒ é€£æºã€ç·Šæ€¥ã‚¿ã‚¹ã‚¯è¡¨ç¤º
- è¡¨ç¤ºãƒ‡ãƒ¼ã‚¿:
  - è©•ä¾¡é€²æ—ï¼ˆ125åä¸­78åå®Œäº†ã€62%å®Œäº†ç‡ï¼‰
  - ç·åˆåŒæœŸç‡98.5%ã€ç ”ä¿®å®Œäº†ç‡89.2%
  - AIå‹•çš„è¨­å•æ•°248å•
  - ç·Šæ€¥ã‚¿ã‚¹ã‚¯ï¼ˆå¤–ç§‘ç—…æ£Ÿ5åç· åˆ‡ã€çœ‹è­·éƒ¨è©•ä¾¡é …ç›®æœªè¨­å®šï¼‰
- **ä¸è¶³ã—ã¦ã„ã‚‹é …ç›®**:
  - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®å±¥æ­´ä¿ç®¡ï¼ˆæ—¥æ¬¡ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆï¼‰
  - ã‚·ã‚¹ãƒ†ãƒ é€£æºç‡ã®è©³ç´°è¨˜éŒ²ï¼ˆå„ã‚·ã‚¹ãƒ†ãƒ ã”ã¨ã®åŒæœŸçŠ¶æ…‹ï¼‰
  - ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†ã®å®Œå…¨ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£
  - è©•ä¾¡åˆ¶åº¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã®è©³ç´°å±¥æ­´
  - AIå‹•çš„è¨­å•ã®ç”Ÿæˆå±¥æ­´ãƒ»åŠ¹æœæ¸¬å®š

### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

#### 21-1. DashboardSnapshotï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ—¥æ¬¡ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆï¼‰

**ç›®çš„**: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«è¡¨ç¤ºã•ã‚Œã‚‹ä¸»è¦æŒ‡æ¨™ã‚’æ—¥æ¬¡ã§è¨˜éŒ²ã€‚çµŒå¹´å¤‰åŒ–ãƒ»å‚¾å‘åˆ†æãŒå¯èƒ½ã«ã€‚

```prisma
model DashboardSnapshot {
  id                    String    @id @default(cuid())

  // ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆæƒ…å ±
  snapshotDate          DateTime  @map("snapshot_date")
  // æ—¥æ¬¡ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆæ—¥æ™‚
  fiscalYear            Int       @map("fiscal_year")
  month                 Int
  // 1-12

  // è©•ä¾¡é€²æ—ã‚µãƒãƒªãƒ¼
  totalStaff            Int       @map("total_staff")
  // è©•ä¾¡å¯¾è±¡è€…ç·æ•°
  completedEvaluations  Int       @map("completed_evaluations")
  // è©•ä¾¡å®Œäº†æ•°
  inProgressEvaluations Int       @map("in_progress_evaluations")
  // è©•ä¾¡ä¸­
  notStartedEvaluations Int       @map("not_started_evaluations")
  // æœªç€æ‰‹
  completionRate        Float     @map("completion_rate")
  // å®Œäº†ç‡ï¼ˆ%ï¼‰

  // ã‚·ã‚¹ãƒ†ãƒ é€£æºçŠ¶æ…‹
  overallSyncRate       Float     @map("overall_sync_rate")
  // ç·åˆåŒæœŸç‡ï¼ˆ%ï¼‰
  trainingSyncRate      Float?    @map("training_sync_rate")
  // ç ”ä¿®ã‚·ã‚¹ãƒ†ãƒ åŒæœŸç‡
  attendanceSyncRate    Float?    @map("attendance_sync_rate")
  // å‹¤æ€ ã‚·ã‚¹ãƒ†ãƒ åŒæœŸç‡
  healthSyncRate        Float?    @map("health_sync_rate")
  // å¥åº·ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ åŒæœŸç‡
  voicedriveSyncRate    Float?    @map("voicedrive_sync_rate")
  // VoiceDriveåŒæœŸç‡

  // ç ”ä¿®ãƒ»æ•™è‚²çµ±è¨ˆ
  trainingCompletionRate Float?   @map("training_completion_rate")
  // ç ”ä¿®å®Œäº†ç‡ï¼ˆ%ï¼‰
  activeTrainingPrograms Int?     @map("active_training_programs")
  // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªç ”ä¿®ãƒ—ãƒ­ã‚°ãƒ©ãƒ æ•°

  // AIå‹•çš„è¨­å•çµ±è¨ˆ
  totalDynamicQuestions  Int?     @map("total_dynamic_questions")
  // AIå‹•çš„è¨­å•æ•°
  questionsAddedToday    Int?     @default(0) @map("questions_added_today")
  // å½“æ—¥è¿½åŠ è¨­å•æ•°
  questionsRetiredToday  Int?     @default(0) @map("questions_retired_today")
  // å½“æ—¥å‰Šé™¤è¨­å•æ•°

  // ã‚¢ãƒ©ãƒ¼ãƒˆçµ±è¨ˆ
  activeAlerts          Int       @default(0) @map("active_alerts")
  // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¢ãƒ©ãƒ¼ãƒˆæ•°
  criticalAlerts        Int       @default(0) @map("critical_alerts")
  // ç·Šæ€¥ã‚¢ãƒ©ãƒ¼ãƒˆæ•°
  warningAlerts         Int       @default(0) @map("warning_alerts")
  // è­¦å‘Šã‚¢ãƒ©ãƒ¼ãƒˆæ•°

  // æ–½è¨­åˆ¥å†…è¨³
  byFacility            Json?     @map("by_facility")
  // [
  //   {
  //     "facilityId": "obara-hospital",
  //     "facilityName": "å°åŸç—…é™¢",
  //     "totalStaff": 75,
  //     "completedEvaluations": 48,
  //     "completionRate": 64.0
  //   },
  //   {
  //     "facilityId": "tategami-rehabilitation",
  //     "facilityName": "ç«‹ç¥ãƒªãƒãƒ“ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ¸©æ³‰ç—…é™¢",
  //     "totalStaff": 50,
  //     "completedEvaluations": 30,
  //     "completionRate": 60.0
  //   }
  // ]

  // éƒ¨ç½²åˆ¥å†…è¨³
  byDepartment          Json?     @map("by_department")
  // [
  //   { "department": "å¤–ç§‘ç—…æ£Ÿ", "totalStaff": 20, "completedEvaluations": 15, "urgentTasks": 5 },
  //   { "department": "çœ‹è­·éƒ¨", "totalStaff": 45, "completedEvaluations": 28, "urgentTasks": 0 }
  // ]

  // ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆå–å¾—æƒ…å ±
  capturedAt            DateTime  @default(now()) @map("captured_at")
  capturedBy            String?   @map("captured_by")
  // system, batch-jobç­‰

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@unique([snapshotDate])
  @@index([fiscalYear])
  @@index([month])
  @@index([snapshotDate])
  @@map("dashboard_snapshots")
}
```

#### 21-2. SystemIntegrationStatusï¼ˆã‚·ã‚¹ãƒ†ãƒ é€£æºçŠ¶æ…‹è©³ç´°è¨˜éŒ²ï¼‰

**ç›®çš„**: å„å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£æºçŠ¶æ…‹ã‚’è©³ç´°è¨˜éŒ²ã€‚åŒæœŸã‚¨ãƒ©ãƒ¼ãƒ»å†è©¦è¡Œå±¥æ­´ã‚’ç®¡ç†ã€‚

```prisma
model SystemIntegrationStatus {
  id                    String    @id @default(cuid())

  // ã‚·ã‚¹ãƒ†ãƒ è­˜åˆ¥
  systemName            String    @map("system_name")
  // VoiceDrive, TrainingSystem, HealthManagement, AttendanceSystemç­‰
  systemType            String    @map("system_type")
  // external, internal, mcp-server

  // é€£æºçŠ¶æ…‹
  syncStatus            String    @map("sync_status")
  // activeï¼ˆæ­£å¸¸åŒæœŸä¸­ï¼‰, degradedï¼ˆä¸€éƒ¨ã‚¨ãƒ©ãƒ¼ï¼‰, failedï¼ˆåŒæœŸå¤±æ•—ï¼‰, maintenanceï¼ˆãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ï¼‰
  lastSyncAt            DateTime? @map("last_sync_at")
  // æœ€çµ‚åŒæœŸæ—¥æ™‚
  nextScheduledSync     DateTime? @map("next_scheduled_sync")
  // æ¬¡å›åŒæœŸäºˆå®šæ—¥æ™‚

  // åŒæœŸç‡
  syncSuccessRate       Float?    @map("sync_success_rate")
  // åŒæœŸæˆåŠŸç‡ï¼ˆ%ï¼‰
  totalRecordsSynced    Int?      @default(0) @map("total_records_synced")
  // ç·åŒæœŸãƒ¬ã‚³ãƒ¼ãƒ‰æ•°
  failedRecords         Int?      @default(0) @map("failed_records")
  // å¤±æ•—ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°

  // ã‚¨ãƒ©ãƒ¼æƒ…å ±
  lastErrorMessage      String?   @db.Text @map("last_error_message")
  lastErrorAt           DateTime? @map("last_error_at")
  errorCount            Int       @default(0) @map("error_count")
  // é€£ç¶šã‚¨ãƒ©ãƒ¼å›æ•°
  retryCount            Int       @default(0) @map("retry_count")
  // ãƒªãƒˆãƒ©ã‚¤å›æ•°

  // æ¥ç¶šæƒ…å ±
  apiEndpoint           String?   @map("api_endpoint")
  // API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  apiVersion            String?   @map("api_version")
  // APIãƒãƒ¼ã‚¸ãƒ§ãƒ³
  authenticationMethod  String?   @map("authentication_method")
  // JWT, OAuth2, API-Keyç­‰

  // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
  averageResponseTime   Int?      @map("average_response_time")
  // å¹³å‡å¿œç­”æ™‚é–“ï¼ˆãƒŸãƒªç§’ï¼‰
  timeoutCount          Int?      @default(0) @map("timeout_count")
  // ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆç™ºç”Ÿå›æ•°

  // ãƒ‡ãƒ¼ã‚¿é‡çµ±è¨ˆ
  dataVolumeToday       Int?      @map("data_volume_today")
  // æœ¬æ—¥ã®åŒæœŸãƒ‡ãƒ¼ã‚¿é‡ï¼ˆãƒ¬ã‚³ãƒ¼ãƒ‰æ•°ï¼‰
  dataVolumeThisMonth   Int?      @map("data_volume_this_month")
  // ä»Šæœˆã®åŒæœŸãƒ‡ãƒ¼ã‚¿é‡

  // ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š
  alertEnabled          Boolean   @default(true) @map("alert_enabled")
  alertThreshold        Float?    @default(90.0) @map("alert_threshold")
  // åŒæœŸç‡ãŒã“ã®å€¤ã‚’ä¸‹å›ã‚‹ã¨ã‚¢ãƒ©ãƒ¼ãƒˆï¼ˆ%ï¼‰

  // ç®¡ç†è€…æƒ…å ±
  responsibleUserId     String?   @map("responsible_user_id")
  // æ‹…å½“è€…ID
  responsibleUserName   String?   @map("responsible_user_name")
  notificationEmail     String?   @map("notification_email")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@unique([systemName])
  @@index([syncStatus])
  @@index([lastSyncAt])
  @@map("system_integration_statuses")
}
```

#### 21-3. DashboardAlertï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†ï¼‰

**ç›®çš„**: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«è¡¨ç¤ºã•ã‚Œã‚‹ç·Šæ€¥ã‚¿ã‚¹ã‚¯ãƒ»è­¦å‘Šã‚’å®Œå…¨ç®¡ç†ã€‚å¯¾å¿œå±¥æ­´ãƒ»è§£æ±ºçŠ¶æ³ã‚’è¿½è·¡ã€‚

```prisma
model DashboardAlert {
  id                    String    @id @default(cuid())

  // ã‚¢ãƒ©ãƒ¼ãƒˆåŸºæœ¬æƒ…å ±
  alertType             String    @map("alert_type")
  // urgentï¼ˆç·Šæ€¥ï¼‰, importantï¼ˆé‡è¦ï¼‰, warningï¼ˆè­¦å‘Šï¼‰, infoï¼ˆæƒ…å ±ï¼‰
  severity              String    @map("severity")
  // critical, high, medium, low
  category              String    @map("category")
  // evaluation_deadlineï¼ˆè©•ä¾¡ç· åˆ‡ï¼‰, missing_configï¼ˆè¨­å®šä¸å‚™ï¼‰, sync_errorï¼ˆåŒæœŸã‚¨ãƒ©ãƒ¼ï¼‰, training_overdueï¼ˆç ”ä¿®é…å»¶ï¼‰ç­‰

  // ã‚¢ãƒ©ãƒ¼ãƒˆå†…å®¹
  title                 String
  // ã€Œæœ¬æ—¥ç· åˆ‡ã®è©•ä¾¡ã€
  description           String?   @db.Text
  // ã€Œå¤–ç§‘ç—…æ£Ÿ 5ååˆ†ã®è©•ä¾¡ãŒæœªå®Œäº†ã€
  detailUrl             String?   @map("detail_url")
  // /evaluation-execution/urgent

  // é–¢é€£æƒ…å ±
  relatedEntityType     String?   @map("related_entity_type")
  // department, employee, system, evaluationç­‰
  relatedEntityId       String?   @map("related_entity_id")
  relatedEntityName     String?   @map("related_entity_name")
  // ã€Œå¤–ç§‘ç—…æ£Ÿã€ã€Œçœ‹è­·éƒ¨ã€ç­‰

  // æ•°å€¤æƒ…å ±
  affectedCount         Int?      @map("affected_count")
  // å½±éŸ¿ã‚’å—ã‘ã‚‹äººæ•°ãƒ»ä»¶æ•°ï¼ˆ5åã€ç­‰ï¼‰
  thresholdValue        Float?    @map("threshold_value")
  // é–¾å€¤
  currentValue          Float?    @map("current_value")
  // ç¾åœ¨å€¤

  // æœŸé™æƒ…å ±
  deadline              DateTime? @map("deadline")
  // ã‚¢ãƒ©ãƒ¼ãƒˆã«é–¢é€£ã™ã‚‹æœŸé™
  daysUntilDeadline     Int?      @map("days_until_deadline")
  isOverdue             Boolean   @default(false) @map("is_overdue")

  // ã‚¢ãƒ©ãƒ¼ãƒˆçŠ¶æ…‹
  status                String    @default("active") @map("status")
  // activeï¼ˆè¡¨ç¤ºä¸­ï¼‰, acknowledgedï¼ˆç¢ºèªæ¸ˆã¿ï¼‰, resolvedï¼ˆè§£æ±ºæ¸ˆã¿ï¼‰, dismissedï¼ˆå´ä¸‹ï¼‰
  acknowledgedAt        DateTime? @map("acknowledged_at")
  acknowledgedBy        String?   @map("acknowledged_by")
  resolvedAt            DateTime? @map("resolved_at")
  resolvedBy            String?   @map("resolved_by")
  resolutionNote        String?   @db.Text @map("resolution_note")

  // å„ªå…ˆåº¦ãƒ»è¡¨ç¤ºåˆ¶å¾¡
  priority              Int       @default(5) @map("priority")
  // 1-10ï¼ˆå°ã•ã„ã»ã©å„ªå…ˆåº¦é«˜ï¼‰
  displayOnDashboard    Boolean   @default(true) @map("display_on_dashboard")
  dismissible           Boolean   @default(true) @map("dismissible")
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå´ä¸‹å¯èƒ½ã‹

  // é€šçŸ¥ç®¡ç†
  notificationSent      Boolean   @default(false) @map("notification_sent")
  notificationSentAt    DateTime? @map("notification_sent_at")
  notificationRecipients Json?    @map("notification_recipients")
  // ["user-123", "user-456"]

  // è‡ªå‹•ç”Ÿæˆæƒ…å ±
  autoGenerated         Boolean   @default(false) @map("auto_generated")
  // ã‚·ã‚¹ãƒ†ãƒ ãŒè‡ªå‹•ç”Ÿæˆã—ãŸã‚¢ãƒ©ãƒ¼ãƒˆã‹
  generationRule        String?   @map("generation_rule")
  // ã€Œè©•ä¾¡ç· åˆ‡æ—¥ã®3æ—¥å‰ã€ç­‰ã®ãƒ«ãƒ¼ãƒ«

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([alertType])
  @@index([severity])
  @@index([category])
  @@index([status])
  @@index([deadline])
  @@index([createdAt])
  @@map("dashboard_alerts")
}
```

#### 21-4. EvaluationSystemVersionï¼ˆè©•ä¾¡åˆ¶åº¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ï¼‰

**ç›®çš„**: è©•ä¾¡åˆ¶åº¦ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆ1.0.0ç¾è¡Œã€2.0.0æº–å‚™ä¸­ç­‰ï¼‰ã‚’å®Œå…¨ç®¡ç†ã€‚ç§»è¡Œå±¥æ­´ãƒ»ãƒ†ã‚¹ãƒˆé‹ç”¨è¨˜éŒ²ã€‚

```prisma
model EvaluationSystemVersion {
  id                    String    @id @default(cuid())

  // ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±
  systemCode            String    @unique @map("system_code")
  // SYS_2024_001, SYS_2025_001ç­‰
  version               String
  // 1.0.0, 2.0.0-betaç­‰
  versionName           String    @map("version_name")
  // 2024å¹´åº¦è©•ä¾¡åˆ¶åº¦ï¼ˆç¾è¡Œï¼‰

  // çŠ¶æ…‹
  status                String    @map("status")
  // activeï¼ˆé‹ç”¨ä¸­ï¼‰, preparingï¼ˆæº–å‚™ä¸­ï¼‰, testingï¼ˆãƒ†ã‚¹ãƒˆä¸­ï¼‰, archivedï¼ˆã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ï¼‰
  effectiveFrom         DateTime  @map("effective_from")
  effectiveTo           DateTime? @map("effective_to")
  // NULL = ç„¡æœŸé™

  // åˆ¶åº¦èª¬æ˜
  description           String?   @db.Text
  // ã€Œæ–½è¨­å†…Ã—æ³•äººå†…ã®2è»¸ãƒãƒˆãƒªãƒƒã‚¯ã‚¹è©•ä¾¡ã€
  features              Json?
  // [
  //   "æŠ€è¡“è©•ä¾¡50ç‚¹ãƒ»çµ„ç¹”è²¢çŒ®50ç‚¹",
  //   "5Ã—5ãƒãƒˆãƒªãƒƒã‚¯ã‚¹ã‹ã‚‰7æ®µéšè©•ä¾¡",
  //   "ç›¸å¯¾è©•ä¾¡ã«ã‚ˆã‚‹é †ä½ä»˜ã‘",
  //   "éƒ¨ç½²åˆ¥ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯¾å¿œ"
  // ]

  // è©•ä¾¡é …ç›®è¨­å®š
  technicalEvaluationPoints     Int?      @map("technical_evaluation_points")
  // æŠ€è¡“è©•ä¾¡é…ç‚¹
  contributionEvaluationPoints  Int?      @map("contribution_evaluation_points")
  // è²¢çŒ®åº¦è©•ä¾¡é…ç‚¹
  competencyEvaluationPoints    Int?      @map("competency_evaluation_points")
  // ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è©•ä¾¡é…ç‚¹ï¼ˆ2.0.0ä»¥é™ï¼‰
  totalPoints                   Int       @default(100) @map("total_points")
  // ç·é…ç‚¹

  // è©•ä¾¡æ–¹æ³•
  evaluationMethod      String?   @map("evaluation_method")
  // relativeï¼ˆç›¸å¯¾è©•ä¾¡ï¼‰, absoluteï¼ˆçµ¶å¯¾è©•ä¾¡ï¼‰, hybridï¼ˆæ··åˆï¼‰
  matrixSize            String?   @map("matrix_size")
  // 5x5, 7x7ç­‰
  finalGradeScale       String?   @map("final_grade_scale")
  // 7æ®µéšï¼ˆS+, S, A+, A, B, C, Dï¼‰ç­‰

  // ãƒ†ã‚¹ãƒˆé‹ç”¨æƒ…å ±
  isTestVersion         Boolean   @default(false) @map("is_test_version")
  testDepartments       Json?     @map("test_departments")
  // ãƒ†ã‚¹ãƒˆå¯¾è±¡éƒ¨ç½²
  // ["ãƒªãƒãƒ“ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç§‘", "å¤–ç§‘ç—…æ£Ÿ"]
  testStartDate         DateTime? @map("test_start_date")
  testEndDate           DateTime? @map("test_end_date")
  testParticipantCount  Int?      @map("test_participant_count")

  // ç§»è¡Œæƒ…å ±
  previousVersionId     String?   @map("previous_version_id")
  migrationNotes        String?   @db.Text @map("migration_notes")
  // ã€Œç§»è¡ŒæœŸé–“ä¸­ã¯ä¸¡åˆ¶åº¦ã§ä¸¦è¡Œè©•ä¾¡ã‚’å®Ÿæ–½ã€
  migrationStartDate    DateTime? @map("migration_start_date")
  migrationEndDate      DateTime? @map("migration_end_date")

  // æ‰¿èªæƒ…å ±
  approvedBy            String?   @map("approved_by")
  approvedAt            DateTime? @map("approved_at")
  approvalStatus        String?   @default("draft") @map("approval_status")
  // draftï¼ˆè‰æ¡ˆï¼‰, approvedï¼ˆæ‰¿èªæ¸ˆã¿ï¼‰, rejectedï¼ˆå´ä¸‹ï¼‰

  // åˆ©ç”¨çµ±è¨ˆ
  activeUserCount       Int?      @default(0) @map("active_user_count")
  // ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ç”¨ä¸­ã®è·å“¡æ•°
  totalEvaluationsCompleted Int?  @default(0) @map("total_evaluations_completed")
  // ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§å®Œäº†ã—ãŸè©•ä¾¡æ•°

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([status])
  @@index([effectiveFrom])
  @@index([effectiveTo])
  @@map("evaluation_system_versions")
}
```

#### 21-5. AIDynamicQuestionLogï¼ˆAIå‹•çš„è¨­å•ç”Ÿæˆãƒ­ã‚°ï¼‰

**ç›®çš„**: AIå‹•çš„è¨­å•ã®ç”Ÿæˆãƒ»å‰Šé™¤ãƒ»åŠ¹æœã‚’è¨˜éŒ²ã€‚è¨­å•ã®æœ‰åŠ¹æ€§ã‚’è©•ä¾¡ã—ã€ç¶™ç¶šçš„æ”¹å–„ã«æ´»ç”¨ã€‚

```prisma
model AIDynamicQuestionLog {
  id                    String    @id @default(cuid())

  // è¨­å•æƒ…å ±
  questionId            String    @map("question_id")
  // DynamicQuestionãƒ†ãƒ¼ãƒ–ãƒ«ã®IDï¼ˆSection 3ã§å®šç¾©æ¸ˆã¿ï¼‰
  questionText          String    @db.Text @map("question_text")
  // è¨­å•æ–‡
  questionCategory      String    @map("question_category")
  // technicalï¼ˆæŠ€è¡“ï¼‰, contributionï¼ˆè²¢çŒ®ï¼‰, competencyï¼ˆã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼ï¼‰

  // AIç”Ÿæˆæƒ…å ±
  generatedBy           String    @map("generated_by")
  // AI, manualï¼ˆæ‰‹å‹•ï¼‰
  aiModel               String?   @map("ai_model")
  // gpt-4, claude-3ç­‰
  generationPrompt      String?   @db.Text @map("generation_prompt")
  // AIç”Ÿæˆæ™‚ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
  generatedAt           DateTime  @default(now()) @map("generated_at")

  // å¯¾è±¡éƒ¨ç½²ãƒ»è·ç¨®
  targetDepartment      String?   @map("target_department")
  targetPosition        String?   @map("target_position")
  // çœ‹è­·å¸«ã€ç†å­¦ç™‚æ³•å£«ç­‰

  // è¨­å•ã®çŠ¶æ…‹
  status                String    @default("active") @map("status")
  // activeï¼ˆä½¿ç”¨ä¸­ï¼‰, retiredï¼ˆå‰Šé™¤ï¼‰, draftï¼ˆè‰æ¡ˆï¼‰
  activatedAt           DateTime? @map("activated_at")
  retiredAt             DateTime? @map("retired_at")
  retiredReason         String?   @db.Text @map("retired_reason")
  // ã€Œå›ç­”ç‡ãŒä½ã„ã€ã€Œè©•ä¾¡ã«å¯„ä¸ã—ãªã„ã€ç­‰

  // ä½¿ç”¨çµ±è¨ˆ
  timesUsed             Int       @default(0) @map("times_used")
  // ã“ã®è¨­å•ãŒä½¿ç”¨ã•ã‚ŒãŸå›æ•°
  averageScore          Float?    @map("average_score")
  // å¹³å‡ã‚¹ã‚³ã‚¢
  responseRate          Float?    @map("response_rate")
  // å›ç­”ç‡ï¼ˆ%ï¼‰

  // åŠ¹æœæ¸¬å®š
  correlationWithFinalGrade Float? @map("correlation_with_final_grade")
  // æœ€çµ‚è©•ä¾¡ã¨ã®ç›¸é–¢ä¿‚æ•°ï¼ˆ-1 ~ 1ï¼‰
  discriminationIndex   Float?    @map("discrimination_index")
  // è­˜åˆ¥æŒ‡æ•°ï¼ˆã“ã®è¨­å•ãŒè©•ä¾¡ã®å·®ã‚’è­˜åˆ¥ã§ãã‚‹ã‹ï¼‰
  reliability           Float?    @map("reliability")
  // ä¿¡é ¼æ€§ä¿‚æ•°ï¼ˆCronbach's Î±ç­‰ï¼‰

  // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
  positiveFeeback       Int       @default(0) @map("positive_feedback")
  // è‰¯ã„è©•ä¾¡ã‚’å—ã‘ãŸå›æ•°
  negativeFeedback      Int       @default(0) @map("negative_feedback")
  // æ‚ªã„è©•ä¾¡ã‚’å—ã‘ãŸå›æ•°
  feedbackComments      Json?     @map("feedback_comments")
  // [
  //   { "userId": "user-123", "comment": "ã“ã®è¨­å•ã¯é©åˆ‡", "timestamp": "2025-10-01T10:00:00Z" }
  // ]

  // æ”¹è¨‚å±¥æ­´
  originalQuestionId    String?   @map("original_question_id")
  // å…ƒã®è¨­å•IDï¼ˆæ”¹è¨‚ç‰ˆã®å ´åˆï¼‰
  revisionNumber        Int       @default(1) @map("revision_number")
  // æ”¹è¨‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·
  revisionReason        String?   @db.Text @map("revision_reason")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([questionId])
  @@index([status])
  @@index([generatedAt])
  @@index([targetDepartment])
  @@index([correlationWithFinalGrade])
  @@map("ai_dynamic_question_logs")
}
```

### å®Ÿè£…ã«ã‚ˆã‚‹åŠ¹æœ

âœ… **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®å®Œå…¨å±¥æ­´åŒ–**
- æ—¥æ¬¡ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã§çµŒå¹´å¤‰åŒ–ã‚’è¿½è·¡
- è©•ä¾¡é€²æ—ãƒ»åŒæœŸç‡ã®å‚¾å‘åˆ†æ
- æ–½è¨­åˆ¥ãƒ»éƒ¨ç½²åˆ¥ã®è©³ç´°å†…è¨³ä¿ç®¡

âœ… **ã‚·ã‚¹ãƒ†ãƒ é€£æºã®å¯è¦–åŒ–ã¨ç®¡ç†**
- å„å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã®åŒæœŸçŠ¶æ…‹ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–
- ã‚¨ãƒ©ãƒ¼ãƒ»ãƒªãƒˆãƒ©ã‚¤ã®å®Œå…¨ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£
- åŒæœŸç‡ä½ä¸‹æ™‚ã®è‡ªå‹•ã‚¢ãƒ©ãƒ¼ãƒˆ

âœ… **ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†ã®ä½“ç³»åŒ–**
- ç·Šæ€¥ã‚¿ã‚¹ã‚¯ã®å¯¾å¿œå±¥æ­´ã‚’å®Œå…¨è¨˜éŒ²
- å„ªå…ˆåº¦ãƒ»æœŸé™ã«åŸºã¥ãè‡ªå‹•ã‚¢ãƒ©ãƒ¼ãƒˆç”Ÿæˆ
- è§£æ±ºçŠ¶æ³ã®è¿½è·¡ã¨åŠ¹æœæ¸¬å®š

âœ… **è©•ä¾¡åˆ¶åº¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å®Œå…¨ç®¡ç†**
- è¤‡æ•°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ä¸¦è¡Œé‹ç”¨å¯¾å¿œ
- ãƒ†ã‚¹ãƒˆé‹ç”¨ã‹ã‚‰æœ¬ç•ªç§»è¡Œã¾ã§ã®å±¥æ­´
- ç§»è¡Œè¨ˆç”»ãƒ»æ‰¿èªãƒ—ãƒ­ã‚»ã‚¹ã®è¨˜éŒ²

âœ… **AIå‹•çš„è¨­å•ã®ç¶™ç¶šçš„æ”¹å–„**
- è¨­å•ã®æœ‰åŠ¹æ€§ã‚’çµ±è¨ˆçš„ã«è©•ä¾¡
- åŠ¹æœã®ä½ã„è¨­å•ã®è‡ªå‹•æ¤œå‡º
- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«åŸºã¥ãè¨­å•æ”¹è¨‚

**ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’å˜ãªã‚‹è¡¨ç¤ºãƒ„ãƒ¼ãƒ«ã‹ã‚‰ã€ãƒ‡ãƒ¼ã‚¿ãƒ‰ãƒªãƒ–ãƒ³ãªæ„æ€æ±ºå®šåŸºç›¤ã¸ã¨é€²åŒ–ã•ã›ã¾ã™ï¼**

---

## 22. ãƒ¬ãƒãƒ¼ãƒˆãƒ»åˆ†æã‚·ã‚¹ãƒ†ãƒ ï¼ˆ100ãƒšãƒ¼ã‚¸è¶…ã®åŒ…æ‹¬çš„åˆ†æåŸºç›¤ï¼‰

### èƒŒæ™¯ã¨è¦ä»¶
- ç¾åœ¨ã®å®Ÿè£…: **11ã‚«ãƒ†ã‚´ãƒªãƒ¼ã€100ãƒšãƒ¼ã‚¸ä»¥ä¸Šã®åŒ…æ‹¬çš„ãƒ¬ãƒãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…æ¸ˆã¿**
- ä¸»è¦ã‚«ãƒ†ã‚´ãƒªãƒ¼:
  1. **åŸºæœ¬æŒ‡æ¨™**: è·å“¡æ•°ã€æ§‹æˆæ¯”ã€æ¡ç”¨ãƒ»é›¢è·çµ±è¨ˆï¼ˆ15ã‚µãƒ–ãƒ¬ãƒãƒ¼ãƒˆï¼‰
  2. **æˆ¦ç•¥åˆ†æ**: äººææˆ¦ç•¥ç«‹æ¡ˆã®ãŸã‚ã®é«˜åº¦åˆ†æ
  3. **å®šç€åˆ†æ**: å®šç€ç‡å‘ä¸Šã®ãŸã‚ã®è©³ç´°åˆ†æ
  4. **é›¢è·åˆ†æ**: AIé›¢è·ãƒªã‚¹ã‚¯äºˆæ¸¬ã€è¦å› åˆ†æã€ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ12ã‚µãƒ–ãƒ¬ãƒãƒ¼ãƒˆï¼‰
  5. **ã‚¿ãƒ¬ãƒ³ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°**: äººæã®å¯è¦–åŒ–ã¨æˆ¦ç•¥çš„é…ç½®
  6. **äººæãƒ•ãƒ­ãƒ¼**: çµ„ç¹”å†…äººæã®å‹•ãåˆ†æ
  7. **ã‚³ãƒ›ãƒ¼ãƒˆåˆ†æ**: ä¸–ä»£ãƒ»å…¥ç¤¾å¹´æ¬¡åˆ¥å‚¾å‘åˆ†æï¼ˆ12ã‚µãƒ–ãƒ¬ãƒãƒ¼ãƒˆï¼‰
  8. **ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: What-ifåˆ†æã¨å°†æ¥äºˆæ¸¬ï¼ˆ5ã‚µãƒ–ãƒ¬ãƒãƒ¼ãƒˆï¼‰
  9. **ã‚¦ã‚§ãƒ«ãƒ“ãƒ¼ã‚¤ãƒ³ã‚°**: å¿ƒèº«å¥åº·ãƒ»å¹¸ç¦åº¦ã®å¤šè§’çš„åˆ†æï¼ˆ5ã‚µãƒ–ãƒ¬ãƒãƒ¼ãƒˆï¼‰
  10. **VoiceDriveåˆ†æ**: K-åŒ¿åæ€§ï¼ˆKâ‰¥5ï¼‰ä¿è­·ä¸‹ã§ã®é›†å›£åˆ†æãƒ»æ„Ÿæƒ…åˆ†æ
  11. **äººäº‹è©•ä¾¡åˆ†æ**: ã‚¹ã‚­ãƒ«Ã—æˆæœã®2è»¸è©•ä¾¡åˆ†æï¼ˆ8ã‚µãƒ–ãƒ¬ãƒãƒ¼ãƒˆï¼‰

- **ä¸è¶³ã—ã¦ã„ã‚‹é …ç›®**:
  - VoiceDriveæŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿ã®åŒæ„ç®¡ç†ãƒ»K-åŒ¿åæ€§ãƒã‚§ãƒƒã‚¯ãƒ»æ„Ÿæƒ…åˆ†æçµæœä¿ç®¡
  - AIé›¢è·ãƒªã‚¹ã‚¯äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã®å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ãƒ»äºˆæ¸¬çµæœä¿ç®¡
  - ã‚³ãƒ›ãƒ¼ãƒˆåˆ†æã®ä¸–ä»£å®šç¾©ãƒ»è¿½è·¡ãƒ‡ãƒ¼ã‚¿
  - ã‚¦ã‚§ãƒ«ãƒ“ãƒ¼ã‚¤ãƒ³ã‚°ç·åˆæŒ‡æ¨™ã®è¨ˆç®—çµæœä¿ç®¡
  - ã‚¿ãƒ¬ãƒ³ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°ã®ã‚¹ã‚­ãƒ«ãƒãƒˆãƒªãƒƒã‚¯ã‚¹ãƒ»å¾Œç¶™è€…è¨ˆç”»
  - ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœã®ä¿ç®¡ãƒ»æ¯”è¼ƒåˆ†æ

### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

#### 22-1. VoiceDriveConsentManagementï¼ˆVoiceDriveåŒæ„ç®¡ç†ï¼‰

**ç›®çš„**: è·å“¡ã”ã¨ã®VoiceDriveæŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿åˆ©ç”¨åŒæ„ã‚’ç®¡ç†ã€‚K-åŒ¿åæ€§ãƒã‚§ãƒƒã‚¯ã®åŸºç›¤ãƒ‡ãƒ¼ã‚¿ã€‚

```prisma
model VoiceDriveConsentManagement {
  id                    String    @id @default(cuid())

  // è·å“¡æƒ…å ±
  employeeId            String    @unique @map("employee_id")

  // åŒæ„çŠ¶æ…‹
  consentStatus         String    @default("not_requested") @map("consent_status")
  // not_requestedï¼ˆæœªä¾é ¼ï¼‰, requestedï¼ˆä¾é ¼æ¸ˆã¿ï¼‰, consentedï¼ˆåŒæ„æ¸ˆã¿ï¼‰, declinedï¼ˆæ‹’å¦ï¼‰, revokedï¼ˆåŒæ„æ’¤å›ï¼‰
  consentDate           DateTime? @map("consent_date")
  // åŒæ„æ—¥æ™‚
  revokedDate           DateTime? @map("revoked_date")
  // åŒæ„æ’¤å›æ—¥æ™‚

  // åŒæ„å†…å®¹
  consentVersion        String?   @map("consent_version")
  // åŒæ„æ›¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆv1.0, v2.0ç­‰ï¼‰
  consentedDataTypes    Json?     @map("consented_data_types")
  // [
  //   "voice_posts",       // éŸ³å£°æŠ•ç¨¿
  //   "text_transcripts",  // ãƒ†ã‚­ã‚¹ãƒˆåŒ–ãƒ‡ãƒ¼ã‚¿
  //   "sentiment_scores",  // æ„Ÿæƒ…ã‚¹ã‚³ã‚¢
  //   "topic_tags"         // ãƒˆãƒ”ãƒƒã‚¯ã‚¿ã‚°
  // ]

  // ãƒ‡ãƒ¼ã‚¿åˆ©ç”¨ç¯„å›²
  allowGroupAnalysis    Boolean   @default(false) @map("allow_group_analysis")
  // é›†å›£åˆ†æã¸ã®åˆ©ç”¨è¨±å¯
  allowSentimentAnalysis Boolean  @default(false) @map("allow_sentiment_analysis")
  // æ„Ÿæƒ…åˆ†æã¸ã®åˆ©ç”¨è¨±å¯
  allowTopicAnalysis    Boolean   @default(false) @map("allow_topic_analysis")
  // ãƒˆãƒ”ãƒƒã‚¯åˆ†æã¸ã®åˆ©ç”¨è¨±å¯

  // K-åŒ¿åæ€§ä¿è­·è¨­å®š
  minimumGroupSize      Int       @default(5) @map("minimum_group_size")
  // æœ€å°ã‚°ãƒ«ãƒ¼ãƒ—ã‚µã‚¤ã‚ºï¼ˆKå€¤ï¼‰
  participateInKCheck   Boolean   @default(true) @map("participate_in_k_check")
  // K-åŒ¿åæ€§ãƒã‚§ãƒƒã‚¯ã«å‚åŠ ã™ã‚‹ã‹

  // ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆGDPRå¯¾å¿œï¼‰
  deletionRequested     Boolean   @default(false) @map("deletion_requested")
  deletionRequestDate   DateTime? @map("deletion_request_date")
  deletionCompletedDate DateTime? @map("deletion_completed_date")
  deletionReason        String?   @db.Text @map("deletion_reason")

  // VoiceDriveé€£æº
  voicedriveUserId      String?   @map("voicedrive_user_id")
  voicedriveSyncStatus  String?   @default("pending") @map("voicedrive_sync_status")
  // pending, synced, failed
  lastSyncedAt          DateTime? @map("last_synced_at")

  // é€šçŸ¥ç®¡ç†
  consentRequestSent    Boolean   @default(false) @map("consent_request_sent")
  consentRequestSentAt  DateTime? @map("consent_request_sent_at")
  reminderSentCount     Int       @default(0) @map("reminder_sent_count")
  lastReminderSentAt    DateTime? @map("last_reminder_sent_at")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([consentStatus])
  @@index([consentDate])
  @@index([deletionRequested])
  @@map("voicedrive_consent_management")
}
```

#### 22-2. VoiceDriveSentimentAnalysisï¼ˆVoiceDriveæ„Ÿæƒ…åˆ†æçµæœï¼‰

**ç›®çš„**: VoiceDriveæŠ•ç¨¿ã®æ„Ÿæƒ…åˆ†æçµæœã‚’ä¿ç®¡ã€‚K-åŒ¿åæ€§ä¿è­·ä¸‹ã§ã®é›†å›£åˆ†æã«ä½¿ç”¨ã€‚

```prisma
model VoiceDriveSentimentAnalysis {
  id                    String    @id @default(cuid())

  // åˆ†æå¯¾è±¡æœŸé–“
  analysisDate          DateTime  @map("analysis_date")
  analysisPeriod        String    @map("analysis_period")
  // daily, weekly, monthly, quarterly

  // å¯¾è±¡ç¯„å›²
  facilityId            String?   @map("facility_id")
  // NULL = å…¨æ–½è¨­
  departmentId          String?   @map("department_id")
  // NULL = å…¨éƒ¨ç½²

  // K-åŒ¿åæ€§ãƒã‚§ãƒƒã‚¯
  participantCount      Int       @map("participant_count")
  // åˆ†æå¯¾è±¡äººæ•°
  kValue                Int       @map("k_value")
  // K-åŒ¿åæ€§å€¤
  kAnonymityPassed      Boolean   @map("k_anonymity_passed")
  // Kâ‰¥5ã‚’æº€ãŸã™ã‹

  // æ„Ÿæƒ…åˆ†æçµæœï¼ˆé›†å›£çµ±è¨ˆï¼‰
  averageSentimentScore Float?    @map("average_sentiment_score")
  // å¹³å‡æ„Ÿæƒ…ã‚¹ã‚³ã‚¢ï¼ˆ-1.0 ~ 1.0ï¼‰
  positivePercentage    Float?    @map("positive_percentage")
  // ãƒã‚¸ãƒ†ã‚£ãƒ–æŠ•ç¨¿ã®å‰²åˆï¼ˆ%ï¼‰
  neutralPercentage     Float?    @map("neutral_percentage")
  negativePercentage    Float?    @map("negative_percentage")

  // æ„Ÿæƒ…åˆ†å¸ƒ
  sentimentDistribution Json?     @map("sentiment_distribution")
  // {
  //   "very_positive": 15,  // éå¸¸ã«ãƒã‚¸ãƒ†ã‚£ãƒ–
  //   "positive": 30,
  //   "neutral": 40,
  //   "negative": 12,
  //   "very_negative": 3
  // }

  // ãƒˆãƒ”ãƒƒã‚¯åˆ†æ
  topTopics             Json?     @map("top_topics")
  // [
  //   { "topic": "æ¥­å‹™è² æ‹…", "count": 25, "averageSentiment": -0.3 },
  //   { "topic": "ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯", "count": 18, "averageSentiment": 0.6 },
  //   { "topic": "è·å ´ç’°å¢ƒ", "count": 15, "averageSentiment": 0.2 }
  // ]

  // ãƒ¯ãƒ¼ãƒ‰ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ‡ãƒ¼ã‚¿
  frequentWords         Json?     @map("frequent_words")
  // [
  //   { "word": "å¿™ã—ã„", "count": 45, "sentiment": -0.4 },
  //   { "word": "ã‚„ã‚ŠãŒã„", "count": 32, "sentiment": 0.7 }
  // ]

  // æ™‚ç³»åˆ—æ¯”è¼ƒ
  previousPeriodId      String?   @map("previous_period_id")
  // å‰å›åˆ†æã®ID
  sentimentChange       Float?    @map("sentiment_change")
  // å‰å›æ¯”ã®å¤‰åŒ–ç‡ï¼ˆ%ï¼‰

  // ã‚¢ãƒ©ãƒ¼ãƒˆæƒ…å ±
  hasNegativeTrend      Boolean   @default(false) @map("has_negative_trend")
  // ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒˆãƒ¬ãƒ³ãƒ‰æ¤œå‡º
  alertGenerated        Boolean   @default(false) @map("alert_generated")
  alertReason           String?   @db.Text @map("alert_reason")

  // åˆ†æãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  totalPostsAnalyzed    Int       @map("total_posts_analyzed")
  // åˆ†æã—ãŸæŠ•ç¨¿æ•°
  aiModel               String?   @map("ai_model")
  // ä½¿ç”¨ã—ãŸAIãƒ¢ãƒ‡ãƒ«ï¼ˆGPT-4, Claudeç­‰ï¼‰
  analysisQuality       String?   @map("analysis_quality")
  // high, medium, low

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@unique([analysisDate, analysisPeriod, facilityId, departmentId])
  @@index([analysisDate])
  @@index([facilityId])
  @@index([departmentId])
  @@index([kAnonymityPassed])
  @@map("voicedrive_sentiment_analysis")
}
```

#### 22-3. TurnoverRiskPredictionï¼ˆé›¢è·ãƒªã‚¹ã‚¯äºˆæ¸¬ï¼‰

**ç›®çš„**: AIæ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹å€‹äººåˆ¥é›¢è·ãƒªã‚¹ã‚¯äºˆæ¸¬çµæœã‚’ä¿ç®¡ã€‚æ—©æœŸè­¦å‘Šã‚·ã‚¹ãƒ†ãƒ ã®åŸºç›¤ã€‚

```prisma
model TurnoverRiskPrediction {
  id                    String    @id @default(cuid())

  // äºˆæ¸¬å¯¾è±¡
  employeeId            String    @map("employee_id")
  predictionDate        DateTime  @default(now()) @map("prediction_date")
  // äºˆæ¸¬å®Ÿæ–½æ—¥

  // ãƒªã‚¹ã‚¯ã‚¹ã‚³ã‚¢
  riskScore             Float     @map("risk_score")
  // 0.0-1.0ï¼ˆ1.0 = 100%é›¢è·ãƒªã‚¹ã‚¯ï¼‰
  riskLevel             String    @map("risk_level")
  // lowï¼ˆä½ï¼‰, mediumï¼ˆä¸­ï¼‰, highï¼ˆé«˜ï¼‰, criticalï¼ˆç·Šæ€¥ï¼‰
  riskPercentile        Int?      @map("risk_percentile")
  // å…¨è·å“¡ä¸­ã®é †ä½ï¼ˆ%ï¼‰

  // äºˆæ¸¬æœŸé–“
  predictionHorizon     String    @map("prediction_horizon")
  // 3_months, 6_months, 12_months
  predictedTurnoverDate DateTime? @map("predicted_turnover_date")
  // é›¢è·äºˆæ¸¬æ—¥

  // ä¸»è¦ãƒªã‚¹ã‚¯è¦å› ï¼ˆä¸Šä½5ã¤ï¼‰
  topRiskFactors        Json      @map("top_risk_factors")
  // [
  //   { "factor": "å‹¤ç¶šå¹´æ•°", "weight": 0.25, "value": "1.2å¹´", "impact": "high" },
  //   { "factor": "æ®‹æ¥­æ™‚é–“", "weight": 0.18, "value": "æœˆ80æ™‚é–“", "impact": "high" },
  //   { "factor": "è©•ä¾¡ã‚¹ã‚³ã‚¢", "weight": 0.15, "value": "Bè©•ä¾¡", "impact": "medium" },
  //   { "factor": "ã‚¹ãƒˆãƒ¬ã‚¹ã‚¹ã‚³ã‚¢", "weight": 0.12, "value": "é«˜ã‚¹ãƒˆãƒ¬ã‚¹", "impact": "medium" },
  //   { "factor": "æœ‰çµ¦å–å¾—ç‡", "weight": 0.10, "value": "20%", "impact": "low" }
  // ]

  // å…¥åŠ›ç‰¹å¾´é‡
  inputFeatures         Json?     @map("input_features")
  // {
  //   "tenure_months": 14,
  //   "avg_overtime_hours": 78.5,
  //   "evaluation_score": 65,
  //   "stress_score": 85,
  //   "paid_leave_usage_rate": 0.2,
  //   "training_hours": 12,
  //   "department_turnover_rate": 0.15
  // }

  // ãƒ¢ãƒ‡ãƒ«æƒ…å ±
  modelVersion          String    @map("model_version")
  // v1.0, v2.0ç­‰
  modelType             String    @map("model_type")
  // random_forest, gradient_boosting, neural_networkç­‰
  modelAccuracy         Float?    @map("model_accuracy")
  // ãƒ¢ãƒ‡ãƒ«ç²¾åº¦ï¼ˆ0.0-1.0ï¼‰
  confidenceLevel       Float?    @map("confidence_level")
  // äºˆæ¸¬ã®ä¿¡é ¼åº¦ï¼ˆ0.0-1.0ï¼‰

  // æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  recommendedActions    Json?     @map("recommended_actions")
  // [
  //   {
  //     "action": "ä¸Šå¸ã¨ã®1on1é¢è«‡å®Ÿæ–½",
  //     "priority": "high",
  //     "deadline": "2025-11-01",
  //     "expectedImpact": "ãƒªã‚¹ã‚¯20%ä½æ¸›"
  //   },
  //   {
  //     "action": "æ®‹æ¥­æ™‚é–“å‰Šæ¸›è¨ˆç”»",
  //     "priority": "high",
  //     "deadline": "2025-10-15",
  //     "expectedImpact": "ãƒªã‚¹ã‚¯15%ä½æ¸›"
  //   }
  // ]

  // è¿½è·¡æƒ…å ±
  actualTurnover        Boolean?  @map("actual_turnover")
  // å®Ÿéš›ã«é›¢è·ã—ãŸã‹
  actualTurnoverDate    DateTime? @map("actual_turnover_date")
  predictionAccurate    Boolean?  @map("prediction_accurate")
  // äºˆæ¸¬ãŒæ­£ç¢ºã ã£ãŸã‹

  // ä»‹å…¥è¨˜éŒ²
  interventionTaken     Boolean   @default(false) @map("intervention_taken")
  interventionDate      DateTime? @map("intervention_date")
  interventionType      String?   @map("intervention_type")
  // one_on_one, workload_adjustment, salary_reviewç­‰
  interventionNotes     String?   @db.Text @map("intervention_notes")

  // ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†
  alertSent             Boolean   @default(false) @map("alert_sent")
  alertSentTo           Json?     @map("alert_sent_to")
  // ["direct_manager", "hr_dept", "facility_manager"]
  alertSentAt           DateTime? @map("alert_sent_at")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([employeeId])
  @@index([predictionDate])
  @@index([riskLevel])
  @@index([riskScore])
  @@index([actualTurnover])
  @@map("turnover_risk_predictions")
}
```

#### 22-4. CohortDefinitionï¼ˆã‚³ãƒ›ãƒ¼ãƒˆå®šç¾©ï¼‰

**ç›®çš„**: å…¥ç¤¾å¹´æ¬¡ã€ä¸–ä»£ã€éƒ¨ç½²ç­‰ã®ã‚³ãƒ›ãƒ¼ãƒˆï¼ˆé›†å›£ï¼‰ã‚’å®šç¾©ã€‚é•·æœŸçš„ãªè¿½è·¡åˆ†æã®åŸºç›¤ã€‚

```prisma
model CohortDefinition {
  id                    String    @id @default(cuid())

  // ã‚³ãƒ›ãƒ¼ãƒˆåŸºæœ¬æƒ…å ±
  cohortCode            String    @unique @map("cohort_code")
  // 2020_cohort, gen_z_cohort, nursing_2019ç­‰
  cohortName            String    @map("cohort_name")
  // 2020å¹´åº¦å…¥ç¤¾ã‚³ãƒ›ãƒ¼ãƒˆã€Zä¸–ä»£ã‚³ãƒ›ãƒ¼ãƒˆç­‰
  cohortType            String    @map("cohort_type")
  // entry_yearï¼ˆå…¥ç¤¾å¹´æ¬¡ï¼‰, generationï¼ˆä¸–ä»£ï¼‰, departmentï¼ˆéƒ¨ç½²ï¼‰, positionï¼ˆè·ç¨®ï¼‰, recruitment_typeï¼ˆæ¡ç”¨å½¢æ…‹ï¼‰

  // ã‚³ãƒ›ãƒ¼ãƒˆå®šç¾©æ¡ä»¶
  definitionCriteria    Json      @map("definition_criteria")
  // {
  //   "entry_year": 2020,
  //   "entry_month_from": 4,
  //   "entry_month_to": 3
  // }
  // ã¾ãŸã¯
  // {
  //   "birth_year_from": 1997,
  //   "birth_year_to": 2012,
  //   "generation_name": "Zä¸–ä»£"
  // }

  // ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±
  currentMemberCount    Int       @default(0) @map("current_member_count")
  initialMemberCount    Int       @map("initial_member_count")
  // é–‹å§‹æ™‚ç‚¹ã®ãƒ¡ãƒ³ãƒãƒ¼æ•°
  retentionRate         Float?    @map("retention_rate")
  // å®šç€ç‡ï¼ˆ%ï¼‰

  // è¿½è·¡æœŸé–“
  trackingStartDate     DateTime  @map("tracking_start_date")
  trackingEndDate       DateTime? @map("tracking_end_date")
  // NULL = ç¶™ç¶šè¿½è·¡ä¸­
  trackingStatus        String    @default("active") @map("tracking_status")
  // activeï¼ˆè¿½è·¡ä¸­ï¼‰, completedï¼ˆå®Œäº†ï¼‰, pausedï¼ˆä¸€æ™‚åœæ­¢ï¼‰

  // åˆ†æè¨­å®š
  analysisFrequency     String    @default("quarterly") @map("analysis_frequency")
  // monthly, quarterly, yearly
  lastAnalysisDate      DateTime? @map("last_analysis_date")
  nextScheduledAnalysis DateTime? @map("next_scheduled_analysis")

  // ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ‡ãƒ¼ã‚¿
  industryBenchmark     Json?     @map("industry_benchmark")
  // {
  //   "3_year_retention": 0.65,
  //   "avg_promotion_years": 4.2
  // }

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String?   @map("created_by")

  @@index([cohortType])
  @@index([trackingStatus])
  @@index([trackingStartDate])
  @@map("cohort_definitions")
}
```

#### 22-5. CohortTrackingSnapshotï¼ˆã‚³ãƒ›ãƒ¼ãƒˆè¿½è·¡ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆï¼‰

**ç›®çš„**: ã‚³ãƒ›ãƒ¼ãƒˆã”ã¨ã®å®šæœŸã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ä¿ç®¡ã€‚çµŒå¹´å¤‰åŒ–ãƒ»æ–½ç­–åŠ¹æœæ¸¬å®šã«ä½¿ç”¨ã€‚

```prisma
model CohortTrackingSnapshot {
  id                    String    @id @default(cuid())

  // ã‚³ãƒ›ãƒ¼ãƒˆè­˜åˆ¥
  cohortId              String    @map("cohort_id")
  // CohortDefinition.id
  cohortCode            String    @map("cohort_code")

  // ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆæƒ…å ±
  snapshotDate          DateTime  @map("snapshot_date")
  periodsSinceStart     Int       @map("periods_since_start")
  // è¿½è·¡é–‹å§‹ã‹ã‚‰ã®çµŒéæœŸé–“æ•°ï¼ˆå››åŠæœŸæ•°ã€å¹´æ•°ç­‰ï¼‰

  // ãƒ¡ãƒ³ãƒãƒ¼çµ±è¨ˆ
  currentMemberCount    Int       @map("current_member_count")
  activeMembers         Int       @map("active_members")
  turnedOverMembers     Int       @map("turned_over_members")
  cumulativeTurnover    Int       @map("cumulative_turnover")
  // ç´¯ç©é›¢è·è€…æ•°
  retentionRate         Float     @map("retention_rate")
  // å®šç€ç‡ï¼ˆ%ï¼‰
  survivalRate          Float     @map("survival_rate")
  // ç”Ÿå­˜ç‡ï¼ˆ%ï¼‰

  // é›¢è·åˆ†æ
  turnoverThisPeriod    Int       @map("turnover_this_period")
  // ä»ŠæœŸã®é›¢è·è€…æ•°
  turnoverRate          Float     @map("turnover_rate")
  // ä»ŠæœŸã®é›¢è·ç‡ï¼ˆ%ï¼‰
  hazardRate            Float?    @map("hazard_rate")
  // ãƒã‚¶ãƒ¼ãƒ‰ç‡ï¼ˆé›¢è·ãƒªã‚¹ã‚¯ç‡ï¼‰

  // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çµ±è¨ˆ
  avgEvaluationScore    Float?    @map("avg_evaluation_score")
  avgPromotionCount     Float?    @map("avg_promotion_count")
  promotedCount         Int?      @default(0) @map("promoted_count")
  // æ˜‡é€²è€…æ•°

  // ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆçµ±è¨ˆ
  avgEngagementScore    Float?    @map("avg_engagement_score")
  highEngagementPercent Float?    @map("high_engagement_percent")
  // é«˜ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆè€…ã®å‰²åˆï¼ˆ%ï¼‰

  // ç ”ä¿®ãƒ»è‚²æˆçµ±è¨ˆ
  avgTrainingHours      Float?    @map("avg_training_hours")
  certificationRate     Float?    @map("certification_rate")
  // è³‡æ ¼å–å¾—ç‡ï¼ˆ%ï¼‰

  // éƒ¨ç½²åˆ¥åˆ†å¸ƒ
  departmentDistribution Json?    @map("department_distribution")
  // [
  //   { "department": "å†…ç§‘ç—…æ£Ÿ", "count": 12, "percentage": 30.0 },
  //   { "department": "å¤–ç§‘ç—…æ£Ÿ", "count": 8, "percentage": 20.0 }
  // ]

  // å‰å›æ¯”è¼ƒ
  previousSnapshotId    String?   @map("previous_snapshot_id")
  memberCountChange     Int?      @map("member_count_change")
  retentionRateChange   Float?    @map("retention_rate_change")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@unique([cohortId, snapshotDate])
  @@index([cohortId])
  @@index([cohortCode])
  @@index([snapshotDate])
  @@index([periodsSinceStart])
  @@map("cohort_tracking_snapshots")
}
```

### Employeeãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

```prisma
// æ—¢å­˜ã®Employeeãƒ¢ãƒ‡ãƒ«ã«è¿½åŠ 
model Employee {
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

  // VoiceDriveåˆ†æé–¢é€£
  voicedriveConsentStatus String?   @map("voicedrive_consent_status")
  // consented, declined, not_requested
  voicedriveConsentDate   DateTime? @map("voicedrive_consent_date")

  // é›¢è·ãƒªã‚¹ã‚¯é–¢é€£ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  latestTurnoverRiskScore Float?    @map("latest_turnover_risk_score")
  latestTurnoverRiskLevel String?   @map("latest_turnover_risk_level")
  // low, medium, high, critical
  turnoverRiskUpdatedAt   DateTime? @map("turnover_risk_updated_at")

  // ã‚³ãƒ›ãƒ¼ãƒˆé–¢é€£
  entryCohortId           String?   @map("entry_cohort_id")
  // å…¥ç¤¾å¹´æ¬¡ã‚³ãƒ›ãƒ¼ãƒˆID
  generationCohortId      String?   @map("generation_cohort_id")
  // ä¸–ä»£ã‚³ãƒ›ãƒ¼ãƒˆID

  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
}
```

### å®Ÿè£…ã«ã‚ˆã‚‹åŠ¹æœ

âœ… **VoiceDriveåˆ†æã®å®Œå…¨å¯¾å¿œ**
- K-åŒ¿åæ€§ï¼ˆKâ‰¥5ï¼‰ä¿è­·ä¸‹ã§ã®é›†å›£åˆ†æ
- åŒæ„ç®¡ç†ãƒ»ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆGDPRå¯¾å¿œï¼‰
- æ„Ÿæƒ…åˆ†æãƒ»ãƒˆãƒ”ãƒƒã‚¯åˆ†æãƒ»ãƒ¯ãƒ¼ãƒ‰ã‚¯ãƒ©ã‚¦ãƒ‰
- æ–½è¨­åˆ¥ãƒ»éƒ¨ç½²åˆ¥ã®æ„Ÿæƒ…ãƒˆãƒ¬ãƒ³ãƒ‰è¿½è·¡

âœ… **AIé›¢è·ãƒªã‚¹ã‚¯äºˆæ¸¬ã®å®Ÿè£…åŸºç›¤**
- å€‹äººåˆ¥ãƒªã‚¹ã‚¯ã‚¹ã‚³ã‚¢ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨ˆç®—
- ä¸»è¦ãƒªã‚¹ã‚¯è¦å› ã®ç‰¹å®šã¨é‡ã¿ä»˜ã‘
- æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®è‡ªå‹•ææ¡ˆ
- äºˆæ¸¬ç²¾åº¦ã®ç¶™ç¶šçš„æ¤œè¨¼

âœ… **ã‚³ãƒ›ãƒ¼ãƒˆåˆ†æã®å®Œå…¨å®Ÿè£…**
- å…¥ç¤¾å¹´æ¬¡ãƒ»ä¸–ä»£ãƒ»éƒ¨ç½²åˆ¥ã®é•·æœŸè¿½è·¡
- å®šç€ç‡ãƒ»ç”Ÿå­˜ç‡ã®çµŒå¹´å¤‰åŒ–
- æ–½ç­–åŠ¹æœã®æ¸¬å®šã¨æ¯”è¼ƒ
- æ¥­ç•Œãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã¨ã®æ¯”è¼ƒ

âœ… **100ãƒšãƒ¼ã‚¸è¶…ã®ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã‚’æ”¯ãˆã‚‹åŸºç›¤**
- 11ã‚«ãƒ†ã‚´ãƒªãƒ¼å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ç¢ºä¿
- æ–½è¨­å˜ä½ãƒ»éƒ¨ç½²å˜ä½ãƒ»å€‹äººå˜ä½ã®é›†è¨ˆå¯¾å¿œ
- æ™‚ç³»åˆ—åˆ†æãƒ»ãƒˆãƒ¬ãƒ³ãƒ‰äºˆæ¸¬ã®ãƒ‡ãƒ¼ã‚¿è“„ç©
- ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»What-ifåˆ†æã®å®Ÿè¡ŒåŸºç›¤

**äººäº‹éƒ¨ãŒå¿…è¦ã¨ã™ã‚‹å…¨ã¦ã®åˆ†æã‚’ã€å€‹äººã®ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã‚’ä¿è­·ã—ãªãŒã‚‰å®Ÿç¾ã§ãã¾ã™ï¼**

---

## 23. é¢è«‡åˆ¶åº¦çµ±åˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ10ç¨®é¡é¢è«‡ãƒ»è³ªå•ãƒãƒ³ã‚¯ãƒ»AIåˆ†æï¼‰

### èƒŒæ™¯ã¨è¦ä»¶
- ç¾åœ¨ã®å®Ÿè£…: **10ç¨®é¡ã®é¢è«‡ä½“ç³»ã€è³ªå•ãƒãƒ³ã‚¯ã‚·ã‚¹ãƒ†ãƒ ã€AIåˆ†ææ©Ÿèƒ½å®Ÿè£…æ¸ˆã¿**
- é¢è«‡ä½“ç³»:
  - **å®šæœŸé¢è«‡ï¼ˆ3ç¨®é¡ï¼‰**: æ–°å…¥è·å“¡æœˆæ¬¡ã€ä¸€èˆ¬è·å“¡å¹´æ¬¡ã€ç®¡ç†è·åŠå¹´
  - **ç‰¹åˆ¥é¢è«‡ï¼ˆ3ç¨®é¡ï¼‰**: å¾©è·ã€ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¾Œã€é€€è·
  - **ã‚µãƒãƒ¼ãƒˆé¢è«‡ï¼ˆ4ç¨®é¡ï¼‰**: ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã€ã‚­ãƒ£ãƒªã‚¢ç³»ã€è·å ´ç’°å¢ƒç³»ã€å€‹åˆ¥ç›¸è«‡
- ä¸»è¦æ©Ÿèƒ½:
  - é¢è«‡ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆäºˆç´„ãƒ»å®Ÿæ–½ç®¡ç†ï¼‰
  - è³ªå•ãƒãƒ³ã‚¯ï¼ˆ892å•ã®å®šæœŸé¢è«‡è³ªå•ã€168å•ã®ã‚µãƒãƒ¼ãƒˆé¢è«‡è³ªå•ã€187å•ã®ç‰¹åˆ¥é¢è«‡è³ªå•ï¼‰
  - ã‚»ã‚¯ã‚·ãƒ§ãƒ³å®šç¾©ã‚·ã‚¹ãƒ†ãƒ ï¼ˆçµŒé¨“å¹´æ•°åˆ¥ãƒ»è·ç¨®åˆ¥ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºï¼‰
  - AIå‹•çš„è³ªå•ç”Ÿæˆ
  - é¢è«‡ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼
  - çµ±åˆåˆ†æãƒ»å±¥æ­´è¿½è·¡

- **ä¸è¶³ã—ã¦ã„ã‚‹é …ç›®**:
  - è³ªå•ãƒãƒ³ã‚¯ã®å®Œå…¨ç®¡ç†ï¼ˆã‚«ãƒ†ã‚´ãƒªãƒ»ã‚¿ã‚°ãƒ»å„ªå…ˆåº¦ãƒ»ä½¿ç”¨é »åº¦ï¼‰
  - ã‚»ã‚¯ã‚·ãƒ§ãƒ³å®šç¾©ã®å‹•çš„ç”Ÿæˆå±¥æ­´
  - çµŒé¨“å¹´æ•°åˆ¥ãƒ»è·ç¨®åˆ¥ãƒ»ç®¡ç†è·åˆ¥ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†
  - é¢è«‡çµæœã®è©³ç´°åˆ†æãƒ‡ãƒ¼ã‚¿ï¼ˆAIè§£é‡ˆã‚³ãƒ¡ãƒ³ãƒˆã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç›¸é–¢åˆ†æï¼‰
  - VoiceDriveé€£æºã«ã‚ˆã‚‹è‡ªå‹•é¢è«‡ãƒˆãƒªã‚¬ãƒ¼è¨˜éŒ²

### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

#### 23-1. InterviewQuestionBankï¼ˆé¢è«‡è³ªå•ãƒãƒ³ã‚¯ï¼‰

**ç›®çš„**: å…¨ã¦ã®é¢è«‡è³ªå•ã‚’ä¸€å…ƒç®¡ç†ã€‚çµŒé¨“å¹´æ•°ãƒ»è·ç¨®ãƒ»é¢è«‡ç¨®é¡åˆ¥ã«åˆ†é¡ã—ã€AIç”Ÿæˆè³ªå•ã‚‚å«ã‚€ã€‚

```prisma
model InterviewQuestionBank {
  id                    String    @id @default(cuid())

  // è³ªå•åŸºæœ¬æƒ…å ±
  questionCode          String    @unique @map("question_code")
  // Q_NEW_001, Q_ANNUAL_050, Q_EXIT_012ç­‰
  questionText          String    @db.Text @map("question_text")
  questionType          String    @map("question_type")
  // textarea, radio, checkbox, rating, scale

  // åˆ†é¡
  interviewClassification String  @map("interview_classification")
  // regularï¼ˆå®šæœŸï¼‰, specialï¼ˆç‰¹åˆ¥ï¼‰, supportï¼ˆã‚µãƒãƒ¼ãƒˆï¼‰
  interviewType         String    @map("interview_type")
  // new_employee_monthly, regular_annual, exit_interviewç­‰
  category              String    @map("category")
  // work_adaptation, skill_assessment, career_aspirationç­‰

  // ã‚¿ã‚°ãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
  tags                  Json?     @map("tags")
  // ["æ–°äºº", "é©å¿œçŠ¶æ³", "å¿…é ˆè³ªå•"]
  keywords              Json?     @map("keywords")
  // æ¤œç´¢ç”¨ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰

  // å„ªå…ˆåº¦ãƒ»é‡è¦åº¦
  priority              Int       @default(3) @map("priority")
  // 1ï¼ˆå¿…é ˆï¼‰, 2ï¼ˆæ¨å¥¨ï¼‰, 3ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  importanceScore       Float?    @map("importance_score")
  // AIè¨ˆç®—ã«ã‚ˆã‚‹é‡è¦åº¦ã‚¹ã‚³ã‚¢ï¼ˆ0.0-1.0ï¼‰

  // å¯¾è±¡æ¡ä»¶
  targetExperienceYears Json?     @map("target_experience_years")
  // { "min": 0, "max": 1 }ï¼ˆæ–°äººå‘ã‘ï¼‰ã€{ "min": 2 }ï¼ˆ2å¹´ç›®ä»¥é™ï¼‰
  targetPositions       Json?     @map("target_positions")
  // ["çœ‹è­·å¸«", "ç†å­¦ç™‚æ³•å£«"]
  targetManagementLevel String?   @map("target_management_level")
  // staffï¼ˆä¸€èˆ¬ï¼‰, leaderï¼ˆä¸»ä»»ï¼‰, managerï¼ˆç®¡ç†è·ï¼‰

  // AIç”Ÿæˆæƒ…å ±
  isAIGenerated         Boolean   @default(false) @map("is_ai_generated")
  aiModel               String?   @map("ai_model")
  // GPT-4, Claudeç­‰
  aiGenerationPrompt    String?   @db.Text @map("ai_generation_prompt")
  humanReviewed         Boolean   @default(false) @map("human_reviewed")
  // äººé–“ã«ã‚ˆã‚‹ç¢ºèªæ¸ˆã¿

  // ä½¿ç”¨çµ±è¨ˆ
  usageCount            Int       @default(0) @map("usage_count")
  // ã“ã®è³ªå•ãŒä½¿ç”¨ã•ã‚ŒãŸå›æ•°
  lastUsedAt            DateTime? @map("last_used_at")
  avgResponseTime       Int?      @map("avg_response_time")
  // å¹³å‡å›ç­”æ™‚é–“ï¼ˆç§’ï¼‰
  skipRate              Float?    @map("skip_rate")
  // ã‚¹ã‚­ãƒƒãƒ—ç‡ï¼ˆ%ï¼‰

  // åŠ¹æœæ¸¬å®š
  satisfactionScore     Float?    @map("satisfaction_score")
  // é¢è«‡è€…ã‹ã‚‰ã®è³ªå•è©•ä¾¡ï¼ˆ1-5ï¼‰
  insightfulness        Float?    @map("insightfulness")
  // æ´å¯ŸåŠ›ã‚¹ã‚³ã‚¢ï¼ˆAIè¨ˆç®—ï¼‰
  correlationWithOutcome Float?   @map("correlation_with_outcome")
  // é¢è«‡æˆæœã¨ã®ç›¸é–¢

  // çŠ¶æ…‹ç®¡ç†
  status                String    @default("active") @map("status")
  // active, draft, archived, deprecated
  version               Int       @default(1) @map("version")
  // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
  previousVersionId     String?   @map("previous_version_id")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String?   @map("created_by")

  @@index([interviewType])
  @@index([category])
  @@index([priority])
  @@index([status])
  @@index([isAIGenerated])
  @@map("interview_question_bank")
}
```

#### 23-2. InterviewSectionTemplateï¼ˆé¢è«‡ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰

**ç›®çš„**: é¢è«‡ã‚·ãƒ¼ãƒˆã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ§‹æˆã‚’å®šç¾©ã€‚çµŒé¨“å¹´æ•°ãƒ»è·ç¨®åˆ¥ã«ç•°ãªã‚‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‹•çš„ç”Ÿæˆã€‚

```prisma
model InterviewSectionTemplate {
  id                    String    @id @default(cuid())

  // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåŸºæœ¬æƒ…å ±
  templateCode          String    @unique @map("template_code")
  // TMPL_NEW_NURSE_3M, TMPL_ANNUAL_PT_5Yç­‰
  templateName          String    @map("template_name")
  // ã€Œæ–°äººçœ‹è­·å¸«3ãƒ¶æœˆé¢è«‡ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€

  // å¯¾è±¡æ¡ä»¶
  interviewType         String    @map("interview_type")
  targetExperienceYears Json?     @map("target_experience_years")
  // { "min": 0, "max": 3 }
  targetPosition        String?   @map("target_position")
  targetManagementLevel String?   @map("target_management_level")

  // ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ§‹æˆ
  sectionDefinitions    Json      @map("section_definitions")
  // [
  //   {
  //     "sectionId": "work_adaptation",
  //     "sectionTitle": "æ¥­å‹™é©å¿œçŠ¶æ³",
  //     "displayOrder": 1,
  //     "isRequired": true,
  //     "estimatedMinutes": 10,
  //     "questions": ["Q_NEW_001", "Q_NEW_002", "Q_NEW_003"]
  //   },
  //   {
  //     "sectionId": "skill_assessment",
  //     "sectionTitle": "æŠ€è¡“ç¿’å¾—çŠ¶æ³",
  //     "displayOrder": 2,
  //     "isRequired": true,
  //     "estimatedMinutes": 15,
  //     "questions": ["Q_NEW_010", "Q_NEW_011"]
  //   }
  // ]

  totalEstimatedMinutes Int?      @map("total_estimated_minutes")
  // ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆè¨ˆã®æ¨å®šæ™‚é–“

  // ä½¿ç”¨çµ±è¨ˆ
  usageCount            Int       @default(0) @map("usage_count")
  lastUsedAt            DateTime? @map("last_used_at")
  avgCompletionRate     Float?    @map("avg_completion_rate")
  // å¹³å‡å®Œäº†ç‡ï¼ˆ%ï¼‰

  // çŠ¶æ…‹ç®¡ç†
  status                String    @default("active") @map("status")
  version               Int       @default(1) @map("version")
  approvedBy            String?   @map("approved_by")
  approvedAt            DateTime? @map("approved_at")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([interviewType])
  @@index([targetPosition])
  @@index([status])
  @@map("interview_section_templates")
}
```

#### 23-3. InterviewSheetInstanceï¼ˆé¢è«‡ã‚·ãƒ¼ãƒˆå®Ÿæ–½ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼‰

**ç›®çš„**: å®Ÿéš›ã«å®Ÿæ–½ã•ã‚ŒãŸé¢è«‡ã®è³ªå•ãƒ»å›ç­”ã‚’å®Œå…¨è¨˜éŒ²ã€‚å€‹åˆ¥ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã®å±¥æ­´ã‚‚ä¿ç®¡ã€‚

```prisma
model InterviewSheetInstance {
  id                    String    @id @default(cuid())

  // é¢è«‡åŸºæœ¬æƒ…å ±
  interviewId           String    @unique @map("interview_id")
  // Interviewãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³1ã§å®šç¾©æ¸ˆã¿ï¼‰ã¨ã®ç´ä»˜ã‘
  employeeId            String    @map("employee_id")

  // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæƒ…å ±
  templateId            String?   @map("template_id")
  // InterviewSectionTemplate.id
  templateCode          String?   @map("template_code")
  // ä½¿ç”¨ã—ãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

  // å®Ÿæ–½æƒ…å ±
  conductedAt           DateTime  @map("conducted_at")
  conductedBy           String    @map("conducted_by")
  // é¢è«‡è€…ID
  duration              Int?      @map("duration")
  // å®Ÿéš›ã®é¢è«‡æ™‚é–“ï¼ˆåˆ†ï¼‰

  // ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ»è³ªå•æ§‹æˆ
  sheetStructure        Json      @map("sheet_structure")
  // [
  //   {
  //     "sectionId": "work_adaptation",
  //     "sectionTitle": "æ¥­å‹™é©å¿œçŠ¶æ³",
  //     "questions": [
  //       {
  //         "questionId": "Q_NEW_001",
  //         "questionText": "ç¾åœ¨ã®æ¥­å‹™ã«æ…£ã‚Œã¦ãã¾ã—ãŸã‹ï¼Ÿ",
  //         "questionType": "rating",
  //         "answer": "4",
  //         "answerText": "ã‹ãªã‚Šæ…£ã‚Œã¦ããŸ",
  //         "responseTime": 120,
  //         "skipped": false
  //       }
  //     ]
  //   }
  // ]

  // ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå±¥æ­´
  customQuestions       Json?     @map("custom_questions")
  // é¢è«‡è€…ãŒè¿½åŠ ã—ãŸç‹¬è‡ªè³ªå•
  removedQuestions      Json?     @map("removed_questions")
  // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰å‰Šé™¤ã—ãŸè³ªå•

  // å…¨ä½“ã‚µãƒãƒªãƒ¼
  completionRate        Float     @map("completion_rate")
  // å®Œäº†ç‡ï¼ˆ%ï¼‰
  totalQuestions        Int       @map("total_questions")
  answeredQuestions     Int       @map("answered_questions")
  skippedQuestions      Int       @map("skipped_questions")

  // AIåˆ†æçµæœï¼ˆå¾Œè¿°ã®InterviewAIAnalysisã¨é€£æºï¼‰
  aiAnalysisId          String?   @map("ai_analysis_id")
  hasAIAnalysis         Boolean   @default(false) @map("has_ai_analysis")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([employeeId])
  @@index([templateId])
  @@index([conductedAt])
  @@map("interview_sheet_instances")
}
```

#### 23-4. InterviewAIAnalysisï¼ˆé¢è«‡AIåˆ†æçµæœï¼‰

**ç›®çš„**: AIåˆ†æã«ã‚ˆã‚‹æ´å¯Ÿã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç›¸é–¢ã€æ”¹å–„ææ¡ˆã‚’ä¿ç®¡ã€‚ç¶™ç¶šçš„ãªè³ªã®å‘ä¸Šã«æ´»ç”¨ã€‚

```prisma
model InterviewAIAnalysis {
  id                    String    @id @default(cuid())

  // åˆ†æå¯¾è±¡
  interviewId           String    @unique @map("interview_id")
  sheetInstanceId       String    @map("sheet_instance_id")
  employeeId            String    @map("employee_id")

  // AIåˆ†æã‚µãƒãƒªãƒ¼
  overallSentiment      String?   @map("overall_sentiment")
  // positive, neutral, negative, mixed
  sentimentScore        Float?    @map("sentiment_score")
  // -1.0ï¼ˆéå¸¸ã«ãƒã‚¬ãƒ†ã‚£ãƒ–ï¼‰ã€œ 1.0ï¼ˆéå¸¸ã«ãƒã‚¸ãƒ†ã‚£ãƒ–ï¼‰

  // ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ¥åˆ†æ
  sectionAnalysis       Json      @map("section_analysis")
  // [
  //   {
  //     "sectionId": "work_adaptation",
  //     "sentiment": "positive",
  //     "score": 0.75,
  //     "keyFindings": ["è·å ´ç’°å¢ƒã«è‰¯å¥½ã«é©å¿œ", "ãƒãƒ¼ãƒ ã¨ã®é–¢ä¿‚è‰¯å¥½"],
  //     "concerns": []
  //   },
  //   {
  //     "sectionId": "skill_assessment",
  //     "sentiment": "neutral",
  //     "score": 0.2,
  //     "keyFindings": ["åŸºæœ¬æŠ€è¡“ã¯ç¿’å¾—ä¸­"],
  //     "concerns": ["å¤œå‹¤æ¥­å‹™ã¸ã®ä¸å®‰ã‚ã‚Š"]
  //   }
  // ]

  // AIè§£é‡ˆã‚³ãƒ¡ãƒ³ãƒˆ
  interpretationComments Json     @map("interpretation_comments")
  // [
  //   {
  //     "category": "strength",
  //     "comment": "ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨é©å¿œåŠ›ã«å„ªã‚Œã¦ã„ã‚‹",
  //     "confidence": 0.85
  //   },
  //   {
  //     "category": "concern",
  //     "comment": "å¤œå‹¤æ¥­å‹™ã¸ã®ä¸å®‰ãŒé«˜ã„ã€‚è¿½åŠ ç ”ä¿®ãŒå¿…è¦",
  //     "confidence": 0.78
  //   }
  // ]

  // ãƒªã‚¹ã‚¯è©•ä¾¡
  turnoverRisk          String?   @map("turnover_risk")
  // low, medium, high, critical
  turnoverRiskScore     Float?    @map("turnover_risk_score")
  // 0.0-1.0
  riskFactors           Json?     @map("risk_factors")
  // ["å¤œå‹¤è² æ‹…", "ã‚¹ã‚­ãƒ«ä¸å®‰"]

  // æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  recommendedActions    Json?     @map("recommended_actions")
  // [
  //   {
  //     "action": "å¤œå‹¤ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ—ãƒ­ã‚°ãƒ©ãƒ å®Ÿæ–½",
  //     "priority": "high",
  //     "deadline": "2025-11-30",
  //     "assignedTo": "å…ˆè¼©çœ‹è­·å¸«"
  //   }
  // ]

  // ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç›¸é–¢åˆ†æ
  sectionCorrelations   Json?     @map("section_correlations")
  // {
  //   "work_adaptation_vs_skill_assessment": 0.65,
  //   "skill_assessment_vs_career_aspiration": 0.42
  // }

  // å‰å›æ¯”è¼ƒ
  previousAnalysisId    String?   @map("previous_analysis_id")
  improvementAreas      Json?     @map("improvement_areas")
  // å‰å›ã¨æ¯”è¼ƒã—ã¦æ”¹å–„ã—ãŸé ˜åŸŸ
  deteriorationAreas    Json?     @map("deterioration_areas")
  // å‰å›ã¨æ¯”è¼ƒã—ã¦æ‚ªåŒ–ã—ãŸé ˜åŸŸ

  // AIæƒ…å ±
  aiModel               String    @map("ai_model")
  // GPT-4, Claude-3ç­‰
  modelVersion          String    @map("model_version")
  analysisConfidence    Float     @map("analysis_confidence")
  // åˆ†æã®ä¿¡é ¼åº¦ï¼ˆ0.0-1.0ï¼‰
  analysisQuality       String    @map("analysis_quality")
  // high, medium, low

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  analyzedAt            DateTime  @default(now()) @map("analyzed_at")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([employeeId])
  @@index([turnoverRisk])
  @@index([analyzedAt])
  @@map("interview_ai_analyses")
}
```

#### 23-5. InterviewAutomationTriggerï¼ˆé¢è«‡è‡ªå‹•ãƒˆãƒªã‚¬ãƒ¼è¨˜éŒ²ï¼‰

**ç›®çš„**: VoiceDriveé€£æºã‚„ã‚·ã‚¹ãƒ†ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã«ã‚ˆã‚‹è‡ªå‹•é¢è«‡ãƒˆãƒªã‚¬ãƒ¼ã‚’è¨˜éŒ²ã€‚

```prisma
model InterviewAutomationTrigger {
  id                    String    @id @default(cuid())

  // ãƒˆãƒªã‚¬ãƒ¼æƒ…å ±
  triggerType           String    @map("trigger_type")
  // voicedrive_sentiment, stress_check_alert, overtime_threshold, absence_patternç­‰
  triggerSource         String    @map("trigger_source")
  // VoiceDrive, HealthManagement, AttendanceSystemç­‰

  // å¯¾è±¡è·å“¡
  employeeId            String    @map("employee_id")
  employeeName          String?   @map("employee_name")

  // ãƒˆãƒªã‚¬ãƒ¼æ¡ä»¶
  triggerCondition      Json      @map("trigger_condition")
  // {
  //   "condition_type": "negative_sentiment_streak",
  //   "threshold": 3,
  //   "actual_value": 5,
  //   "sentiment_scores": [-0.6, -0.4, -0.7, -0.5, -0.8]
  // }

  // æ¨å¥¨é¢è«‡
  recommendedInterviewType String @map("recommended_interview_type")
  // workplace_support, individual_consultationç­‰
  urgencyLevel          String    @map("urgency_level")
  // low, medium, high, urgent
  recommendedWithin     Int?      @map("recommended_within")
  // æ¨å¥¨å®Ÿæ–½æœŸé™ï¼ˆæ—¥æ•°ï¼‰

  // å®Ÿæ–½çŠ¶æ³
  interviewScheduled    Boolean   @default(false) @map("interview_scheduled")
  scheduledInterviewId  String?   @map("scheduled_interview_id")
  scheduledAt           DateTime? @map("scheduled_at")
  interviewCompleted    Boolean   @default(false) @map("interview_completed")
  completedAt           DateTime? @map("completed_at")

  // é€šçŸ¥ç®¡ç†
  notificationSent      Boolean   @default(false) @map("notification_sent")
  notificationSentTo    Json?     @map("notification_sent_to")
  // ["direct_manager", "hr_dept"]
  notificationSentAt    DateTime? @map("notification_sent_at")

  // åŠ¹æœæ¸¬å®š
  triggerResolved       Boolean   @default(false) @map("trigger_resolved")
  // ãƒˆãƒªã‚¬ãƒ¼æ¡ä»¶ãŒè§£æ¶ˆã•ã‚ŒãŸã‹
  resolvedAt            DateTime? @map("resolved_at")
  resolutionNotes       String?   @db.Text @map("resolution_notes")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([employeeId])
  @@index([triggerType])
  @@index([urgencyLevel])
  @@index([interviewScheduled])
  @@index([interviewCompleted])
  @@map("interview_automation_triggers")
}
```

### å®Ÿè£…ã«ã‚ˆã‚‹åŠ¹æœ

âœ… **è³ªå•ãƒãƒ³ã‚¯ã®å®Œå…¨ç®¡ç†**
- 892å•ã®å®šæœŸé¢è«‡ã€168å•ã®ã‚µãƒãƒ¼ãƒˆé¢è«‡ã€187å•ã®ç‰¹åˆ¥é¢è«‡ã‚’ä¸€å…ƒç®¡ç†
- AIç”Ÿæˆè³ªå•ã¨äººé–“ä½œæˆè³ªå•ã®æ··åœ¨ç®¡ç†
- ä½¿ç”¨é »åº¦ãƒ»åŠ¹æœæ¸¬å®šã«ã‚ˆã‚‹ç¶™ç¶šçš„æ”¹å–„

âœ… **çµŒé¨“å¹´æ•°åˆ¥ãƒ»è·ç¨®åˆ¥ãƒ»ç®¡ç†è·åˆ¥ã®æŸ”è»Ÿå¯¾å¿œ**
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã‚ˆã‚‹å‹•çš„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç”Ÿæˆ
- æ–°äºº1ãƒ¶æœˆç›®ã€3ãƒ¶æœˆç›®ã€6ãƒ¶æœˆç›®ã§ç•°ãªã‚‹è³ªå•
- çœ‹è­·å¸«ãƒ»ç†å­¦ç™‚æ³•å£«ãƒ»åŒ»äº‹èª²è·å“¡ã”ã¨ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

âœ… **AIåˆ†æã«ã‚ˆã‚‹æ´å¯Ÿã®è“„ç©**
- ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç›¸é–¢åˆ†æ
- é›¢è·ãƒªã‚¹ã‚¯è‡ªå‹•æ¤œå‡º
- å‰å›æ¯”è¼ƒã«ã‚ˆã‚‹æˆé•·ãƒ»æ‚ªåŒ–é ˜åŸŸã®ç‰¹å®š

âœ… **VoiceDriveé€£æºã«ã‚ˆã‚‹äºˆé˜²çš„é¢è«‡**
- ãƒã‚¬ãƒ†ã‚£ãƒ–æ„Ÿæƒ…ãŒç¶šã„ãŸã‚‰è‡ªå‹•é¢è«‡ææ¡ˆ
- æ®‹æ¥­ãƒ»ã‚¹ãƒˆãƒ¬ã‚¹é–¾å€¤è¶…éæ™‚ã®è‡ªå‹•ã‚¢ãƒ©ãƒ¼ãƒˆ
- ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®çµ±åˆçš„ãªè·å“¡æ”¯æ´

**10ç¨®é¡ã®é¢è«‡ä½“ç³»ã‚’ã€å°†æ¥ã®å¤‰æ›´ã«ã‚‚æŸ”è»Ÿã«å¯¾å¿œã§ãã‚‹è¨­è¨ˆã§å®Œå…¨å®Ÿè£…ï¼**

---

## 24. é¢è«‡æ—¥ç¨‹èª¿æ•´ãƒ»äºˆç´„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«LLMè‡ªå‹•ãƒãƒƒãƒãƒ³ã‚°ï¼‰

### èƒŒæ™¯ã¨è¦ä»¶
- **å®Ÿå‹™ã§æœ€ã‚‚å¤§å¤‰ãªæ—¥ç¨‹èª¿æ•´ã‚’è‡ªå‹•åŒ–**: é¢è«‡å¸Œæœ›è€…ã¨é¢è«‡æ‹…å½“è€…ã®åˆ¶ç´„ã‚’è€ƒæ…®ã—ã€ãƒ­ãƒ¼ã‚«ãƒ«LLMã§æœ€é©ãƒãƒƒãƒãƒ³ã‚°
- ä¸»è¦æ©Ÿèƒ½:
  - VoiceDriveã‚·ãƒ•ãƒˆé€£æºã«ã‚ˆã‚‹è‡ªå‹•åˆ¶ç´„ç”Ÿæˆ
  - ãƒ­ãƒ¼ã‚«ãƒ«LLMï¼ˆOllama, LlamaCppç­‰ï¼‰ã«ã‚ˆã‚‹æœ€é©å€™è£œææ¡ˆ
  - éå»ã®æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰ã®å­¦ç¿’
  - è¤‡é›‘ãªåˆ¶ç´„æ¡ä»¶ã®è‡ªå‹•è§£æ±º
  - äºˆç´„å¤‰æ›´ã®å®Œå…¨å±¥æ­´ç®¡ç†

- **ä¸è¶³ã—ã¦ã„ã‚‹é …ç›®**:
  - è·å“¡ãƒ»é¢è«‡æ‹…å½“è€…ã®æ—¥ç¨‹åˆ¶ç´„ã®ä½“ç³»çš„ç®¡ç†
  - LLMãƒãƒƒãƒãƒ³ã‚°ã®è©¦è¡Œãƒ­ã‚°ã¨å­¦ç¿’ãƒ‡ãƒ¼ã‚¿
  - é¢è«‡æ‹…å½“è€…ã®å¯ç”¨æ€§ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
  - äºˆç´„å¤‰æ›´ã®ç›£æŸ»è¨¼è·¡
  - ãƒãƒƒãƒãƒ³ã‚°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®è¨­å®šç®¡ç†

### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

#### 24-1. InterviewSchedulingConstraintï¼ˆæ—¥ç¨‹åˆ¶ç´„ç®¡ç†ï¼‰

**ç›®çš„**: è·å“¡ãƒ»é¢è«‡æ‹…å½“è€…ã®æ—¥ç¨‹åˆ¶ç´„ã‚’ä½“ç³»çš„ã«ç®¡ç†ã€‚VoiceDriveã‚·ãƒ•ãƒˆã¨ã®è‡ªå‹•é€£æºã€‚

```prisma
model InterviewSchedulingConstraint {
  id                    String    @id @default(cuid())

  // åˆ¶ç´„ã®ä¸»ä½“
  employeeId            String?   @map("employee_id")
  // NULL = é¢è«‡æ‹…å½“è€…ã®åˆ¶ç´„
  interviewerId         String?   @map("interviewer_id")
  // NULL = è·å“¡ã®åˆ¶ç´„
  constraintOwner       String    @map("constraint_owner")
  // employee, interviewerï¼ˆã©ã¡ã‚‰ã®åˆ¶ç´„ã‹æ˜ç¤ºï¼‰

  // åˆ¶ç´„ã‚¿ã‚¤ãƒ—
  constraintType        String    @map("constraint_type")
  // availableï¼ˆå¯èƒ½ï¼‰, unavailableï¼ˆä¸å¯ï¼‰, preferredï¼ˆå¸Œæœ›ï¼‰, avoidï¼ˆé¿ã‘ãŸã„ï¼‰

  // æ™‚é–“åˆ¶ç´„
  dayOfWeek             Int?      @map("day_of_week")
  // 0=æ—¥æ›œã€1=æœˆæ›œ...6=åœŸæ›œã€NULL=ç‰¹å®šæ—¥æŒ‡å®š
  startTime             String?   @map("start_time")
  // "09:00"
  endTime               String?   @map("end_time")
  // "17:00"
  specificDate          DateTime? @map("specific_date")
  // ç‰¹å®šæ—¥ã®åˆ¶ç´„ï¼ˆå¹´ä¼‘ã€ç ”ä¿®ç­‰ï¼‰

  // ç¹°ã‚Šè¿”ã—ãƒ‘ã‚¿ãƒ¼ãƒ³
  isRecurring           Boolean   @default(false) @map("is_recurring")
  recurrencePattern     String?   @map("recurrence_pattern")
  // weekly, biweekly, monthly, first_mondayç­‰
  recurringUntil        DateTime? @map("recurring_until")
  // ç¹°ã‚Šè¿”ã—çµ‚äº†æ—¥

  // VoiceDriveã‚·ãƒ•ãƒˆé€£æº
  voicedriveShiftId     String?   @map("voicedrive_shift_id")
  // VoiceDriveã®ã‚·ãƒ•ãƒˆIDã¨ç´ä»˜ã‘
  shiftType             String?   @map("shift_type")
  // day_shift, night_shift, off_day, night_shift_recoveryï¼ˆå¤œå‹¤æ˜ã‘ï¼‰
  autoGeneratedFromShift Boolean  @default(false) @map("auto_generated_from_shift")
  // ã‚·ãƒ•ãƒˆã‹ã‚‰è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸåˆ¶ç´„ã‹

  // ç†ç”±ãƒ»ãƒ¡ãƒ¢
  reason                String?   @db.Text
  // "å¤œå‹¤æ˜ã‘ã§ç–²åŠ´"ã€"å®šä¾‹ä¼šè­°"ã€"ç ”ä¿®å‚åŠ "ç­‰
  internalNote          String?   @db.Text @map("internal_note")
  // äººäº‹éƒ¨ç”¨ãƒ¡ãƒ¢

  // å„ªå…ˆåº¦
  priority              Int       @default(5) @map("priority")
  // 1-10ï¼ˆæ•°å­—ãŒå°ã•ã„ã»ã©é‡è¦ï¼‰
  // 1: çµ¶å¯¾ä¸å¯ï¼ˆå¤œå‹¤æ˜ã‘ï¼‰
  // 3: å¼·ãé¿ã‘ãŸã„ï¼ˆä¼šè­°äºˆå®šï¼‰
  // 5: ã‚„ã‚„é¿ã‘ãŸã„
  // 7: ã§ãã‚Œã°å¸Œæœ›ï¼ˆå¥½ããªæ™‚é–“å¸¯ï¼‰
  // 10: è»½ã„å¸Œæœ›
  isHardConstraint      Boolean   @default(false) @map("is_hard_constraint")
  // true = çµ¶å¯¾ã«é•åã§ããªã„åˆ¶ç´„
  // false = LLMãŒæŸ”è»Ÿã«åˆ¤æ–­å¯èƒ½

  // æœ‰åŠ¹æœŸé–“
  validFrom             DateTime  @default(now()) @map("valid_from")
  validUntil            DateTime? @map("valid_until")
  isActive              Boolean   @default(true) @map("is_active")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String?   @map("created_by")

  @@index([employeeId])
  @@index([interviewerId])
  @@index([dayOfWeek])
  @@index([specificDate])
  @@index([isActive])
  @@index([voicedriveShiftId])
  @@map("interview_scheduling_constraints")
}
```

#### 24-2. InterviewSchedulingAttemptï¼ˆLLMãƒãƒƒãƒãƒ³ã‚°è©¦è¡Œãƒ­ã‚°ï¼‰

**ç›®çš„**: ãƒ­ãƒ¼ã‚«ãƒ«LLMã«ã‚ˆã‚‹è‡ªå‹•ãƒãƒƒãƒãƒ³ã‚°ã®è©¦è¡Œã‚’å®Œå…¨è¨˜éŒ²ã€‚å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦æ´»ç”¨ã€‚

```prisma
model InterviewSchedulingAttempt {
  id                    String    @id @default(cuid())

  // ãƒãƒƒãƒãƒ³ã‚°å¯¾è±¡
  employeeId            String    @map("employee_id")
  employeeName          String?   @map("employee_name")
  interviewType         String    @map("interview_type")
  // new_employee_monthly, regular_annualç­‰
  urgencyLevel          String    @map("urgency_level")
  // low, medium, high, urgent
  requestedBy           String?   @map("requested_by")
  // è·å“¡æœ¬äººã€ä¸Šå¸ã€äººäº‹éƒ¨ç­‰

  // LLMãƒãƒƒãƒãƒ³ã‚°æƒ…å ±
  matchingEngine        String    @map("matching_engine")
  // local_llm_ollama, local_llm_llamacpp, local_llm_gemma, rule_based, hybrid
  llmModel              String?   @map("llm_model")
  // llama3.2, mistral, gemma2, qwen2.5ç­‰
  llmModelVersion       String?   @map("llm_model_version")
  // 3b, 7b, 14bç­‰
  matchingPrompt        String?   @db.Text @map("matching_prompt")
  // LLMã«é€ä¿¡ã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰

  // å…¥åŠ›ãƒ‡ãƒ¼ã‚¿
  inputConstraints      Json      @map("input_constraints")
  // {
  //   "employee": [...åˆ¶ç´„ãƒªã‚¹ãƒˆ],
  //   "interviewers": {...é¢è«‡æ‹…å½“è€…å€™è£œã¨åˆ¶ç´„}
  // }
  availableTimeSlots    Json?     @map("available_time_slots")
  // ãƒãƒƒãƒãƒ³ã‚°å‰ã®åˆ©ç”¨å¯èƒ½æ™‚é–“å¸¯

  // å€™è£œæ—¥æ™‚ï¼ˆLLMå‡ºåŠ›ï¼‰
  proposedSlots         Json      @map("proposed_slots")
  // [
  //   {
  //     "rank": 1,
  //     "date": "2025-10-15",
  //     "startTime": "10:00",
  //     "endTime": "11:00",
  //     "interviewerId": "INT_001",
  //     "interviewerName": "ç”°ä¸­ç®¡ç†è€…",
  //     "interviewerDepartment": "çœ‹è­·éƒ¨",
  //     "matchScore": 0.95,
  //     "reasons": [
  //       "è·å“¡å¸Œæœ›æ™‚é–“å¸¯ã«å®Œå…¨ä¸€è‡´",
  //       "é¢è«‡è€…ã®å°‚é–€åˆ†é‡ï¼ˆæ–°äººæ•™è‚²ï¼‰ãŒé©åˆ",
  //       "éå»ã®é¢è«‡å®Ÿç¸¾è‰¯å¥½ï¼ˆæº€è¶³åº¦4.5/5ï¼‰",
  //       "VoiceDriveã‚·ãƒ•ãƒˆã¨ç«¶åˆãªã—"
  //     ],
  //     "conflicts": [],
  //     "constraintsSatisfied": 8,
  //     "constraintsViolated": 0
  //   },
  //   {
  //     "rank": 2,
  //     "date": "2025-10-16",
  //     "startTime": "14:00",
  //     "endTime": "15:00",
  //     "interviewerId": "INT_002",
  //     "interviewerName": "ä½è—¤èª²é•·",
  //     "interviewerDepartment": "äººäº‹éƒ¨",
  //     "matchScore": 0.87,
  //     "reasons": [
  //       "ã‚­ãƒ£ãƒªã‚¢ç›¸è«‡ã®å°‚é–€å®¶",
  //       "ç©ºãæ™‚é–“ãŒç¢ºå®Ÿ"
  //     ],
  //     "conflicts": [
  //       "è·å“¡å¸Œæœ›æ™‚é–“ã‚ˆã‚Š2æ™‚é–“é…ã„"
  //     ],
  //     "constraintsSatisfied": 6,
  //     "constraintsViolated": 1
  //   },
  //   {
  //     "rank": 3,
  //     "date": "2025-10-17",
  //     "startTime": "09:00",
  //     "endTime": "10:00",
  //     "interviewerId": "INT_001",
  //     "interviewerName": "ç”°ä¸­ç®¡ç†è€…",
  //     "matchScore": 0.82,
  //     "reasons": ["æ¬¡å–„ã®å€™è£œ"],
  //     "conflicts": ["è·å“¡ã®ç¬¬2å¸Œæœ›æ—¥"],
  //     "constraintsSatisfied": 7,
  //     "constraintsViolated": 1
  //   }
  // ]

  // ãƒãƒƒãƒãƒ³ã‚°å“è³ª
  totalCandidates       Int       @map("total_candidates")
  // ææ¡ˆå€™è£œæ•°
  bestMatchScore        Float     @map("best_match_score")
  // æœ€é«˜ãƒãƒƒãƒã‚¹ã‚³ã‚¢ï¼ˆ0.0-1.0ï¼‰
  avgMatchScore         Float?    @map("avg_match_score")
  // å¹³å‡ãƒãƒƒãƒã‚¹ã‚³ã‚¢
  worstMatchScore       Float?    @map("worst_match_score")
  // æœ€ä½ãƒãƒƒãƒã‚¹ã‚³ã‚¢

  // åˆ¶ç´„å……è¶³åº¦
  totalConstraints      Int       @map("total_constraints")
  // ç·åˆ¶ç´„æ•°
  hardConstraintsSatisfied Int    @map("hard_constraints_satisfied")
  // æº€ãŸã—ãŸãƒãƒ¼ãƒ‰åˆ¶ç´„æ•°
  hardConstraintsViolated  Int    @map("hard_constraints_violated")
  // é•åã—ãŸãƒãƒ¼ãƒ‰åˆ¶ç´„æ•°
  softConstraintsSatisfied Int    @map("soft_constraints_satisfied")
  // æº€ãŸã—ãŸã‚½ãƒ•ãƒˆåˆ¶ç´„æ•°

  // çµæœ
  attemptStatus         String    @map("attempt_status")
  // successï¼ˆæˆåŠŸï¼‰, partialï¼ˆéƒ¨åˆ†æˆåŠŸï¼‰, failedï¼ˆå€™è£œãªã—ï¼‰, errorï¼ˆã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼ï¼‰
  selectedSlotRank      Int?      @map("selected_slot_rank")
  // è·å“¡ãŒé¸æŠã—ãŸå€™è£œã®ãƒ©ãƒ³ã‚¯ï¼ˆ1, 2, 3...ï¼‰
  selectedSlot          Json?     @map("selected_slot")
  // æœ€çµ‚çš„ã«é¸æŠã•ã‚ŒãŸã‚¹ãƒ­ãƒƒãƒˆ
  selectedAt            DateTime? @map("selected_at")
  bookingCreated        Boolean   @default(false) @map("booking_created")
  bookingId             String?   @map("booking_id")
  // Interviewãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ¬ã‚³ãƒ¼ãƒ‰

  // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
  processingTimeMs      Int?      @map("processing_time_ms")
  // LLMå‡¦ç†æ™‚é–“ï¼ˆãƒŸãƒªç§’ï¼‰
  llmTokensUsed         Int?      @map("llm_tokens_used")
  // ä½¿ç”¨ãƒˆãƒ¼ã‚¯ãƒ³æ•°ï¼ˆã‚³ã‚¹ãƒˆè¨ˆç®—ç”¨ã€ãƒ­ãƒ¼ã‚«ãƒ«LLMã§ã‚‚è¨˜éŒ²ï¼‰
  llmResponseTime       Int?      @map("llm_response_time")
  // LLMãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ï¼ˆãƒŸãƒªç§’ï¼‰

  // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
  userFeedback          String?   @map("user_feedback")
  // acceptedï¼ˆæ‰¿èªï¼‰, rejectedï¼ˆå…¨æ‹’å¦ï¼‰, modifiedï¼ˆä¿®æ­£ä¾é ¼ï¼‰, alternative_selectedï¼ˆä»£æ›¿æ¡ˆé¸æŠï¼‰
  feedbackComment       String?   @db.Text @map("feedback_comment")
  // è·å“¡ã‹ã‚‰ã®ã‚³ãƒ¡ãƒ³ãƒˆ
  feedbackScore         Int?      @map("feedback_score")
  // 1-5ï¼ˆæº€è¶³åº¦ï¼‰
  feedbackAt            DateTime? @map("feedback_at")

  // å­¦ç¿’ç”¨ãƒ‡ãƒ¼ã‚¿
  wasSuccessful         Boolean?  @map("was_successful")
  // æœ€çµ‚çš„ã«äºˆç´„æˆç«‹ã—ãŸã‹
  learningWeight        Float?    @default(1.0) @map("learning_weight")
  // ã“ã®ãƒ‡ãƒ¼ã‚¿ã®å­¦ç¿’é‡ã¿ï¼ˆæˆåŠŸä¾‹ã¯é«˜ãï¼‰

  // ã‚¨ãƒ©ãƒ¼æƒ…å ±
  errorMessage          String?   @db.Text @map("error_message")
  errorStack            String?   @db.Text @map("error_stack")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([employeeId])
  @@index([attemptStatus])
  @@index([bestMatchScore])
  @@index([wasSuccessful])
  @@index([createdAt])
  @@index([llmModel])
  @@map("interview_scheduling_attempts")
}
```

#### 24-3. InterviewerAvailabilityï¼ˆé¢è«‡æ‹…å½“è€…å¯ç”¨æ€§ï¼‰

**ç›®çš„**: é¢è«‡æ‹…å½“è€…ã®é€±æ¬¡ãƒ»æœˆæ¬¡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ç®¡ç†ã€‚LLMãƒãƒƒãƒãƒ³ã‚°ã®åŸºç¤ãƒ‡ãƒ¼ã‚¿ã€‚

```prisma
model InterviewerAvailability {
  id                    String    @id @default(cuid())

  // é¢è«‡æ‹…å½“è€…æƒ…å ±
  interviewerId         String    @map("interviewer_id")
  interviewerName       String    @map("interviewer_name")
  department            String?   @map("department")
  position              String?   @map("position")
  permissionLevel       Int?      @map("permission_level")
  // 6-13ï¼ˆäººè²¡çµ±æ‹¬æœ¬éƒ¨ã®æ¨©é™ãƒ¬ãƒ™ãƒ«ï¼‰

  // å°‚é–€åˆ†é‡
  specializations       Json?     @map("specializations")
  // ["æ–°äººæ•™è‚²", "ã‚­ãƒ£ãƒªã‚¢ç›¸è«‡", "ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹"]
  interviewTypes        Json      @map("interview_types")
  // ["new_employee_monthly", "career_support"]ï¼ˆå¯¾å¿œå¯èƒ½ãªé¢è«‡ç¨®é¡ï¼‰

  // åŸºæœ¬å¯ç”¨æ€§ï¼ˆç¹°ã‚Šè¿”ã—ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
  defaultAvailability   Json      @map("default_availability")
  // {
  //   "monday": [{ "start": "09:00", "end": "12:00" }, { "start": "14:00", "end": "17:00" }],
  //   "tuesday": [{ "start": "10:00", "end": "16:00" }],
  //   "wednesday": "unavailable",
  //   "thursday": [{ "start": "09:00", "end": "17:00" }],
  //   "friday": [{ "start": "13:00", "end": "17:00" }]
  // }

  // æœˆæ¬¡å®¹é‡
  maxInterviewsPerWeek  Int?      @default(10) @map("max_interviews_per_week")
  maxInterviewsPerMonth Int?      @default(40) @map("max_interviews_per_month")
  currentWeekCount      Int       @default(0) @map("current_week_count")
  // ä»Šé€±ã®äºˆç´„æ•°
  currentMonthCount     Int       @default(0) @map("current_month_count")
  // ä»Šæœˆã®äºˆç´„æ•°

  // ç‰¹åˆ¥ãªæœŸé–“ã®å¯ç”¨æ€§ï¼ˆä¸Šæ›¸ãï¼‰
  overrideAvailability  Json?     @map("override_availability")
  // [
  //   {
  //     "date": "2025-10-15",
  //     "status": "unavailable",
  //     "reason": "å‡ºå¼µ"
  //   },
  //   {
  //     "date": "2025-10-20",
  //     "slots": [{ "start": "10:00", "end": "12:00" }],
  //     "reason": "åˆå¾Œã®ã¿ä¸åœ¨"
  //   }
  // ]

  // éå»ã®å®Ÿç¸¾
  totalInterviewsConducted Int    @default(0) @map("total_interviews_conducted")
  avgSatisfactionScore     Float? @map("avg_satisfaction_score")
  // å¹³å‡æº€è¶³åº¦ï¼ˆ1-5ï¼‰
  successRate              Float? @map("success_rate")
  // äºˆç´„â†’å®Ÿæ–½ã®æˆåŠŸç‡ï¼ˆ%ï¼‰

  // ãƒãƒƒãƒãƒ³ã‚°å„ªå…ˆåº¦
  preferredBy           Json?     @map("preferred_by")
  // ["EMP_001", "EMP_050"]ï¼ˆã“ã®é¢è«‡è€…ã‚’å¸Œæœ›ã™ã‚‹è·å“¡ãƒªã‚¹ãƒˆï¼‰
  matchingPriority      Int       @default(5) @map("matching_priority")
  // 1-10ï¼ˆLLMãƒãƒƒãƒãƒ³ã‚°æ™‚ã®å„ªå…ˆåº¦ï¼‰

  // çŠ¶æ…‹ç®¡ç†
  isActive              Boolean   @default(true) @map("is_active")
  // é¢è«‡æ‹…å½“è€…ã¨ã—ã¦æ´»å‹•ä¸­ã‹
  suspendedUntil        DateTime? @map("suspended_until")
  // ä¸€æ™‚åœæ­¢æœŸé–“
  suspensionReason      String?   @db.Text @map("suspension_reason")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([interviewerId])
  @@index([isActive])
  @@index([department])
  @@map("interviewer_availability")
}
```

#### 24-4. InterviewBookingHistoryï¼ˆäºˆç´„å¤‰æ›´å±¥æ­´ï¼‰

**ç›®çš„**: äºˆç´„ã®ä½œæˆãƒ»å¤‰æ›´ãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã®å®Œå…¨ãªç›£æŸ»è¨¼è·¡ã€‚ã€Œãªãœã“ã®æ—¥ç¨‹ã«ãªã£ãŸã‹ã€ã‚’è¿½è·¡ã€‚

**äºˆç´„ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ãƒ­ãƒ¼**:
1. **tentative** (ä»®äºˆç´„å—ä»˜) â†’ LLMãŒå€™è£œã‚’æç¤ºã€è·å“¡ãŒé¸æŠå¾…ã¡
2. **pending_confirmation** (æ‰¿èªå¾…ã¡) â†’ è·å“¡ãŒé¸æŠã€é¢è«‡è€…ãƒ»äººäº‹éƒ¨ã®æ‰¿èªå¾…ã¡
3. **confirmed** (æœ¬äºˆç´„ç¢ºå®š) â†’ å…¨å“¡ãŒæ‰¿èªã€ç¢ºå®šé€šçŸ¥é€ä¿¡
4. **rescheduled** (æ—¥ç¨‹å¤‰æ›´) â†’ äºˆç´„å¾Œã«æ—¥ç¨‹å¤‰æ›´ãŒç™ºç”Ÿ
5. **cancelled** (ã‚­ãƒ£ãƒ³ã‚»ãƒ«) â†’ äºˆç´„ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚ŒãŸ
6. **completed** (å®Ÿæ–½æ¸ˆã¿) â†’ é¢è«‡ãŒå®Œäº†
7. **no_show** (ä¸å‚åŠ ) â†’ äºˆç´„æ™‚é–“ã«ä¸å‚åŠ 

```prisma
model InterviewBookingHistory {
  id                    String    @id @default(cuid())

  // äºˆç´„æƒ…å ±
  bookingId             String    @map("booking_id")
  // Interviewãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ¬ã‚³ãƒ¼ãƒ‰
  employeeId            String    @map("employee_id")
  interviewerId         String?   @map("interviewer_id")

  // å¤‰æ›´ã‚¿ã‚¤ãƒ—
  actionType            String    @map("action_type")
  // tentative, pending_confirmation, confirmed, rescheduled, cancelled, completed, no_show
  actionReason          String?   @db.Text @map("action_reason")
  // "è·å“¡ã®éƒ½åˆ", "é¢è«‡è€…ã®æ€¥ç”¨", "ã‚·ã‚¹ãƒ†ãƒ è‡ªå‹•èª¿æ•´"ç­‰

  // å¤‰æ›´å‰ã®çŠ¶æ…‹
  previousState         Json?     @map("previous_state")
  // {
  //   "date": "2025-10-15",
  //   "startTime": "10:00",
  //   "endTime": "11:00",
  //   "interviewerId": "INT_001",
  //   "status": "scheduled"
  // }

  // å¤‰æ›´å¾Œã®çŠ¶æ…‹
  newState              Json      @map("new_state")
  // {
  //   "date": "2025-10-17",
  //   "startTime": "14:00",
  //   "endTime": "15:00",
  //   "interviewerId": "INT_002",
  //   "status": "rescheduled"
  // }

  // å¤‰æ›´ã®è©³ç´°
  changedFields         Json?     @map("changed_fields")
  // ["date", "startTime", "interviewerId"]
  rescheduleCount       Int?      @map("reschedule_count")
  // ã“ã®äºˆç´„ã®ç´¯è¨ˆå¤‰æ›´å›æ•°

  // LLMå†ãƒãƒƒãƒãƒ³ã‚°æƒ…å ±
  triggeredRematching   Boolean   @default(false) @map("triggered_rematching")
  // å¤‰æ›´ã«ã‚ˆã‚ŠLLMå†ãƒãƒƒãƒãƒ³ã‚°ãŒå®Ÿè¡Œã•ã‚ŒãŸã‹
  rematchingAttemptId   String?   @map("rematching_attempt_id")
  // InterviewSchedulingAttempt.id

  // é€šçŸ¥æƒ…å ±
  notificationSent      Boolean   @default(false) @map("notification_sent")
  notificationSentTo    Json?     @map("notification_sent_to")
  // {
  //   "employee": true,
  //   "interviewer": true,
  //   "hr_dept": false
  // }
  notificationSentAt    DateTime? @map("notification_sent_at")

  // å¤‰æ›´å®Ÿæ–½è€…
  actionPerformedBy     String    @map("action_performed_by")
  // è·å“¡æœ¬äººã€é¢è«‡è€…ã€äººäº‹éƒ¨ã€ã‚·ã‚¹ãƒ†ãƒ ï¼ˆè‡ªå‹•ï¼‰
  performedByUserId     String?   @map("performed_by_user_id")
  performedByName       String?   @map("performed_by_name")

  // ã‚³ã‚¹ãƒˆãƒ»å½±éŸ¿åˆ†æ
  impactScore           Float?    @map("impact_score")
  // å¤‰æ›´ã®å½±éŸ¿åº¦ï¼ˆ0.0-1.0ã€ç›´å‰å¤‰æ›´ã¯1.0ï¼‰
  relatedChanges        Int?      @default(0) @map("related_changes")
  // ã“ã®å¤‰æ›´ã«ã‚ˆã‚Šç™ºç”Ÿã—ãŸé–¢é€£å¤‰æ›´æ•°

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  actionTimestamp       DateTime  @default(now()) @map("action_timestamp")
  createdAt             DateTime  @default(now()) @map("created_at")

  @@index([bookingId])
  @@index([employeeId])
  @@index([actionType])
  @@index([actionTimestamp])
  @@map("interview_booking_history")
}
```

#### 24-5. SchedulingOptimizationConfigï¼ˆæœ€é©åŒ–è¨­å®šç®¡ç†ï¼‰

**ç›®çš„**: LLMãƒãƒƒãƒãƒ³ã‚°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€é‡ã¿ä»˜ã‘ã€ãƒ¢ãƒ‡ãƒ«è¨­å®šã‚’ä¸€å…ƒç®¡ç†ã€‚å®Ÿé¨“çš„ãªèª¿æ•´ã‚‚è¨˜éŒ²ã€‚

```prisma
model SchedulingOptimizationConfig {
  id                    String    @id @default(cuid())

  // è¨­å®šå
  configName            String    @unique @map("config_name")
  // "default", "high_urgency", "new_employee_priority"ç­‰
  configDescription     String?   @db.Text @map("config_description")

  // LLMãƒ¢ãƒ‡ãƒ«è¨­å®š
  defaultLlmEngine      String    @map("default_llm_engine")
  // local_llm_ollama, local_llm_llamacpp
  defaultLlmModel       String    @map("default_llm_model")
  // llama3.2, mistral, gemma2
  llmTemperature        Float?    @default(0.7) @map("llm_temperature")
  // 0.0-1.0ï¼ˆå‰µé€ æ€§ï¼‰
  llmMaxTokens          Int?      @default(2000) @map("llm_max_tokens")

  // ãƒãƒƒãƒãƒ³ã‚°é‡ã¿ä»˜ã‘
  matchingWeights       Json      @map("matching_weights")
  // {
  //   "time_preference": 0.35,        // æ™‚é–“å¸Œæœ›ã®é‡ã¿
  //   "interviewer_expertise": 0.25,  // å°‚é–€æ€§ã®é‡ã¿
  //   "past_performance": 0.20,       // éå»å®Ÿç¸¾ã®é‡ã¿
  //   "availability": 0.15,           // ç©ºãçŠ¶æ³ã®é‡ã¿
  //   "workload_balance": 0.05        // è² è·åˆ†æ•£ã®é‡ã¿
  // }

  // åˆ¶ç´„å‡¦ç†è¨­å®š
  hardConstraintPenalty Float     @default(1000.0) @map("hard_constraint_penalty")
  // ãƒãƒ¼ãƒ‰åˆ¶ç´„é•åæ™‚ã®ãƒšãƒŠãƒ«ãƒ†ã‚£
  softConstraintPenalty Float     @default(10.0) @map("soft_constraint_penalty")
  // ã‚½ãƒ•ãƒˆåˆ¶ç´„é•åæ™‚ã®ãƒšãƒŠãƒ«ãƒ†ã‚£

  // å€™è£œç”Ÿæˆè¨­å®š
  maxCandidates         Int       @default(5) @map("max_candidates")
  // ææ¡ˆã™ã‚‹å€™è£œæ•°ï¼ˆé€šå¸¸3-5ï¼‰
  minMatchScore         Float     @default(0.5) @map("min_match_score")
  // æœ€ä½ãƒãƒƒãƒã‚¹ã‚³ã‚¢é–¾å€¤
  diversityBonus        Float?    @default(0.1) @map("diversity_bonus")
  // å€™è£œã®å¤šæ§˜æ€§ãƒœãƒ¼ãƒŠã‚¹

  // æ™‚é–“æ è¨­å®š
  defaultInterviewDuration Int    @default(60) @map("default_interview_duration")
  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé¢è«‡æ™‚é–“ï¼ˆåˆ†ï¼‰
  bufferTimeBefore      Int       @default(15) @map("buffer_time_before")
  // é¢è«‡å‰ãƒãƒƒãƒ•ã‚¡ï¼ˆåˆ†ï¼‰
  bufferTimeAfter       Int       @default(15) @map("buffer_time_after")
  // é¢è«‡å¾Œãƒãƒƒãƒ•ã‚¡ï¼ˆåˆ†ï¼‰

  // å„ªå…ˆåº¦è¨­å®š
  urgencyMultipliers    Json?     @map("urgency_multipliers")
  // {
  //   "urgent": 2.0,
  //   "high": 1.5,
  //   "medium": 1.0,
  //   "low": 0.7
  // }

  // VoiceDriveé€£æºè¨­å®š
  voicedriveIntegration Boolean   @default(true) @map("voicedrive_integration")
  // VoiceDriveã‚·ãƒ•ãƒˆé€£æºã‚’æœ‰åŠ¹åŒ–
  shiftBufferHours      Int?      @default(8) @map("shift_buffer_hours")
  // å¤œå‹¤æ˜ã‘ã‹ã‚‰ã®ãƒãƒƒãƒ•ã‚¡æ™‚é–“

  // å­¦ç¿’è¨­å®š
  enableLearning        Boolean   @default(true) @map("enable_learning")
  // éå»ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã®å­¦ç¿’ã‚’æœ‰åŠ¹åŒ–
  learningDecayRate     Float?    @default(0.95) @map("learning_decay_rate")
  // å¤ã„ãƒ‡ãƒ¼ã‚¿ã®é‡ã¿æ¸›è¡°ç‡
  minLearningDataPoints Int?      @default(10) @map("min_learning_data_points")
  // å­¦ç¿’ã«å¿…è¦ãªæœ€å°ãƒ‡ãƒ¼ã‚¿æ•°

  // A/Bãƒ†ã‚¹ãƒˆ
  isExperimental        Boolean   @default(false) @map("is_experimental")
  experimentName        String?   @map("experiment_name")
  controlGroupRatio     Float?    @map("control_group_ratio")
  // å¯¾ç…§ç¾¤ã®å‰²åˆï¼ˆ0.0-1.0ï¼‰

  // çŠ¶æ…‹ç®¡ç†
  isActive              Boolean   @default(true) @map("is_active")
  // ç¾åœ¨ä½¿ç”¨ä¸­ã®è¨­å®šã‹
  activatedAt           DateTime? @map("activated_at")
  deactivatedAt         DateTime? @map("deactivated_at")

  // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çµ±è¨ˆ
  totalAttempts         Int       @default(0) @map("total_attempts")
  successRate           Float?    @map("success_rate")
  avgMatchScore         Float?    @map("avg_match_score")
  avgProcessingTime     Int?      @map("avg_processing_time")
  // ãƒŸãƒªç§’

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String?   @map("created_by")

  @@index([isActive])
  @@index([configName])
  @@map("scheduling_optimization_configs")
}
```

### äºˆç´„æ‰¿èªãƒ•ãƒ­ãƒ¼ã®è©³ç´°

#### ãƒ•ãƒ­ãƒ¼1: ä»®äºˆç´„å—ä»˜ â†’ æœ¬äºˆç´„ç¢ºå®šï¼ˆé€šå¸¸ãƒ•ãƒ­ãƒ¼ï¼‰

```
1. [tentative] ä»®äºˆç´„å—ä»˜
   - LLMãŒæœ€é©å€™è£œã‚’3-5æ¡ˆç”Ÿæˆ
   - è·å“¡ã«é¸æŠè‚¢ã‚’æç¤º
   - InterviewSchedulingAttempt.proposedSlotsã«å€™è£œè¨˜éŒ²

2. [pending_confirmation] æ‰¿èªå¾…ã¡
   - è·å“¡ãŒå¸Œæœ›æ—¥ç¨‹ã‚’é¸æŠ
   - é¢è«‡æ‹…å½“è€…ã¸é€šçŸ¥é€ä¿¡
   - ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰äººäº‹éƒ¨æ‰¿èªãŒå¿…è¦ãªå ´åˆã¯äººäº‹éƒ¨ã¸é€šçŸ¥

3. [confirmed] æœ¬äºˆç´„ç¢ºå®š
   - é¢è«‡æ‹…å½“è€…ãŒæ‰¿èª
   - å…¨é–¢ä¿‚è€…ã¸ç¢ºå®šé€šçŸ¥é€ä¿¡ï¼ˆãƒ¡ãƒ¼ãƒ«ãƒ»VoiceDriveï¼‰
   - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹›å¾…é€ä¿¡
   - InterviewBookingHistory.actionType = 'confirmed'

4. [completed] é¢è«‡å®Ÿæ–½å®Œäº†
   - é¢è«‡æ‹…å½“è€…ãŒå®Œäº†å ±å‘Š
   - é¢è«‡è¨˜éŒ²ã‚’ä¿å­˜
   - æº€è¶³åº¦ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ä¾é ¼
```

#### ãƒ•ãƒ­ãƒ¼2: æ—¥ç¨‹å¤‰æ›´ãŒç™ºç”Ÿã—ãŸå ´åˆ

```
1. [rescheduled] æ—¥ç¨‹å¤‰æ›´
   - è·å“¡ã¾ãŸã¯é¢è«‡æ‹…å½“è€…ãŒå¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
   - InterviewBookingHistory.previousStateã«å¤‰æ›´å‰æƒ…å ±ä¿å­˜
   - triggeredRematching = trueã®å ´åˆã€LLMãŒæ–°å€™è£œç”Ÿæˆ

2. [pending_confirmation] å†æ‰¿èªå¾…ã¡
   - å¤‰æ›´å¾Œã®æ—¥ç¨‹ã‚’å†åº¦æ‰¿èªãƒ—ãƒ­ã‚»ã‚¹
   - rescheduleCountã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ
   - é–¢ä¿‚è€…ã¸å¤‰æ›´é€šçŸ¥

3. [confirmed] å†ç¢ºå®š
   - å…¨å“¡ãŒæ–°æ—¥ç¨‹ã‚’æ‰¿èª
   - ç¢ºå®šé€šçŸ¥å†é€ä¿¡
```

#### ãƒ•ãƒ­ãƒ¼3: ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»ä¸å‚åŠ 

```
1. [cancelled] ã‚­ãƒ£ãƒ³ã‚»ãƒ«
   - è·å“¡ã¾ãŸã¯é¢è«‡æ‹…å½“è€…ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«
   - actionReasonã«ç†ç”±è¨˜éŒ²ï¼ˆå¿…é ˆï¼‰
   - é–¢ä¿‚è€…ã¸ã‚­ãƒ£ãƒ³ã‚»ãƒ«é€šçŸ¥

2. [no_show] ä¸å‚åŠ 
   - äºˆç´„æ™‚é–“ã«è·å“¡ãŒä¸å‚åŠ 
   - é¢è«‡æ‹…å½“è€…ãŒä¸å‚åŠ å ±å‘Š
   - ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—é¢è«‡ã‚’è‡ªå‹•ææ¡ˆ
```

### æ‰¿èªæ¨©é™ã®è¨­å®šä¾‹

```json
// InterviewSchedulingAttempt.proposedSlots[0]
{
  "rank": 1,
  "date": "2025-10-15",
  "startTime": "10:00",
  "interviewerId": "INT_001",
  "matchScore": 0.95,
  "requiresApproval": {
    "interviewer": true,      // é¢è«‡æ‹…å½“è€…ã®æ‰¿èªå¿…é ˆ
    "hr_department": false,   // äººäº‹éƒ¨æ‰¿èªä¸è¦ï¼ˆé€šå¸¸é¢è«‡ï¼‰
    "department_head": false  // éƒ¨ç½²é•·æ‰¿èªä¸è¦
  },
  "autoConfirmIfNoResponse": false, // ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè‡ªå‹•æ‰¿èªã—ãªã„
  "responseDeadline": "2025-10-10T17:00:00Z"
}
```

### å®Ÿè£…ã«ã‚ˆã‚‹åŠ¹æœ

âœ… **ä»®äºˆç´„â†’æœ¬äºˆç´„ã®å®Œå…¨ãªçŠ¶æ…‹ç®¡ç†**
- 7ã¤ã®äºˆç´„ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§å…¨ãƒ•ãƒ­ãƒ¼ã‚’ã‚«ãƒãƒ¼
- ä»®äºˆç´„æ™‚ç‚¹ã§ã¯äºˆå®šã‚’ä»®æŠ¼ã•ãˆã€æœ¬äºˆç´„ç¢ºå®šå¾Œã«æ­£å¼ç¢ºä¿
- æ‰¿èªå¾…ã¡ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã®è‡ªå‹•å‡¦ç†

âœ… **å®Ÿå‹™ã§æœ€ã‚‚å¤§å¤‰ãªæ—¥ç¨‹èª¿æ•´ã‚’å®Œå…¨è‡ªå‹•åŒ–**
- VoiceDriveã‚·ãƒ•ãƒˆã‹ã‚‰è‡ªå‹•åˆ¶ç´„ç”Ÿæˆ
- ãƒ­ãƒ¼ã‚«ãƒ«LLMï¼ˆOllamaç­‰ï¼‰ã§æœ€é©å€™è£œã‚’3-5æ¡ˆæç¤º
- è·å“¡ã¯é¸ã¶ã ã‘ï¼ˆèª¿æ•´ä½œæ¥­ã‚¼ãƒ­ï¼‰

âœ… **è¤‡é›‘ãªåˆ¶ç´„ã‚’è‡ªå‹•è§£æ±º**
- å¤œå‹¤æ˜ã‘ã¯åˆå¾Œã®ã¿ã€å®šä¾‹ä¼šè­°ã¯é¿ã‘ã‚‹ç­‰
- ãƒãƒ¼ãƒ‰åˆ¶ç´„ï¼ˆçµ¶å¯¾ï¼‰ã¨ã‚½ãƒ•ãƒˆåˆ¶ç´„ï¼ˆå¸Œæœ›ï¼‰ã‚’åŒºåˆ¥
- é¢è«‡æ‹…å½“è€…ã®å°‚é–€æ€§ãƒ»éå»å®Ÿç¸¾ã‚‚è€ƒæ…®

âœ… **ç¶™ç¶šçš„å­¦ç¿’ã«ã‚ˆã‚‹æ”¹å–„**
- æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å­¦ç¿’ï¼ˆã€Œç”°ä¸­ç®¡ç†è€…Ã—ç«æ›œåˆå‰Ã—æ–°äººé¢è«‡ã€ã¯é«˜è©•ä¾¡ï¼‰
- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‹ã‚‰é‡ã¿ä»˜ã‘è‡ªå‹•èª¿æ•´
- A/Bãƒ†ã‚¹ãƒˆã§æœ€é©ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¢ç´¢

âœ… **å®Œå…¨ãªç›£æŸ»è¨¼è·¡**
- ã€Œãªãœã“ã®æ—¥ç¨‹ã«ãªã£ãŸã‹ã€ã‚’å®Œå…¨è¨˜éŒ²
- LLMã®åˆ¤æ–­ç†ç”±ã‚‚ä¿å­˜
- äºˆç´„å¤‰æ›´ã®å½±éŸ¿åˆ†æ
- ä»®äºˆç´„â†’æ‰¿èªå¾…ã¡â†’æœ¬äºˆç´„ã®å…¨å±¥æ­´è¿½è·¡

âœ… **å°†æ¥ã®æ‹¡å¼µæ€§**
- é¢è«‡ä»¥å¤–ã«ã‚‚å¿œç”¨å¯èƒ½ï¼ˆç ”ä¿®ã€å¥åº·è¨ºæ–­ã€æ¡ç”¨é¢æ¥ï¼‰
- ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãƒ»ãƒ¢ãƒ‡ãƒ«ã®åˆ‡ã‚Šæ›¿ãˆãŒå®¹æ˜“
- æ–°ã—ã„åˆ¶ç´„ã‚¿ã‚¤ãƒ—ã®è¿½åŠ ã‚‚æŸ”è»Ÿ
- å¤šæ®µéšæ‰¿èªãƒ•ãƒ­ãƒ¼ã¸ã®æ‹¡å¼µãŒå®¹æ˜“

**äººäº‹éƒ¨ãŒæœ€ã‚‚è‹¦åŠ´ã™ã‚‹æ—¥ç¨‹èª¿æ•´ã‚’ã€ä»®äºˆç´„ã‹ã‚‰æœ¬äºˆç´„ç¢ºå®šã¾ã§ã€AIãŒè‡ªå‹•åŒ–ã—ãªãŒã‚‰å­¦ç¿’ã—ç¶šã‘ã¾ã™ï¼**

---

## Section 25: ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ãƒ»é‹ç”¨åŸºç›¤ï¼ˆé€šçŸ¥ãƒ»ç›£æŸ»ãƒ­ã‚°ãƒ»ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹é€šå ±ï¼‰

### èƒŒæ™¯ãƒ»ç›®çš„

**ãƒšãƒ¼ã‚¸URL**:
- [/admin/notifications](https://staff-medical-system-v2.vercel.app/admin/notifications)
- [/admin/audit-log](https://staff-medical-system-v2.vercel.app/admin/audit-log)
- [/admin/backup](https://staff-medical-system-v2.vercel.app/admin/backup)
- [/compliance](https://staff-medical-system-v2.vercel.app/compliance)

**å®Ÿè£…ç¢ºèªå†…å®¹**:
- é€šçŸ¥ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ï¼ˆDBéšœå®³ã€APIç•°å¸¸ã€MCPåˆ‡æ–­ç­‰ï¼‰
- ãƒ¡ãƒ¼ãƒ«ã€Slackã€VoiceDriveå†…é€šçŸ¥ã¸ã®é…ä¿¡
- ç›£æŸ»ãƒ­ã‚°ï¼ˆå…¨æ“ä½œå±¥æ­´ã®è¨˜éŒ²ï¼‰
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ãƒªã‚¹ãƒˆã‚¢æ©Ÿèƒ½
- ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹çª“å£ï¼ˆãƒãƒ©ã‚¹ãƒ¡ãƒ³ãƒˆãƒ»ä¸æ­£é€šå ±ç®¡ç†ï¼‰

**ç¾çŠ¶ã®èª²é¡Œ**:
- é€šçŸ¥ãƒ«ãƒ¼ãƒ«ãƒ»é…ä¿¡å±¥æ­´ã®æ°¸ç¶šåŒ–ãŒä¸è¶³
- ç›£æŸ»ãƒ­ã‚°ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ»æ¤œç´¢æ©Ÿèƒ½ãŒæœªå®Ÿè£…
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ»å±¥æ­´ã®ç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«ãŒãªã„
- ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹é€šå ±ã®å®Œå…¨ãªè¨¼è·¡ç®¡ç†ãŒä¸ååˆ†

### è¿½åŠ ãŒå¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆ5ã¤ï¼‰

#### 1. SystemNotificationRuleï¼ˆé€šçŸ¥ãƒ«ãƒ¼ãƒ«è¨­å®šï¼‰

```prisma
model SystemNotificationRule {
  id                    String    @id @default(cuid())
  ruleCode              String    @unique @map("rule_code")
  // db_connection_error, api_error_rate, mcp_connection_lost, etc.
  ruleName              String    @map("rule_name")
  // ã€ŒDBæ¥ç¶šã‚¨ãƒ©ãƒ¼ã€ã€ŒAPIç•°å¸¸ã‚¨ãƒ©ãƒ¼ç‡ã€ç­‰
  ruleCategory          String    @map("rule_category")
  // database, api, mcp, system, backup, integration

  // ç›£è¦–æ¡ä»¶
  condition             String    @db.Text @map("condition")
  // ã€Œãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®æ¥ç¶šãŒå¤±æ•—ã—ãŸæ™‚ã€
  conditionExpression   Json?     @map("condition_expression")
  // {
  //   "type": "threshold",
  //   "metric": "api_error_rate",
  //   "operator": ">",
  //   "threshold": 10,
  //   "unit": "percent"
  // }

  // é‡å¤§åº¦
  severity              String    @map("severity")
  // critical, high, medium, low

  // é€šçŸ¥å…ˆ
  notifyByEmail         Boolean   @default(false) @map("notify_by_email")
  emailAddresses        Json?     @map("email_addresses")
  // ["admin@example.com", "hr@example.com"]
  notifyBySlack         Boolean   @default(false) @map("notify_by_slack")
  slackWebhookUrl       String?   @map("slack_webhook_url")
  notifyByVoiceDrive    Boolean   @default(false) @map("notify_by_voicedrive")
  voicedriveUserIds     Json?     @map("voicedrive_user_ids")
  // ["USER_001", "USER_002"]
  notifyBySMS           Boolean   @default(false) @map("notify_by_sms")
  smsPhoneNumbers       Json?     @map("sms_phone_numbers")

  // é€šçŸ¥æŠ‘åˆ¶ï¼ˆåŒã˜ã‚¢ãƒ©ãƒ¼ãƒˆã®é€£ç¶šé€ä¿¡é˜²æ­¢ï¼‰
  cooldownMinutes       Int       @default(0) @map("cooldown_minutes")
  // 0 = æ¯å›é€šçŸ¥ã€5 = 5åˆ†é–“ã¯å†é€šçŸ¥ã—ãªã„

  // é€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
  notificationTemplate  String?   @db.Text @map("notification_template")
  // ã€Œ[ç·Šæ€¥] {{systemName}}ã§DBæ¥ç¶šã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚è‡³æ€¥ç¢ºèªã—ã¦ãã ã•ã„ã€‚ã€
  includeStackTrace     Boolean   @default(false) @map("include_stack_trace")
  includeSystemInfo     Boolean   @default(true) @map("include_system_info")

  // è‡ªå‹•ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  autoExecuteAction     Boolean   @default(false) @map("auto_execute_action")
  actionScript          String?   @db.Text @map("action_script")
  // ä¾‹: ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å¤±æ•—æ™‚ã«å†è©¦è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ

  // æœ‰åŠ¹åŒ–çŠ¶æ…‹
  isEnabled             Boolean   @default(true) @map("is_enabled")
  enabledAt             DateTime? @map("enabled_at")
  disabledAt            DateTime? @map("disabled_at")
  disabledReason        String?   @db.Text @map("disabled_reason")

  // çµ±è¨ˆæƒ…å ±
  totalTriggers         Int       @default(0) @map("total_triggers")
  totalNotifications    Int       @default(0) @map("total_notifications")
  lastTriggeredAt       DateTime? @map("last_triggered_at")
  avgResponseTime       Float?    @map("avg_response_time")
  // é€šçŸ¥é€ä¿¡ã«ã‹ã‹ã‚‹å¹³å‡æ™‚é–“ï¼ˆç§’ï¼‰

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String?   @map("created_by")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  notifications         SystemNotificationLog[]

  @@index([ruleCategory])
  @@index([severity])
  @@index([isEnabled])
  @@index([lastTriggeredAt])
  @@map("system_notification_rules")
}
```

#### 2. SystemNotificationLogï¼ˆé€šçŸ¥é…ä¿¡å±¥æ­´ï¼‰

```prisma
model SystemNotificationLog {
  id                    String    @id @default(cuid())
  ruleId                String    @map("rule_id")
  ruleCode              String    @map("rule_code")
  ruleName              String    @map("rule_name")

  // ãƒˆãƒªã‚¬ãƒ¼æƒ…å ±
  triggeredAt           DateTime  @default(now()) @map("triggered_at")
  triggerSource         String?   @map("trigger_source")
  // system_monitor, api_gateway, mcp_client, backup_scheduler
  triggerContext        Json?     @map("trigger_context")
  // {
  //   "errorCode": "ECONNREFUSED",
  //   "host": "lightsail-db.example.com",
  //   "port": 3306,
  //   "attemptCount": 3
  // }

  // é€šçŸ¥å†…å®¹
  notificationTitle     String    @map("notification_title")
  notificationBody      String    @db.Text @map("notification_body")
  severity              String    @map("severity")

  // é…ä¿¡çŠ¶æ³
  sentToEmail           Boolean   @default(false) @map("sent_to_email")
  emailSentAt           DateTime? @map("email_sent_at")
  emailStatus           String?   @map("email_status")
  // sent, failed, bounced
  emailError            String?   @db.Text @map("email_error")

  sentToSlack           Boolean   @default(false) @map("sent_to_slack")
  slackSentAt           DateTime? @map("slack_sent_at")
  slackStatus           String?   @map("slack_status")
  slackMessageId        String?   @map("slack_message_id")

  sentToVoiceDrive      Boolean   @default(false) @map("sent_to_voicedrive")
  voicedriveSentAt      DateTime? @map("voicedrive_sent_at")
  voicedriveStatus      String?   @map("voicedrive_status")
  voicedriveNotificationId String? @map("voicedrive_notification_id")

  sentToSMS             Boolean   @default(false) @map("sent_to_sms")
  smsSentAt             DateTime? @map("sms_sent_at")
  smsStatus             String?   @map("sms_status")

  // å…¨ä½“ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  overallStatus         String    @default("pending") @map("overall_status")
  // pending, sent, partial_failure, failed
  totalRecipients       Int       @default(0) @map("total_recipients")
  successfulDeliveries  Int       @default(0) @map("successful_deliveries")
  failedDeliveries      Int       @default(0) @map("failed_deliveries")

  // å‡¦ç†æ™‚é–“
  processingStartedAt   DateTime? @map("processing_started_at")
  processingCompletedAt DateTime? @map("processing_completed_at")
  processingDuration    Int?      @map("processing_duration")
  // ãƒŸãƒªç§’

  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  acknowledgedBy        String?   @map("acknowledged_by")
  acknowledgedAt        DateTime? @map("acknowledged_at")
  acknowledgeNote       String?   @db.Text @map("acknowledge_note")
  resolvedBy            String?   @map("resolved_by")
  resolvedAt            DateTime? @map("resolved_at")
  resolutionNote        String?   @db.Text @map("resolution_note")

  // å†é€šçŸ¥æŠ‘åˆ¶
  cooldownUntil         DateTime? @map("cooldown_until")
  suppressedCount       Int       @default(0) @map("suppressed_count")
  // ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ä¸­ã«æŠ‘åˆ¶ã•ã‚ŒãŸé€šçŸ¥æ•°

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  rule                  SystemNotificationRule @relation(fields: [ruleId], references: [id])

  @@index([ruleId])
  @@index([triggeredAt])
  @@index([severity])
  @@index([overallStatus])
  @@index([acknowledgedBy])
  @@map("system_notification_logs")
}
```

#### 3. SystemAuditLogï¼ˆç›£æŸ»ãƒ­ã‚°ï¼‰

```prisma
model SystemAuditLog {
  id                    String    @id @default(cuid())

  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±
  action                String    @map("action")
  // CREATE, READ, UPDATE, DELETE, LOGIN, LOGOUT, EXPORT, IMPORT
  actionType            String    @map("action_type")
  // ãƒ‡ãƒ¼ã‚¿æ“ä½œã€èªè¨¼ã€ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã€è¨­å®šå¤‰æ›´ã€ã‚·ã‚¹ãƒ†ãƒ æ“ä½œ
  resourceType          String    @map("resource_type")
  // Employee, Department, Interview, EvaluationSheet, MasterData, etc.
  resourceId            String?   @map("resource_id")
  resourceName          String?   @map("resource_name")

  // å®Ÿè¡Œè€…æƒ…å ±
  userId                String    @map("user_id")
  userName              String    @map("user_name")
  userEmail             String?   @map("user_email")
  userRole              String?   @map("user_role")
  // admin, hr_manager, department_head, staff
  permissionLevel       Int?      @map("permission_level")

  // ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±
  sessionId             String?   @map("session_id")
  ipAddress             String?   @map("ip_address")
  userAgent             String?   @db.Text @map("user_agent")
  deviceType            String?   @map("device_type")
  // desktop, mobile, tablet

  // æ“ä½œå†…å®¹
  operationDetails      Json?     @map("operation_details")
  // {
  //   "before": { "name": "å±±ç”°å¤ªéƒ", "status": "active" },
  //   "after": { "name": "å±±ç”°å¤ªéƒ", "status": "inactive" },
  //   "changedFields": ["status"]
  // }
  sqlQuery              String?   @db.Text @map("sql_query")
  // å®Ÿéš›ã«å®Ÿè¡Œã•ã‚ŒãŸSQLã‚¯ã‚¨ãƒªï¼ˆæ©Ÿå¯†æƒ…å ±ã¯ãƒã‚¹ã‚¯ï¼‰
  affectedRows          Int?      @map("affected_rows")

  // çµæœ
  status                String    @default("success") @map("status")
  // success, failed, partial_success, unauthorized, forbidden
  errorMessage          String?   @db.Text @map("error_message")
  errorStackTrace       String?   @db.Text @map("error_stack_trace")

  // ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹
  sensitiveDataAccessed Boolean   @default(false) @map("sensitive_data_accessed")
  // çµ¦ä¸ã€å¥åº·æƒ…å ±ã€è©•ä¾¡çµæœç­‰ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
  gdprRelevant          Boolean   @default(false) @map("gdpr_relevant")
  dataExportPath        String?   @map("data_export_path")
  // ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹

  // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
  suspiciousActivity    Boolean   @default(false) @map("suspicious_activity")
  securityFlags         Json?     @map("security_flags")
  // ["unusual_time", "unusual_location", "bulk_operation"]

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  occurredAt            DateTime  @default(now()) @map("occurred_at")
  processingTime        Int?      @map("processing_time")
  // ãƒŸãƒªç§’

  // æ”¹ã–ã‚“é˜²æ­¢ï¼ˆãƒãƒƒã‚·ãƒ¥ãƒã‚§ãƒ¼ãƒ³ï¼‰
  previousLogHash       String?   @map("previous_log_hash")
  currentLogHash        String    @map("current_log_hash")
  // SHA-256ãƒãƒƒã‚·ãƒ¥å€¤

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  facilityId            String?   @map("facility_id")
  departmentId          String?   @map("department_id")
  tags                  Json?     @map("tags")
  // ["critical", "compliance", "export"]

  @@index([userId])
  @@index([action])
  @@index([resourceType])
  @@index([occurredAt])
  @@index([status])
  @@index([sensitiveDataAccessed])
  @@index([suspiciousActivity])
  @@map("system_audit_logs")
}
```

#### 4. SystemBackupHistoryï¼ˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å±¥æ­´ï¼‰

```prisma
model SystemBackupHistory {
  id                    String    @id @default(cuid())

  // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æƒ…å ±
  backupType            String    @map("backup_type")
  // full, incremental, differential, snapshot
  backupMethod          String    @map("backup_method")
  // automatic, manual, scheduled
  scheduleName          String?   @map("schedule_name")
  // "daily_midnight", "weekly_sunday", "monthly_1st"

  // å®Ÿè¡Œæƒ…å ±
  startedAt             DateTime  @map("started_at")
  completedAt           DateTime? @map("completed_at")
  duration              Int?      @map("duration")
  // ç§’æ•°
  status                String    @default("in_progress") @map("status")
  // in_progress, completed, failed, partial_success, cancelled

  // ãƒ‡ãƒ¼ã‚¿ç¯„å›²
  includedTables        Json?     @map("included_tables")
  // ["employees", "departments", "interviews", "evaluations"]
  excludedTables        Json?     @map("excluded_tables")
  totalTables           Int?      @map("total_tables")
  totalRows             Int?      @map("total_rows")

  // ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±
  backupFilePath        String    @map("backup_file_path")
  backupFileName        String    @map("backup_file_name")
  backupFileSize        BigInt?   @map("backup_file_size")
  // ãƒã‚¤ãƒˆæ•°
  compressionType       String?   @map("compression_type")
  // gzip, zip, none
  compressionRatio      Float?    @map("compression_ratio")

  // æš—å·åŒ–
  isEncrypted           Boolean   @default(false) @map("is_encrypted")
  encryptionAlgorithm   String?   @map("encryption_algorithm")
  // AES-256-GCM, AES-128-CBC

  // æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
  checksum              String?   @map("checksum")
  // SHA-256ãƒãƒƒã‚·ãƒ¥å€¤
  checksumAlgorithm     String?   @map("checksum_algorithm")
  verificationStatus    String?   @map("verification_status")
  // verified, failed, not_verified

  // ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æƒ…å ±
  storageType           String    @map("storage_type")
  // local, s3, azure_blob, google_cloud_storage
  storageLocation       String    @map("storage_location")
  storageRegion         String?   @map("storage_region")
  storageCost           Decimal?  @map("storage_cost") @db.Decimal(10, 4)

  // ãƒªãƒ†ãƒ³ã‚·ãƒ§ãƒ³
  retentionDays         Int       @default(30) @map("retention_days")
  expiresAt             DateTime  @map("expires_at")
  isExpired             Boolean   @default(false) @map("is_expired")
  deletedAt             DateTime? @map("deleted_at")

  // ã‚¨ãƒ©ãƒ¼æƒ…å ±
  errorMessage          String?   @db.Text @map("error_message")
  errorDetails          Json?     @map("error_details")
  failedTables          Json?     @map("failed_tables")

  // ãƒªã‚¹ãƒˆã‚¢æƒ…å ±
  canRestore            Boolean   @default(true) @map("can_restore")
  lastRestoredAt        DateTime? @map("last_restored_at")
  restoreCount          Int       @default(0) @map("restore_count")

  // å®Ÿè¡Œè€…
  executedBy            String?   @map("executed_by")
  executedFrom          String?   @map("executed_from")
  // web_ui, cli, api, cron

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  databaseVersion       String?   @map("database_version")
  applicationVersion    String?   @map("application_version")
  serverHostname        String?   @map("server_hostname")
  notes                 String?   @db.Text @map("notes")

  createdAt             DateTime  @default(now()) @map("created_at")

  @@index([backupType])
  @@index([status])
  @@index([startedAt])
  @@index([expiresAt])
  @@index([canRestore])
  @@map("system_backup_history")
}
```

#### 5. ComplianceReportCaseï¼ˆã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹é€šå ±ã‚±ãƒ¼ã‚¹ï¼‰

```prisma
model ComplianceReportCase {
  id                    String    @id @default(cuid())
  caseNumber            String    @unique @map("case_number")
  // CASE-2025-001, CASE-2025-002, etc.

  // é€šå ±æƒ…å ±
  reportType            String    @map("report_type")
  // harassment, fraud, safety_violation, discrimination, retaliation
  reportCategory        String    @map("report_category")
  // power_harassment, sexual_harassment, maternity_harassment, alcohol_harassment
  severity              String    @default("medium") @map("severity")
  // critical, high, medium, low

  // é€šå ±è€…æƒ…å ±ï¼ˆåŒ¿åæ€§ä¿è­·ï¼‰
  isAnonymous           Boolean   @default(false) @map("is_anonymous")
  disclosureLevel       String    @default("full_anonymous") @map("disclosure_level")
  // full_anonymousï¼ˆå®Œå…¨åŒ¿åï¼‰, conditionalï¼ˆæ¡ä»¶ä»˜ãé–‹ç¤ºï¼‰, disclosedï¼ˆå®Ÿåé–‹ç¤ºï¼‰
  reporterEmployeeId    String?   @map("reporter_employee_id")
  // éåŒ¿åã®å ´åˆã®ã¿è¨˜éŒ²
  reporterName          String?   @map("reporter_name")
  reporterDepartment    String?   @map("reporter_department")
  reporterFacility      String?   @map("reporter_facility")
  reporterContactMethod String?   @map("reporter_contact_method")
  // email, phone, voicedrive
  reporterContactInfo   String?   @map("reporter_contact_info")
  // æš—å·åŒ–ã—ã¦ä¿å­˜

  // è¢«é€šå ±è€…æƒ…å ±
  subjectEmployeeId     String?   @map("subject_employee_id")
  subjectName           String?   @map("subject_name")
  subjectDepartment     String?   @map("subject_department")
  subjectFacility       String?   @map("subject_facility")
  subjectPosition       String?   @map("subject_position")

  // é€šå ±å†…å®¹
  incidentDate          DateTime? @map("incident_date")
  incidentLocation      String?   @map("incident_location")
  incidentDescription   String    @db.Text @map("incident_description")
  witnessNames          Json?     @map("witness_names")
  // ["è¨¼äººA", "è¨¼äººB"]
  supportingEvidence    Json?     @map("supporting_evidence")
  // [{ "type": "email", "path": "..." }, { "type": "recording", "path": "..." }]

  // VoiceDriveé€£æº
  voicedriveReportId    String?   @map("voicedrive_report_id")
  voicedrivePostId      String?   @map("voicedrive_post_id")
  sourceSystem          String    @default("internal") @map("source_system")
  // internal, voicedrive, email, phone

  // ã‚±ãƒ¼ã‚¹ç®¡ç†
  caseStatus            String    @default("received") @map("case_status")
  // received, triaging, under_review, investigating, escalated, action_taken, resolved, closed, rejected
  assignedTo            String?   @map("assigned_to")
  // èª¿æŸ»æ‹…å½“è€…ã®ID
  assignedAt            DateTime? @map("assigned_at")

  // å„ªå…ˆåº¦ãƒ»æœŸé™
  priority              String    @default("medium") @map("priority")
  // urgent, high, medium, low
  dueDate               DateTime? @map("due_date")
  isOverdue             Boolean   @default(false) @map("is_overdue")

  // èª¿æŸ»é€²æ—
  investigationStartedAt   DateTime? @map("investigation_started_at")
  investigationCompletedAt DateTime? @map("investigation_completed_at")
  investigationSummary     String?   @db.Text @map("investigation_summary")
  investigationFindings    Json?     @map("investigation_findings")
  // [
  //   { "finding": "ãƒãƒ©ã‚¹ãƒ¡ãƒ³ãƒˆè¡Œç‚ºãŒç¢ºèªã•ã‚ŒãŸ", "evidence": "..." },
  //   { "finding": "å†ç™ºé˜²æ­¢ç­–ãŒå¿…è¦", "recommendation": "..." }
  // ]

  // å¯¾å¿œæªç½®
  actionTaken           String?   @db.Text @map("action_taken")
  disciplinaryAction    String?   @map("disciplinary_action")
  // none, verbal_warning, written_warning, suspension, termination
  preventiveMeasures    Json?     @map("preventive_measures")

  // è§£æ±ºãƒ»ã‚¯ãƒ­ãƒ¼ã‚º
  resolutionDate        DateTime? @map("resolution_date")
  resolutionSummary     String?   @db.Text @map("resolution_summary")
  closedBy              String?   @map("closed_by")
  closedAt              DateTime? @map("closed_at")
  closeReason           String?   @map("close_reason")
  // resolved, rejected, withdrawn, duplicate

  // é€šå ±è€…ã¸ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
  feedbackProvided      Boolean   @default(false) @map("feedback_provided")
  feedbackDate          DateTime? @map("feedback_date")
  feedbackSummary       String?   @db.Text @map("feedback_summary")

  // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹
  accessRestricted      Boolean   @default(true) @map("access_restricted")
  // äººäº‹éƒ¨é•·ãƒ»ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹æ‹…å½“ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯
  accessLog             Json?     @map("access_log")
  // [{ "userId": "HR_001", "accessedAt": "...", "action": "view" }]
  dataRetentionYears    Int       @default(7) @map("data_retention_years")
  // æ³•ä»¤ã«ã‚ˆã‚Š7å¹´ä¿ç®¡

  // çµ±è¨ˆãƒ»ãƒ¬ãƒãƒ¼ãƒˆç”¨
  responseDays          Int?      @map("response_days")
  // åˆå‹•ã¾ã§ã®æ—¥æ•°
  resolutionDays        Int?      @map("resolution_days")
  // è§£æ±ºã¾ã§ã®æ—¥æ•°
  wasSubstantiated      Boolean?  @map("was_substantiated")
  // é€šå ±å†…å®¹ãŒäº‹å®Ÿã¨ç¢ºèªã•ã‚ŒãŸã‹

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  reportedAt            DateTime  @default(now()) @map("reported_at")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([caseStatus])
  @@index([reportType])
  @@index([severity])
  @@index([assignedTo])
  @@index([reportedAt])
  @@index([dueDate])
  @@index([isOverdue])
  @@map("compliance_report_cases")
}
```

### å®Ÿè£…ã«ã‚ˆã‚‹åŠ¹æœ

âœ… **ã‚·ã‚¹ãƒ†ãƒ éšœå®³ã®å³åº§æ¤œçŸ¥ã¨é€šçŸ¥**
- DBæ¥ç¶šã‚¨ãƒ©ãƒ¼ã€APIç•°å¸¸ã€MCPåˆ‡æ–­ã‚’è‡ªå‹•æ¤œçŸ¥
- é‡å¤§åº¦ã«å¿œã˜ã¦ãƒ¡ãƒ¼ãƒ«ãƒ»Slackãƒ»VoiceDriveã¸è‡ªå‹•é…ä¿¡
- ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³æ©Ÿèƒ½ã§é€šçŸ¥ã‚¹ãƒ‘ãƒ é˜²æ­¢

âœ… **å®Œå…¨ãªç›£æŸ»è¨¼è·¡**
- å…¨ã¦ã®æ“ä½œã‚’è¨˜éŒ²ï¼ˆèª°ãŒã€ã„ã¤ã€ä½•ã‚’ã€ã©ã†å¤‰æ›´ã—ãŸã‹ï¼‰
- æ©Ÿå¯†æƒ…å ±ã‚¢ã‚¯ã‚»ã‚¹ã®è¿½è·¡
- ãƒãƒƒã‚·ãƒ¥ãƒã‚§ãƒ¼ãƒ³ã§æ”¹ã–ã‚“æ¤œçŸ¥

âœ… **ç¢ºå®Ÿãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç®¡ç†**
- è‡ªå‹•ãƒ»æ‰‹å‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®å±¥æ­´ç®¡ç†
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãƒ»åœ§ç¸®ç‡ãƒ»æš—å·åŒ–æƒ…å ±ã®è¨˜éŒ²
- ãƒªãƒ†ãƒ³ã‚·ãƒ§ãƒ³æœŸé–“ã®è‡ªå‹•ç®¡ç†

âœ… **ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹é€šå ±ã®å³æ ¼ç®¡ç†**
- åŒ¿åé€šå ±ã®å®Œå…¨ä¿è­·
- èª¿æŸ»é€²æ—ã®é€æ˜ãªè¿½è·¡
- å¯¾å¿œæªç½®ã®è¨˜éŒ²ã¨æœŸé™ç®¡ç†
- æ³•ä»¤æº–æ‹ ã®7å¹´é–“ãƒ‡ãƒ¼ã‚¿ä¿ç®¡

âœ… **å°†æ¥ã®æ‹¡å¼µæ€§**
- æ–°ã—ã„é€šçŸ¥ãƒãƒ£ãƒ³ãƒãƒ«ã®è¿½åŠ ãŒå®¹æ˜“
- ç›£æŸ»ãƒ­ã‚°ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ»æ¤œç´¢æ©Ÿèƒ½ã®å®Ÿè£…ãŒå¯èƒ½
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼ã¨ã®é€£æºãŒæŸ”è»Ÿ
- ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹çµ±è¨ˆãƒ¬ãƒãƒ¼ãƒˆã®è‡ªå‹•ç”Ÿæˆ

**ã‚·ã‚¹ãƒ†ãƒ ã®å®‰å®šç¨¼åƒã¨æ³•ä»¤éµå®ˆã‚’ã€å®Œå…¨ãªãƒ‡ãƒ¼ã‚¿ç®¡ç†ã§å®Ÿç¾ã—ã¾ã™ï¼**

---

## Section 26: åŸºæœ¬ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼ˆè·ç¨®ãƒ»å½¹è·ãƒ»é›‡ç”¨å½¢æ…‹ãƒ»éƒ¨ç½²ãƒ»äººäº‹ãƒãƒªã‚·ãƒ¼ï¼‰

### èƒŒæ™¯ãƒ»ç›®çš„

**ãƒšãƒ¼ã‚¸URL**:
- [/admin/master-data](https://staff-medical-system-v2.vercel.app/admin/master-data)

**å®Ÿè£…ç¢ºèªå†…å®¹**:
- 17ç¨®é¡ã®ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãƒšãƒ¼ã‚¸
- è·ç¨®ãƒ»å½¹è·ãƒ»é›‡ç”¨å½¢æ…‹ãƒ»éƒ¨ç½²ã®å‹•çš„ç®¡ç†
- äººäº‹ãƒãƒªã‚·ãƒ¼19é …ç›®ã®ç®¡ç†
- ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½
- ç›£æŸ»ãƒ­ã‚°è¨˜éŒ²

**ç¾çŠ¶ã®èª²é¡Œ**:
- è·ç¨®ãƒ»å½¹è·ãƒ»é›‡ç”¨å½¢æ…‹ã®å‹•çš„ç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä¸è¶³
- éƒ¨ç½²ãƒã‚¹ã‚¿ãƒ¼ã®è©³ç´°è¨­è¨ˆãŒä¸ååˆ†
- äººäº‹ãƒãƒªã‚·ãƒ¼19é …ç›®ã®å‹•çš„ç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä¸è¶³
- ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãŒæœªå®Ÿè£…

### è¿½åŠ ãŒå¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆ5ã¤ï¼‰

#### 26-1. ProfessionMasterï¼ˆè·ç¨®ãƒã‚¹ã‚¿ãƒ¼ï¼‰

**ç›®çš„**: è·ç¨®ã®å®Œå…¨ãªå‹•çš„ç®¡ç†ã€‚æ–°ã—ã„è·ç¨®ã®è¿½åŠ ã€è³‡æ ¼è¦ä»¶ã€çµ¦ä¸ç¯„å›²ã€ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ã®è¨­å®šã‚’ç®¡ç†ç”»é¢ã‹ã‚‰å®Ÿæ–½å¯èƒ½ã«ã€‚

```prisma
model ProfessionMaster {
  id                    String    @id @default(cuid())
  professionCode        String    @unique @map("profession_code")
  // NURSE, PT, OT, ST, CARE_WORKER, ADMIN, etc.
  professionName        String    @map("profession_name")
  // ã€Œçœ‹è­·å¸«ã€ã€Œç†å­¦ç™‚æ³•å£«ã€ç­‰
  professionCategory    String    @map("profession_category")
  // medical, rehabilitation, nursing_care, administrative, support

  // è³‡æ ¼è¦ä»¶
  requiredCertifications Json?    @map("required_certifications")
  // [
  //   { "certCode": "NURSE_LICENSE", "required": true, "name": "çœ‹è­·å¸«å…è¨±" },
  //   { "certCode": "PT_LICENSE", "required": true, "name": "ç†å­¦ç™‚æ³•å£«å…è¨±" }
  // ]
  optionalCertifications Json?    @map("optional_certifications")

  // è·ç¨®å›ºæœ‰è¨­å®š
  allowNightShift       Boolean   @default(false) @map("allow_night_shift")
  defaultPermissionLevel Int?     @map("default_permission_level")
  defaultEvaluationCycle String?  @map("default_evaluation_cycle")
  // monthly, quarterly, semi_annual, annual

  // ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹è¨­å®š
  careerPathTemplateId  String?   @map("career_path_template_id")
  promotionLadder       Json?     @map("promotion_ladder")
  // [
  //   { "level": 1, "title": "æ–°äººçœ‹è­·å¸«", "minExperience": 0 },
  //   { "level": 2, "title": "ä¸€èˆ¬çœ‹è­·å¸«", "minExperience": 1 },
  //   { "level": 3, "title": "ãƒªãƒ¼ãƒ€ãƒ¼çœ‹è­·å¸«", "minExperience": 3 }
  // ]

  // æ•™è‚²ãƒ»ç ”ä¿®è¨­å®š
  requiredTrainings     Json?     @map("required_trainings")
  recommendedTrainings  Json?     @map("recommended_trainings")

  // é…ç½®åŸºæº–
  minStaffRatio         Float?    @map("min_staff_ratio")
  maxConsecutiveNights  Int?      @map("max_consecutive_nights")

  // çµ¦ä¸è¨­å®š
  baseSalaryRange       Json?     @map("base_salary_range")
  // { "min": 250000, "max": 400000, "currency": "JPY" }
  allowanceTemplateId   String?   @map("allowance_template_id")

  // é¢è«‡è¨­å®š
  defaultInterviewType  String?   @map("default_interview_type")
  interviewFrequency    String?   @map("interview_frequency")

  // çŠ¶æ…‹ç®¡ç†
  isActive              Boolean   @default(true) @map("is_active")
  displayOrder          Int       @default(0) @map("display_order")
  color                 String?   @map("color")
  iconName              String?   @map("icon_name")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  description           String?   @db.Text @map("description")
  notes                 String?   @db.Text @map("notes")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String?   @map("created_by")

  @@index([professionCategory])
  @@index([isActive])
  @@index([displayOrder])
  @@map("profession_masters")
}
```

#### 26-2. PositionMasterï¼ˆå½¹è·ãƒã‚¹ã‚¿ãƒ¼ï¼‰

**ç›®çš„**: å½¹è·ã®å®Œå…¨ãªå‹•çš„ç®¡ç†ã€‚æ˜‡é€²è¦ä»¶ã€æ¨©é™ç¯„å›²ã€çµ¦ä¸è¨­å®šã‚’æŸ”è»Ÿã«å®šç¾©å¯èƒ½ã«ã€‚

```prisma
model PositionMaster {
  id                    String    @id @default(cuid())
  positionCode          String    @unique @map("position_code")
  // STAFF, LEADER, CHIEF, MANAGER, DIRECTOR, etc.
  positionName          String    @map("position_name")
  positionLevel         Int       @map("position_level")

  // æ¨©é™è¨­å®š
  permissionLevelMin    Int       @map("permission_level_min")
  permissionLevelMax    Int       @map("permission_level_max")
  defaultPermissionLevel Int      @map("default_permission_level")

  // ç®¡ç†è·ãƒ•ãƒ©ã‚°
  isManagement          Boolean   @default(false) @map("is_management")
  managementCategory    String?   @map("management_category")

  // è·ç¨®åˆ¶é™
  allowedProfessions    Json?     @map("allowed_professions")
  requiredProfessions   Json?     @map("required_professions")

  // æ˜‡é€²è¦ä»¶
  minimumExperience     Int?      @map("minimum_experience")
  requiredEvaluation    String?   @map("required_evaluation")
  requiredTrainings     Json?     @map("required_trainings")

  // çµ¦ä¸è¨­å®š
  positionAllowance     Int?      @map("position_allowance")
  salaryMultiplier      Float?    @map("salary_multiplier")

  // è²¬ä»»ç¯„å›²
  canApproveLeave       Boolean   @default(false) @map("can_approve_leave")
  canApproveExpense     Boolean   @default(false) @map("can_approve_expense")
  canConductInterview   Boolean   @default(false) @map("can_conduct_interview")
  canAccessSensitiveData Boolean  @default(false) @map("can_access_sensitive_data")
  maxApprovalAmount     Int?      @map("max_approval_amount")

  // é…ä¸‹äººæ•°åˆ¶é™
  minSubordinates       Int?      @map("min_subordinates")
  maxSubordinates       Int?      @map("max_subordinates")

  // è¡¨ç¤ºè¨­å®š
  isActive              Boolean   @default(true) @map("is_active")
  displayOrder          Int       @default(0) @map("display_order")
  badgeColor            String?   @map("badge_color")
  iconName              String?   @map("icon_name")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  description           String?   @db.Text @map("description")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String?   @map("created_by")

  @@index([positionLevel])
  @@index([isManagement])
  @@index([isActive])
  @@index([displayOrder])
  @@map("position_masters")
}
```

#### 26-3. EmploymentTypeMasterï¼ˆé›‡ç”¨å½¢æ…‹ãƒã‚¹ã‚¿ãƒ¼ï¼‰

**ç›®çš„**: é›‡ç”¨å½¢æ…‹ã®å®Œå…¨ãªå‹•çš„ç®¡ç†ã€‚åŠ´åƒæ™‚é–“åˆ¶é™ã€ç¦åˆ©åšç”Ÿã€å¥‘ç´„æœŸé–“ã®è¨­å®šã‚’æŸ”è»Ÿã«ã€‚

```prisma
model EmploymentTypeMaster {
  id                    String    @id @default(cuid())
  employmentTypeCode    String    @unique @map("employment_type_code")
  employmentTypeName    String    @map("employment_type_name")
  employmentCategory    String    @map("employment_category")

  // åŠ´åƒæ™‚é–“åˆ¶é™
  standardWorkHoursPerWeek Int?   @map("standard_work_hours_per_week")
  maxWorkHoursPerWeek   Int?      @map("max_work_hours_per_week")
  maxWorkHoursPerMonth  Int?      @map("max_work_hours_per_month")
  maxWorkHoursPerYear   Int?      @map("max_work_hours_per_year")

  // å¤œå‹¤åˆ¶é™
  allowNightShift       Boolean   @default(true) @map("allow_night_shift")
  maxNightShiftsPerMonth Int?     @map("max_night_shifts_per_month")

  // å¥‘ç´„æœŸé–“
  hasContractPeriod     Boolean   @default(false) @map("has_contract_period")
  defaultContractMonths Int?      @map("default_contract_months")
  maxRenewals           Int?      @map("max_renewals")

  // ç¦åˆ©åšç”Ÿ
  eligibleForBonus      Boolean   @default(true) @map("eligible_for_bonus")
  eligibleForRetirement Boolean   @default(true) @map("eligible_for_retirement")
  eligibleForHealthInsurance Boolean @default(true) @map("eligible_for_health_insurance")
  eligibleForPaidLeave  Boolean   @default(true) @map("eligible_for_paid_leave")
  paidLeaveDaysPerYear  Int?      @map("paid_leave_days_per_year")

  // ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹åˆ¶é™
  allowedCareerCourses  Json?     @map("allowed_career_courses")
  defaultCareerCourse   String?   @map("default_career_course")

  // çµ¦ä¸è¨ˆç®—
  salaryCalculationType String    @default("monthly") @map("salary_calculation_type")
  hourlyWageMin         Int?      @map("hourly_wage_min")
  hourlyWageMax         Int?      @map("hourly_wage_max")
  overtimeRate          Float?    @default(1.25) @map("overtime_rate")

  // è©¦ç”¨æœŸé–“
  hasProbationPeriod    Boolean   @default(true) @map("has_probation_period")
  probationMonths       Int?      @default(3) @map("probation_months")
  probationEvaluationRequired Boolean @default(true) @map("probation_evaluation_required")

  // æ˜‡é€²ãƒ»æ˜‡æ ¼
  eligibleForPromotion  Boolean   @default(true) @map("eligible_for_promotion")
  maxPositionLevel      Int?      @map("max_position_level")

  // è¡¨ç¤ºè¨­å®š
  isActive              Boolean   @default(true) @map("is_active")
  displayOrder          Int       @default(0) @map("display_order")
  badgeColor            String?   @map("badge_color")
  iconName              String?   @map("icon_name")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  description           String?   @db.Text @map("description")
  legalNotes            String?   @db.Text @map("legal_notes")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String?   @map("created_by")

  @@index([employmentCategory])
  @@index([isActive])
  @@index([displayOrder])
  @@map("employment_type_masters")
}
```

#### 26-4. DepartmentMasterï¼ˆéƒ¨ç½²ãƒã‚¹ã‚¿ãƒ¼è©³ç´°ï¼‰

**ç›®çš„**: éƒ¨ç½²ã®å®Œå…¨ãªå‹•çš„ç®¡ç†ã€‚éšå±¤æ§‹é€ ã€é…ç½®åŸºæº–ã€æ¥­å‹™ç‰¹æ€§ã€äºˆç®—ç®¡ç†ã‚’è©³ç´°ã«è¨­å®šå¯èƒ½ã«ã€‚

```prisma
model DepartmentMaster {
  id                    String    @id @default(cuid())
  departmentCode        String    @unique @map("department_code")
  departmentName        String    @map("department_name")
  departmentNameKana    String?   @map("department_name_kana")
  departmentType        String    @map("department_type")

  // æ–½è¨­é–¢é€£
  facilityId            String    @map("facility_id")
  facilityName          String    @map("facility_name")
  buildingName          String?   @map("building_name")
  floorNumber           Int?      @map("floor_number")

  // éšå±¤æ§‹é€ 
  parentDepartmentId    String?   @map("parent_department_id")
  hierarchyLevel        Int       @default(1) @map("hierarchy_level")
  fullPath              String?   @map("full_path")

  // éƒ¨ç½²è²¬ä»»è€…
  headPositionId        String?   @map("head_position_id")
  currentHeadEmployeeId String?   @map("current_head_employee_id")

  // é…ç½®åŸºæº–
  requiredProfessions   Json?     @map("required_professions")
  currentStaffCount     Int       @default(0) @map("current_staff_count")
  targetStaffCount      Int?      @map("target_staff_count")
  minStaffCount         Int?      @map("min_staff_count")
  maxStaffCount         Int?      @map("max_staff_count")

  // æ¥­å‹™ç‰¹æ€§
  operatesNightShift    Boolean   @default(false) @map("operates_night_shift")
  operates24Hours       Boolean   @default(false) @map("operates_24_hours")
  operatingHoursStart   String?   @map("operating_hours_start")
  operatingHoursEnd     String?   @map("operating_hours_end")
  operatingDays         Json?     @map("operating_days")

  // äºˆç®—ãƒ»ã‚³ã‚¹ãƒˆ
  annualBudget          Decimal?  @map("annual_budget") @db.Decimal(12, 2)
  costCenterCode        String?   @map("cost_center_code")

  // è©•ä¾¡ãƒ»ç›®æ¨™
  departmentGoals       Json?     @map("department_goals")
  kpiDefinitions        Json?     @map("kpi_definitions")

  // æ¨©é™ãƒ»ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
  accessLevel           Int       @default(1) @map("access_level")
  restrictedAccess      Boolean   @default(false) @map("restricted_access")

  // è¡¨ç¤ºè¨­å®š
  isActive              Boolean   @default(true) @map("is_active")
  displayOrder          Int       @default(0) @map("display_order")
  color                 String?   @map("color")
  iconName              String?   @map("icon_name")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  description           String?   @db.Text @map("description")
  establishedDate       DateTime? @map("established_date")
  closedDate            DateTime? @map("closed_date")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String?   @map("created_by")

  @@index([facilityId])
  @@index([departmentType])
  @@index([parentDepartmentId])
  @@index([isActive])
  @@index([displayOrder])
  @@map("department_masters")
}
```

#### 26-5. SpecialAccountMasterï¼ˆç‰¹åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ¨©é™ãƒã‚¹ã‚¿ãƒ¼ï¼‰

**ç›®çš„**: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ¬ãƒ™ãƒ«97-99ã®ç‰¹åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆå¥è¨ºå®¤å°‚ç”¨ã€ç”£æ¥­åŒ»ã€ãƒ•ãƒ«ã‚¢ã‚¯ã‚»ã‚¹é–‹ç™ºè€…ï¼‰ã®ãƒ¡ã‚¿æƒ…å ±ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã‚’ç®¡ç†ã€‚

**æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã®å½¹å‰²åˆ†æ‹…**:
- **access_control_masterï¼ˆæ—¢å­˜å®Ÿè£…æ¸ˆã¿ï¼‰**: ã€Œã©ã®æ©Ÿèƒ½ãƒ»ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‹ã€ã‚’ç®¡ç†
  - `minLevel: 1-99` ã§åˆ¤å®š
  - `specialAuthority: boolean` ã§ Level 97-98 ã‚’åŒºåˆ¥
- **SpecialAccountMasterï¼ˆæœ¬ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰**: ã€ŒLevel 97-99 ã®ç‰¹æ€§ãƒ»åˆ¶ç´„ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã€ã‚’ç®¡ç†
  - MFAå¿…é ˆã€IPãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
  - ç›£æŸ»è¨­å®šï¼ˆå…¨æ“ä½œãƒ­ã‚°è¨˜éŒ²ã€æ‰¿èªè¦æ±‚ï¼‰
  - UIè¡¨ç¤ºè¨­å®šï¼ˆãƒãƒƒã‚¸è‰²ã€ãƒãƒƒã‚¸ãƒ†ã‚­ã‚¹ãƒˆï¼‰
  - æ©Ÿèƒ½åˆ¥æ¨©é™ã®è©³ç´°å®šç¾©

**çµ±åˆé‹ç”¨ä¾‹**:
```typescript
// 1. access_control_master ã§æ©Ÿèƒ½ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚§ãƒƒã‚¯
const canAccess = await canAccessPage(userLevel, '/health/management')

// 2. SpecialAccountMaster ã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶ç´„ãƒã‚§ãƒƒã‚¯
const accountConfig = await getSpecialAccountConfig(userLevel)
if (accountConfig.requiresMFA && !user.hasMFA) {
  throw new Error('MFAèªè¨¼ãŒå¿…è¦ã§ã™')
}
if (accountConfig.ipWhitelist && !isAllowedIP(user.ip, accountConfig.ipWhitelist)) {
  throw new Error('è¨±å¯ã•ã‚Œã¦ã„ãªã„IPã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã™')
}
```

```prisma
model SpecialAccountMaster {
  id                    String    @id @default(cuid())

  // ç‰¹åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ¬ãƒ™ãƒ«
  accountLevel          Int       @unique @map("account_level")
  // 97ï¼ˆå¥è¨ºå®¤å°‚ç”¨ï¼‰, 98ï¼ˆç”£æ¥­åŒ»ï¼‰, 99ï¼ˆãƒ•ãƒ«ã‚¢ã‚¯ã‚»ã‚¹é–‹ç™ºè€…ï¼‰
  accountName           String    @map("account_name")
  accountDescription    String    @db.Text @map("account_description")

  // æ¨©é™ã‚¹ã‚³ãƒ¼ãƒ—
  accessScope           String    @map("access_scope")
  // health_checkup_onlyï¼ˆå¥è¨ºã®ã¿ï¼‰, occupational_healthï¼ˆç”£æ¥­ä¿å¥ï¼‰, full_systemï¼ˆå…¨ã‚·ã‚¹ãƒ†ãƒ ï¼‰
  canAccessAllFacilities Boolean  @default(false) @map("can_access_all_facilities")
  canAccessAllDepartments Boolean @default(false) @map("can_access_all_departments")

  // æ©Ÿèƒ½åˆ¥æ¨©é™ï¼ˆè©³ç´°ï¼‰
  permissions           Json      @map("permissions")
  // {
  //   "healthCheckup": { "read": true, "write": true, "delete": true },
  //   "stressCheck": { "read": true, "write": true, "delete": true },
  //   "occupationalDoctorInterview": { "read": true, "write": true, "delete": true },
  //   "employeeData": { "read": true, "write": false, "delete": false },
  //   "evaluations": { "read": false, "write": false, "delete": false },
  //   "interviews": { "read": false, "write": false, "delete": false },
  //   "systemSettings": { "read": false, "write": false, "delete": false },
  //   "masterData": { "read": false, "write": false, "delete": false },
  //   "developerTools": { "read": false, "write": false, "delete": false }
  // }

  // ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™
  canViewSensitiveData  Boolean   @default(false) @map("can_view_sensitive_data")
  // æ©Ÿå¾®æƒ…å ±ï¼ˆçµ¦ä¸ã€è©•ä¾¡ã€é¢è«‡è¨˜éŒ²ç­‰ï¼‰
  canEditMasterData     Boolean   @default(false) @map("can_edit_master_data")
  canDeleteRecords      Boolean   @default(false) @map("can_delete_records")
  canExportData         Boolean   @default(false) @map("can_export_data")

  // ç‰¹åˆ¥æ¨©é™ï¼ˆãƒ¬ãƒ™ãƒ«99ã®ã¿ï¼‰
  hasDeveloperAccess    Boolean   @default(false) @map("has_developer_access")
  // é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç›´æ¥æ“ä½œã€ãƒ­ã‚°ã‚¢ã‚¯ã‚»ã‚¹
  canModifySystemSettings Boolean @default(false) @map("can_modify_system_settings")
  canAccessAuditLogs    Boolean   @default(false) @map("can_access_audit_logs")
  canImpersonateUsers   Boolean   @default(false) @map("can_impersonate_users")

  // API/çµ±åˆæ¨©é™
  canUseAPIKeys         Boolean   @default(false) @map("can_use_api_keys")
  canManageIntegrations Boolean   @default(false) @map("can_manage_integrations")
  canAccessMCPServer    Boolean   @default(false) @map("can_access_mcp_server")

  // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶ç´„
  requiresMFA           Boolean   @default(true) @map("requires_mfa")
  // å¤šè¦ç´ èªè¨¼å¿…é ˆ
  ipWhitelist           Json?     @map("ip_whitelist")
  // ["192.168.1.0/24", "10.0.0.0/8"]
  sessionTimeout        Int?      @map("session_timeout")
  // ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆåˆ†ï¼‰
  maxConcurrentSessions Int?      @map("max_concurrent_sessions")

  // ç›£æŸ»å¼·åŒ–
  logAllActions         Boolean   @default(true) @map("log_all_actions")
  // å…¨æ“ä½œã‚’AuditLogã«è¨˜éŒ²
  requireApprovalForCriticalActions Boolean @default(false) @map("require_approval_for_critical_actions")

  // ä½¿ç”¨æ¡ä»¶
  requiresJustification Boolean   @default(false) @map("requires_justification")
  // ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã«ç†ç”±å…¥åŠ›å¿…é ˆ
  allowedUseCases       Json?     @map("allowed_use_cases")
  // ["å¥è¨ºãƒ‡ãƒ¼ã‚¿å…¥åŠ›", "ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯å®Ÿæ–½", "ç”£æ¥­åŒ»é¢æ¥è¨˜éŒ²"]

  // æœŸé™ç®¡ç†
  hasExpirationDate     Boolean   @default(false) @map("has_expiration_date")
  defaultExpirationDays Int?      @map("default_expiration_days")
  // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæœ‰åŠ¹æœŸé™ï¼ˆæ—¥æ•°ï¼‰

  // è¡¨ç¤ºè¨­å®š
  badgeColor            String?   @default("#FF6B6B") @map("badge_color")
  // èµ¤ç³»çµ±ã§ç›®ç«‹ãŸã›ã‚‹
  badgeText             String?   @map("badge_text")
  // "å¥è¨ºå®¤", "ç”£æ¥­åŒ»", "é–‹ç™ºè€…"
  isVisible             Boolean   @default(true) @map("is_visible")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  isActive              Boolean   @default(true) @map("is_active")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String?   @map("created_by")
  notes                 String?   @db.Text @map("notes")

  @@index([accountLevel])
  @@index([accessScope])
  @@index([isActive])
  @@map("special_account_masters")
}
```

**è¿½åŠ ç†ç”±**:
- **Level 97ï¼ˆå¥è¨ºå®¤å°‚ç”¨ï¼‰**: å¥è¨ºãƒ‡ãƒ¼ã‚¿ãƒ»ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯çµæœã®å…¥åŠ›ãƒ»é–²è¦§ã®ã¿ã€‚çµ¦ä¸ãƒ»è©•ä¾¡ãƒ»é¢è«‡è¨˜éŒ²ã¯é–²è¦§ä¸å¯ã€‚
- **Level 98ï¼ˆç”£æ¥­åŒ»ï¼‰**: å¥è¨ºãƒ»ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯ãƒ»ç”£æ¥­åŒ»é¢æ¥æŒ‡å°ã®å®Œå…¨ã‚¢ã‚¯ã‚»ã‚¹ã€‚å°±æ¥­æªç½®ã®è¨˜éŒ²ãƒ»VoiceDriveé€£æºã€‚
- **Level 99ï¼ˆãƒ•ãƒ«ã‚¢ã‚¯ã‚»ã‚¹é–‹ç™ºè€…ï¼‰**: å…¨ã‚·ã‚¹ãƒ†ãƒ æ©Ÿèƒ½ã€ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ç·¨é›†ã€é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã€ç›£æŸ»ãƒ­ã‚°ã‚¢ã‚¯ã‚»ã‚¹ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å½è£…ã€‚

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®**:
- MFAå¿…é ˆ
- IPãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆå¯¾å¿œ
- å…¨æ“ä½œã‚’AuditLogã«è¨˜éŒ²
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆçŸ­ç¸®å¯èƒ½

---

#### 26-6. HRPolicyMasterï¼ˆäººäº‹ãƒãƒªã‚·ãƒ¼ãƒã‚¹ã‚¿ãƒ¼ï¼‰

**ç›®çš„**: 19é …ç›®ã®äººäº‹ãƒãƒªã‚·ãƒ¼ã®å‹•çš„ç®¡ç†ã€‚ãƒãƒªã‚·ãƒ¼å¤‰æ›´ã®å±¥æ­´ç®¡ç†ã€æ‰¿èªãƒ•ãƒ­ãƒ¼ã€æ•°å€¤ç›®æ¨™ã®è¿½è·¡ã€‚

```prisma
model HRPolicyMaster {
  id                    String    @id @default(cuid())
  policyCode            String    @unique @map("policy_code")
  // A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S
  policyName            String    @map("policy_name")
  policyCategory        String    @map("policy_category")

  // ãƒãƒªã‚·ãƒ¼é¸æŠè‚¢
  selectedOption        String    @map("selected_option")
  optionRationale       String?   @db.Text @map("option_rationale")

  // è©³ç´°è¨­å®š
  policyDetails         Json?     @map("policy_details")
  // {
  //   "workPurpose": "ç”Ÿæ´»ã®ãŸã‚",
  //   "philosophicalBasis": "è·å“¡ã®çµŒæ¸ˆçš„å®‰å®šãŒæ‚£è€…ã‚±ã‚¢ã®è³ªã‚’å‘ä¸Šã•ã›ã‚‹",
  //   "practicalGuidelines": ["å®‰å®šã—ãŸçµ¦ä¸æ”¯æ‰•ã„", "ç¦åˆ©åšç”Ÿã®å……å®Ÿ"],
  //   "metrics": { "targetSalaryIncrease": 3.0, "bonusMonths": 4.5 }
  // }

  // æ•°å€¤ç›®æ¨™
  targetMetrics         Json?     @map("target_metrics")
  currentMetrics        Json?     @map("current_metrics")

  // å®Ÿæ–½ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
  implementationGuide   String?   @db.Text @map("implementation_guide")
  exampleScenarios      Json?     @map("example_scenarios")

  // ä»–ãƒãƒªã‚·ãƒ¼ã¨ã®é–¢é€£
  relatedPolicies       Json?     @map("related_policies")
  conflictingPolicies   Json?     @map("conflicting_policies")

  // æ”¹å®šå±¥æ­´
  versionNumber         Int       @default(1) @map("version_number")
  effectiveFrom         DateTime  @map("effective_from")
  effectiveTo           DateTime? @map("effective_to")
  revisionReason        String?   @db.Text @map("revision_reason")
  previousVersionId     String?   @map("previous_version_id")

  // æ‰¿èªæƒ…å ±
  approvedBy            String?   @map("approved_by")
  approvedAt            DateTime? @map("approved_at")
  approvalStatus        String    @default("draft") @map("approval_status")
  // draft, pending_review, approved, rejected

  // å…¬é–‹è¨­å®š
  isPublic              Boolean   @default(true) @map("is_public")
  targetAudience        Json?     @map("target_audience")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  displayOrder          Int       @default(0) @map("display_order")
  isActive              Boolean   @default(true) @map("is_active")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String?   @map("created_by")

  @@index([policyCategory])
  @@index([approvalStatus])
  @@index([isActive])
  @@index([effectiveFrom])
  @@index([displayOrder])
  @@map("hr_policy_masters")
}
```

### å®Ÿè£…ã«ã‚ˆã‚‹åŠ¹æœ

âœ… **åŸºæœ¬ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®å®Œå…¨ãªå‹•çš„ç®¡ç†**
- è·ç¨®ãƒ»å½¹è·ãƒ»é›‡ç”¨å½¢æ…‹ãƒ»éƒ¨ç½²ã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ãŒç®¡ç†ç”»é¢ã‹ã‚‰å¯èƒ½
- ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã«ã‚ˆã‚‹ãƒ‡ãƒ—ãƒ­ã‚¤ä¸è¦

âœ… **æŸ”è»Ÿãªçµ„ç¹”å¤‰æ›´ã¸ã®å¯¾å¿œ**
- æ–°ã—ã„è·ç¨®ã®è¿½åŠ ï¼ˆä¾‹: åŒ»ç™‚äº‹å‹™ã€æ „é¤Šå£«ï¼‰
- æ–°ã—ã„å½¹è·ã®è¿½åŠ ï¼ˆä¾‹: å‰¯ä¸»ä»»ã€ã‚°ãƒ«ãƒ¼ãƒ—ãƒªãƒ¼ãƒ€ãƒ¼ï¼‰
- æ–°ã—ã„é›‡ç”¨å½¢æ…‹ã®è¿½åŠ ï¼ˆä¾‹: æ¥­å‹™å§”è¨—ã€å˜±è¨—è·å“¡ï¼‰

âœ… **äººäº‹ãƒãƒªã‚·ãƒ¼ã®é€æ˜ãªç®¡ç†**
- 19é …ç›®ã®äººäº‹ãƒãƒªã‚·ãƒ¼ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ç®¡ç†
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã«ã‚ˆã‚Šå¤‰æ›´å±¥æ­´ã‚’å®Œå…¨è¿½è·¡
- æ‰¿èªãƒ•ãƒ­ãƒ¼ã«ã‚ˆã‚Šé©åˆ‡ãªã‚¬ãƒãƒŠãƒ³ã‚¹

âœ… **æ¨©é™ãƒ»çµ¦ä¸ãƒ»ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ã®è‡ªå‹•é€£å‹•**
- è·ç¨®ãƒã‚¹ã‚¿ãƒ¼ â†’ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ¨©é™ãƒ¬ãƒ™ãƒ«
- å½¹è·ãƒã‚¹ã‚¿ãƒ¼ â†’ å½¹è·æ‰‹å½“ã€æ‰¿èªæ¨©é™
- é›‡ç”¨å½¢æ…‹ãƒã‚¹ã‚¿ãƒ¼ â†’ çµ¦ä¸è¨ˆç®—æ–¹æ³•ã€ç¦åˆ©åšç”Ÿ

âœ… **æ³•ä»¤éµå®ˆã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯**
- é›‡ç”¨å½¢æ…‹åˆ¥ã®åŠ´åƒæ™‚é–“ä¸Šé™è¨­å®š
- å¥‘ç´„æ›´æ–°å›æ•°ã®åŠ´åƒå¥‘ç´„æ³•å¯¾å¿œ
- é…ç½®åŸºæº–ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯

âœ… **å°†æ¥ã®æ‹¡å¼µæ€§**
- æ–°ã—ã„è·ç¨®ãƒ»å½¹è·ãƒ»é›‡ç”¨å½¢æ…‹ã®è¿½åŠ ãŒå®¹æ˜“
- äººäº‹ãƒãƒªã‚·ãƒ¼ã®æ”¹å®šå±¥æ­´ã‚’å®Œå…¨ä¿å­˜
- ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå¯¾å¿œ

âœ… **ç‰¹åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆ97-99ï¼‰ã®å®Œå…¨å¯¾å¿œ**
- **Level 97ï¼ˆå¥è¨ºå®¤å°‚ç”¨ï¼‰**: å¥è¨ºãƒ‡ãƒ¼ã‚¿ãƒ»ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹
- **Level 98ï¼ˆç”£æ¥­åŒ»ï¼‰**: ç”£æ¥­ä¿å¥ãƒ‡ãƒ¼ã‚¿å®Œå…¨ã‚¢ã‚¯ã‚»ã‚¹ + VoiceDriveå°±æ¥­æªç½®é€£æº
- **Level 99ï¼ˆãƒ•ãƒ«ã‚¢ã‚¯ã‚»ã‚¹é–‹ç™ºè€…ï¼‰**: å…¨ã‚·ã‚¹ãƒ†ãƒ æ¨©é™ + é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ« + ç›£æŸ»ãƒ­ã‚°
- MFAå¿…é ˆã€IPãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆã€å…¨æ“ä½œãƒ­ã‚°è¨˜éŒ²ã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–

**ã‚·ã‚¹ãƒ†ãƒ ã®æ ¹å¹¹ã‚’æˆã™åŸºæœ¬ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ã€å®Œå…¨ã«å‹•çš„ç®¡ç†ã§ãã¾ã™ï¼**

---

## Section 26 å®Œäº†

ä»¥ä¸Šã€Section 26ã€ŒåŸºæœ¬ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã€ã¨ã—ã¦6ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¿½åŠ ã—ã¾ã—ãŸï¼š
1. ProfessionMasterï¼ˆè·ç¨®ãƒã‚¹ã‚¿ãƒ¼ï¼‰
2. PositionMasterï¼ˆå½¹è·ãƒã‚¹ã‚¿ãƒ¼ï¼‰
3. EmploymentTypeMasterï¼ˆé›‡ç”¨å½¢æ…‹ãƒã‚¹ã‚¿ãƒ¼ï¼‰
4. DepartmentMasterï¼ˆéƒ¨ç½²ãƒã‚¹ã‚¿ãƒ¼ï¼‰
5. **SpecialAccountMasterï¼ˆç‰¹åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ¨©é™ãƒã‚¹ã‚¿ãƒ¼ - Level 97-99ï¼‰**
6. HRPolicyMasterï¼ˆäººäº‹ãƒãƒªã‚·ãƒ¼ãƒã‚¹ã‚¿ãƒ¼ï¼‰

---

## Section 27: è·å“¡å‘ã‘é€šçŸ¥ãƒ»ãŠçŸ¥ã‚‰ã›ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

### èƒŒæ™¯ãƒ»ç›®çš„

**ãƒšãƒ¼ã‚¸URL**:
- [/notifications](https://staff-medical-system-v2.vercel.app/notifications)

**å®Ÿè£…ç¢ºèªå†…å®¹**:
- ãŠçŸ¥ã‚‰ã›é€šçŸ¥ã®ä½œæˆãƒ»é…ä¿¡ï¼ˆ5ã¤ã®ã‚¿ãƒ–ï¼šæ–°è¦ä½œæˆã€é…ä¿¡å±¥æ­´ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€é…ä¿¡åˆ†æã€è¨­å®šï¼‰
- ã‚«ãƒ†ã‚´ãƒªãƒ¼ç®¡ç†ï¼ˆãŠçŸ¥ã‚‰ã›ã€é¢è«‡ã€ç ”ä¿®ã€ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã€ãã®ä»–ï¼‰
- é…ä¿¡å¯¾è±¡é¸æŠï¼ˆå…¨è·å“¡ã€éƒ¨ç½²åˆ¥ã€å€‹åˆ¥é¸æŠã€å½¹è·åˆ¥ï¼‰
- å„ªå…ˆåº¦ç®¡ç†ï¼ˆé«˜ãƒ»ä¸­ãƒ»ä½ï¼‰
- é…ä¿¡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®š
- é–‹å°ç‡ãƒ»ã‚¯ãƒªãƒƒã‚¯ç‡ãƒ»å›ç­”ç‡ã®è¿½è·¡
- ç ”ä¿®å—ä»˜æ©Ÿèƒ½ã®çµ±åˆ

**ç¾çŠ¶ã®èª²é¡Œ**:
- è·å“¡å‘ã‘é€šçŸ¥ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä¸è¶³
- Section 25ï¼ˆã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ï¼‰ã¯ã‚·ã‚¹ãƒ†ãƒ éšœå®³æ¤œçŸ¥ç”¨ã§ã‚ã‚Šã€è·å“¡å‘ã‘ãŠçŸ¥ã‚‰ã›ã¨ã¯åˆ¥ç‰©
- é€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä¸è¶³
- é…ä¿¡å±¥æ­´ãƒ»é–‹å°è¿½è·¡ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä¸è¶³
- ç ”ä¿®å—ä»˜çµ±åˆã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ãŒä¸è¶³

### è¿½åŠ ãŒå¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆ5ã¤ï¼‰

#### 27-1. StaffNotificationTemplateï¼ˆé€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰

**ç›®çš„**: ã‚ˆãä½¿ã†é€šçŸ¥ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåŒ–ã€‚å®šå‹æ–‡ã®ç®¡ç†ã€ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€æ‰¿èªãƒ•ãƒ­ãƒ¼è¨­å®šã€‚

```prisma
model StaffNotificationTemplate {
  id                    String    @id @default(cuid())
  templateCode          String    @unique @map("template_code")
  // INTERVIEW_INVITE, TRAINING_REMINDER, SURVEY_REQUEST, etc.
  templateName          String    @map("template_name")
  // ã€Œé¢è«‡æ¡ˆå†…ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€ã€Œç ”ä¿®ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã€ç­‰
  category              String    @map("category")
  // announcement, interview, training, survey, other

  // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå†…å®¹
  titleTemplate         String    @map("title_template")
  // ã€Œã€{{priority}}ã€‘{{eventName}}ã®ã”æ¡ˆå†…ã€
  contentTemplate       String    @db.Text @map("content_template")
  // æœ¬æ–‡ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ä½¿ç”¨å¯èƒ½ï¼‰

  // ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å®šç¾©
  placeholders          Json?     @map("placeholders")
  // [
  //   { "key": "{{employeeName}}", "description": "è·å“¡æ°å", "required": true },
  //   { "key": "{{eventDate}}", "description": "ã‚¤ãƒ™ãƒ³ãƒˆæ—¥æ™‚", "required": true },
  //   { "key": "{{eventName}}", "description": "ã‚¤ãƒ™ãƒ³ãƒˆå", "required": true }
  // ]

  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
  defaultPriority       String    @default("medium") @map("default_priority")
  // high, medium, low
  defaultTargetType     String?   @map("default_target_type")
  // all, departments, individuals, positions
  requireApproval       Boolean   @default(false) @map("require_approval")
  approverPositionLevel Int?      @map("approver_position_level")

  // é…ä¿¡è¨­å®š
  defaultScheduleType   String?   @map("default_schedule_type")
  // immediate, scheduled, recurring
  defaultSendTime       String?   @map("default_send_time")
  // "09:00"ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé€ä¿¡æ™‚åˆ»ï¼‰
  recurringPattern      String?   @map("recurring_pattern")
  // daily, weekly, monthlyï¼ˆå®šæœŸé…ä¿¡ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰

  // æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«è¨­å®š
  allowAttachments      Boolean   @default(true) @map("allow_attachments")
  maxAttachmentSize     Int?      @map("max_attachment_size")
  // MBå˜ä½
  allowedFileTypes      Json?     @map("allowed_file_types")
  // ["pdf", "docx", "xlsx", "jpg", "png"]

  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¨­å®š
  hasResponseForm       Boolean   @default(false) @map("has_response_form")
  // å›ç­”ãƒ•ã‚©ãƒ¼ãƒ ãŒã‚ã‚‹ã‹
  responseFormTemplate  Json?     @map("response_form_template")
  hasRegistrationForm   Boolean   @default(false) @map("has_registration_form")
  // ç ”ä¿®å—ä»˜ãƒ•ã‚©ãƒ¼ãƒ ãŒã‚ã‚‹ã‹
  registrationCapacity  Int?      @map("registration_capacity")

  // çµ±è¨ˆæƒ…å ±
  usageCount            Int       @default(0) @map("usage_count")
  avgOpenRate           Float?    @map("avg_open_rate")
  avgClickRate          Float?    @map("avg_click_rate")
  avgResponseRate       Float?    @map("avg_response_rate")

  // çŠ¶æ…‹ç®¡ç†
  isActive              Boolean   @default(true) @map("is_active")
  isPublic              Boolean   @default(true) @map("is_public")
  // å…¨HRæ‹…å½“è€…ãŒä½¿ç”¨å¯èƒ½ã‹
  createdBy             String?   @map("created_by")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([category])
  @@index([isActive])
  @@index([usageCount])
  @@map("staff_notification_templates")
}
```

#### 27-2. StaffNotificationï¼ˆé€šçŸ¥æœ¬ä½“ï¼‰

**ç›®çš„**: é…ä¿¡ã™ã‚‹é€šçŸ¥ã®æœ¬ä½“ãƒ‡ãƒ¼ã‚¿ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ç”Ÿæˆã¾ãŸã¯å€‹åˆ¥ä½œæˆã€‚

```prisma
model StaffNotification {
  id                    String    @id @default(cuid())
  notificationNumber    String    @unique @map("notification_number")
  // NOTIF-2025-001

  // åŸºæœ¬æƒ…å ±
  title                 String    @map("title")
  content               String    @db.Text @map("content")
  category              String    @map("category")
  // announcement, interview, training, survey, other
  priority              String    @default("medium") @map("priority")
  // high, medium, low

  // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé–¢é€£
  templateId            String?   @map("template_id")
  usedPlaceholders      Json?     @map("used_placeholders")
  // { "{{employeeName}}": "å±±ç”°å¤ªéƒ", "{{eventDate}}": "2025-10-15" }

  // é…ä¿¡å¯¾è±¡
  targetType            String    @map("target_type")
  // all, departments, individuals, positions, custom
  targetDepartments     Json?     @map("target_departments")
  // ["çœ‹è­·éƒ¨", "ãƒªãƒãƒ“ãƒªéƒ¨"]
  targetPositions       Json?     @map("target_positions")
  // ["çœ‹è­·å¸«", "ç†å­¦ç™‚æ³•å£«"]
  targetIndividuals     Json?     @map("target_individuals")
  // ["EMP_001", "EMP_002"]
  targetConditions      Json?     @map("target_conditions")
  // { "experienceYears": { "min": 1, "max": 3 }, "evaluationRank": ["A+", "A"] }
  totalTargetCount      Int       @default(0) @map("total_target_count")

  // é…ä¿¡çŠ¶æ…‹
  status                String    @default("draft") @map("status")
  // draft, pending_approval, approved, rejected, scheduled, sending, delivered, failed, cancelled

  // æ‰¿èªãƒ•ãƒ­ãƒ¼
  requiresApproval      Boolean   @default(false) @map("requires_approval")
  approvalRequestedAt   DateTime? @map("approval_requested_at")
  approvedBy            String?   @map("approved_by")
  approvedAt            DateTime? @map("approved_at")
  rejectedBy            String?   @map("rejected_by")
  rejectedAt            DateTime? @map("rejected_at")
  rejectionReason       String?   @db.Text @map("rejection_reason")

  // ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
  scheduledSendAt       DateTime? @map("scheduled_send_at")
  actualSentAt          DateTime? @map("actual_sent_at")
  isRecurring           Boolean   @default(false) @map("is_recurring")
  recurringPattern      String?   @map("recurring_pattern")
  nextScheduledAt       DateTime? @map("next_scheduled_at")

  // æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«
  attachments           Json?     @map("attachments")
  // [
  //   { "fileName": "æ¡ˆå†….pdf", "fileSize": 1024000, "fileUrl": "...", "uploadedAt": "..." }
  // ]

  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¨­å®š
  hasResponseForm       Boolean   @default(false) @map("has_response_form")
  responseFormSchema    Json?     @map("response_form_schema")
  responseDeadline      DateTime? @map("response_deadline")

  hasRegistrationForm   Boolean   @default(false) @map("has_registration_form")
  registrationDeadline  DateTime? @map("registration_deadline")
  registrationCapacity  Int?      @map("registration_capacity")
  currentRegistrations  Int       @default(0) @map("current_registrations")

  // é…ä¿¡çµ±è¨ˆ
  totalSent             Int       @default(0) @map("total_sent")
  totalDelivered        Int       @default(0) @map("total_delivered")
  totalFailed           Int       @default(0) @map("total_failed")
  totalOpened           Int       @default(0) @map("total_opened")
  totalClicked          Int       @default(0) @map("total_clicked")
  totalResponded        Int       @default(0) @map("total_responded")

  openRate              Float?    @map("open_rate")
  clickRate             Float?    @map("click_rate")
  responseRate          Float?    @map("response_rate")

  // ã‚¨ãƒ©ãƒ¼æƒ…å ±
  errorMessage          String?   @db.Text @map("error_message")
  failedRecipients      Json?     @map("failed_recipients")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdBy             String    @map("created_by")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  sentBy                String?   @map("sent_by")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  deliveryLogs          StaffNotificationDelivery[]
  responses             StaffNotificationResponse[]
  registrations         StaffNotificationRegistration[]

  @@index([status])
  @@index([category])
  @@index([priority])
  @@index([scheduledSendAt])
  @@index([createdBy])
  @@index([createdAt])
  @@map("staff_notifications")
}
```

#### 27-3. StaffNotificationDeliveryï¼ˆå€‹åˆ¥é…ä¿¡ãƒ­ã‚°ï¼‰

**ç›®çš„**: å„è·å“¡ã¸ã®é…ä¿¡çŠ¶æ³ã‚’å€‹åˆ¥ã«è¿½è·¡ã€‚é–‹å°ãƒ»ã‚¯ãƒªãƒƒã‚¯ãƒ»å›ç­”ã®å®Œå…¨ãªè¿½è·¡ã€‚

```prisma
model StaffNotificationDelivery {
  id                    String    @id @default(cuid())
  notificationId        String    @map("notification_id")
  employeeId            String    @map("employee_id")
  employeeName          String    @map("employee_name")
  employeeDepartment    String?   @map("employee_department")
  employeePosition      String?   @map("employee_position")

  // é…ä¿¡æƒ…å ±
  sentAt                DateTime  @map("sent_at")
  deliveryStatus        String    @default("sent") @map("delivery_status")
  // sent, delivered, failed, bounced
  deliveryChannel       String    @map("delivery_channel")
  // email, in_app, voicedrive, sms

  // é–‹å°è¿½è·¡
  isOpened              Boolean   @default(false) @map("is_opened")
  openedAt              DateTime? @map("opened_at")
  openCount             Int       @default(0) @map("open_count")
  firstOpenedAt         DateTime? @map("first_opened_at")
  lastOpenedAt          DateTime? @map("last_opened_at")
  openedFrom            String?   @map("opened_from")
  // web, mobile_app, email_client

  // ã‚¯ãƒªãƒƒã‚¯è¿½è·¡
  isClicked             Boolean   @default(false) @map("is_clicked")
  clickedAt             DateTime? @map("clicked_at")
  clickCount            Int       @default(0) @map("click_count")
  clickedLinks          Json?     @map("clicked_links")
  // [{ "url": "...", "clickedAt": "...", "count": 3 }]

  // å›ç­”è¿½è·¡
  hasResponded          Boolean   @default(false) @map("has_responded")
  respondedAt           DateTime? @map("responded_at")

  // æ—¢èª­ãƒ»æœªèª­ç®¡ç†
  isRead                Boolean   @default(false) @map("is_read")
  readAt                DateTime? @map("read_at")
  isArchived            Boolean   @default(false) @map("is_archived")
  archivedAt            DateTime? @map("archived_at")

  // ã‚¨ãƒ©ãƒ¼æƒ…å ±
  failureReason         String?   @map("failure_reason")
  retryCount            Int       @default(0) @map("retry_count")
  lastRetryAt           DateTime? @map("last_retry_at")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  notification          StaffNotification @relation(fields: [notificationId], references: [id])

  @@index([notificationId])
  @@index([employeeId])
  @@index([isOpened])
  @@index([isRead])
  @@index([deliveryStatus])
  @@index([sentAt])
  @@map("staff_notification_deliveries")
}
```

#### 27-4. StaffNotificationResponseï¼ˆé€šçŸ¥ã¸ã®å›ç­”ï¼‰

**ç›®çš„**: ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆãƒ»é¢è«‡å¸Œæœ›æ—¥ç­‰ã®å›ç­”ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã€‚ãƒ•ã‚©ãƒ¼ãƒ å½¢å¼ã®å›ç­”ã‚’æŸ”è»Ÿã«ç®¡ç†ã€‚

```prisma
model StaffNotificationResponse {
  id                    String    @id @default(cuid())
  notificationId        String    @map("notification_id")
  employeeId            String    @map("employee_id")
  employeeName          String    @map("employee_name")
  employeeDepartment    String?   @map("employee_department")

  // å›ç­”å†…å®¹
  responseData          Json      @map("response_data")
  // {
  //   "interviewPreferredDates": ["2025-10-15", "2025-10-16"],
  //   "interviewPreferredTime": "åˆå‰",
  //   "comments": "ç‰¹ã«ãªã—"
  // }

  // ãƒ•ã‚©ãƒ¼ãƒ æ¤œè¨¼
  isComplete            Boolean   @default(true) @map("is_complete")
  validationErrors      Json?     @map("validation_errors")
  // [{ "field": "preferredDates", "error": "å¿…é ˆé …ç›®ã§ã™" }]

  // æå‡ºæƒ…å ±
  submittedAt           DateTime  @default(now()) @map("submitted_at")
  submittedFrom         String?   @map("submitted_from")
  // web, mobile_app
  ipAddress             String?   @map("ip_address")

  // ç·¨é›†å±¥æ­´
  isEdited              Boolean   @default(false) @map("is_edited")
  editCount             Int       @default(0) @map("edit_count")
  lastEditedAt          DateTime? @map("last_edited_at")
  editHistory           Json?     @map("edit_history")
  // [{ "editedAt": "...", "changedFields": ["preferredDates"], "previousValue": {...} }]

  // å‡¦ç†çŠ¶æ…‹
  processingStatus      String    @default("pending") @map("processing_status")
  // pending, processed, approved, rejected
  processedBy           String?   @map("processed_by")
  processedAt           DateTime? @map("processed_at")
  processingNote        String?   @db.Text @map("processing_note")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  notification          StaffNotification @relation(fields: [notificationId], references: [id])

  @@index([notificationId])
  @@index([employeeId])
  @@index([submittedAt])
  @@index([processingStatus])
  @@map("staff_notification_responses")
}
```

#### 27-5. StaffNotificationRegistrationï¼ˆç ”ä¿®ç­‰ã®å—ä»˜ï¼‰

**ç›®çš„**: ç ”ä¿®é€šçŸ¥ã«çµ±åˆã•ã‚ŒãŸå—ä»˜æ©Ÿèƒ½ã€‚å‚åŠ ç™»éŒ²ãƒ»å‡ºæ¬ ç®¡ç†ãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«å¾…ã¡ã®ç®¡ç†ã€‚

```prisma
model StaffNotificationRegistration {
  id                    String    @id @default(cuid())
  notificationId        String    @map("notification_id")
  employeeId            String    @map("employee_id")
  employeeName          String    @map("employee_name")
  employeeDepartment    String?   @map("employee_department")
  employeePosition      String?   @map("employee_position")

  // ç™»éŒ²æƒ…å ±
  registrationStatus    String    @default("registered") @map("registration_status")
  // registered, waitlisted, confirmed, attended, absent, cancelled
  registeredAt          DateTime  @default(now()) @map("registered_at")
  confirmedAt           DateTime? @map("confirmed_at")

  // å„ªå…ˆåº¦ãƒ»é †ç•ª
  registrationNumber    Int       @map("registration_number")
  // ç™»éŒ²é †ï¼ˆ1, 2, 3...ï¼‰
  priority              Int?      @map("priority")
  // å„ªå…ˆé †ä½ï¼ˆå¿…é ˆç ”ä¿®ã¯é«˜å„ªå…ˆåº¦ï¼‰
  isWaitlisted          Boolean   @default(false) @map("is_waitlisted")
  waitlistPosition      Int?      @map("waitlist_position")

  // å‚åŠ æƒ…å ±
  attendanceStatus      String?   @map("attendance_status")
  // attended, absent, partial, excused
  attendedAt            DateTime? @map("attended_at")
  checkInTime           DateTime? @map("check_in_time")
  checkOutTime          DateTime? @map("check_out_time")
  attendanceDuration    Int?      @map("attendance_duration")
  // åˆ†å˜ä½

  // ã‚­ãƒ£ãƒ³ã‚»ãƒ«æƒ…å ±
  isCancelled           Boolean   @default(false) @map("is_cancelled")
  cancelledAt           DateTime? @map("cancelled_at")
  cancellationReason    String?   @db.Text @map("cancellation_reason")
  cancelledBy           String?   @map("cancelled_by")
  // employeeï¼ˆæœ¬äººï¼‰, adminï¼ˆç®¡ç†è€…ï¼‰

  // è¿½åŠ æƒ…å ±
  specialRequests       String?   @db.Text @map("special_requests")
  // ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã€é…æ…®äº‹é …ç­‰
  notes                 String?   @db.Text @map("notes")
  adminNotes            String?   @db.Text @map("admin_notes")

  // é€šçŸ¥è¨­å®š
  sendReminder          Boolean   @default(true) @map("send_reminder")
  reminderSentAt        DateTime? @map("reminder_sent_at")
  sendCancellationNotice Boolean  @default(true) @map("send_cancellation_notice")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  notification          StaffNotification @relation(fields: [notificationId], references: [id])

  @@index([notificationId])
  @@index([employeeId])
  @@index([registrationStatus])
  @@index([registrationNumber])
  @@index([isWaitlisted])
  @@index([attendanceStatus])
  @@map("staff_notification_registrations")
}
```

### å®Ÿè£…ã«ã‚ˆã‚‹åŠ¹æœ

âœ… **è·å“¡å‘ã‘é€šçŸ¥ã®å®Œå…¨ç®¡ç†**
- ãŠçŸ¥ã‚‰ã›ã€é¢è«‡æ¡ˆå†…ã€ç ”ä¿®æ¡ˆå†…ã€ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆç­‰ã‚’ä¸€å…ƒç®¡ç†
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåŒ–ã«ã‚ˆã‚Šé…ä¿¡ä½œæ¥­ã‚’åŠ¹ç‡åŒ–
- ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ»å„ªå…ˆåº¦ã«ã‚ˆã‚‹æ•´ç†

âœ… **é…ä¿¡åŠ¹æœã®å®Œå…¨è¿½è·¡**
- å€‹åˆ¥ã®é–‹å°ç‡ãƒ»ã‚¯ãƒªãƒƒã‚¯ç‡ãƒ»å›ç­”ç‡ã‚’è¿½è·¡
- ã©ã®è·å“¡ãŒèª­ã‚“ã ã‹ã€å›ç­”ã—ãŸã‹ã‚’å®Œå…¨æŠŠæ¡
- æœªèª­è€…ã¸ã®è‡ªå‹•ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼

âœ… **æŸ”è»Ÿãªé…ä¿¡å¯¾è±¡è¨­å®š**
- å…¨è·å“¡ã€éƒ¨ç½²åˆ¥ã€å½¹è·åˆ¥ã€å€‹åˆ¥é¸æŠ
- æ¡ä»¶æŒ‡å®šï¼ˆçµŒé¨“å¹´æ•°ã€è©•ä¾¡ãƒ©ãƒ³ã‚¯ç­‰ï¼‰ã«ã‚ˆã‚‹çµã‚Šè¾¼ã¿
- ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®å…ˆè¡Œé…ä¿¡

âœ… **ç ”ä¿®å—ä»˜æ©Ÿèƒ½ã®çµ±åˆ**
- ç ”ä¿®é€šçŸ¥ã«å—ä»˜ãƒ•ã‚©ãƒ¼ãƒ ã‚’çµ±åˆ
- å®šå“¡ç®¡ç†ãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«å¾…ã¡ç®¡ç†
- å‡ºæ¬ ç®¡ç†ãƒ»å‚åŠ è¨¼æ˜æ›¸ç™ºè¡Œ

âœ… **æ‰¿èªãƒ•ãƒ­ãƒ¼ãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«é…ä¿¡**
- é‡è¦é€šçŸ¥ã¯æ‰¿èªãƒ•ãƒ­ãƒ¼è¨­å®š
- äºˆç´„é…ä¿¡ãƒ»å®šæœŸé…ä¿¡ï¼ˆæ¯é€±æœˆæ›œç­‰ï¼‰
- æœ€é©é€ä¿¡æ™‚åˆ»ã®è‡ªå‹•ææ¡ˆ

âœ… **VoiceDriveé€£æºï¼ˆå°†æ¥ï¼‰**
- VoiceDriveã¸ã®é€šçŸ¥åŒæœŸ
- VoiceDriveã‹ã‚‰ã®é€šçŸ¥ä½œæˆ
- çµ±åˆã•ã‚ŒãŸé€šçŸ¥ç®¡ç†

**è·å“¡å‘ã‘é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ã‚’å®Œå…¨ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åŒ–ã—ã€é…ä¿¡åŠ¹ç‡ã¨è¿½è·¡ç²¾åº¦ã‚’å¤§å¹…ã«å‘ä¸Šï¼**

---

## Section 28: æ¡ç”¨ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆäººæãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ç®¡ç†ãƒ»è¦‹å­¦è€…ãƒ»å¿œå‹Ÿè€…ï¼‰

### æ¦‚è¦
çµ±åˆæ¡ç”¨ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã€è¦‹å­¦è€…ã‹ã‚‰å¿œå‹Ÿè€…ã€å†…å®šè€…ã€å…¥ç¤¾ã¾ã§ã®ä¸€è²«ã—ãŸäººæãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ç®¡ç†ã‚’å®Ÿç¾ã—ã¾ã™ã€‚é‡è¤‡ãƒã‚§ãƒƒã‚¯ã€äººæãƒ—ãƒ¼ãƒ«ã€æ–½è¨­åˆ¥æ¡ç”¨ç®¡ç†ã€ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç‡åˆ†æãªã©ã‚’å«ã¿ã¾ã™ã€‚

**ãƒšãƒ¼ã‚¸URL**: https://staff-medical-system-v2.vercel.app/recruitment

**ä¸»è¦æ©Ÿèƒ½**:
- äººæãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ç®¡ç†ï¼ˆè¦‹å­¦è€…â†’å¿œå‹Ÿè€…â†’å†…å®šè€…â†’å…¥ç¤¾â†’é€€è·è€…ãƒ—ãƒ¼ãƒ«ï¼‰
- è¦‹å­¦äºˆç´„ç®¡ç†ï¼ˆæ–½è¨­è¦‹å­¦ãƒ»è·å ´ä½“é¨“ï¼‰
- å¿œå‹Ÿè€…ç®¡ç†ï¼ˆæ›¸é¡é¸è€ƒãƒ»é¢æ¥ãƒ»è©•ä¾¡ï¼‰
- æ±‚äººç¥¨ç®¡ç†ï¼ˆè¤‡æ•°æ–½è¨­ãƒ»è·ç¨®ï¼‰
- äººææ¤œç´¢ãƒ»é‡è¤‡ãƒã‚§ãƒƒã‚¯
- ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç‡åˆ†æ
- äººæãƒ—ãƒ¼ãƒ«ç®¡ç†ï¼ˆå°†æ¥å€™è£œãƒ»é«˜è©•ä¾¡ï¼‰

### ä¸è¶³DBé …ç›®

#### 1. TalentProfileï¼ˆäººæãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«çµ±åˆç®¡ç†ï¼‰

```prisma
model TalentProfile {
  id                    String    @id @default(cuid())

  // åŸºæœ¬æƒ…å ±
  lastName              String    @map("last_name")
  firstName             String    @map("first_name")
  lastNameKana          String    @map("last_name_kana")
  firstNameKana         String    @map("first_name_kana")
  email                 String    @map("email")
  phone                 String    @map("phone")
  birthDate             String?   @map("birth_date")
  gender                String?   @map("gender")
  // ç”·æ€§ã€å¥³æ€§ã€ãã®ä»–ã€å›ç­”ã—ãªã„
  address               String?   @db.Text @map("address")
  postalCode            String?   @map("postal_code")

  // åˆå›æ¥è§¦æƒ…å ±
  firstContactDate      String    @map("first_contact_date")
  lastContactDate       String?   @map("last_contact_date")
  source                String    @map("source")
  // æ±‚äººã‚µã‚¤ãƒˆã€ç´¹ä»‹ã€ç›´æ¥å¿œå‹Ÿã€ãƒãƒ­ãƒ¼ãƒ¯ãƒ¼ã‚¯ã€å¤§å­¦ç´¹ä»‹ã€ãã®ä»–
  sourceDetails         String?   @db.Text @map("source_details")
  referredBy            String?   @map("referred_by")

  // ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆäººæãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼‰
  currentStatus         String    @map("current_status")
  // visitor-inquiryï¼ˆè¦‹å­¦å•åˆã›ï¼‰, visitor-scheduledï¼ˆè¦‹å­¦äºˆç´„æ¸ˆï¼‰, visitor-completedï¼ˆè¦‹å­¦å®Œäº†ï¼‰
  // applicant-submittedï¼ˆå¿œå‹Ÿæ›¸é¡æå‡ºï¼‰, applicant-screeningï¼ˆæ›¸é¡é¸è€ƒä¸­ï¼‰, applicant-interviewï¼ˆé¢æ¥ä¸­ï¼‰
  // offer-pendingï¼ˆå†…å®šä¿ç•™ï¼‰, offer-acceptedï¼ˆå†…å®šæ‰¿è«¾ï¼‰, offer-rejectedï¼ˆå†…å®šè¾é€€ï¼‰
  // employee-onboardingï¼ˆå…¥ç¤¾æ‰‹ç¶šä¸­ï¼‰, employee-activeï¼ˆåœ¨è·ä¸­ï¼‰
  // talent-poolï¼ˆäººæãƒ—ãƒ¼ãƒ«ï¼‰, inactiveï¼ˆéã‚¢ã‚¯ãƒ†ã‚£ãƒ–ï¼‰, blacklistedï¼ˆãƒ–ãƒ©ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼‰

  currentStage          String    @map("current_stage")
  // visitor, applicant, offer-holder, employee, inactive
  statusChangedAt       DateTime  @default(now()) @map("status_changed_at")

  // ã‚¿ã‚°ãƒ»ãƒ•ãƒ©ã‚°
  tags                  Json?     @map("tags")
  // ["æ–°å’", "çµŒé¨“è€…", "é«˜è©•ä¾¡", "å³æˆ¦åŠ›", "å°†æ¥å€™è£œ"]

  // è¦‹å­¦è€…æƒ…å ±ï¼ˆvisitorã‚¹ãƒ†ãƒ¼ã‚¸ã®å ´åˆï¼‰
  visitorInfo           Json?     @map("visitor_info")
  // {
  //   scheduledVisitDate: "2024-02-01",
  //   interestedDepartments: ["çœ‹è­·éƒ¨", "å†…ç§‘"],
  //   interestedPositions: ["çœ‹è­·å¸«"],
  //   visitPurpose: "æ–½è¨­è¦‹å­¦ãƒ»è·å ´ä½“é¨“",
  //   visitNotes: "..."
  // }

  // å¿œå‹Ÿè€…æƒ…å ±ï¼ˆapplicantã‚¹ãƒ†ãƒ¼ã‚¸ã®å ´åˆï¼‰
  applicantInfo         Json?     @map("applicant_info")
  // {
  //   desiredPosition: "çœ‹è­·å¸«",
  //   desiredSalary: { min: 400, max: 500 },
  //   availableStartDate: "2024-03-01",
  //   currentEmployment: "ä»–é™¢å‹¤å‹™ä¸­",
  //   documents: {
  //     resume: { fileName: "resume.pdf", uploadedAt: "2024-01-20", version: 1 },
  //     portfolio: { fileName: "portfolio.pdf", uploadedAt: "2024-01-21", version: 1 }
  //   },
  //   qualifications: ["æ­£çœ‹è­·å¸«", "èªå®šçœ‹è­·å¸«"],
  //   licenses: [],
  //   skills: [],
  //   experience: [
  //     {
  //       company: "Aç—…é™¢",
  //       position: "çœ‹è­·å¸«",
  //       startDate: "2015-04-01",
  //       endDate: "2024-01-31",
  //       isCurrent: true,
  //       responsibilities: "ç—…æ£Ÿçœ‹è­·æ¥­å‹™"
  //     }
  //   ],
  //   education: [
  //     {
  //       institution: "Bçœ‹è­·å°‚é–€å­¦æ ¡",
  //       degree: "çœ‹è­·å­¦",
  //       major: "çœ‹è­·",
  //       graduationDate: "2015-03"
  //     }
  //   ]
  // }

  // å†…å®šè€…æƒ…å ±ï¼ˆoffer-holderã‚¹ãƒ†ãƒ¼ã‚¸ã®å ´åˆï¼‰
  offerInfo             Json?     @map("offer_info")
  // {
  //   offerDate: "2024-02-15",
  //   offerPosition: "çœ‹è­·å¸«",
  //   offerSalary: 450,
  //   expectedStartDate: "2024-04-01",
  //   offerLetter: { fileName: "offer.pdf", sentAt: "2024-02-15" },
  //   responseDeadline: "2024-03-01",
  //   acceptedAt: "2024-02-20",
  //   rejectedAt: null,
  //   rejectionReason: null
  // }

  // è·å“¡æƒ…å ±ï¼ˆemployeeã‚¹ãƒ†ãƒ¼ã‚¸ã®å ´åˆï¼‰
  employeeInfo          Json?     @map("employee_info")
  // {
  //   employeeId: "OH-NS-2024-001",
  //   startDate: "2024-04-01",
  //   facility: "å°åŸç—…é™¢",
  //   department: "çœ‹è­·éƒ¨",
  //   position: "çœ‹è­·å¸«",
  //   endDate: null,
  //   resignationDate: null,
  //   resignationReason: null
  // }

  // äººæãƒ—ãƒ¼ãƒ«æƒ…å ±ï¼ˆtalent-poolã‚¹ãƒ†ãƒ¼ã‚¸ã®å ´åˆï¼‰
  talentPoolInfo        Json?     @map("talent_pool_info")
  // {
  //   addedDate: "2024-01-15",
  //   addedBy: "HRéƒ¨é•·",
  //   category: "future-fit" | "high-quality" | "specialized",
  //   potentialPositions: ["ç†å­¦ç™‚æ³•å£«", "ãƒªãƒãƒ“ãƒªä¸»ä»»"],
  //   recontactDate: "2024-04-01",
  //   priority: "high" | "medium" | "low",
  //   notes: "çµŒé¨“è±Šå¯Œã§å„ªç§€ã ãŒã€ç¾åœ¨ã®ãƒã‚¸ã‚·ãƒ§ãƒ³ã«ç©ºããªã—ã€‚æ¬¡æœŸæ˜‡é€²å€™è£œã¨ã—ã¦ä¿æŒã€‚"
  // }

  // æ¥è§¦å±¥æ­´
  contactHistory        Json?     @map("contact_history")
  // [
  //   {
  //     date: "2024-01-15",
  //     type: "email" | "phone" | "visit" | "interview",
  //     contactedBy: "äººäº‹æ‹…å½“è€…A",
  //     summary: "åˆå›å•åˆã›å¯¾å¿œ",
  //     nextAction: "è¦‹å­¦æ—¥ç¨‹èª¿æ•´"
  //   }
  // ]

  // ãƒ•ãƒ©ã‚°
  flags                 Json?     @map("flags")
  // {
  //   isDuplicate: false,
  //   hasMultipleFacilityApplications: false,
  //   isPreviousEmployee: false,
  //   isBlacklisted: false
  // }

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  metadata              Json?     @map("metadata")
  // {
  //   createdAt: "2024-01-15",
  //   createdBy: "admin",
  //   updatedAt: "2024-01-20",
  //   updatedBy: "admin",
  //   viewCount: 5,
  //   lastViewedAt: "2024-01-20",
  //   lastViewedBy: "admin"
  // }

  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String    @map("created_by")

  @@map("talent_profiles")
  @@index([email])
  @@index([phone])
  @@index([currentStatus])
  @@index([currentStage])
  @@index([firstContactDate])
}
```

**è¿½åŠ ç†ç”±**: äººæã®ä¸€å…ƒç®¡ç†ã€‚è¦‹å­¦è€…â†’å¿œå‹Ÿè€…â†’å†…å®šè€…â†’å…¥ç¤¾ã¾ã§ã®å…¨ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’1ã¤ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã§è¿½è·¡ã€‚

---

#### 2. JobPostingï¼ˆæ±‚äººç¥¨ç®¡ç†ï¼‰

```prisma
model JobPosting {
  id                    String    @id @default(cuid())

  // åŸºæœ¬æƒ…å ±
  title                 String    @map("title")
  jobNumber             String    @unique @map("job_number")
  // JOB-2024-OH-NS-001ï¼ˆæ–½è¨­ã‚³ãƒ¼ãƒ‰ãƒ»è·ç¨®ã‚³ãƒ¼ãƒ‰å«ã‚€ï¼‰

  // é…å±æƒ…å ±
  facility              String    @map("facility")
  // obara-hospital, tachigami-hospital, espoir-tachigami, hojuan
  department            String    @map("department")
  workLocation          String    @map("work_location")

  // é›‡ç”¨æ¡ä»¶
  employmentType        String    @map("employment_type")
  // æ­£ç¤¾å“¡ã€å¥‘ç´„ç¤¾å“¡ã€ãƒ‘ãƒ¼ãƒˆã€ã‚¢ãƒ«ãƒã‚¤ãƒˆã€æ´¾é£
  numberOfPositions     Int       @map("number_of_positions")

  // çµ¦ä¸
  salary                Json      @map("salary")
  // { min: 400, max: 600, unit: "ä¸‡å††/æœˆ", details: "è³ä¸å¹´2å›" }
  benefits              Json?     @map("benefits")
  // ["ç¤¾ä¼šä¿é™ºå®Œå‚™", "é€€è·é‡‘åˆ¶åº¦", "ç ”ä¿®åˆ¶åº¦å……å®Ÿ", "æ¸©æ³‰æ–½è¨­åˆ©ç”¨å¯"]

  // æ¥­å‹™å†…å®¹
  jobDescription        String    @db.Text @map("job_description")
  responsibilities      Json?     @map("responsibilities")
  // ["ç—…æ£Ÿçœ‹è­·æ¥­å‹™", "æ‚£è€…ã‚±ã‚¢", "è¨˜éŒ²æ¥­å‹™", "ãƒãƒ¼ãƒ åŒ»ç™‚é€£æº"]

  // å¿œå‹Ÿè³‡æ ¼
  requiredQualifications Json     @map("required_qualifications")
  // ["æ­£çœ‹è­·å¸«å…è¨±", "ç—…æ£ŸçµŒé¨“3å¹´ä»¥ä¸Š"]
  desiredQualifications Json?     @map("desired_qualifications")
  // ["èªå®šçœ‹è­·å¸«è³‡æ ¼", "ç®¡ç†çµŒé¨“"]
  requiredSkills        Json?     @map("required_skills")
  desiredSkills         Json?     @map("desired_skills")

  // å‹¤å‹™æ¡ä»¶
  workHours             String?   @map("work_hours")
  // "8:30-17:30ï¼ˆã‚·ãƒ•ãƒˆåˆ¶ï¼‰"
  holidays              String?   @map("holidays")
  // "é€±ä¼‘2æ—¥åˆ¶ï¼ˆã‚·ãƒ•ãƒˆåˆ¶ï¼‰"
  overtime              String?   @map("overtime")
  // "æœˆå¹³å‡10-15æ™‚é–“"

  // é¸è€ƒãƒ—ãƒ­ã‚»ã‚¹
  selectionProcess      Json?     @map("selection_process")
  // [
  //   { step: 1, name: "æ›¸é¡é¸è€ƒ", duration: "7æ—¥" },
  //   { step: 2, name: "ä¸€æ¬¡é¢æ¥", duration: "5æ—¥" },
  //   { step: 3, name: "äºŒæ¬¡é¢æ¥", duration: "5æ—¥" },
  //   { step: 4, name: "æœ€çµ‚é¢æ¥", duration: "3æ—¥" }
  // ]

  // å…¬é–‹çŠ¶æ³
  status                String    @default("draft") @map("status")
  // draftï¼ˆä¸‹æ›¸ãï¼‰, activeï¼ˆå…¬é–‹ä¸­ï¼‰, closedï¼ˆå‹Ÿé›†çµ‚äº†ï¼‰, filledï¼ˆå……è¶³ï¼‰
  postingDate           String?   @map("posting_date")
  closingDate           String?   @map("closing_date")
  filledDate            String?   @map("filled_date")

  // å…¬é–‹ãƒãƒ£ãƒãƒ«
  publishChannels       Json?     @map("publish_channels")
  // ["è‡ªç¤¾ã‚µã‚¤ãƒˆ", "æ±‚äººã‚µã‚¤ãƒˆA", "æ±‚äººã‚µã‚¤ãƒˆB", "ãƒãƒ­ãƒ¼ãƒ¯ãƒ¼ã‚¯"]

  // å¿œå‹ŸçŠ¶æ³
  applicantCount        Int       @default(0) @map("applicant_count")
  interviewCount        Int       @default(0) @map("interview_count")
  offerCount            Int       @default(0) @map("offer_count")
  hireCount             Int       @default(0) @map("hire_count")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdBy             String    @map("created_by")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  approvedBy            String?   @map("approved_by")
  approvedAt            DateTime? @map("approved_at")

  createdAt             DateTime  @default(now()) @map("created_at")

  @@map("job_postings")
  @@index([facility])
  @@index([status])
  @@index([postingDate])
}
```

**è¿½åŠ ç†ç”±**: æ±‚äººç¥¨ã®ä¸€å…ƒç®¡ç†ã€‚è¤‡æ•°æ–½è¨­ãƒ»è¤‡æ•°ãƒãƒ£ãƒãƒ«ã¸ã®å±•é–‹ã‚’ç®¡ç†ã€‚

---

#### 3. VisitReservationï¼ˆè¦‹å­¦äºˆç´„ç®¡ç†ï¼‰

```prisma
model VisitReservation {
  id                    String    @id @default(cuid())

  // è¦‹å­¦è€…æƒ…å ±
  talentId              String    @map("talent_id")
  reservationNumber     String    @unique @map("reservation_number")
  // VISIT-2024-OH-001

  // äºˆç´„æ—¥æ™‚
  scheduledDate         String    @map("scheduled_date")
  scheduledTime         String    @map("scheduled_time")
  duration              Int       @default(120) @map("duration")
  // åˆ†å˜ä½ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ2æ™‚é–“ï¼‰

  // è¦‹å­¦å…ˆ
  facility              String    @map("facility")
  departments           Json      @map("departments")
  // ["çœ‹è­·éƒ¨", "å†…ç§‘", "ãƒªãƒãƒ“ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç§‘"]

  // è¦‹å­¦ã‚¿ã‚¤ãƒ—
  visitType             String    @map("visit_type")
  // individualï¼ˆå€‹åˆ¥ï¼‰, groupï¼ˆã‚°ãƒ«ãƒ¼ãƒ—ï¼‰, student-groupï¼ˆå­¦ç”Ÿå›£ä½“ï¼‰
  groupSize             Int?      @map("group_size")

  // æ‹…å½“è€…
  coordinator           Json?     @map("coordinator")
  // { id: "c1", name: "ç”°ä¸­ ç¾æ™ºå­", department: "äººäº‹éƒ¨" }
  guides                Json?     @map("guides")
  // [
  //   { id: "g1", name: "çœ‹è­·éƒ¨é•·", department: "çœ‹è­·éƒ¨", timeSlot: "14:00-15:00" }
  // ]

  // è¦‹å­¦å†…å®¹
  agenda                Json?     @map("agenda")
  // [
  //   { time: "14:00", activity: "æ–½è¨­æ¡ˆå†…", location: "æœ¬é¤¨", responsible: "äººäº‹éƒ¨" },
  //   { time: "14:30", activity: "çœ‹è­·éƒ¨è¦‹å­¦", location: "3éšç—…æ£Ÿ", responsible: "çœ‹è­·éƒ¨é•·" }
  // ]
  interestedPositions   Json?     @map("interested_positions")
  // ["çœ‹è­·å¸«", "ãƒªãƒãƒ“ãƒªè·"]
  visitPurpose          String?   @db.Text @map("visit_purpose")

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status                String    @default("requested") @map("status")
  // requestedï¼ˆäºˆç´„ç”³è¾¼ï¼‰, confirmedï¼ˆç¢ºå®šï¼‰, rescheduledï¼ˆæ—¥ç¨‹å¤‰æ›´ï¼‰,
  // completedï¼ˆè¦‹å­¦å®Œäº†ï¼‰, cancelledï¼ˆã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼‰, no-showï¼ˆç„¡æ–­æ¬ å¸­ï¼‰

  // ã‚­ãƒ£ãƒ³ã‚»ãƒ«æƒ…å ±
  cancelledAt           DateTime? @map("cancelled_at")
  cancelledBy           String?   @map("cancelled_by")
  cancellationReason    String?   @db.Text @map("cancellation_reason")

  // è¦‹å­¦å¾Œãƒ•ã‚©ãƒ­ãƒ¼
  completedAt           DateTime? @map("completed_at")
  feedback              Json?     @map("feedback")
  // {
  //   satisfaction: 5,
  //   comments: "ã¨ã¦ã‚‚è‰¯ã„é›°å›²æ°—ã§ã—ãŸ",
  //   likelyToApply: true,
  //   interestedPositions: ["çœ‹è­·å¸«"]
  // }
  followUpActions       Json?     @map("follow_up_actions")
  // [
  //   { action: "å¿œå‹Ÿæ¡ˆå†…é€ä»˜", dueDate: "2024-02-05", status: "pending" }
  // ]

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String    @map("created_by")

  @@map("visit_reservations")
  @@index([talentId])
  @@index([facility])
  @@index([scheduledDate])
  @@index([status])
}
```

**è¿½åŠ ç†ç”±**: è¦‹å­¦äºˆç´„ã®è©³ç´°ç®¡ç†ã€‚ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«èª¿æ•´ã€æ‹…å½“è€…å‰²å½“ã€è¦‹å­¦å¾Œãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—ã‚’ç®¡ç†ã€‚

---

#### 4. RecruitmentInterviewï¼ˆæ¡ç”¨é¢æ¥ç®¡ç†ï¼‰

```prisma
model RecruitmentInterview {
  id                    String    @id @default(cuid())

  // å¿œå‹Ÿè€…ãƒ»æ±‚äººæƒ…å ±
  talentId              String    @map("talent_id")
  jobPostingId          String    @map("job_posting_id")
  interviewNumber       String    @unique @map("interview_number")
  // INT-2024-OH-NS-001

  // é¢æ¥ã‚¿ã‚¤ãƒ—
  interviewType         String    @map("interview_type")
  // firstï¼ˆä¸€æ¬¡ï¼‰, secondï¼ˆäºŒæ¬¡ï¼‰, finalï¼ˆæœ€çµ‚ï¼‰, casualï¼ˆã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ï¼‰
  interviewRound        Int       @map("interview_round")

  // æ—¥æ™‚ãƒ»å ´æ‰€
  scheduledDate         String    @map("scheduled_date")
  scheduledTime         String    @map("scheduled_time")
  duration              Int       @default(60) @map("duration")
  location              String    @map("location")
  // "æœ¬é¤¨3Fä¼šè­°å®¤A", "ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ï¼ˆZoomï¼‰"
  isOnline              Boolean   @default(false) @map("is_online")
  meetingUrl            String?   @map("meeting_url")

  // é¢æ¥å®˜
  interviewers          Json      @map("interviewers")
  // [
  //   { id: "int1", name: "äººäº‹éƒ¨é•·", position: "éƒ¨é•·", department: "äººäº‹éƒ¨" },
  //   { id: "int2", name: "çœ‹è­·éƒ¨é•·", position: "éƒ¨é•·", department: "çœ‹è­·éƒ¨" }
  // ]

  // è©•ä¾¡
  evaluations           Json?     @map("evaluations")
  // [
  //   {
  //     interviewerId: "int1",
  //     scores: {
  //       communication: 4,
  //       professionalism: 5,
  //       technicalSkills: 4,
  //       motivation: 5,
  //       cultureFit: 4
  //     },
  //     totalScore: 22,
  //     comments: "å„ªç§€ãªå€™è£œè€…ã€‚å³æˆ¦åŠ›ã¨ã—ã¦æœŸå¾…ã§ãã‚‹ã€‚",
  //     recommendation: "strong-hire"
  //   }
  // ]

  overallScore          Int?      @map("overall_score")
  overallRecommendation String?   @map("overall_recommendation")
  // strong-hireï¼ˆå¼·ãæ¨è–¦ï¼‰, hireï¼ˆæ¡ç”¨ï¼‰, maybeï¼ˆè¦æ¤œè¨ï¼‰, no-hireï¼ˆä¸æ¡ç”¨ï¼‰

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status                String    @default("scheduled") @map("status")
  // scheduledï¼ˆäºˆå®šï¼‰, completedï¼ˆå®Œäº†ï¼‰, rescheduledï¼ˆå†èª¿æ•´ï¼‰,
  // cancelledï¼ˆã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼‰, no-showï¼ˆæ¬ å¸­ï¼‰

  // æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
  nextStep              String?   @map("next_step")
  // "äºŒæ¬¡é¢æ¥ã¸é€²ã‚€", "æœ€çµ‚é¢æ¥ã¸é€²ã‚€", "å†…å®š", "ä¸æ¡ç”¨"
  nextInterviewId       String?   @map("next_interview_id")

  // ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»å¤‰æ›´æƒ…å ±
  rescheduledFrom       String?   @map("rescheduled_from")
  cancelledAt           DateTime? @map("cancelled_at")
  cancellationReason    String?   @db.Text @map("cancellation_reason")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  completedAt           DateTime? @map("completed_at")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String    @map("created_by")

  @@map("recruitment_interviews")
  @@index([talentId])
  @@index([jobPostingId])
  @@index([scheduledDate])
  @@index([status])
}
```

**è¿½åŠ ç†ç”±**: æ¡ç”¨é¢æ¥ã®è©³ç´°ç®¡ç†ã€‚è¤‡æ•°é¢æ¥å®˜è©•ä¾¡ã€ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã€æ¬¡ã‚¹ãƒ†ãƒƒãƒ—ç®¡ç†ã€‚

---

#### 5. TalentPipelineMetricsï¼ˆäººæãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³åˆ†æï¼‰

```prisma
model TalentPipelineMetrics {
  id                    String    @id @default(cuid())

  // æœŸé–“
  periodType            String    @map("period_type")
  // daily, weekly, monthly, quarterly, yearly
  periodStart           String    @map("period_start")
  periodEnd             String    @map("period_end")

  // æ–½è¨­
  facility              String?   @map("facility")
  // null = å…¨æ–½è¨­

  // ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¥äººæ•°
  stageDistribution     Json      @map("stage_distribution")
  // {
  //   visitors: 15,
  //   applicants: 25,
  //   offerHolders: 5,
  //   employees: 3,
  //   talentPool: 12,
  //   inactive: 8
  // }

  // ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç‡
  conversionRates       Json      @map("conversion_rates")
  // {
  //   visitorToApplicant: 65,    // è¦‹å­¦è€…â†’å¿œå‹Ÿè€… 65%
  //   applicantToInterview: 80,   // å¿œå‹Ÿè€…â†’é¢æ¥ 80%
  //   interviewToOffer: 40,       // é¢æ¥â†’å†…å®š 40%
  //   offerToEmployee: 85         // å†…å®šâ†’å…¥ç¤¾ 85%
  // }

  // å¹³å‡æœŸé–“ï¼ˆæ—¥æ•°ï¼‰
  averageDuration       Json      @map("average_duration")
  // {
  //   visitToApplication: 7,      // è¦‹å­¦â†’å¿œå‹Ÿ 7æ—¥
  //   applicationToInterview: 5,  // å¿œå‹Ÿâ†’é¢æ¥ 5æ—¥
  //   interviewToOffer: 10,       // é¢æ¥â†’å†…å®š 10æ—¥
  //   offerToEmployment: 14       // å†…å®šâ†’å…¥ç¤¾ 14æ—¥
  // }

  // ã‚½ãƒ¼ã‚¹åˆ¥åŠ¹æœ
  sourceEffectiveness   Json      @map("source_effectiveness")
  // [
  //   {
  //     source: "æ±‚äººã‚µã‚¤ãƒˆ",
  //     visitors: 30,
  //     applicants: 20,
  //     hires: 5,
  //     conversionRate: 25,
  //     averageQuality: 4
  //   }
  // ]

  // æ–½è¨­åˆ¥ãƒ¡ãƒˆãƒªã‚¯ã‚¹
  facilityMetrics       Json?     @map("facility_metrics")
  // [
  //   {
  //     facility: "å°åŸç—…é™¢",
  //     activeVisitors: 8,
  //     activeApplicants: 12,
  //     pendingOffers: 3,
  //     monthlyHires: 2
  //   }
  // ]

  // æœˆæ¬¡ãƒˆãƒ¬ãƒ³ãƒ‰
  monthlyTrends         Json?     @map("monthly_trends")
  // [
  //   {
  //     month: "2024-01",
  //     visitors: 15,
  //     applications: 10,
  //     interviews: 8,
  //     offers: 3,
  //     hires: 2
  //   }
  // ]

  // è¨ˆç®—æ—¥æ™‚
  calculatedAt          DateTime  @default(now()) @map("calculated_at")

  @@map("talent_pipeline_metrics")
  @@index([periodType, periodStart])
  @@index([facility])
}
```

**è¿½åŠ ç†ç”±**: æ¡ç”¨æ´»å‹•ã®KPIåˆ†æã€‚ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç‡ã€å¹³å‡æœŸé–“ã€ã‚½ãƒ¼ã‚¹åˆ¥åŠ¹æœã‚’å®šé‡è©•ä¾¡ã€‚

---

### å®Ÿè£…ãƒ¡ãƒ¢

1. **äººæãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ç®¡ç†ã®å®Œå…¨çµ±åˆ**
   - è¦‹å­¦è€…â†’å¿œå‹Ÿè€…â†’å†…å®šè€…â†’å…¥ç¤¾ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’1ã¤ã®TalentProfileã§ç®¡ç†
   - ã‚¹ãƒ†ãƒ¼ã‚¸é·ç§»æ™‚ã«å±¥æ­´ã‚’è‡ªå‹•è¨˜éŒ²
   - é‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼ˆãƒ¡ãƒ¼ãƒ«ãƒ»é›»è©±ç•ªå·ï¼‰ã§æ—¢å­˜äººæã¨ã®ç…§åˆ

2. **è¦‹å­¦äºˆç´„ã‚·ã‚¹ãƒ†ãƒ **
   - ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†ã€æ‹…å½“è€…å‰²å½“ã€è¦‹å­¦å¾Œãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—
   - è¤‡æ•°æ–½è¨­ãƒ»è¤‡æ•°éƒ¨ç½²ã®åŒæ™‚è¦‹å­¦å¯¾å¿œ
   - è¦‹å­¦æº€è¶³åº¦èª¿æŸ»ã¨å¿œå‹Ÿæ„å‘ç¢ºèª

3. **æ¡ç”¨é¢æ¥ç®¡ç†**
   - è¤‡æ•°é¢æ¥å®˜ã«ã‚ˆã‚‹å¤šæ®µéšè©•ä¾¡
   - ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ5æ®µéšè©•ä¾¡ Ã— è¤‡æ•°é …ç›®ï¼‰
   - æ¬¡ã‚¹ãƒ†ãƒƒãƒ—è‡ªå‹•ææ¡ˆ

4. **æ±‚äººç¥¨ç®¡ç†**
   - è¤‡æ•°æ–½è¨­ãƒ»è¤‡æ•°è·ç¨®ã®æ±‚äººã‚’ä¸€å…ƒç®¡ç†
   - å…¬é–‹ãƒãƒ£ãƒãƒ«ç®¡ç†ï¼ˆè‡ªç¤¾ã‚µã‚¤ãƒˆã€æ±‚äººã‚µã‚¤ãƒˆã€ãƒãƒ­ãƒ¼ãƒ¯ãƒ¼ã‚¯ç­‰ï¼‰
   - å¿œå‹ŸçŠ¶æ³ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¿½è·¡

5. **äººæãƒ—ãƒ¼ãƒ«ç®¡ç†**
   - é«˜è©•ä¾¡ã ãŒç¾åœ¨ãƒã‚¸ã‚·ãƒ§ãƒ³ãªã—ã®å€™è£œè€…ã‚’ä¿æŒ
   - å†æ¥è§¦æ—¥è¨­å®šã€å„ªå…ˆåº¦ç®¡ç†
   - å°†æ¥ã®æ¬ å“¡æ™‚ã«å„ªå…ˆçš„ã«ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

6. **åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆ**
   - ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç‡åˆ†æï¼ˆå„ã‚¹ãƒ†ãƒ¼ã‚¸é–“ã®è»¢æ›ç‡ï¼‰
   - ã‚½ãƒ¼ã‚¹åˆ¥åŠ¹æœæ¸¬å®šï¼ˆæ±‚äººã‚µã‚¤ãƒˆA vs ç´¹ä»‹ vs ç›´æ¥å¿œå‹Ÿï¼‰
   - æ–½è¨­åˆ¥ãƒ»è·ç¨®åˆ¥ã®æ¡ç”¨çŠ¶æ³å¯è¦–åŒ–

---

### çµ±åˆãƒã‚¤ãƒ³ãƒˆ

- **TalentProfile** â†” **Employee**: å…¥ç¤¾æ™‚ã« employeeInfo ã‚’æ›´æ–°ã—ã€å¾“æ¥­å“¡ãƒã‚¹ã‚¿ã¨ç´ä»˜ã‘
- **VisitReservation** â†” **TalentProfile**: è¦‹å­¦äºˆç´„å®Œäº†å¾Œã€å¿œå‹Ÿæ„å‘ãŒã‚ã‚Œã° applicant ã‚¹ãƒ†ãƒ¼ã‚¸ã¸è‡ªå‹•é·ç§»
- **RecruitmentInterview** â†” **TalentProfile**: é¢æ¥è©•ä¾¡å®Œäº†å¾Œã€å†…å®šåˆ¤æ–­ã«å¿œã˜ã¦ offer-holder ã‚¹ãƒ†ãƒ¼ã‚¸ã¸é·ç§»
- **JobPosting** â†” **HRPolicyMaster**: äººäº‹ãƒãƒªã‚·ãƒ¼ãƒã‚¹ã‚¿ã®æ¡ç”¨æ–¹é‡ã¨é€£å‹•
- **TalentPipelineMetrics** â†” **DashboardData**: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æ¡ç”¨KPIã‚’è¡¨ç¤º

---

## Section 28 å®Œäº†

ä»¥ä¸Šã€Section 28ã€Œæ¡ç”¨ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆäººæãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ç®¡ç†ãƒ»è¦‹å­¦è€…ãƒ»å¿œå‹Ÿè€…ï¼‰ã€ã¨ã—ã¦5ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

---

## Section 29: AIåˆ¶å¾¡ã‚»ãƒ³ã‚¿ãƒ¼ãƒ»LLMçµ±åˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

### æ¦‚è¦
ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®AIæ©Ÿèƒ½ï¼ˆé¢è«‡åˆ†æã€ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã€ã‚¹ãƒãƒ¼ãƒˆã‚µã‚¸ã‚§ã‚¹ãƒˆã€VoiceDriveé€šçŸ¥ç­‰ï¼‰ã‚’çµ±åˆç®¡ç†ã—ã€æ©Ÿèƒ½ON/OFFã€ãƒ¢ãƒ‡ãƒ«é¸æŠã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†ã€åˆ©ç”¨çŠ¶æ³åˆ†æã‚’å®Ÿç¾ã—ã¾ã™ã€‚

**ãƒšãƒ¼ã‚¸URL**: https://staff-medical-system-v2.vercel.app/admin/ai-settings

**ä¸»è¦æ©Ÿèƒ½**:
- AIæ©Ÿèƒ½ON/OFFç®¡ç†ï¼ˆ8æ©Ÿèƒ½ï¼šé¢è«‡åˆ†æã€è¦ç´„ã€ææ¡ˆã€è©•ä¾¡ã‚³ãƒ¡ãƒ³ãƒˆã€ãƒ¬ãƒãƒ¼ãƒˆã€ãƒŠãƒ“ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€VoiceDriveé€šçŸ¥ï¼‰
- ãƒ­ãƒ¼ã‚«ãƒ«LLMãƒ¢ãƒ‡ãƒ«ç®¡ç†ï¼ˆOllamaã€LlamaCppï¼‰
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†
- AIåˆ©ç”¨çµ±è¨ˆåˆ†æï¼ˆåˆ©ç”¨ç‡ã€å‡¦ç†ä»¶æ•°ã€ç¯€ç´„æ™‚é–“ï¼‰
- ãƒ¢ãƒ‡ãƒ«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒ

### ä¸è¶³DBé …ç›®

#### 1. AIFeatureConfigurationï¼ˆAIæ©Ÿèƒ½è¨­å®šç®¡ç†ï¼‰

```prisma
model AIFeatureConfiguration {
  id                    String    @id @default(cuid())

  // æ©Ÿèƒ½è­˜åˆ¥
  featureId             String    @unique @map("feature_id")
  // interview.analysis, interview.summary, interview.suggestion,
  // evaluation.comment, report.monthly, smartsuggest.navigation,
  // smartsuggest.action, voicedrive.notification

  featureName           String    @map("feature_name")
  featureCategory       String    @map("feature_category")
  // interview, evaluation, report, smartsuggest, voicedrive
  featureDescription    String    @db.Text @map("feature_description")

  // æœ‰åŠ¹åŒ–è¨­å®š
  isEnabled             Boolean   @default(true) @map("is_enabled")
  enabledAt             DateTime? @map("enabled_at")
  enabledBy             String?   @map("enabled_by")
  disabledAt            DateTime? @map("disabled_at")
  disabledBy            String?   @map("disabled_by")

  // åˆ©ç”¨å¯¾è±¡
  availableForRoles     Json?     @map("available_for_roles")
  // ["admin", "hr", "manager", "staff"]
  availableForFacilities Json?    @map("available_for_facilities")
  // ["obara-hospital", "tachigami-hospital", "espoir-tachigami", "hojuan"]

  // ãƒ¢ãƒ‡ãƒ«è¨­å®š
  defaultModelId        String?   @map("default_model_id")
  fallbackModelId       String?   @map("fallback_model_id")
  allowModelSelection   Boolean   @default(false) @map("allow_model_selection")

  // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­å®š
  defaultPromptTemplateId String? @map("default_prompt_template_id")

  // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­å®š
  maxTokens             Int?      @map("max_tokens")
  temperature           Float?    @map("temperature")
  topP                  Float?    @map("top_p")
  timeout               Int?      @map("timeout")
  // ç§’å˜ä½

  // ãƒ¬ãƒ¼ãƒˆåˆ¶é™
  rateLimit             Json?     @map("rate_limit")
  // {
  //   perUser: { requests: 100, period: "1h" },
  //   global: { requests: 1000, period: "1h" }
  // }

  // åˆ©ç”¨çµ±è¨ˆ
  usageStats            Json?     @map("usage_stats")
  // {
  //   totalRequests: 1234,
  //   successfulRequests: 1200,
  //   failedRequests: 34,
  //   averageResponseTime: 2.5,
  //   totalTokensUsed: 500000
  // }

  // ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æƒ…å ±
  maintenanceMode       Boolean   @default(false) @map("maintenance_mode")
  maintenanceMessage    String?   @db.Text @map("maintenance_message")

  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@map("ai_feature_configurations")
  @@index([featureCategory])
  @@index([isEnabled])
}
```

**è¿½åŠ ç†ç”±**: AIæ©Ÿèƒ½ã®ä¸€å…ƒç®¡ç†ã€‚æ©Ÿèƒ½ã”ã¨ã®ON/OFFã€ãƒ¢ãƒ‡ãƒ«é¸æŠã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­å®šã‚’ç®¡ç†ã€‚

---

#### 2. LLMModelï¼ˆãƒ­ãƒ¼ã‚«ãƒ«LLMãƒ¢ãƒ‡ãƒ«ç®¡ç†ï¼‰

```prisma
model LLMModel {
  id                    String    @id @default(cuid())

  // ãƒ¢ãƒ‡ãƒ«è­˜åˆ¥
  modelId               String    @unique @map("model_id")
  // ollama-llama3-8b, ollama-gemma-7b, llamacpp-mistral-7b
  modelName             String    @map("model_name")
  modelProvider         String    @map("model_provider")
  // ollama, llamacpp, openai-compatible

  // ãƒ¢ãƒ‡ãƒ«ä»•æ§˜
  modelSize             String    @map("model_size")
  // 7B, 8B, 13B, 70B
  contextLength         Int       @map("context_length")
  // ãƒˆãƒ¼ã‚¯ãƒ³æ•°ï¼ˆä¾‹: 4096, 8192, 32768ï¼‰
  modelType             String    @map("model_type")
  // chat, completion, embedding

  // æ¥ç¶šæƒ…å ±
  endpoint              String    @map("endpoint")
  // http://localhost:11434, http://localhost:8080
  apiKey                String?   @map("api_key")
  headers               Json?     @map("headers")
  // { "Authorization": "Bearer xxx" }

  // ãƒ¢ãƒ‡ãƒ«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status                String    @default("inactive") @map("status")
  // activeï¼ˆç¨¼åƒä¸­ï¼‰, inactiveï¼ˆåœæ­¢ä¸­ï¼‰, errorï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰, loadingï¼ˆèª­è¾¼ä¸­ï¼‰
  healthCheckUrl        String?   @map("health_check_url")
  lastHealthCheck       DateTime? @map("last_health_check")
  lastHealthStatus      String?   @map("last_health_status")

  // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æƒ…å ±
  averageResponseTime   Float?    @map("average_response_time")
  // ç§’å˜ä½
  tokensPerSecond       Float?    @map("tokens_per_second")
  memoryUsage           Int?      @map("memory_usage")
  // MBå˜ä½

  // åˆ©ç”¨çµ±è¨ˆ
  totalRequests         Int       @default(0) @map("total_requests")
  successfulRequests    Int       @default(0) @map("successful_requests")
  failedRequests        Int       @default(0) @map("failed_requests")
  totalTokensGenerated  Int       @default(0) @map("total_tokens_generated")

  // æ©Ÿèƒ½é©æ€§
  suitableFor           Json?     @map("suitable_for")
  // ["interview.analysis", "report.monthly", "evaluation.comment"]
  notSuitableFor        Json?     @map("not_suitable_for")

  // ãƒ¢ãƒ‡ãƒ«èª¬æ˜
  description           String?   @db.Text @map("description")
  strengths             Json?     @map("strengths")
  // ["é«˜é€Ÿ", "æ—¥æœ¬èªå¯¾å¿œ", "è«–ç†çš„æ¨è«–"]
  limitations           Json?     @map("limitations")
  // ["æ–‡è„ˆç†è§£ãŒå¼±ã„", "é•·æ–‡ç”Ÿæˆã«æ™‚é–“ãŒã‹ã‹ã‚‹"]

  // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
  modelVersion          String?   @map("model_version")
  lastUpdated           DateTime? @map("last_updated")
  updateNotes           String?   @db.Text @map("update_notes")

  // å„ªå…ˆåº¦
  priority              Int       @default(0) @map("priority")
  // é«˜ã„æ•°å€¤ã»ã©å„ªå…ˆï¼ˆè‡ªå‹•é¸æŠæ™‚ã«ä½¿ç”¨ï¼‰

  isActive              Boolean   @default(true) @map("is_active")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@map("llm_models")
  @@index([modelProvider])
  @@index([status])
  @@index([priority])
}
```

**è¿½åŠ ç†ç”±**: ãƒ­ãƒ¼ã‚«ãƒ«LLMãƒ¢ãƒ‡ãƒ«ã®ä¸€å…ƒç®¡ç†ã€‚Ollamaã€LlamaCppãƒ¢ãƒ‡ãƒ«ã®ç™»éŒ²ã€ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¿½è·¡ã€‚

---

#### 3. PromptTemplateï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†ï¼‰

```prisma
model PromptTemplate {
  id                    String    @id @default(cuid())

  // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè­˜åˆ¥
  templateId            String    @unique @map("template_id")
  // interview-analysis-v1, report-monthly-summary-v2
  templateName          String    @map("template_name")
  templateCategory      String    @map("template_category")
  // interview, evaluation, report, suggestion

  // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå†…å®¹
  systemPrompt          String?   @db.Text @map("system_prompt")
  userPromptTemplate    String    @db.Text @map("user_prompt_template")
  // ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼: {{interviewText}}, {{staffName}}, {{period}}

  placeholders          Json?     @map("placeholders")
  // [
  //   { key: "{{interviewText}}", description: "é¢è«‡å†…å®¹", required: true },
  //   { key: "{{staffName}}", description: "è·å“¡å", required: true }
  // ]

  // å‡ºåŠ›è¨­å®š
  outputFormat          String?   @map("output_format")
  // json, markdown, plain-text
  outputSchema          Json?     @map("output_schema")
  // JSON Schemaã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  expectedOutputLength  Int?      @map("expected_output_length")
  // ãƒˆãƒ¼ã‚¯ãƒ³æ•°

  // ãƒ¢ãƒ‡ãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
  recommendedModel      String?   @map("recommended_model")
  temperature           Float?    @default(0.7) @map("temperature")
  maxTokens             Int?      @default(1000) @map("max_tokens")
  topP                  Float?    @default(0.9) @map("top_p")
  stopSequences         Json?     @map("stop_sequences")

  // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
  version               Int       @default(1) @map("version")
  previousVersionId     String?   @map("previous_version_id")
  changeNotes           String?   @db.Text @map("change_notes")

  // åˆ©ç”¨çµ±è¨ˆ
  usageCount            Int       @default(0) @map("usage_count")
  averageSuccessRate    Float?    @map("average_success_rate")
  averageResponseTime   Float?    @map("average_response_time")
  userRating            Float?    @map("user_rating")
  // 1-5

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status                String    @default("draft") @map("status")
  // draftï¼ˆä¸‹æ›¸ãï¼‰, activeï¼ˆåˆ©ç”¨ä¸­ï¼‰, deprecatedï¼ˆéæ¨å¥¨ï¼‰, archivedï¼ˆã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ï¼‰
  isDefault             Boolean   @default(false) @map("is_default")

  // ãƒ†ã‚¹ãƒˆçµæœ
  testCases             Json?     @map("test_cases")
  // [
  //   {
  //     input: { ... },
  //     expectedOutput: "...",
  //     actualOutput: "...",
  //     passed: true
  //   }
  // ]

  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  createdBy             String    @map("created_by")

  @@map("prompt_templates")
  @@index([templateCategory])
  @@index([status])
  @@index([version])
}
```

**è¿½åŠ ç†ç”±**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåŒ–ã«ã‚ˆã‚Šä¸€è²«ã—ãŸå‡ºåŠ›å“è³ªã‚’ä¿è¨¼ã€‚

---

#### 4. AIRequestLogï¼ˆAIåˆ©ç”¨ãƒ­ã‚°ï¼‰

```prisma
model AIRequestLog {
  id                    String    @id @default(cuid())

  // ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±
  requestId             String    @unique @map("request_id")
  featureId             String    @map("feature_id")
  // å¯¾å¿œã™ã‚‹AIFeatureConfiguration.featureId

  // ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
  userId                String    @map("user_id")
  userRole              String    @map("user_role")
  facility              String?   @map("facility")

  // ãƒ¢ãƒ‡ãƒ«æƒ…å ±
  modelId               String    @map("model_id")
  modelProvider         String    @map("model_provider")

  // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæƒ…å ±
  promptTemplateId      String?   @map("prompt_template_id")
  systemPrompt          String?   @db.Text @map("system_prompt")
  userPrompt            String    @db.Text @map("user_prompt")

  // å®Ÿè¡Œæƒ…å ±
  requestedAt           DateTime  @default(now()) @map("requested_at")
  completedAt           DateTime? @map("completed_at")
  responseTime          Float?    @map("response_time")
  // ç§’å˜ä½

  // ãƒ¬ã‚¹ãƒãƒ³ã‚¹æƒ…å ±
  response              String?   @db.Text @map("response")
  tokensUsed            Int?      @map("tokens_used")
  promptTokens          Int?      @map("prompt_tokens")
  completionTokens      Int?      @map("completion_tokens")

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status                String    @map("status")
  // success, failed, timeout, rate-limited
  errorMessage          String?   @db.Text @map("error_message")
  errorCode             String?   @map("error_code")

  // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æƒ…å ±
  modelResponseTime     Float?    @map("model_response_time")
  totalProcessingTime   Float?    @map("total_processing_time")

  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
  userRating            Int?      @map("user_rating")
  // 1-5
  userFeedback          String?   @db.Text @map("user_feedback")
  wasHelpful            Boolean?  @map("was_helpful")

  // ã‚³ã‚¹ãƒˆæƒ…å ±ï¼ˆå°†æ¥ã®å¤–éƒ¨APIå¯¾å¿œç”¨ï¼‰
  estimatedCost         Float?    @map("estimated_cost")
  costCurrency          String?   @default("JPY") @map("cost_currency")

  @@map("ai_request_logs")
  @@index([featureId])
  @@index([userId])
  @@index([modelId])
  @@index([requestedAt])
  @@index([status])
}
```

**è¿½åŠ ç†ç”±**: AIåˆ©ç”¨ã®å®Œå…¨è¿½è·¡ã€‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æã€ã‚³ã‚¹ãƒˆè¨ˆç®—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†ã€‚

---

#### 5. AISystemMetricsï¼ˆAIçµ±åˆåˆ†æï¼‰

```prisma
model AISystemMetrics {
  id                    String    @id @default(cuid())

  // æœŸé–“
  periodType            String    @map("period_type")
  // daily, weekly, monthly
  periodStart           String    @map("period_start")
  periodEnd             String    @map("period_end")

  // å…¨ä½“çµ±è¨ˆ
  totalRequests         Int       @map("total_requests")
  successfulRequests    Int       @map("successful_requests")
  failedRequests        Int       @map("failed_requests")
  averageResponseTime   Float     @map("average_response_time")
  totalTokensUsed       Int       @map("total_tokens_used")

  // åˆ©ç”¨ç‡
  utilizationRate       Float     @map("utilization_rate")
  // å…¨æ©Ÿèƒ½ã®ã†ã¡æœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹æ©Ÿèƒ½ã®å‰²åˆï¼ˆ%ï¼‰
  activeFeatureCount    Int       @map("active_feature_count")
  totalFeatureCount     Int       @map("total_feature_count")

  // æ©Ÿèƒ½åˆ¥çµ±è¨ˆ
  featureUsage          Json      @map("feature_usage")
  // {
  //   "interview.analysis": { requests: 234, successRate: 98.5 },
  //   "report.monthly": { requests: 45, successRate: 100 }
  // }

  // ãƒ¢ãƒ‡ãƒ«åˆ¥çµ±è¨ˆ
  modelPerformance      Json      @map("model_performance")
  // {
  //   "ollama-llama3-8b": {
  //     requests: 500,
  //     avgResponseTime: 2.3,
  //     successRate: 99.2,
  //     tokensPerSecond: 45
  //   }
  // }

  // ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦
  averageUserRating     Float?    @map("average_user_rating")
  positiveRatingCount   Int?      @map("positive_rating_count")
  negativeRatingCount   Int?      @map("negative_rating_count")

  // ç¯€ç´„æ™‚é–“æ¨å®š
  estimatedTimeSaved    Float?    @map("estimated_time_saved")
  // æ™‚é–“å˜ä½
  estimatedCostSaved    Float?    @map("estimated_cost_saved")
  // é‡‘é¡ï¼ˆå¤–éƒ¨APIåˆ©ç”¨æ™‚ã¨ã®æ¯”è¼ƒï¼‰

  // ã‚¨ãƒ©ãƒ¼åˆ†æ
  errorBreakdown        Json?     @map("error_breakdown")
  // {
  //   "timeout": 12,
  //   "model-unavailable": 8,
  //   "rate-limited": 5
  // }

  // ãƒˆãƒ¬ãƒ³ãƒ‰
  requestTrend          Json?     @map("request_trend")
  // æ—¥åˆ¥ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°
  popularFeatures       Json?     @map("popular_features")
  // åˆ©ç”¨é »åº¦TOP5

  calculatedAt          DateTime  @default(now()) @map("calculated_at")

  @@map("ai_system_metrics")
  @@index([periodType, periodStart])
}
```

**è¿½åŠ ç†ç”±**: AIåˆ©ç”¨ã®çµ±åˆåˆ†æã€‚åˆ©ç”¨ç‡ã€ç¯€ç´„æ™‚é–“ã€ã‚³ã‚¹ãƒˆæ¨å®šã€ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æã‚’å¯è¦–åŒ–ã€‚

---

### å®Ÿè£…ãƒ¡ãƒ¢

1. **AIæ©Ÿèƒ½ã®ä¸€å…ƒç®¡ç†**
   - 8ã¤ã®AIæ©Ÿèƒ½ã‚’featureIdã§è­˜åˆ¥ï¼ˆinterview.analysis, interview.summary, interview.suggestion, evaluation.comment, report.monthly, smartsuggest.navigation, smartsuggest.action, voicedrive.notificationï¼‰
   - æ©Ÿèƒ½ã”ã¨ã«ON/OFFã€å¯¾è±¡ãƒ­ãƒ¼ãƒ«ã€å¯¾è±¡æ–½è¨­ã‚’è¨­å®š
   - ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã«ã‚ˆã‚‹ã‚·ã‚¹ãƒ†ãƒ è² è·ç®¡ç†

2. **ãƒ­ãƒ¼ã‚«ãƒ«LLMç®¡ç†**
   - Ollamaã€LlamaCppã®è¤‡æ•°ãƒ¢ãƒ‡ãƒ«ã‚’ç™»éŒ²
   - ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã§ç¨¼åƒçŠ¶æ³ç›£è¦–
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çµ±è¨ˆã§ãƒ¢ãƒ‡ãƒ«é¸æŠã‚’æœ€é©åŒ–

3. **ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†**
   - ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„ã‚’è¿½è·¡
   - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§å‡ºåŠ›å“è³ªã‚’ä¿è¨¼
   - ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã§å‹•çš„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ

4. **åˆ©ç”¨ãƒ­ã‚°è¿½è·¡**
   - å…¨AIå‡¦ç†ã‚’ãƒ­ã‚°è¨˜éŒ²
   - ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ ã€ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ã€ã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’è¨˜éŒ²
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã§å“è³ªæ”¹å–„

5. **çµ±åˆåˆ†æ**
   - åˆ©ç”¨ç‡85%ã€å‡¦ç†ä»¶æ•°1234ä»¶ã€ç¯€ç´„æ™‚é–“456æ™‚é–“ï¼ˆUIè¡¨ç¤ºï¼‰
   - æ©Ÿèƒ½åˆ¥ãƒ»ãƒ¢ãƒ‡ãƒ«åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒ
   - ã‚³ã‚¹ãƒˆæ¨å®šï¼ˆå¤–éƒ¨APIåˆ©ç”¨æ™‚ã¨ã®æ¯”è¼ƒï¼‰

---

### çµ±åˆãƒã‚¤ãƒ³ãƒˆ

- **AIFeatureConfiguration** â†” **InterviewSession**: é¢è«‡åˆ†ææ©Ÿèƒ½ã®æœ‰åŠ¹åŒ–åˆ¤å®š
- **LLMModel** â†” **InterviewBooking**: ãƒ­ãƒ¼ã‚«ãƒ«LLMã«ã‚ˆã‚‹é¢è«‡æ—¥ç¨‹è‡ªå‹•èª¿æ•´
- **PromptTemplate** â†” **MonthlyReport**: ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé©ç”¨
- **AIRequestLog** â†” **AuditLog**: AIå‡¦ç†å±¥æ­´ã‚’ç›£æŸ»ãƒ­ã‚°ã«çµ±åˆ
- **AISystemMetrics** â†” **AdminDashboard**: AIåˆ©ç”¨çµ±è¨ˆã‚’ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«è¡¨ç¤º

---

## Section 29 å®Œäº†

ä»¥ä¸Šã€Section 29ã€ŒAIåˆ¶å¾¡ã‚»ãƒ³ã‚¿ãƒ¼ãƒ»LLMçµ±åˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€ã¨ã—ã¦5ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

---

# æ›´æ–°å±¥æ­´

- 2025-10-08 23:00: Section 26ã«SpecialAccountMasterè¿½åŠ ï¼ˆLevel 97-99ç‰¹åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå¯¾å¿œï¼‰ã€Section 18ã«VoiceDriveé…ä¿¡ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ï¼ˆã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯çµæœé…ä¿¡å¯¾å¿œï¼‰
- 2025-10-08 22:30: Section 29ã€ŒAIåˆ¶å¾¡ã‚»ãƒ³ã‚¿ãƒ¼ãƒ»LLMçµ±åˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€è¿½åŠ 
- 2025-10-08 22:00: Section 28ã€Œæ¡ç”¨ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆäººæãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ç®¡ç†ãƒ»è¦‹å­¦è€…ãƒ»å¿œå‹Ÿè€…ï¼‰ã€è¿½åŠ 
- 2025-10-08 21:30: Section 27ã€Œè·å“¡å‘ã‘é€šçŸ¥ãƒ»ãŠçŸ¥ã‚‰ã›ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€è¿½åŠ 
- 2025-10-08 21:00: Section 26ã€ŒåŸºæœ¬ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼ˆè·ç¨®ãƒ»å½¹è·ãƒ»é›‡ç”¨å½¢æ…‹ãƒ»éƒ¨ç½²ãƒ»äººäº‹ãƒãƒªã‚·ãƒ¼ãƒ»ç‰¹åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼‰ã€è¿½åŠ ï¼ˆ6ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
- 2025-10-08 20:00: Section 25ã€Œã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ãƒ»é‹ç”¨åŸºç›¤ï¼ˆé€šçŸ¥ãƒ»ç›£æŸ»ãƒ­ã‚°ãƒ»ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹é€šå ±ï¼‰ã€è¿½åŠ 
- 2025-10-08 19:30: Section 24ã€Œé¢è«‡æ—¥ç¨‹èª¿æ•´ãƒ»äºˆç´„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«LLMè‡ªå‹•ãƒãƒƒãƒãƒ³ã‚°ï¼‰ã€è¿½åŠ 
- 2025-10-08 19:00: Section 23ã€Œé¢è«‡åˆ¶åº¦çµ±åˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ10ç¨®é¡é¢è«‡ãƒ»è³ªå•ãƒãƒ³ã‚¯ï¼‰ã€è¿½åŠ 
- 2025-10-08 18:30: Section 22ã€Œãƒ¬ãƒãƒ¼ãƒˆãƒ»åˆ†æã‚·ã‚¹ãƒ†ãƒ ï¼ˆ100ãƒšãƒ¼ã‚¸è¶…ï¼‰ã€è¿½åŠ 
- 2025-10-08 17:30: Section 21ã€Œãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰çµ±åˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€è¿½åŠ 
- 2025-10-08 17:00: Section 20ã€Œã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹é¸æŠåˆ¶åº¦ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€è¿½åŠ 
- 2025-10-08 16:30: Section 19ã€Œå‹¤æ€ ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ãƒ»VoiceDriveé€£æºã€è¿½åŠ 
- 2025-10-08 15:45: Section 18ã€Œã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯ãƒ»å¥åº·ç®¡ç†çµ±åˆã‚·ã‚¹ãƒ†ãƒ ã€è¿½åŠ 
- 2025-10-08 14:20: Section 17ã€Œç›®æ¨™ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ãƒ»ç­‰ç´šåˆ¶åº¦ãƒ»ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è©•ä¾¡ã€è¿½åŠ 

---

**æ–‡æ›¸çµ‚äº†**

*æœ¬æ–‡æ›¸ã¯éšæ™‚æ›´æ–°ã•ã‚Œã¾ã™ã€‚ä¸è¶³é …ç›®ã‚’ç™ºè¦‹æ¬¡ç¬¬ã€è¿½è¨˜ã—ã¦ãã ã•ã„ã€‚*
