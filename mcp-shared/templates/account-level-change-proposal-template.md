# アカウントレベル定義変更提案書

**提案番号**: ACLV-YYYY-MM-DD-XXX
**提案日**: YYYY年MM月DD日
**提案者**: [医療チーム / VoiceDriveチーム]
**提案者名**: [氏名]
**緊急度**: [高 / 中 / 低]
**変更レベル**: [Level 1: 緊急 / Level 2: 重要 / Level 3: 通常]

---

## 1. 変更概要

### 変更種別
- [ ] 新規レベル追加
- [ ] 既存レベルの変更
- [ ] 施設別調整の追加/変更
- [ ] 説明文の修正
- [ ] その他: _______________

### 変更内容サマリー
[1-3行で変更内容を簡潔に記述]

---

## 2. 変更詳細

### 2.1 追加/変更するレベル

#### 新規レベル（追加の場合）

| 項目 | 内容 |
|------|------|
| **レベル番号** | XX.X |
| **コード名** | `XXXXX_XXXXX` |
| **日本語名** | XXXXXX |
| **カテゴリ** | [一般職員 / 役職層 / 施設経営層 / 法人人事部 / 最高経営層 / 特別権限] |
| **説明** | [詳細な説明] |
| **職種制約** | [なし / 看護職のみ / その他: ____] |

#### 既存レベルの変更（変更の場合）

| 項目 | 変更前 | 変更後 | 変更理由 |
|------|--------|--------|---------|
| レベル番号 | XX.X | YY.Y | [理由] |
| コード名 | `OLD_CODE` | `NEW_CODE` | [理由] |
| 日本語名 | 旧名称 | 新名称 | [理由] |
| 説明 | 旧説明 | 新説明 | [理由] |

### 2.2 施設別調整（該当する場合）

| 項目 | 内容 |
|------|------|
| **役職名** | XXXXX |
| **施設ID** | xxxxx-xxxxx |
| **施設名** | XXXXXX |
| **通常レベル** | XX.X |
| **調整後レベル** | YY.Y |
| **管理範囲** | XX名 |
| **理由** | [詳細な理由] |

---

## 3. 変更理由

### 3.1 背景
[変更が必要になった背景を説明]

### 3.2 必要性
[なぜこの変更が必要か、どのような問題を解決するかを説明]

### 3.3 根拠資料
- [ ] 組織図
- [ ] 役職定義書
- [ ] 医療チーム内合意議事録
- [ ] その他: _______________

**添付ファイル**:
- [ファイル名1]
- [ファイル名2]

---

## 4. 影響範囲分析

### 4.1 医療システム側への影響

| 影響項目 | 影響度 | 詳細 | 対応工数 |
|---------|--------|------|---------|
| データベース設計 | [高/中/低] | [詳細] | X時間 |
| accountLevelCalculator.ts | [高/中/低] | [詳細] | X時間 |
| 権限マッピングテーブル | [高/中/低] | [詳細] | X時間 |
| API仕様 | [高/中/低] | [詳細] | X時間 |
| 既存データ移行 | [高/中/低] | [詳細] | X時間 |
| テストケース | [高/中/低] | [詳細] | X時間 |

**医療側総工数見積**: ____ 時間

### 4.2 VoiceDriveシステム側への影響

| 影響項目 | 影響度 | 詳細 | 対応工数 |
|---------|--------|------|---------|
| accountLevel.ts | [高/中/低] | [詳細] | X時間 |
| 権限設定ファイル | [高/中/低] | [詳細] | X時間 |
| 投票ロジック | [高/中/低] | [詳細] | X時間 |
| UI表示 | [高/中/低] | [詳細] | X時間 |
| 既存データ移行 | [高/中/低] | [詳細] | X時間 |
| テストケース | [高/中/低] | [詳細] | X時間 |

**VoiceDrive側総工数見積**: ____ 時間

### 4.3 統合管理ファイル（JSON）への影響

- [ ] levels[]の更新が必要
- [ ] facilityAdjustments[]の更新が必要
- [ ] validationRulesの更新が必要
- [ ] changelogの追加が必要

---

## 5. リスク評価

### 5.1 技術的リスク

| リスク内容 | 発生確率 | 影響度 | 対策 |
|-----------|---------|--------|------|
| [リスク1] | [高/中/低] | [高/中/低] | [対策] |
| [リスク2] | [高/中/低] | [高/中/低] | [対策] |

### 5.2 運用リスク

| リスク内容 | 発生確率 | 影響度 | 対策 |
|-----------|---------|--------|------|
| [リスク1] | [高/中/低] | [高/中/低] | [対策] |
| [リスク2] | [高/中/低] | [高/中/低] | [対策] |

### 5.3 互換性への影響

- [ ] 後方互換性あり（既存データへの影響なし）
- [ ] 後方互換性なし（既存データの移行が必要）
- [ ] 破壊的変更（慎重な移行計画が必要）

---

## 6. 実装計画

### 6.1 実装スケジュール

| フェーズ | 期間 | 担当 | 成果物 |
|---------|------|------|--------|
| **Phase 1: 設計** | YYYY-MM-DD ~ YYYY-MM-DD | [担当] | 詳細設計書 |
| **Phase 2: 実装** | YYYY-MM-DD ~ YYYY-MM-DD | [担当] | コード、テスト |
| **Phase 3: テスト** | YYYY-MM-DD ~ YYYY-MM-DD | [両チーム] | テスト結果 |
| **Phase 4: 本番反映** | YYYY-MM-DD | [両チーム] | 本番環境更新 |

**総所要期間**: ____ 週間

### 6.2 実装順序

1. [ ] 統合管理ファイル（JSON）の更新
2. [ ] 医療側実装
3. [ ] VoiceDrive側実装
4. [ ] 統合テスト
5. [ ] データ移行（必要な場合）
6. [ ] 本番環境デプロイ

### 6.3 ロールバック計画

**ロールバック可能期間**: 本番反映後 ____ 日間

**ロールバック手順**:
1. [手順1]
2. [手順2]
3. [手順3]

---

## 7. テスト計画

### 7.1 単体テスト

| テストケース | 担当 | 状態 |
|------------|------|------|
| [テスト1] | [担当] | [ ] 未実施 / [ ] 成功 / [ ] 失敗 |
| [テスト2] | [担当] | [ ] 未実施 / [ ] 成功 / [ ] 失敗 |

### 7.2 統合テスト

| テストケース | 担当 | 状態 |
|------------|------|------|
| [テスト1] | [両チーム] | [ ] 未実施 / [ ] 成功 / [ ] 失敗 |
| [テスト2] | [両チーム] | [ ] 未実施 / [ ] 成功 / [ ] 失敗 |

### 7.3 データ移行テスト（該当する場合）

| テストケース | 対象データ数 | 状態 |
|------------|-----------|------|
| [テスト1] | XXX件 | [ ] 未実施 / [ ] 成功 / [ ] 失敗 |
| [テスト2] | XXX件 | [ ] 未実施 / [ ] 成功 / [ ] 失敗 |

---

## 8. 承認プロセス

### 8.1 医療チーム承認

- [ ] プロジェクトリーダー承認
- [ ] 技術担当承認
- [ ] 承認日: YYYY-MM-DD

**承認者コメント**:
```
[コメント]
```

### 8.2 VoiceDriveチーム承認

- [ ] プロジェクトリーダー承認
- [ ] 技術担当承認
- [ ] 承認日: YYYY-MM-DD

**承認者コメント**:
```
[コメント]
```

### 8.3 統合ミーティング

- [ ] 統合ミーティング実施済み
- [ ] 実施日: YYYY-MM-DD
- [ ] 議事録: [ファイル名]

---

## 9. 補足情報

### 9.1 参考資料

- [資料1]
- [資料2]

### 9.2 関連する過去の変更

- [変更1]
- [変更2]

### 9.3 将来的な拡張性

[本変更が将来的な拡張にどう影響するか]

---

## 10. チェックリスト

### 提案前チェックリスト

- [ ] 変更理由が明確に記述されている
- [ ] 影響範囲分析が完了している
- [ ] 工数見積が適切に行われている
- [ ] リスク評価が完了している
- [ ] 実装計画が具体的に記述されている
- [ ] テスト計画が策定されている
- [ ] 必要な添付資料が揃っている

### 承認後チェックリスト

- [ ] 統合管理ファイル（JSON）が更新されている
- [ ] 両チームの実装が完了している
- [ ] 統合テストが成功している
- [ ] ドキュメントが更新されている
- [ ] 本番環境への反映が完了している

---

## 変更履歴

| 日付 | バージョン | 変更者 | 変更内容 |
|------|-----------|--------|---------|
| YYYY-MM-DD | 1.0 | [氏名] | 初版作成 |
| YYYY-MM-DD | 1.1 | [氏名] | [変更内容] |

---

**提案者**: ___________________
**承認者（医療チーム）**: ___________________
**承認者（VoiceDriveチーム）**: ___________________

**提出日**: YYYY年MM月DD日
