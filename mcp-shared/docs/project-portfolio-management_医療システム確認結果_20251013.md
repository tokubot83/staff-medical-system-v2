# Project Portfolio Management åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ç¢ºèªçµæœ

**æ–‡æ›¸ç•ªå·**: MEDICAL-CONFIRM-2025-1013-003
**ä½œæˆæ—¥**: 2025å¹´10æœˆ13æ—¥
**å¯¾è±¡ãƒšãƒ¼ã‚¸**: Project Portfolio Managementï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªç®¡ç†ï¼‰
**å¯¾è±¡ãƒ¬ãƒ™ãƒ«**: Level 16+ï¼ˆæˆ¦ç•¥ä¼ç”»éƒ¨é–€ä»¥ä¸Šï¼‰
**å‚ç…§æ–‡æ›¸**:
- [project-portfolio-managementæš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆ_20251013.md](./project-portfolio-managementæš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆ_20251013.md)
- [project-portfolio-management_DBè¦ä»¶åˆ†æ_20251013.md](./project-portfolio-management_DBè¦ä»¶åˆ†æ_20251013.md)
- [ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹å®šç¾©æ›¸_20251008.md](./ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹å®šç¾©æ›¸_20251008.md)

---

## ğŸ“‹ ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

### çµè«–
**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ DBè¨­è¨ˆã¸ã®å½±éŸ¿**: âŒ **è¿½åŠ ä¸è¦**

VoiceDriveã®ã€ŒProject Portfolio Managementã€ãƒšãƒ¼ã‚¸ã§å¿…è¦ãª8ã¤ã®æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«ã¯ã€**å…¨ã¦VoiceDriveå´ã§ç®¡ç†ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ãƒ‡ãƒ¼ã‚¿**ã§ã‚ã‚Šã€åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®DBæ§‹ç¯‰è¨ˆç”»ã¸ã®è¿½åŠ ã¯ä¸è¦ã§ã™ã€‚

### ç†ç”±
1. **ãƒ‡ãƒ¼ã‚¿è²¬ä»»åˆ†ç•Œç‚¹ã®æ˜ç¢ºåŒ–**
   - åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ : è·å“¡ãƒã‚¹ã‚¿ã€éƒ¨é–€ãƒã‚¹ã‚¿ã€æ–½è¨­ãƒã‚¹ã‚¿
   - VoiceDrive: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè²¡å‹™ã€æˆ¦ç•¥è©•ä¾¡ã€ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ã€ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªåˆ†æ

2. **æ—¢å­˜APIã§å¯¾å¿œå¯èƒ½**
   - åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¯æ—¢å­˜ã®è·å“¡æƒ…å ±APIã€éƒ¨é–€ãƒã‚¹ã‚¿APIã®ã¿æä¾›
   - VoiceDriveå´ãŒç‹¬è‡ªã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ§‹ç¯‰

3. **æ–°è¦APIå®Ÿè£…ä¸è¦**
   - PersonalStationãƒšãƒ¼ã‚¸ã‚„ProjectOrgDevelopmentãƒšãƒ¼ã‚¸ã¨åŒæ§˜ã€åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®æ–°è¦APIå®Ÿè£…ã¯ä¸è¦

---

## ğŸ¯ VoiceDriveå´ã§å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆ8ä»¶ï¼‰

ä»¥ä¸‹ã®å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ã¯**VoiceDriveå´ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ç®¡ç†**ã—ã¾ã™ã€‚

| No. | ãƒ†ãƒ¼ãƒ–ãƒ«å | å½¹å‰² | ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°ç›®å®‰ | ç®¡ç†è²¬ä»» |
|-----|-----------|------|--------------|---------|
| 1 | **ProjectFinancial** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè²¡å‹™ãƒ‡ãƒ¼ã‚¿ | 100-200ä»¶ | VoiceDrive |
| 2 | **ProjectStrategicEvaluation** | æˆ¦ç•¥çš„è©•ä¾¡ | 100-200ä»¶ | VoiceDrive |
| 3 | **ProjectResourceSummary** | ãƒªã‚½ãƒ¼ã‚¹é…åˆ†é›†è¨ˆ | 100-200ä»¶ | VoiceDrive |
| 4 | **PortfolioSummary** | ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µãƒãƒªãƒ¼ | 10-20ä»¶ | VoiceDrive |
| 5 | **ProjectCategory**ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ | ã‚«ãƒ†ã‚´ãƒªãƒã‚¹ã‚¿ | 8-15ä»¶ | VoiceDrive |
| 6 | **Post.projectCategory**ï¼ˆæ‹¡å¼µï¼‰ | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ†ã‚´ãƒª | - | VoiceDrive |
| 7 | **Post.financial** (relation) | è²¡å‹™ãƒ‡ãƒ¼ã‚¿ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ | - | VoiceDrive |
| 8 | **Post.strategicEvaluation** (relation) | è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ | - | VoiceDrive |

### ãƒ†ãƒ¼ãƒ–ãƒ«è©³ç´°

#### 1. ProjectFinancialï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè²¡å‹™ï¼‰
```prisma
model ProjectFinancial {
  id                      String    @id @default(cuid())
  projectId               String    @unique @map("project_id")

  // è²¡å‹™ãƒ‡ãƒ¼ã‚¿
  investmentAmount        Int       @default(0) @map("investment_amount")  // æŠ•è³‡é¡ï¼ˆä¸‡å††ï¼‰
  expectedReturn          Int       @default(0) @map("expected_return")    // æœŸå¾…ãƒªã‚¿ãƒ¼ãƒ³ï¼ˆä¸‡å††ï¼‰
  roi                     Float     @default(0) @map("roi")                // ROIï¼ˆ%ï¼‰
  actualCost              Int?      @map("actual_cost")
  actualReturn            Int?      @map("actual_return")

  // äºˆç®—ç®¡ç†
  budgetYear              Int       @map("budget_year")
  budgetDepartment        String?   @map("budget_department")
  approvedBudget          Int?      @map("approved_budget")

  // è²¡å‹™æ‰¿èª
  financialApprovalStatus String?   @map("financial_approval_status")
  financialApprovedBy     String?   @map("financial_approved_by")
  financialApprovedAt     DateTime? @map("financial_approved_at")

  calculatedAt            DateTime  @default(now()) @map("calculated_at")
  createdAt               DateTime  @default(now()) @map("created_at")
  updatedAt               DateTime  @updatedAt @map("updated_at")

  project                 Post      @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([budgetYear])
  @@index([roi])
  @@map("project_financial")
}
```

**ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: VoiceDriveå†…ã§ã®è²¡å‹™ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ã€æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

---

#### 2. ProjectStrategicEvaluationï¼ˆæˆ¦ç•¥çš„è©•ä¾¡ï¼‰
```prisma
model ProjectStrategicEvaluation {
  id                    String    @id @default(cuid())
  projectId             String    @unique @map("project_id")

  // æˆ¦ç•¥çš„è©•ä¾¡
  strategicImpact       Int       @default(3) @map("strategic_impact")     // 1-5
  urgency               Int       @default(3) @map("urgency")               // 1-5
  strategicAlignment    Int       @default(50) @map("strategic_alignment")  // 0-100

  // å„ªå…ˆåº¦è¨ˆç®—
  priorityQuadrant      String?   @map("priority_quadrant")
  // "high_priority", "important", "urgent", "normal"

  // è©•ä¾¡æ ¹æ‹ 
  impactReason          String?   @map("impact_reason")     @db.Text
  urgencyReason         String?   @map("urgency_reason")    @db.Text
  alignmentReason       String?   @map("alignment_reason")  @db.Text

  evaluatedBy           String?   @map("evaluated_by")
  evaluatedAt           DateTime? @map("evaluated_at")

  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  project               Post      @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([strategicImpact])
  @@index([urgency])
  @@index([priorityQuadrant])
  @@map("project_strategic_evaluation")
}
```

**ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: VoiceDriveå†…ã§ã®æˆ¦ç•¥è©•ä¾¡å…¥åŠ›

---

#### 3. ProjectResourceSummaryï¼ˆãƒªã‚½ãƒ¼ã‚¹é…åˆ†é›†è¨ˆï¼‰
```prisma
model ProjectResourceSummary {
  id                      String    @id @default(cuid())
  projectId               String    @unique @map("project_id")

  // ãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆ
  totalMembers            Int       @default(0) @map("total_members")
  estimatedPersonDays     Int       @default(0) @map("estimated_person_days")
  actualPersonDays        Int?      @map("actual_person_days")
  resourceAllocationRate  Float     @default(0) @map("resource_allocation_rate")

  // è·ç¨®åˆ¥ãƒªã‚½ãƒ¼ã‚¹
  nursesCount             Int       @default(0) @map("nurses_count")
  doctorsCount            Int       @default(0) @map("doctors_count")
  adminCount              Int       @default(0) @map("admin_count")
  othersCount             Int       @default(0) @map("others_count")

  resourceEfficiency      Float?    @map("resource_efficiency")

  calculatedAt            DateTime  @default(now()) @map("calculated_at")
  createdAt               DateTime  @default(now()) @map("created_at")
  updatedAt               DateTime  @updatedAt @map("updated_at")

  project                 Post      @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([estimatedPersonDays])
  @@map("project_resource_summary")
}
```

**ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: VoiceDriveã®ProjectTeamMemberãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰é›†è¨ˆã€åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®è·å“¡æƒ…å ±APIï¼ˆè·ç¨®æƒ…å ±å–å¾—ç”¨ï¼‰

---

#### 4. PortfolioSummaryï¼ˆãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µãƒãƒªãƒ¼ï¼‰
```prisma
model PortfolioSummary {
  id                        String    @id @default(cuid())

  // é›†è¨ˆæœŸé–“
  periodType                String    @map("period_type")  // quarter, year, all
  periodStart               DateTime  @map("period_start")
  periodEnd                 DateTime  @map("period_end")

  // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçµ±è¨ˆ
  totalProjects             Int       @default(0) @map("total_projects")
  activeProjects            Int       @default(0) @map("active_projects")
  completedProjects         Int       @default(0) @map("completed_projects")
  highPriorityProjects      Int       @default(0) @map("high_priority_projects")

  // è²¡å‹™çµ±è¨ˆ
  totalInvestment           Int       @default(0) @map("total_investment")
  totalExpectedReturn       Int       @default(0) @map("total_expected_return")
  portfolioROI              Float     @default(0) @map("portfolio_roi")
  averageProjectROI         Float     @default(0) @map("average_project_roi")

  // ãƒªã‚½ãƒ¼ã‚¹çµ±è¨ˆ
  totalResourceAllocation   Int       @default(0) @map("total_resource_allocation")
  averageResourcePerProject Int       @default(0) @map("average_resource_per_project")

  // æˆ¦ç•¥æ•´åˆæ€§çµ±è¨ˆ
  averageStrategicAlignment Float     @default(0) @map("average_strategic_alignment")
  highAlignmentProjects     Int       @default(0) @map("high_alignment_projects")

  calculatedAt              DateTime  @default(now()) @map("calculated_at")
  createdAt                 DateTime  @default(now()) @map("created_at")
  updatedAt                 DateTime  @updatedAt @map("updated_at")

  @@unique([periodType, periodStart])
  @@index([periodType])
  @@map("portfolio_summary")
}
```

**ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: VoiceDriveã®æ—¥æ¬¡ãƒãƒƒãƒå‡¦ç†ã§é›†è¨ˆ

---

## âœ… åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®å¯¾å¿œ

### å¯¾å¿œå†…å®¹: âŒ **æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ä¸è¦**

**ç†ç”±**:
1. å…¨8ãƒ†ãƒ¼ãƒ–ãƒ«ã¯VoiceDriveå´ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ãƒ‡ãƒ¼ã‚¿
2. åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¯è·å“¡ãƒã‚¹ã‚¿ã€éƒ¨é–€ãƒã‚¹ã‚¿ã®æä¾›ã®ã¿
3. ãƒ‡ãƒ¼ã‚¿è²¬ä»»åˆ†ç•Œç‚¹ã«åŸºã¥ãã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ãƒ‡ãƒ¼ã‚¿ã¯VoiceDriveå´ã§å®Œçµ

### å¿…è¦ãªAPI: âœ… **æ—¢å­˜APIã®ã¿**

VoiceDriveãŒãƒªã‚½ãƒ¼ã‚¹é…åˆ†é›†è¨ˆæ™‚ã«ä½¿ç”¨ã™ã‚‹æ—¢å­˜API:

#### API-1: è·å“¡æƒ…å ±å–å¾—ï¼ˆæ—¢å­˜ï¼‰
```http
GET /api/v2/employees/{employeeId}
Authorization: Bearer {token}
X-API-Key: {api_key}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "data": {
    "employee": {
      "employeeId": "EMP12345",
      "name": "å±±ç”°å¤ªéƒ",
      "department": "çœ‹è­·éƒ¨",
      "position": "çœ‹è­·å¸«",
      "professionCategory": "nurse",
      "facility": "å°åŸç—…é™¢"
    }
  }
}
```

**ä½¿ç”¨ç›®çš„**: ãƒªã‚½ãƒ¼ã‚¹é…åˆ†é›†è¨ˆæ™‚ã®è·ç¨®åˆ¥ã‚«ã‚¦ãƒ³ãƒˆ

#### API-2: éƒ¨é–€ãƒã‚¹ã‚¿å–å¾—ï¼ˆæ—¢å­˜ï¼‰
```http
GET /api/v2/departments?facilityId={facilityId}
Authorization: Bearer {token}
X-API-Key: {api_key}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "data": {
    "departments": [
      {
        "departmentId": "DEPT001",
        "departmentName": "çœ‹è­·éƒ¨",
        "facilityId": "obara-hospital",
        "facilityName": "å°åŸç—…é™¢"
      }
    ]
  }
}
```

**ä½¿ç”¨ç›®çš„**: äºˆç®—éƒ¨ç½²åã®è¡¨ç¤º

---

## ğŸ”§ VoiceDriveå´ã®å®Ÿè£…æ¨å¥¨äº‹é …

### 1. ãƒ‡ãƒ¼ã‚¿ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ APIã®å‘¼ã³å‡ºã—é »åº¦ã‚’æœ€å°åŒ–ã™ã‚‹ãŸã‚ã€ä»¥ä¸‹ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã‚’æ¨å¥¨:

```typescript
// VoiceDriveå´ã®å®Ÿè£…ä¾‹

import Redis from 'ioredis';
const redis = new Redis();

/**
 * è·å“¡ã®è·ç¨®æƒ…å ±ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä»˜ãã§å–å¾—
 */
async function getEmployeeProfession(employeeId: string): Promise<string> {
  // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç¢ºèªï¼ˆ24æ™‚é–“ï¼‰
  const cacheKey = `employee:${employeeId}:profession`;
  const cached = await redis.get(cacheKey);

  if (cached) {
    return cached;
  }

  // åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ APIã‹ã‚‰å–å¾—
  const response = await fetch(`https://medical-system.example.com/api/v2/employees/${employeeId}`, {
    headers: {
      'Authorization': `Bearer ${process.env.MEDICAL_API_TOKEN}`,
      'X-API-Key': process.env.MEDICAL_API_KEY
    }
  });

  const data = await response.json();
  const profession = data.data.employee.professionCategory;

  // 24æ™‚é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  await redis.setex(cacheKey, 86400, profession);

  return profession;
}

/**
 * ãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆã‚µãƒ¼ãƒ“ã‚¹ï¼ˆæ—¥æ¬¡ãƒãƒƒãƒï¼‰
 */
async function calculateProjectResourceSummary(projectId: string) {
  // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¡ãƒ³ãƒãƒ¼å–å¾—
  const members = await prisma.projectTeamMember.findMany({
    where: { projectId },
    select: { userId: true }
  });

  // è·ç¨®åˆ¥é›†è¨ˆ
  const professionCounts = { nurse: 0, doctor: 0, admin: 0, others: 0 };

  for (const member of members) {
    const profession = await getEmployeeProfession(member.userId);

    if (profession === 'nurse') professionCounts.nurse++;
    else if (profession === 'doctor') professionCounts.doctor++;
    else if (profession === 'admin') professionCounts.admin++;
    else professionCounts.others++;
  }

  // ProjectResourceSummaryãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜
  await prisma.projectResourceSummary.upsert({
    where: { projectId },
    create: {
      projectId,
      totalMembers: members.length,
      nursesCount: professionCounts.nurse,
      doctorsCount: professionCounts.doctor,
      adminCount: professionCounts.admin,
      othersCount: professionCounts.others,
      estimatedPersonDays: members.length * 30, // 1ãƒ¡ãƒ³ãƒãƒ¼30äººæ—¥ã¨ä»®å®š
      calculatedAt: new Date()
    },
    update: {
      totalMembers: members.length,
      nursesCount: professionCounts.nurse,
      doctorsCount: professionCounts.doctor,
      adminCount: professionCounts.admin,
      othersCount: professionCounts.others,
      calculatedAt: new Date()
    }
  });
}
```

### 2. ãƒãƒƒãƒå‡¦ç†ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

```typescript
import cron from 'node-cron';

// æ—¥æ¬¡ãƒãƒƒãƒ: ãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆï¼ˆæ·±å¤œ3:00ï¼‰
cron.schedule('0 3 * * *', async () => {
  const projects = await prisma.post.findMany({
    where: { type: 'improvement' },
    select: { id: true }
  });

  for (const project of projects) {
    await calculateProjectResourceSummary(project.id);
  }
});

// æ—¥æ¬¡ãƒãƒƒãƒ: ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µãƒãƒªãƒ¼é›†è¨ˆï¼ˆæ·±å¤œ4:00ï¼‰
cron.schedule('0 4 * * *', async () => {
  await calculatePortfolioSummary('quarter', quarterStart, today);
  await calculatePortfolioSummary('year', yearStart, today);
  await calculatePortfolioSummary('all', new Date('2025-01-01'), today);
});
```

**æ¨å¥¨ç†ç”±**:
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é›†è¨ˆã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ APIã¸ã®è² è·ãŒé«˜ã„
- æ—¥æ¬¡ãƒãƒƒãƒã§ã‚ã‚Œã°ã€æ·±å¤œã®ä½è² è·æ™‚é–“å¸¯ã«å®Ÿè¡Œå¯èƒ½
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã«ã‚ˆã‚Šã€APIå‘¼ã³å‡ºã—å›æ•°ã‚’å¤§å¹…å‰Šæ¸›

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³

```mermaid
graph LR
    A[åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ <br/>è·å“¡ãƒã‚¹ã‚¿] -->|æ—¢å­˜API| B[VoiceDrive<br/>ã‚­ãƒ£ãƒƒã‚·ãƒ¥å±¤<br/>Redis 24h]
    B --> C[VoiceDrive<br/>ProjectResourceSummary]

    D[VoiceDrive<br/>ProjectFinancial] --> E[VoiceDrive<br/>PortfolioSummary<br/>æ—¥æ¬¡é›†è¨ˆ]
    F[VoiceDrive<br/>ProjectStrategicEvaluation] --> E
    C --> E

    E --> G[ProjectPortfolioManagement<br/>ãƒšãƒ¼ã‚¸è¡¨ç¤º]

    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#f0f0f0
    style D fill:#f0f0f0
    style E fill:#e8f5e8
    style F fill:#f0f0f0
    style G fill:#ffe1f5
```

**ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼èª¬æ˜**:
1. åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¯è·å“¡ãƒã‚¹ã‚¿APIã®ã¿æä¾›ï¼ˆSingle Source of Truthï¼‰
2. VoiceDriveã¯è·å“¡æƒ…å ±ã‚’24æ™‚é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆRedisï¼‰
3. æ—¥æ¬¡ãƒãƒƒãƒã§ProjectResourceSummaryã‚’é›†è¨ˆ
4. æ—¥æ¬¡ãƒãƒƒãƒã§PortfolioSummaryã‚’é›†è¨ˆ
5. ãƒšãƒ¼ã‚¸è¡¨ç¤ºæ™‚ã¯PortfolioSummaryã‹ã‚‰é«˜é€Ÿå–å¾—

---

## ğŸ¯ DBæ§‹ç¯‰è¨ˆç”»æ›¸ã¸ã®å½±éŸ¿

### çµè«–: âŒ **å½±éŸ¿ãªã—**

**ç†ç”±**:
1. åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ä¸è¦
2. æ—¢å­˜APIã®ã¿ã§å¯¾å¿œå¯èƒ½
3. VoiceDriveå´ã§ç‹¬è‡ªã«ãƒ†ãƒ¼ãƒ–ãƒ«ç®¡ç†

### DBæ§‹ç¯‰è¨ˆç”»æ›¸å‰æº–å‚™ã¸ã®è¿½è¨˜å†…å®¹

**è¿½åŠ ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ¡ˆ**:

```markdown
## Section 31: VoiceDrive ProjectPortfolioManagementï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªç®¡ç†ï¼‰é€£æº

### æ¦‚è¦
VoiceDriveã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªç®¡ç†æ©Ÿèƒ½ã§å¿…è¦ãª8ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¯ã€å…¨ã¦VoiceDriveå´ã§ç®¡ç†ã€‚

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ DBè¨­è¨ˆã¸ã®å½±éŸ¿
âŒ **è¿½åŠ ä¸è¦**

### å¿…è¦ãªAPI
âœ… **æ—¢å­˜APIã®ã¿**
- `GET /api/v2/employees/{employeeId}` - è·å“¡æƒ…å ±å–å¾—ï¼ˆè·ç¨®æƒ…å ±ï¼‰
- `GET /api/v2/departments?facilityId={facilityId}` - éƒ¨é–€ãƒã‚¹ã‚¿å–å¾—

### ãƒ‡ãƒ¼ã‚¿è²¬ä»»åˆ†ç•Œç‚¹
- **åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ **: è·å“¡ãƒã‚¹ã‚¿ã€éƒ¨é–€ãƒã‚¹ã‚¿ï¼ˆSingle Source of Truthï¼‰
- **VoiceDrive**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè²¡å‹™ã€æˆ¦ç•¥è©•ä¾¡ã€ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ã€ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªåˆ†æ

### VoiceDriveå´ã§ç®¡ç†ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆ8ä»¶ï¼‰
1. ProjectFinancial - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè²¡å‹™ãƒ‡ãƒ¼ã‚¿
2. ProjectStrategicEvaluation - æˆ¦ç•¥çš„è©•ä¾¡
3. ProjectResourceSummary - ãƒªã‚½ãƒ¼ã‚¹é…åˆ†é›†è¨ˆ
4. PortfolioSummary - ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µãƒãƒªãƒ¼
5. ProjectCategory - ã‚«ãƒ†ã‚´ãƒªãƒã‚¹ã‚¿ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
6. Post.projectCategory - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ†ã‚´ãƒªï¼ˆæ‹¡å¼µï¼‰
7. Post.financial - è²¡å‹™ãƒ‡ãƒ¼ã‚¿ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
8. Post.strategicEvaluation - è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
- Redis 24æ™‚é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆè·å“¡è·ç¨®æƒ…å ±ï¼‰
- æ—¥æ¬¡ãƒãƒƒãƒå‡¦ç†ï¼ˆæ·±å¤œ3-4æ™‚ï¼‰

### å®Ÿè£…å„ªå…ˆé †ä½
Phase 1ï¼ˆè²¡å‹™ãƒ»æˆ¦ç•¥è©•ä¾¡ï¼‰: 3-4æ—¥
Phase 2ï¼ˆãƒªã‚½ãƒ¼ã‚¹é…åˆ†ï¼‰: 2-3æ—¥
Phase 3ï¼ˆãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µãƒãƒªãƒ¼ï¼‰: 1-2æ—¥
Phase 4ï¼ˆã‚«ãƒ†ã‚´ãƒªãƒã‚¹ã‚¿ï¼‰: 1-2æ—¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

**ç·æ‰€è¦æ™‚é–“**: 7-11æ—¥ï¼ˆPhase 1-3ï¼‰
```

---

## ğŸ“‹ VoiceDriveãƒãƒ¼ãƒ ã¸ã®å®Ÿè£…ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹

### Phase 1: è²¡å‹™ãƒ»æˆ¦ç•¥è©•ä¾¡æ©Ÿèƒ½ï¼ˆ3-4æ—¥ï¼‰

**ç›®æ¨™**: å„ªå…ˆåº¦ãƒãƒˆãƒªã‚¯ã‚¹ã€ROIåˆ†æã€æˆ¦ç•¥æ•´åˆæ€§ã‚¿ãƒ–ãŒå‹•ä½œã™ã‚‹

**å®Ÿè£…é …ç›®**:
1. ProjectFinancial, ProjectStrategicEvaluationãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ï¼ˆPrismaã‚¹ã‚­ãƒ¼ãƒï¼‰
2. Post.projectCategoryè¿½åŠ 
3. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
4. ROIè¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…
5. å„ªå…ˆåº¦è±¡é™è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
6. APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…ï¼ˆ`/api/portfolio/projects`, `/api/portfolio/summary`ï¼‰
7. ProjectPortfolioManagementPageã®ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ã€å®Ÿãƒ‡ãƒ¼ã‚¿é€£æº

**å®Œäº†åŸºæº–**:
- âœ… å„ªå…ˆåº¦ãƒãƒˆãƒªã‚¯ã‚¹ã‚¿ãƒ–ã§å®Ÿãƒ‡ãƒ¼ã‚¿è¡¨ç¤º
- âœ… ROIåˆ†æã‚¿ãƒ–ã§å®Ÿãƒ‡ãƒ¼ã‚¿è¡¨ç¤º
- âœ… æˆ¦ç•¥æ•´åˆæ€§ã‚¿ãƒ–ã§å®Ÿãƒ‡ãƒ¼ã‚¿è¡¨ç¤º

---

### Phase 2: ãƒªã‚½ãƒ¼ã‚¹é…åˆ†æ©Ÿèƒ½ï¼ˆ2-3æ—¥ï¼‰

**ç›®æ¨™**: ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ã‚¿ãƒ–ãŒå®Œå…¨å‹•ä½œã™ã‚‹

**å®Ÿè£…é …ç›®**:
1. ProjectResourceSummaryãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 
2. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
3. ãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ APIé€£æºï¼‰
4. ãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆãƒãƒƒãƒå®Ÿè£…ï¼ˆæ—¥æ¬¡3:00ï¼‰
5. APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¿½åŠ ï¼ˆ`/api/portfolio/resources`ï¼‰
6. ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ã‚¿ãƒ–ã®å®Ÿãƒ‡ãƒ¼ã‚¿é€£æº

**å®Œäº†åŸºæº–**:
- âœ… ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ã‚¿ãƒ–ã§å®Ÿãƒ‡ãƒ¼ã‚¿è¡¨ç¤º
- âœ… è·ç¨®åˆ¥ãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆãŒæ­£ç¢º
- âœ… æ—¥æ¬¡ãƒãƒƒãƒãŒæ­£å¸¸å‹•ä½œ

---

### Phase 3: ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µãƒãƒªãƒ¼é›†è¨ˆï¼ˆ1-2æ—¥ï¼‰

**ç›®æ¨™**: ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ã®é«˜é€Ÿè¡¨ç¤º

**å®Ÿè£…é …ç›®**:
1. PortfolioSummaryãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 
2. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
3. ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªé›†è¨ˆãƒãƒƒãƒå®Ÿè£…ï¼ˆæ—¥æ¬¡4:00ï¼‰
4. `/api/portfolio/summary`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¿®æ­£

**å®Œäº†åŸºæº–**:
- âœ… ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ãŒé«˜é€Ÿè¡¨ç¤ºï¼ˆé›†è¨ˆæ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨ï¼‰
- âœ… å››åŠæœŸãƒ»å¹´é–“ãƒ»å…¨æœŸé–“ã®é›†è¨ˆãŒæ­£ç¢º

---

## ğŸ“ åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ã¸ã®ãŠé¡˜ã„

### å¿…è¦ãªç¢ºèªäº‹é …

1. **æ—¢å­˜APIå‹•ä½œç¢ºèª**
   - `GET /api/v2/employees/{employeeId}` ã§ `professionCategory` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒè¿”å´ã•ã‚Œã‚‹ã‹ç¢ºèª
   - `GET /api/v2/departments?facilityId={facilityId}` ã®å‹•ä½œç¢ºèª

2. **APIãƒ¬ãƒ¼ãƒˆåˆ¶é™ã®ç¢ºèª**
   - VoiceDriveå´ã§æ—¥æ¬¡ãƒãƒƒãƒå‡¦ç†æ™‚ã«500è·å“¡ Ã— 100ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ = æœ€å¤§50,000ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å¯èƒ½æ€§
   - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã«ã‚ˆã‚Šå®Ÿéš›ã¯1,000-2,000ãƒªã‚¯ã‚¨ã‚¹ãƒˆç¨‹åº¦ã«å‰Šæ¸›äºˆå®š
   - ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã®è¨­å®šç¢ºèªã‚’ãŠé¡˜ã„ã—ã¾ã™

3. **Webhooké€šçŸ¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰**
   - è·å“¡ã®è·ç¨®å¤‰æ›´æ™‚ã«Webhooké€šçŸ¥ãŒã‚ã‚Œã°ã€VoiceDriveå´ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–ãŒå¯èƒ½
   - ç¾æ™‚ç‚¹ã§ã¯ä¸è¦ï¼ˆæ—¥æ¬¡ãƒãƒƒãƒã§å¯¾å¿œå¯èƒ½ï¼‰

### å¿…è¦ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

1. è·å“¡æƒ…å ±APIã®`professionCategory`ã®å€¤ãƒªã‚¹ãƒˆ
   - ä¾‹: `nurse`, `doctor`, `admin`, `therapist`, `pharmacist`, etc.
2. APIãƒ¬ãƒ¼ãƒˆåˆ¶é™ã®ä»•æ§˜æ›¸
3. APIèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã®ç™ºè¡Œæ‰‹é †

---

## âœ… æœ€çµ‚ç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´
- [x] æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ : **ä¸è¦**
- [x] æ–°è¦APIå®Ÿè£…: **ä¸è¦**
- [ ] æ—¢å­˜APIå‹•ä½œç¢ºèª: `GET /api/v2/employees/{employeeId}`
- [ ] æ—¢å­˜APIå‹•ä½œç¢ºèª: `GET /api/v2/departments?facilityId={facilityId}`
- [ ] APIãƒ¬ãƒ¼ãƒˆåˆ¶é™ç¢ºèª
- [ ] APIèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œ

### VoiceDriveå´
- [ ] ProjectFinancial, ProjectStrategicEvaluationãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 
- [ ] ProjectResourceSummaryãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 
- [ ] PortfolioSummaryãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 
- [ ] ProjectCategoryãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- [ ] ROIè¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…
- [ ] ãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…
- [ ] ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªé›†è¨ˆãƒãƒƒãƒå®Ÿè£…
- [ ] Redisã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®š
- [ ] APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…
- [ ] ProjectPortfolioManagementPageå®Ÿãƒ‡ãƒ¼ã‚¿é€£æº

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [project-portfolio-managementæš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆ_20251013.md](./project-portfolio-managementæš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆ_20251013.md)
- [project-portfolio-management_DBè¦ä»¶åˆ†æ_20251013.md](./project-portfolio-management_DBè¦ä»¶åˆ†æ_20251013.md)
- [ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹å®šç¾©æ›¸_20251008.md](./ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹å®šç¾©æ›¸_20251008.md)
- [PersonalStationæš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆ_20251008.md](./PersonalStationæš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆ_20251008.md)

---

**æ–‡æ›¸çµ‚äº†**

æœ€çµ‚æ›´æ–°: 2025å¹´10æœˆ13æ—¥
ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.0
æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼: DBæ§‹ç¯‰é–‹å§‹æ™‚
