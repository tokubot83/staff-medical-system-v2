# Corporate Agenda Dashboard åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ç¢ºèªçµæœ

**æ–‡æ›¸ç•ªå·**: MEDICAL-CONFIRMATION-2025-1011-002
**ä½œæˆæ—¥**: 2025å¹´10æœˆ11æ—¥
**ä½œæˆè€…**: åŒ»ç™‚è·å“¡ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ 
**å¯¾è±¡ãƒšãƒ¼ã‚¸**: https://voicedrive-v100.vercel.app/corporate-agenda-dashboard
**å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
- corporate-agenda-dashboard_DBè¦ä»¶åˆ†æ_20251011.mdï¼ˆVoiceDriveãƒãƒ¼ãƒ ä½œæˆï¼‰
- corporate-agenda-dashboardæš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆ_20251011.mdï¼ˆVoiceDriveãƒãƒ¼ãƒ ä½œæˆï¼‰

---

## ğŸ“‹ ç¢ºèªçµæœã‚µãƒãƒªãƒ¼

### ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆã®ç¢ºèª

**Corporate Agenda Dashboardãƒšãƒ¼ã‚¸ã¯å®Œå…¨ã«VoiceDriveã‚·ã‚¹ãƒ†ãƒ å´ã§å®Ÿè£…ãƒ»é‹ç”¨ã•ã‚Œã¾ã™**

```
VoiceDriveå´ã§å®Ÿè£…:
- æ³•äººå…¨ä½“KPIé›†è¨ˆï¼ˆ100%ï¼‰
- æ–½è¨­åˆ¥çŠ¶æ³é›†è¨ˆï¼ˆ100%ï¼‰
- ã‚¢ãƒ©ãƒ¼ãƒˆç”Ÿæˆï¼ˆ100%ï¼‰
- æ–½è¨­ã‚¿ã‚¤ãƒ—åˆ¥çµ±è¨ˆï¼ˆ100%ï¼‰
- å…¨æ–½è¨­è©³ç´°ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆ100%ï¼‰

åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã§å®Ÿè£…:
- æ–½è¨­ãƒã‚¹ã‚¿APIï¼ˆæ—¢å­˜å®Ÿè£…æ¸ˆã¿âœ…ï¼‰
- æ–½è¨­åˆ¥è·å“¡æ•°APIï¼ˆæ—¢å­˜å®Ÿè£…æ¸ˆã¿âœ…ï¼‰
```

### ğŸ‰ è‰¯ã„ãƒ‹ãƒ¥ãƒ¼ã‚¹

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã§å¿…è¦ãªAPIï¼ˆ2ä»¶ï¼‰ã¯æ—¢ã«å®Ÿè£…æ¸ˆã¿ã§ã™ï¼**

- âœ… **GET /api/v2/facilities** - **å®Ÿè£…æ¸ˆã¿**ï¼ˆPhase 3å®Ÿè£…æ™‚ï¼‰
- âœ… **GET /api/v2/employees/count?facility={id}** - **å®Ÿè£…æ¸ˆã¿**ï¼ˆOrganizationAnalyticsç”¨ã«2025å¹´10æœˆ10æ—¥å®Ÿè£…å®Œäº†ï¼‰

---

## ğŸ“ æ—¢å­˜è¨ˆç”»æ›¸ã¨ã®æ•´åˆæ€§è©•ä¾¡

### âœ… ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹å®šç¾©æ›¸ã¨ã®æ•´åˆæ€§

**çµè«–**: âœ… **å®Œå…¨ã«æ•´åˆã—ã¦ã„ã‚‹**

| ãƒ‡ãƒ¼ã‚¿é …ç›® | VoiceDrive | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | æä¾›æ–¹æ³• |
|-----------|-----------|-------------|---------|
| **æ–½è¨­ãƒã‚¹ã‚¿** | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | âœ… ãƒã‚¹ã‚¿ | **APIæä¾›** |
| **æ–½è¨­åˆ¥è·å“¡æ•°** | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | âœ… ãƒã‚¹ã‚¿ | **APIæä¾›** |
| **æŠ•ç¨¿é›†è¨ˆãƒ‡ãƒ¼ã‚¿** | âœ… ãƒã‚¹ã‚¿ | âŒ ç®¡è½„å¤– | VoiceDriveå´ã§ç®¡ç† |
| **ã‚¢ãƒ©ãƒ¼ãƒˆç”Ÿæˆ** | âœ… ãƒã‚¹ã‚¿ | âŒ ç®¡è½„å¤– | VoiceDriveå´ã§ç®¡ç† |

**åŸå‰‡ã«æ²¿ã£ãŸè¨­è¨ˆ**:
- âœ… Single Source of Truth: æ–½è¨­æƒ…å ±ãƒ»è·å“¡æ•°ã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãŒçœŸå®Ÿã®æƒ…å ±æº
- âœ… APIé€£æº: æ—¢å­˜ã®æ–½è¨­ãƒã‚¹ã‚¿APIãƒ»è·å“¡æ•°APIã‚’åˆ©ç”¨
- âœ… æœ€å°é‡è¤‡: VoiceDriveå´ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã¿ï¼ˆè¡¨ç¤ºç”¨ï¼‰
- âœ… æ˜ç¢ºãªå¢ƒç•Œ: æŠ•ç¨¿é›†è¨ˆãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆç”Ÿæˆã¯VoiceDriveç®¡è½„

### âœ… DBæ§‹ç¯‰è¨ˆç”»æ›¸å‰æº–å‚™ã¨ã®æ•´åˆæ€§

**çµè«–**: âœ… **å®Œå…¨æ•´åˆï¼ˆCorporate Agenda Dashboardé–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«ã¯å…¨ã¦VoiceDriveå´ã§ç®¡ç†ï¼‰**

æ—¢å­˜ã®[DBæ§‹ç¯‰è¨ˆç”»æ›¸å‰æº–å‚™_ä¸è¶³é …ç›®æ•´ç†_20251008.md](../../docs/DBæ§‹ç¯‰è¨ˆç”»æ›¸å‰æº–å‚™_ä¸è¶³é …ç›®æ•´ç†_20251008.md)ã«ã¯ä»¥ä¸‹ãŒ**å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“**ï¼š

âŒ **æœªè¨˜è¼‰é …ç›®**:
1. æ³•äººå…¨ä½“KPIé›†è¨ˆãƒ†ãƒ¼ãƒ–ãƒ«
2. æ–½è¨­åˆ¥çŠ¶æ³é›†è¨ˆãƒ†ãƒ¼ãƒ–ãƒ«
3. ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«

**ç†ç”±**: Corporate Agenda Dashboardãƒšãƒ¼ã‚¸ã¯å®Œå…¨ã«VoiceDriveãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹é›†è¨ˆæ©Ÿèƒ½ã®ãŸã‚ã€åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®DBè¨­è¨ˆã«åæ˜ ã•ã‚Œã¦ã„ãªã„

**å½±éŸ¿**: âœ… **å½±éŸ¿ãªã—ï¼ˆè¿½åŠ ä¸è¦ï¼‰**

ç†ç”±ï¼š
- æ³•äººå…¨ä½“ã®è­°é¡ŒåŒ–ãƒ—ãƒ­ã‚»ã‚¹é›†è¨ˆã¯VoiceDriveå´ã®è²¬ä»»ç¯„å›²ï¼ˆãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹å®šç¾©æ›¸ã«æº–æ‹ ï¼‰
- åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¯æ–½è¨­ãƒã‚¹ã‚¿ãƒ»è·å“¡æ•°APIã‚’æä¾›ã™ã‚‹ã®ã¿ï¼ˆæ—¢ã«å®Ÿè£…æ¸ˆã¿ï¼‰
- DBæ§‹ç¯‰è¨ˆç”»æ›¸ã¸ã®è¿½åŠ ã¯**ä¸è¦**

### âœ… å…±é€šDBæ§‹ç¯‰å¾Œ_ä½œæ¥­å†é–‹æŒ‡ç¤ºæ›¸ã¨ã®æ•´åˆæ€§

**çµè«–**: âœ… **æ•´åˆã—ã¦ã„ã‚‹**

æ—¢å­˜ã®[å…±é€šDBæ§‹ç¯‰å¾Œ_ä½œæ¥­å†é–‹æŒ‡ç¤ºæ›¸_20250928.md](../../docs/å…±é€šDBæ§‹ç¯‰å¾Œ_ä½œæ¥­å†é–‹æŒ‡ç¤ºæ›¸_20250928.md)ã«ã¯ä»¥ä¸‹ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ï¼š

- âœ… æ–½è¨­åˆ¥æ¨©é™ãƒ¬ãƒ™ãƒ«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆPhase 3å®Œäº†ï¼‰
- âœ… OrganizationAnalytics APIçµ±åˆãƒ†ã‚¹ãƒˆæ‰‹é †ï¼ˆ6.3ç¯€ï¼‰
- âœ… ExecutiveReports/BoardPreparation VoiceDriveå®Ÿè£…ã‚¿ã‚¹ã‚¯ï¼ˆ6.3.6ç¯€ï¼‰

**Corporate Agenda Dashboardã¸ã®å¯¾å¿œ**:
- åŒã˜APIï¼ˆ`GET /api/v2/facilities`, `GET /api/v2/employees/count`ï¼‰ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã€æ—¢å­˜ã®çµ±åˆãƒ†ã‚¹ãƒˆæ‰‹é †ã‚’æµç”¨å¯èƒ½
- è¿½åŠ ã®çµ±åˆãƒ†ã‚¹ãƒˆé …ç›®ã¯ä¸è¦

### ğŸ“Š æ•´åˆæ€§è©•ä¾¡ã‚µãƒãƒªãƒ¼

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | æ•´åˆæ€§ | å¯¾å¿œè¦å¦ | å‚™è€ƒ |
|------------|--------|---------|------|
| **ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹å®šç¾©æ›¸** | âœ… å®Œå…¨æ•´åˆ | ä¸è¦ | è²¬ä»»åˆ†æ‹…ãŒæ˜ç¢º |
| **DBæ§‹ç¯‰è¨ˆç”»æ›¸å‰æº–å‚™_ä¸è¶³é …ç›®æ•´ç†** | âœ… å®Œå…¨æ•´åˆ | **ä¸è¦** | VoiceDriveå´ã§ç®¡ç† |
| **å…±é€šDBæ§‹ç¯‰å¾Œ_ä½œæ¥­å†é–‹æŒ‡ç¤ºæ›¸** | âœ… æ•´åˆ | ä¸è¦ | æ—¢å­˜æ‰‹é †ã‚’æµç”¨å¯èƒ½ |

**çµè«–**: âœ… **åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã§è¿½åŠ ã®DBè¨­è¨ˆãƒ»å®Ÿè£…ã¯ä¸è¦**

---

## ğŸ” è©³ç´°ç¢ºèªçµæœ

### 1. APIæä¾›çŠ¶æ³ã®ç¢ºèª

#### âœ… API-1: æ–½è¨­ãƒã‚¹ã‚¿å–å¾—APIï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰

**VoiceDriveãƒãƒ¼ãƒ ã®è¦æ±‚**:
```
GET /api/v2/facilities
```

**å®Ÿè£…çŠ¶æ³**: âœ… **å®Œå…¨å®Ÿè£…æ¸ˆã¿**

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/api/v2/facilities/route.ts`

**å®Ÿè£…å®Œäº†æ—¥**: 2025å¹´9æœˆ28æ—¥ï¼ˆPhase 3å®Ÿè£…æ™‚ï¼‰

**ç¾åœ¨ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼**:
```json
{
  "data": {
    "facilities": [
      {
        "facilityId": "obara-hospital",
        "facilityCode": "OB-HOSP",
        "facilityName": "åŒ»ç™‚æ³•äºº åšç”Ÿä¼š å°åŸç—…é™¢",
        "facilityType": "acute",
        "isActive": true,
        "staffCount": 420
      },
      {
        "facilityId": "tategami-rehabilitation",
        "facilityCode": "TG-REHAB",
        "facilityName": "ç«‹ç¥ãƒªãƒãƒ“ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ¸©æ³‰ç—…é™¢",
        "facilityType": "rehabilitation",
        "isActive": true,
        "staffCount": 180
      },
      {
        "facilityId": "espoir-tategami",
        "facilityCode": "ES-CARE",
        "facilityName": "ä»‹è­·è€äººä¿å¥æ–½è¨­ã‚¨ã‚¹ãƒãƒ¯ãƒ¼ãƒ«ç«‹ç¥",
        "facilityType": "geriatric_health_facility",
        "isActive": true,
        "staffCount": 150
      }
    ]
  },
  "meta": {
    "totalCount": 3,
    "timestamp": "2025-10-11T00:00:00Z"
  }
}
```

**VoiceDriveãƒãƒ¼ãƒ ãŒè¦æ±‚ã—ãŸå½¢å¼**:
```json
{
  "facilities": [
    {
      "id": "F001",
      "code": "CC-HOSP",
      "name": "ä¸­å¤®ç·åˆç—…é™¢",
      "type": "hospital",
      "address": "...",
      "isActive": true
    }
  ],
  "totalCount": 10,
  "timestamp": "2025-10-11T00:00:00Z"
}
```

**äº’æ›æ€§ã®è©•ä¾¡**:

| é …ç›® | ç¾åœ¨ã®API | VoiceDriveè¦æ±‚ | äº’æ›æ€§ | å¯¾å¿œæ–¹æ³• |
|------|----------|---------------|--------|---------|
| **æ–½è¨­ID** | `facilityId` | `id` | âš ï¸ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åç›¸é• | VoiceDriveå´ã§ãƒãƒƒãƒ”ãƒ³ã‚° |
| **æ–½è¨­ã‚³ãƒ¼ãƒ‰** | `facilityCode` | `code` | âš ï¸ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åç›¸é• | VoiceDriveå´ã§ãƒãƒƒãƒ”ãƒ³ã‚° |
| **æ–½è¨­å** | `facilityName` | `name` | âš ï¸ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åç›¸é• | VoiceDriveå´ã§ãƒãƒƒãƒ”ãƒ³ã‚° |
| **æ–½è¨­ã‚¿ã‚¤ãƒ—** | `facilityType` | `type` | âš ï¸ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åç›¸é• | VoiceDriveå´ã§ãƒãƒƒãƒ”ãƒ³ã‚° |
| **ç¨¼åƒçŠ¶æ³** | `isActive` | `isActive` | âœ… ä¸€è‡´ | ãã®ã¾ã¾åˆ©ç”¨å¯èƒ½ |
| **è·å“¡æ•°** | `staffCount` | å¿…è¦ | âœ… å®Ÿè£…æ¸ˆã¿ | ãã®ã¾ã¾åˆ©ç”¨å¯èƒ½ |
| **ä½æ‰€** | âŒ æœªå®Ÿè£… | `address` | âš ï¸ ä»»æ„é …ç›® | å¿…è¦ã«å¿œã˜ã¦Phase 2ã§è¿½åŠ  |

**çµè«–**: âœ… **APIã¯å®Ÿè£…æ¸ˆã¿ã€‚VoiceDriveå´ã§ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚Œã°åˆ©ç”¨å¯èƒ½**

---

#### âœ… API-2: æ–½è¨­åˆ¥è·å“¡æ•°å–å¾—APIï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰

**VoiceDriveãƒãƒ¼ãƒ ã®è¦æ±‚**:
```
GET /api/v2/employees/count?facility={facilityId}
```

**å®Ÿè£…çŠ¶æ³**: âœ… **å®Œå…¨å®Ÿè£…æ¸ˆã¿**

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/api/v2/employees/count/route.ts`

**å®Ÿè£…å®Œäº†æ—¥**: 2025å¹´10æœˆ10æ—¥ï¼ˆOrganizationAnalytics Phase 1å®Ÿè£…æ™‚ï¼‰

**ç¾åœ¨ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼**:
```json
{
  "data": {
    "totalCount": 150,
    "byDepartment": [
      {
        "departmentId": "dept_001",
        "departmentCode": "NUR",
        "departmentName": "çœ‹è­·éƒ¨",
        "count": 50
      }
    ],
    "byFacility": [
      {
        "facilityId": "espoir-tategami",
        "facilityName": "ä»‹è­·è€äººä¿å¥æ–½è¨­ã‚¨ã‚¹ãƒãƒ¯ãƒ¼ãƒ«ç«‹ç¥",
        "count": 150
      }
    ]
  },
  "meta": {
    "timestamp": "2025-10-11T00:00:00Z",
    "filters": {
      "facilityId": "espoir-tategami",
      "departmentId": null
    }
  }
}
```

**äº’æ›æ€§ã®è©•ä¾¡**:

| é …ç›® | ç¾åœ¨ã®API | VoiceDriveè¦æ±‚ | äº’æ›æ€§ | å¯¾å¿œæ–¹æ³• |
|------|----------|---------------|--------|---------|
| **ç·è·å“¡æ•°** | `data.totalCount` | `totalCount` | âš ï¸ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åç›¸é• | VoiceDriveå´ã§ãƒãƒƒãƒ”ãƒ³ã‚° |
| **æ–½è¨­çµã‚Šè¾¼ã¿** | `?facility={id}` | `?facility={id}` | âœ… ä¸€è‡´ | ãã®ã¾ã¾åˆ©ç”¨å¯èƒ½ |
| **ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—** | `meta.timestamp` | `timestamp` | âœ… å®Ÿè£…æ¸ˆã¿ | ãã®ã¾ã¾åˆ©ç”¨å¯èƒ½ |

**çµè«–**: âœ… **APIã¯å®Ÿè£…æ¸ˆã¿ã€‚VoiceDriveå´ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’å¤‰æ›ã™ã‚Œã°åˆ©ç”¨å¯èƒ½**

---

### 2. æ–½è¨­ã‚¿ã‚¤ãƒ—ã®ãƒãƒƒãƒ”ãƒ³ã‚°ç¢ºèª

#### VoiceDriveãƒãƒ¼ãƒ ã®è¦æ±‚ï¼ˆ5ç¨®é¡ï¼‰

```typescript
facilityTypes: [
  'hospital',        // ç—…é™¢
  'medical_center',  // åŒ»ç™‚ã‚»ãƒ³ã‚¿ãƒ¼
  'rehab',          // ãƒªãƒãƒ“ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚»ãƒ³ã‚¿ãƒ¼
  'clinic',         // è¨ºç™‚æ‰€
  'care_facility'   // ä»‹è­·æ–½è¨­
]
```

#### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®ç¾åœ¨ã®facilityTypeï¼ˆenumï¼‰

```typescript
facilityTypes: [
  'acute',                        // æ€¥æ€§æœŸç—…é™¢
  'rehabilitation',               // ãƒªãƒãƒ“ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç—…é™¢
  'geriatric_health_facility',   // ä»‹è­·è€äººä¿å¥æ–½è¨­
  'clinic',                       // è¨ºç™‚æ‰€
  'nursing_home'                  // ç‰¹åˆ¥é¤Šè­·è€äººãƒ›ãƒ¼ãƒ 
]
```

#### ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«

VoiceDriveå´ã§ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ï¼š

| åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | VoiceDrive | æ—¥æœ¬èª |
|------------|-----------|--------|
| `acute` | `hospital` | ç·åˆç—…é™¢ |
| `acute` | `medical_center` | åœ°åŸŸåŒ»ç™‚ã‚»ãƒ³ã‚¿ãƒ¼ |
| `rehabilitation` | `rehab` | ãƒªãƒãƒ“ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚»ãƒ³ã‚¿ãƒ¼ |
| `clinic` | `clinic` | è¨ºç™‚æ‰€ |
| `geriatric_health_facility` | `care_facility` | ä»‹è­·æ–½è¨­ |
| `nursing_home` | `care_facility` | ä»‹è­·æ–½è¨­ |

**æ³¨æ„äº‹é …**:
- åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã® `acute` ã¯ã€VoiceDriveå´ã§æ–½è¨­åã«ã‚ˆã‚Š `hospital` ã¾ãŸã¯ `medical_center` ã«åˆ†é¡ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
- ä¾‹: "ä¸­å¤®ç·åˆç—…é™¢" â†’ `hospital`, "åŒ—éƒ¨åŒ»ç™‚ã‚»ãƒ³ã‚¿ãƒ¼" â†’ `medical_center`

**æ¨å¥¨å®Ÿè£…**:
```typescript
// VoiceDrive: src/utils/facilityTypeMapper.ts
export const mapFacilityType = (
  medicalSystemType: string,
  facilityName: string
): string => {
  if (medicalSystemType === 'acute') {
    if (facilityName.includes('åŒ»ç™‚ã‚»ãƒ³ã‚¿ãƒ¼')) {
      return 'medical_center';
    }
    return 'hospital';
  }

  const mapping: Record<string, string> = {
    'rehabilitation': 'rehab',
    'clinic': 'clinic',
    'geriatric_health_facility': 'care_facility',
    'nursing_home': 'care_facility'
  };

  return mapping[medicalSystemType] || 'hospital';
};
```

---

## ğŸ“Š åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®å¯¾å¿œçŠ¶æ³

### âœ… å¯¾å¿œå®Œäº†ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰

1. **æ–½è¨­ãƒã‚¹ã‚¿å–å¾—API** - `GET /api/v2/facilities`
   - ãƒ•ã‚¡ã‚¤ãƒ«: `src/app/api/v2/facilities/route.ts`
   - å®Ÿè£…æ—¥: 2025å¹´9æœˆ28æ—¥
   - ãƒ†ã‚¹ãƒˆ: Phase 3çµ±åˆãƒ†ã‚¹ãƒˆæˆåŠŸ
   - æ‰¿èªç•ªå·: PHASE3-FACILITY-API-001

2. **æ–½è¨­åˆ¥è·å“¡æ•°å–å¾—API** - `GET /api/v2/employees/count?facility={id}`
   - ãƒ•ã‚¡ã‚¤ãƒ«: `src/app/api/v2/employees/count/route.ts`
   - å®Ÿè£…æ—¥: 2025å¹´10æœˆ10æ—¥
   - ãƒ†ã‚¹ãƒˆ: 10/10ãƒ†ã‚¹ãƒˆæˆåŠŸï¼ˆ100%ï¼‰
   - æ‰¿èªç•ªå·: VD-APPROVAL-2025-1010-001

### âŒ å¯¾å¿œä¸è¦

| é …ç›® | ç†ç”± |
|------|------|
| **æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ** | VoiceDriveå´ã§ç®¡ç† |
| **é›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…** | VoiceDriveå´ã§å®Ÿè£… |
| **ã‚¢ãƒ©ãƒ¼ãƒˆç”Ÿæˆæ©Ÿèƒ½** | VoiceDriveå´ã§å®Ÿè£… |
| **ãƒ˜ãƒ«ã‚¹ã‚¹ã‚³ã‚¢è¨ˆç®—** | VoiceDriveå´ã§å®Ÿè£… |

---

## ğŸ¯ VoiceDriveãƒãƒ¼ãƒ ã¸ã®æ¨å¥¨äº‹é …

### 1. æ–½è¨­ãƒã‚¹ã‚¿APIåˆ©ç”¨æ–¹æ³•

**æ—¢å­˜APIã‚’ãã®ã¾ã¾åˆ©ç”¨ã§ãã¾ã™**:

```typescript
// VoiceDriveå´ã®å®Ÿè£…ä¾‹
async function getFacilities() {
  const response = await fetch('/api/v2/facilities', {
    headers: {
      'Authorization': `Bearer ${process.env.MEDICAL_SYSTEM_API_TOKEN}`,
      'X-API-Key': process.env.MEDICAL_SYSTEM_API_KEY
    }
  });

  const data = await response.json();

  // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åå¤‰æ›
  return data.data.facilities.map(facility => ({
    id: facility.facilityId,
    code: facility.facilityCode,
    name: facility.facilityName,
    type: mapFacilityType(facility.facilityType, facility.facilityName),
    isActive: facility.isActive,
    employeeCount: facility.staffCount
  }));
}
```

### 2. æ–½è¨­åˆ¥è·å“¡æ•°APIåˆ©ç”¨æ–¹æ³•

**æ—¢å­˜APIã‚’ãã®ã¾ã¾åˆ©ç”¨ã§ãã¾ã™**:

```typescript
// VoiceDriveå´ã®å®Ÿè£…ä¾‹
async function getFacilityEmployeeCount(facilityId: string): Promise<number> {
  const response = await fetch(`/api/v2/employees/count?facility=${facilityId}`, {
    headers: {
      'Authorization': `Bearer ${process.env.MEDICAL_SYSTEM_API_TOKEN}`,
      'X-API-Key': process.env.MEDICAL_SYSTEM_API_KEY
    }
  });

  const data = await response.json();
  return data.data.totalCount;
}
```

### 3. ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã®æ¨å¥¨

**æ–½è¨­ãƒã‚¹ã‚¿ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥**:
```typescript
// Redis ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ¨å¥¨è¨­å®š
await redis.setex(
  'medical:facilities',
  86400,  // 24æ™‚é–“
  JSON.stringify(facilities)
);
```

**æ–½è¨­åˆ¥è·å“¡æ•°ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥**:
```typescript
// Redis ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ¨å¥¨è¨­å®š
await redis.setex(
  `medical:employees:count:${facilityId}`,
  3600,  // 1æ™‚é–“
  JSON.stringify(employeeCount)
);
```

**ç†ç”±**:
- æ–½è¨­ãƒã‚¹ã‚¿ã¯é »ç¹ã«å¤‰æ›´ã•ã‚Œãªã„ãŸã‚ã€24æ™‚é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒé©åˆ‡
- è·å“¡æ•°ã¯æ¡ç”¨ãƒ»é€€è·ã«ã‚ˆã‚Šå¤‰å‹•ã™ã‚‹ãŸã‚ã€1æ™‚é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒé©åˆ‡
- Corporate Agenda Dashboardã®é›†è¨ˆå‡¦ç†ã¯è² è·ãŒé«˜ã„ãŸã‚ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥å¿…é ˆ

### 4. æ–½è¨­ã‚¿ã‚¤ãƒ—ãƒãƒƒãƒ”ãƒ³ã‚°ã®å®Ÿè£…

ä¸Šè¨˜ã€Œ2. æ–½è¨­ã‚¿ã‚¤ãƒ—ã®ãƒãƒƒãƒ”ãƒ³ã‚°ç¢ºèªã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®æ¨å¥¨å®Ÿè£…ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## âœ… ç¢ºèªå®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´
- [x] æ–½è¨­ãƒã‚¹ã‚¿APIå®Ÿè£…ç¢ºèª
- [x] æ–½è¨­åˆ¥è·å“¡æ•°APIå®Ÿè£…ç¢ºèª
- [x] æ–½è¨­ã‚¿ã‚¤ãƒ—enumç¢ºèª
- [x] APIãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ç¢ºèª
- [x] ç¢ºèªçµæœãƒ¬ãƒãƒ¼ãƒˆä½œæˆ

### VoiceDriveãƒãƒ¼ãƒ å´ï¼ˆæ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼‰
- [ ] æ—¢å­˜APIï¼ˆGET /api/v2/facilitiesï¼‰ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åãƒãƒƒãƒ”ãƒ³ã‚°å®Ÿè£…
- [ ] æ—¢å­˜APIï¼ˆGET /api/v2/employees/countï¼‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹å¤‰æ›å®Ÿè£…
- [ ] æ–½è¨­ã‚¿ã‚¤ãƒ—ãƒãƒƒãƒ”ãƒ³ã‚°é–¢æ•°å®Ÿè£…
- [ ] Redisã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥å®Ÿè£…
- [ ] CorporateAgendaDashboardServiceå®Ÿè£…ï¼ˆé›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯ï¼‰
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿæ–½

---

## ğŸ“ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ 
1. âœ… ç¢ºèªçµæœã‚’VoiceDriveãƒãƒ¼ãƒ ã«å…±æœ‰
2. â³ VoiceDriveãƒãƒ¼ãƒ ã‹ã‚‰ã®è¿½åŠ è³ªå•å¯¾å¿œï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
3. â³ çµ±åˆãƒ†ã‚¹ãƒˆå”åŠ›ï¼ˆPhase 2å®Ÿè£…å®Œäº†å¾Œï¼‰

### VoiceDriveãƒãƒ¼ãƒ 
1. æ–½è¨­ãƒã‚¹ã‚¿ãƒ»è·å“¡æ•°APIåˆ©ç”¨å®Ÿè£…ï¼ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åãƒãƒƒãƒ”ãƒ³ã‚°ï¼‰
2. CorporateAgendaDashboardServiceå®Ÿè£…ï¼ˆé›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯ï¼‰
3. Phase 2å®Œäº†å¾Œã€åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ã¨çµ±åˆãƒ†ã‚¹ãƒˆ

---

## ğŸ“ å‚è€ƒè³‡æ–™

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…æ¸ˆã¿API
- [GET /api/v2/facilities](../../src/app/api/v2/facilities/route.ts)
- [GET /api/v2/employees/count](../../src/app/api/v2/employees/count/route.ts)
- [Phase 3å®Ÿè£…å®Œäº†å ±å‘Šæ›¸](../../docs/Phase3_å®Ÿè£…ä½œæ¥­å®Œäº†å ±å‘Šæ›¸_FINAL.md)
- [organization-analytics_APIå®Ÿè£…å®Œäº†å ±å‘Š_20251010.md](./organization-analytics_APIå®Ÿè£…å®Œäº†å ±å‘Š_20251010.md)

### VoiceDriveå´ä½œæˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [corporate-agenda-dashboard_DBè¦ä»¶åˆ†æ_20251011.md](./corporate-agenda-dashboard_DBè¦ä»¶åˆ†æ_20251011.md)
- [corporate-agenda-dashboardæš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆ_20251011.md](./corporate-agenda-dashboardæš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆ_20251011.md)

### æ•´åˆæ€§è©•ä¾¡å¯¾è±¡ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹å®šç¾©æ›¸_20251008.md](./ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹å®šç¾©æ›¸_20251008.md)
- [DBæ§‹ç¯‰è¨ˆç”»æ›¸å‰æº–å‚™_ä¸è¶³é …ç›®æ•´ç†_20251008.md](../../docs/DBæ§‹ç¯‰è¨ˆç”»æ›¸å‰æº–å‚™_ä¸è¶³é …ç›®æ•´ç†_20251008.md)
- [å…±é€šDBæ§‹ç¯‰å¾Œ_ä½œæ¥­å†é–‹æŒ‡ç¤ºæ›¸_20250928.md](../../docs/å…±é€šDBæ§‹ç¯‰å¾Œ_ä½œæ¥­å†é–‹æŒ‡ç¤ºæ›¸_20250928.md)

---

**æ–‡æ›¸çµ‚äº†**

**ä½œæˆè€…**: åŒ»ç™‚è·å“¡ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ 
**ä½œæˆæ—¥**: 2025å¹´10æœˆ11æ—¥
**æœ€çµ‚æ›´æ–°**: 2025å¹´10æœˆ11æ—¥
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
**æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼**: VoiceDriveãƒãƒ¼ãƒ ã‹ã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å—é ˜å¾Œ
