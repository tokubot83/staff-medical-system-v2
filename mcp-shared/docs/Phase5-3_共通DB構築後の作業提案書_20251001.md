# Phase 5-3 å…±é€šDBæ§‹ç¯‰å¾Œã®ä½œæ¥­ææ¡ˆæ›¸

**ä½œæˆæ—¥**: 2025å¹´10æœˆ1æ—¥
**ææ¡ˆè€…**: åŒ»ç™‚è·å“¡ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºãƒãƒ¼ãƒ 
**å®›å…ˆ**: VoiceDriveã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºãƒãƒ¼ãƒ 
**ä»¶å**: Phase 5-3å®Œäº†å¾Œã®å…±é€šDBæ§‹ç¯‰å¾…ã¡ä½œæ¥­ã«ã¤ã„ã¦

---

## ğŸ“‹ ç›®æ¬¡

1. [ç¾çŠ¶ã®ç¢ºèª](#1-ç¾çŠ¶ã®ç¢ºèª)
2. [å…±é€šDBæ§‹ç¯‰å¾Œã®ä½œæ¥­å†…å®¹](#2-å…±é€šdbæ§‹ç¯‰å¾Œã®ä½œæ¥­å†…å®¹)
3. [åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®ä½œæ¥­](#3-åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®ä½œæ¥­)
4. [VoiceDriveå´ã®ä½œæ¥­](#4-voicedriveå´ã®ä½œæ¥­)
5. [ä¸¡ãƒãƒ¼ãƒ åˆåŒä½œæ¥­](#5-ä¸¡ãƒãƒ¼ãƒ åˆåŒä½œæ¥­)
6. [ä½œæ¥­ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æ¡ˆ](#6-ä½œæ¥­ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æ¡ˆ)
7. [ãƒªã‚¹ã‚¯ã¨å¯¾ç­–](#7-ãƒªã‚¹ã‚¯ã¨å¯¾ç­–)
8. [Phase 5-4ã¸ã®ç§»è¡Œã«ã¤ã„ã¦](#8-phase-5-4ã¸ã®ç§»è¡Œã«ã¤ã„ã¦)

---

## 1. ç¾çŠ¶ã®ç¢ºèª

### 1.1 Phase 5-3ã®é”æˆçŠ¶æ³

âœ… **å®Œäº†æ¸ˆã¿é …ç›®**:
- APIçµ±åˆï¼ˆ4ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰
- èªè¨¼æ©Ÿèƒ½ï¼ˆBearer Tokenï¼‰
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- Webhooké€šçŸ¥æ©Ÿæ§‹ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ï¼‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°æ©Ÿèƒ½ï¼ˆVoiceDriveå´ï¼‰
- çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆ77.8%æˆåŠŸï¼‰

â¸ï¸ **å…±é€šDBæ§‹ç¯‰å¾…ã¡é …ç›®**:
- å®Ÿãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š
- æœ¬ç•ªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ï¼ˆSupabase Authï¼‰
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆSupabase Storageï¼‰
- å®Ÿãƒ‡ãƒ¼ã‚¿ã§ã®E2Eãƒ†ã‚¹ãƒˆ

### 1.2 ç¾åœ¨ã®åˆ¶é™äº‹é …

| é …ç›® | ç¾çŠ¶ | å…±é€šDBæ§‹ç¯‰å¾Œ |
|------|------|-------------|
| ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ | ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ | å®Ÿãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ |
| èªè¨¼æ–¹å¼ | ç’°å¢ƒå¤‰æ•°APIã‚­ãƒ¼ | Supabase Auth |
| ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ | æœªå®Ÿè£… | Supabase Storage |
| Webhooké€šçŸ¥ | é€ä¿¡ã®ã¿å®Ÿè£… | å®Œå…¨ãªåŒæ–¹å‘é€šä¿¡ |

---

## 2. å…±é€šDBæ§‹ç¯‰å¾Œã®ä½œæ¥­å†…å®¹

### 2.1 ä½œæ¥­ã®å…¨ä½“åƒ

```
å…±é€šDBæ§‹ç¯‰å®Œäº†
    â†“
[Phase 5-3.4] å®Ÿãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆ
    â†“
[Phase 5-3.5] æœ¬ç•ªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ
    â†“
[Phase 5-3.6] ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Ÿè£…
    â†“
[Phase 5-3.7] å®Ÿãƒ‡ãƒ¼ã‚¿ã§ã®çµ±åˆãƒ†ã‚¹ãƒˆ
    â†“
Phase 5-3 å®Œå…¨å®Œäº† ğŸ‰
    â†“
[Phase 5-4] æ¬¡æœŸæ©Ÿèƒ½é–‹ç™ºã¸ç§»è¡Œ
```

### 2.2 æƒ³å®šä½œæ¥­æœŸé–“

| ãƒ•ã‚§ãƒ¼ã‚º | æœŸé–“ | æ‹…å½“ |
|---------|------|------|
| Phase 5-3.4: DBçµ±åˆ | 2-3æ—¥ | ä¸¡ãƒãƒ¼ãƒ  |
| Phase 5-3.5: èªè¨¼çµ±åˆ | 1-2æ—¥ | ä¸¡ãƒãƒ¼ãƒ  |
| Phase 5-3.6: ãƒ•ã‚¡ã‚¤ãƒ«å®Ÿè£… | 2-3æ—¥ | ä¸¡ãƒãƒ¼ãƒ  |
| Phase 5-3.7: å®Ÿãƒ‡ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆ | 1-2æ—¥ | ä¸¡ãƒãƒ¼ãƒ  |
| **åˆè¨ˆ** | **6-10æ—¥** | - |

---

## 3. åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®ä½œæ¥­

### 3.1 Phase 5-3.4: å®Ÿãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆ

#### 3.1.1 ç’°å¢ƒå¤‰æ•°ã®æœ¬ç•ªè¨­å®š

**ç¾åœ¨**ï¼ˆ.env.localï¼‰:
```env
# ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ç”¨ã®è¨­å®š
VOICEDRIVE_API_KEY=ms_prod_key_X1Y2Z3A4B5C6D7E8F9G0H1I2J3K4L5M6
MEDICAL_SYSTEM_API_KEY=vd_prod_key_A8B9C2D3E4F5G6H7I8J9K0L1M2N3O4P5
```

**å…±é€šDBæ§‹ç¯‰å¾Œ**ï¼ˆ.env.productionï¼‰:
```env
# å®Ÿãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
DATABASE_URL=postgresql://user:pass@db.medical-system.local:5432/medical_staff_system
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«
CAREER_COURSES_TABLE=staff_career_courses
COURSE_DEFINITIONS_TABLE=career_course_definitions
CHANGE_REQUESTS_TABLE=career_course_change_requests
```

#### 3.1.2 Supabaseæ¥ç¶šã®æœ‰åŠ¹åŒ–

**ä½œæ¥­å†…å®¹**:
1. `src/app/api/my-page/route.ts` ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’è§£é™¤
2. `src/app/api/career-courses/definitions/route.ts` ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’è§£é™¤
3. `src/app/api/career-course/change-request/route.ts` ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’è§£é™¤
4. `src/app/api/career-course/my-requests/route.ts` ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’è§£é™¤

**ä¾‹**ï¼ˆmy-page/route.tsï¼‰:
```typescript
export async function GET(request: NextRequest) {
  try {
    // èªè¨¼ãƒã‚§ãƒƒã‚¯ï¼ˆé–‹ç™ºç’°å¢ƒç”¨ï¼‰
    const authHeader = request.headers.get('authorization')
    const expectedToken = process.env.MEDICAL_SYSTEM_API_KEY

    if (authHeader !== `Bearer ${expectedToken}`) {
      return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })
    }

    // âœ… ä»¥ä¸‹ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’è§£é™¤
    const supabase = createClient()
    const { data: { user }, error: authError } = await supabase.auth.getUser()
    if (authError || !user) {
      return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })
    }

    const { data: staffData, error: dbError } = await supabase
      .from('staff')
      .select(`
        *,
        careerCourse:staff_career_courses!staff_career_courses_staff_id_fkey(*)
      `)
      .eq('id', user.id)
      .single()

    if (dbError) throw dbError

    // ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤
    // const mockData = { ... } // â† å‰Šé™¤

    return NextResponse.json(staffData, { status: 200 })
  } catch (error) {
    console.error('ãƒã‚¤ãƒšãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:', error)
    return NextResponse.json(
      { error: 'ãƒ‡ãƒ¼ã‚¿å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ' },
      { status: 500 }
    )
  }
}
```

#### 3.1.3 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®ç¢ºèª

**å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«**:
```sql
-- è·å“¡ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ—¢å­˜ï¼‰
staff (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,
  position TEXT,
  department TEXT,
  facility TEXT,
  ...
)

-- ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹å®šç¾©ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ–°è¦ï¼‰
career_course_definitions (
  id TEXT PRIMARY KEY,
  course_code TEXT NOT NULL, -- A, B, C, D
  course_name TEXT NOT NULL,
  description TEXT,
  base_salary_multiplier DECIMAL(3,2),
  is_active BOOLEAN DEFAULT true,
  display_order INTEGER,
  created_at TIMESTAMP,
  updated_at TIMESTAMP
)

-- è·å“¡ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ–°è¦ï¼‰
staff_career_courses (
  id TEXT PRIMARY KEY,
  staff_id TEXT REFERENCES staff(id),
  course_code TEXT NOT NULL,
  effective_from DATE NOT NULL,
  effective_to DATE,
  next_change_available_date DATE,
  approval_status TEXT, -- approved, pending, rejected
  created_at TIMESTAMP,
  updated_at TIMESTAMP
)

-- ã‚³ãƒ¼ã‚¹å¤‰æ›´ç”³è«‹ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ–°è¦ï¼‰
career_course_change_requests (
  id TEXT PRIMARY KEY,
  staff_id TEXT REFERENCES staff(id),
  current_course_code TEXT,
  requested_course_code TEXT NOT NULL,
  change_reason TEXT NOT NULL,
  reason_detail TEXT,
  requested_effective_date DATE NOT NULL,
  attachments TEXT[], -- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®é…åˆ—
  approval_status TEXT DEFAULT 'pending',
  approved_by TEXT,
  approved_at TIMESTAMP,
  rejection_reason TEXT,
  created_at TIMESTAMP,
  updated_at TIMESTAMP
)
```

### 3.2 Phase 5-3.5: æœ¬ç•ªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ

#### 3.2.1 Supabase Authã®æœ‰åŠ¹åŒ–

**ä½œæ¥­å†…å®¹**:
1. ç’°å¢ƒå¤‰æ•°APIã‚­ãƒ¼èªè¨¼ã‚’å‰Šé™¤
2. Supabase Auth JWTãƒˆãƒ¼ã‚¯ãƒ³èªè¨¼ã«åˆ‡ã‚Šæ›¿ãˆ
3. VoiceDriveå´ã«ãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…

**å¤‰æ›´ä¾‹**:
```typescript
// Before: ç’°å¢ƒå¤‰æ•°ãƒ™ãƒ¼ã‚¹ã®èªè¨¼
const authHeader = request.headers.get('authorization')
const expectedToken = process.env.MEDICAL_SYSTEM_API_KEY

if (authHeader !== `Bearer ${expectedToken}`) {
  return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })
}

// After: Supabase Authèªè¨¼
const supabase = createClient()
const { data: { user }, error: authError } = await supabase.auth.getUser()

if (authError || !user) {
  return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })
}
```

### 3.3 Phase 5-3.6: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Ÿè£…

#### 3.3.1 Supabase Storageã®è¨­å®š

**ãƒã‚±ãƒƒãƒˆæ§‹æˆ**:
```
career-course-attachments/
  â”œâ”€â”€ {staff_id}/
  â”‚   â”œâ”€â”€ {request_id}/
  â”‚   â”‚   â”œâ”€â”€ è¨¼æ˜æ›¸_20251001.pdf
  â”‚   â”‚   â”œâ”€â”€ è¨ºæ–­æ›¸_20251001.pdf
  â”‚   â”‚   â””â”€â”€ ...
```

**ãƒãƒªã‚·ãƒ¼**:
- è·å“¡ã¯è‡ªåˆ†ã®ãƒ•ã‚©ãƒ«ãƒ€ã®ã¿ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯èƒ½
- äººäº‹éƒ¨ã¯å…¨ãƒ•ã‚©ãƒ«ãƒ€é–²è¦§å¯èƒ½
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºä¸Šé™: 10MB

#### 3.3.2 ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†ã®å®Ÿè£…

```typescript
// src/app/api/career-course/change-request/route.ts

// ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’è§£é™¤
const uploadedFiles: string[] = []
if (attachments && attachments.length > 0) {
  for (const file of attachments) {
    const { data, error } = await supabase.storage
      .from('career-course-attachments')
      .upload(`${user.id}/${Date.now()}_${file.name}`, file.data, {
        contentType: file.type
      })
    if (error) throw error
    uploadedFiles.push(data.path)
  }
}
```

---

## 4. VoiceDriveå´ã®ä½œæ¥­

### 4.1 Phase 5-3.4: å®Ÿãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆ

#### 4.1.1 ç’°å¢ƒå¤‰æ•°ã®æ›´æ–°

**ç¾åœ¨**ï¼ˆ.envï¼‰:
```env
NEXT_PUBLIC_MEDICAL_SYSTEM_API=http://localhost:3000
MEDICAL_SYSTEM_API_KEY=vd_prod_key_A8B9C2D3E4F5G6H7I8J9K0L1M2N3O4P5
```

**å…±é€šDBæ§‹ç¯‰å¾Œ**ï¼ˆ.env.productionï¼‰:
```env
NEXT_PUBLIC_MEDICAL_SYSTEM_API=https://api.medical-system.local
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

#### 4.1.2 APIå‘¼ã³å‡ºã—ã®æ›´æ–°

**ä½œæ¥­å†…å®¹**:
- ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®å‰Šé™¤
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–
- æœ¬ç•ªã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¸ã®åˆ‡ã‚Šæ›¿ãˆ

**ä¾‹**ï¼ˆcareerCourseService.tsï¼‰:
```typescript
export async function getMyPageData(): Promise<StaffInfo> {
  try {
    const response = await fetch(`${API_BASE_URL}/api/my-page`, {
      method: 'GET',
      headers: {
        'Authorization': `Bearer ${getAuthToken()}`, // â† Supabase Authãƒˆãƒ¼ã‚¯ãƒ³
        'Content-Type': 'application/json',
      },
    });

    if (!response.ok) {
      throw new CareerCourseAPIError(
        `API error: ${response.status}`,
        response.status,
        await response.json()
      );
    }

    const data = await response.json();

    // âœ… ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å‰Šé™¤
    // if (!data) {
    //   return MOCK_STAFF_INFO; // â† å‰Šé™¤
    // }

    return data;
  } catch (error) {
    console.error('ãƒã‚¤ãƒšãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
    throw error; // âœ… ã‚¨ãƒ©ãƒ¼ã‚’å†ã‚¹ãƒ­ãƒ¼ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã—ãªã„ï¼‰
  }
}
```

### 4.2 Phase 5-3.5: æœ¬ç•ªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ

#### 4.2.1 Supabase Authçµ±åˆ

**ä½œæ¥­å†…å®¹**:
1. Supabase Clientã®åˆæœŸåŒ–
2. ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ã®å®Ÿè£…
3. ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®å®Ÿè£…
4. ãƒˆãƒ¼ã‚¯ãƒ³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã®å®Ÿè£…

**å®Ÿè£…ä¾‹**:
```typescript
// src/lib/supabase.tsï¼ˆæ–°è¦ä½œæˆï¼‰
import { createClient } from '@supabase/supabase-js';

const supabaseUrl = import.meta.env.NEXT_PUBLIC_SUPABASE_URL!;
const supabaseAnonKey = import.meta.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;

export const supabase = createClient(supabaseUrl, supabaseAnonKey);

// ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—
export async function getAuthToken(): Promise<string | null> {
  const { data: { session } } = await supabase.auth.getSession();
  return session?.access_token || null;
}
```

**careerCourseService.ts ã®æ›´æ–°**:
```typescript
import { getAuthToken } from '@/lib/supabase';

export async function getMyPageData(): Promise<StaffInfo> {
  const token = await getAuthToken();

  if (!token) {
    throw new CareerCourseAPIError('èªè¨¼ãŒå¿…è¦ã§ã™', 401);
  }

  const response = await fetch(`${API_BASE_URL}/api/my-page`, {
    headers: {
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json',
    },
  });

  // ...
}
```

### 4.3 Phase 5-3.6: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Ÿè£…

#### 4.3.1 ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠUIã®å®Ÿè£…

**ChangeRequestPage.tsx ã®æ›´æ–°**:
```typescript
const [selectedFiles, setSelectedFiles] = useState<File[]>([]);

const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {
  const files = Array.from(event.target.files || []);

  // ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯ï¼ˆ10MBä¸Šé™ï¼‰
  const validFiles = files.filter(file => {
    if (file.size > 10 * 1024 * 1024) {
      alert(`${file.name} ã¯10MBã‚’è¶…ãˆã¦ã„ã¾ã™`);
      return false;
    }
    return true;
  });

  setSelectedFiles(validFiles);
};

// JSX
<input
  type="file"
  multiple
  accept=".pdf,.jpg,.jpeg,.png"
  onChange={handleFileSelect}
  className="..."
/>
```

#### 4.3.2 ãƒ•ã‚¡ã‚¤ãƒ«é€ä¿¡å‡¦ç†ã®å®Ÿè£…

**careerCourseService.ts ã®æ›´æ–°**:
```typescript
export async function submitChangeRequest(
  params: SubmitChangeRequestParams
): Promise<SubmitResponse> {
  const formData = new FormData();

  // ç”³è«‹ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ 
  formData.append('currentCourseCode', params.currentCourseCode);
  formData.append('requestedCourseCode', params.requestedCourseCode);
  formData.append('changeReason', params.changeReason);
  // ...

  // ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ 
  if (params.files) {
    params.files.forEach((file, index) => {
      formData.append(`attachments[${index}]`, file);
    });
  }

  const token = await getAuthToken();
  const response = await fetch(`${API_BASE_URL}/api/career-course/change-request`, {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${token}`,
    },
    body: formData, // âœ… JSON â†’ FormData
  });

  // ...
}
```

---

## 5. ä¸¡ãƒãƒ¼ãƒ åˆåŒä½œæ¥­

### 5.1 Phase 5-3.7: å®Ÿãƒ‡ãƒ¼ã‚¿ã§ã®çµ±åˆãƒ†ã‚¹ãƒˆ

#### 5.1.1 ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æº–å‚™

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´**:
```sql
-- ãƒ†ã‚¹ãƒˆç”¨è·å“¡ãƒ‡ãƒ¼ã‚¿
INSERT INTO staff (id, name, position, department, facility) VALUES
('TEST-001', 'ãƒ†ã‚¹ãƒˆ å¤ªéƒ', 'çœ‹è­·å¸«', '3éšç—…æ£Ÿ', 'å°åŸç—…é™¢');

-- ãƒ†ã‚¹ãƒˆç”¨ã‚³ãƒ¼ã‚¹å®šç¾©ãƒ‡ãƒ¼ã‚¿
INSERT INTO career_course_definitions (id, course_code, course_name, base_salary_multiplier) VALUES
('def-a', 'A', 'Aã‚³ãƒ¼ã‚¹ï¼ˆå…¨é¢å”åŠ›å‹ï¼‰', 1.2),
('def-b', 'B', 'Bã‚³ãƒ¼ã‚¹ï¼ˆæ–½è¨­å†…å”åŠ›å‹ï¼‰', 1.1),
('def-c', 'C', 'Cã‚³ãƒ¼ã‚¹ï¼ˆå°‚é–€è·å‹ï¼‰', 1.0),
('def-d', 'D', 'Dã‚³ãƒ¼ã‚¹ï¼ˆæ™‚çŸ­ãƒ»åˆ¶ç´„ã‚ã‚Šå‹ï¼‰', 0.9);

-- ãƒ†ã‚¹ãƒˆç”¨ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿
INSERT INTO staff_career_courses (id, staff_id, course_code, effective_from, next_change_available_date, approval_status) VALUES
('cc-001', 'TEST-001', 'B', '2025-04-01', '2026-03-01', 'approved');
```

#### 5.1.2 çµ±åˆãƒ†ã‚¹ãƒˆã®å®Ÿæ–½

**ãƒ†ã‚¹ãƒˆé …ç›®**:
1. âœ… å®Ÿãƒ‡ãƒ¼ã‚¿ã§ã®ãƒã‚¤ãƒšãƒ¼ã‚¸è¡¨ç¤º
2. âœ… å®Ÿãƒ‡ãƒ¼ã‚¿ã§ã®ã‚³ãƒ¼ã‚¹å®šç¾©ä¸€è¦§è¡¨ç¤º
3. âœ… å®Ÿãƒ‡ãƒ¼ã‚¿ã§ã®ç”³è«‹é€ä¿¡
4. âœ… å®Ÿãƒ‡ãƒ¼ã‚¿ã§ã®ç”³è«‹å±¥æ­´è¡¨ç¤º
5. âœ… ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
6. âœ… Webhooké€šçŸ¥ï¼ˆå®Ÿãƒ‡ãƒ¼ã‚¿æ›´æ–°ï¼‰
7. âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°

**ãƒ†ã‚¹ãƒˆæ‰‹é †**:
```bash
# åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´
cd C:\projects\staff-medical-system
npm run test:integration:production

# VoiceDriveå´
cd C:\projects\voicedrive
npm run test:e2e:production
```

#### 5.1.3 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

**ç›®æ¨™**:
| API | ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ | å®Ÿãƒ‡ãƒ¼ã‚¿ | ç›®æ¨™ |
|-----|-------------|---------|------|
| GET /api/my-page | 35ms | ? | < 200ms |
| GET /api/career-courses/definitions | 31ms | ? | < 200ms |
| POST /api/career-course/change-request | 34ms | ? | < 500ms |
| GET /api/career-course/my-requests | 41ms | ? | < 300ms |

---

## 6. ä½œæ¥­ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æ¡ˆ

### 6.1 å…±é€šDBæ§‹ç¯‰å®Œäº†ç›´å¾Œã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

```
Day 1: ç’°å¢ƒæ§‹ç¯‰ãƒ»DBæ¥ç¶šç¢ºèª
  - 08:00-09:00: ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆä¸¡ãƒãƒ¼ãƒ ï¼‰
  - 09:00-11:00: DBæ¥ç¶šç¢ºèªï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ï¼‰
  - 11:00-12:00: APIå‹•ä½œç¢ºèªï¼ˆVoiceDriveå´ï¼‰
  - 13:00-15:00: ãƒ‡ãƒ¼ã‚¿ç§»è¡Œãƒ»åˆæœŸãƒ‡ãƒ¼ã‚¿æŠ•å…¥
  - 15:00-17:00: æ¥ç¶šãƒ†ã‚¹ãƒˆ

Day 2: Supabase Authçµ±åˆ
  - 09:00-11:00: èªè¨¼å‡¦ç†å®Ÿè£…ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ï¼‰
  - 11:00-13:00: ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—å®Ÿè£…ï¼ˆVoiceDriveå´ï¼‰
  - 14:00-16:00: èªè¨¼ãƒ†ã‚¹ãƒˆ
  - 16:00-17:00: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ç¢ºèª

Day 3: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Ÿè£…ï¼ˆå‰åŠï¼‰
  - 09:00-11:00: Storageãƒã‚±ãƒƒãƒˆä½œæˆï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ï¼‰
  - 11:00-13:00: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†å®Ÿè£…ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ï¼‰
  - 14:00-16:00: UIå®Ÿè£…ï¼ˆVoiceDriveå´ï¼‰
  - 16:00-17:00: å˜ä½“ãƒ†ã‚¹ãƒˆ

Day 4: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Ÿè£…ï¼ˆå¾ŒåŠï¼‰
  - 09:00-11:00: çµ±åˆãƒ†ã‚¹ãƒˆ
  - 11:00-13:00: ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ
  - 14:00-16:00: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
  - 16:00-17:00: ä¿®æ­£å¯¾å¿œ

Day 5-6: å®Ÿãƒ‡ãƒ¼ã‚¿ã§ã®çµ±åˆãƒ†ã‚¹ãƒˆ
  - Day 5 AM: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™
  - Day 5 PM: APIçµ±åˆãƒ†ã‚¹ãƒˆ
  - Day 6 AM: E2Eãƒ†ã‚¹ãƒˆ
  - Day 6 PM: æœ€çµ‚ç¢ºèªãƒ»ãƒ¬ãƒãƒ¼ãƒˆä½œæˆ

Day 7: ãƒãƒƒãƒ•ã‚¡æ—¥ï¼ˆäºˆå‚™æ—¥ï¼‰
```

### 6.2 ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

| æ—¥ä»˜ | ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ | æˆæœç‰© |
|------|---------------|--------|
| Day 1çµ‚äº†æ™‚ | DBæ¥ç¶šå®Œäº† | æ¥ç¶šç¢ºèªãƒ¬ãƒãƒ¼ãƒˆ |
| Day 2çµ‚äº†æ™‚ | èªè¨¼çµ±åˆå®Œäº† | èªè¨¼ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆ |
| Day 4çµ‚äº†æ™‚ | ãƒ•ã‚¡ã‚¤ãƒ«æ©Ÿèƒ½å®Œäº† | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆ |
| Day 6çµ‚äº†æ™‚ | çµ±åˆãƒ†ã‚¹ãƒˆå®Œäº† | æœ€çµ‚çµ±åˆãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆ |

---

## 7. ãƒªã‚¹ã‚¯ã¨å¯¾ç­–

### 7.1 æŠ€è¡“çš„ãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯ | ç™ºç”Ÿç¢ºç‡ | å½±éŸ¿åº¦ | å¯¾ç­– |
|--------|---------|--------|------|
| DBæ¥ç¶šã‚¨ãƒ©ãƒ¼ | ä¸­ | é«˜ | æ¥ç¶šãƒ†ã‚¹ãƒˆç’°å¢ƒã‚’äº‹å‰æº–å‚™ |
| èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚¨ãƒ©ãƒ¼ | ä¸­ | é«˜ | Supabase Auth ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç†Ÿèª­ |
| ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¤±æ•— | ä½ | ä¸­ | ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°è©³ç´°åŒ– |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹ | ä½ | ä¸­ | ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ– |

### 7.2 ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯ | ç™ºç”Ÿç¢ºç‡ | å½±éŸ¿åº¦ | å¯¾ç­– |
|--------|---------|--------|------|
| DBæ§‹ç¯‰é…å»¶ | ä¸­ | é«˜ | ä»–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã®èª¿æ•´ |
| äºˆæœŸã›ã¬ãƒã‚° | ä¸­ | ä¸­ | ãƒãƒƒãƒ•ã‚¡æ—¥ã‚’1æ—¥ç¢ºä¿ |
| ä»•æ§˜å¤‰æ›´ | ä½ | é«˜ | æ—©æœŸã®ä»•æ§˜ç¢ºå®š |

### 7.3 ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯ | ç™ºç”Ÿç¢ºç‡ | å½±éŸ¿åº¦ | å¯¾ç­– |
|--------|---------|--------|------|
| ãƒãƒ¼ãƒ é–“é€£æºä¸è¶³ | ä½ | ä¸­ | æ¯æ—¥15åˆ†ã®æœä¼š |
| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸è¶³ | ä½ | ä¸­ | ä½œæ¥­å®Œäº†æ™‚ã«éƒ½åº¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ– |

---

## 8. Phase 5-4ã¸ã®ç§»è¡Œã«ã¤ã„ã¦

### 8.1 Phase 5-3å®Œå…¨å®Œäº†å¾Œã®çŠ¶æ…‹

âœ… **é”æˆã•ã‚Œã‚‹çŠ¶æ…‹**:
- å®Ÿãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãŒå®Œäº†
- æœ¬ç•ªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ãŒå‹•ä½œ
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒå‹•ä½œ
- å…¨æ©Ÿèƒ½ãŒæœ¬ç•ªç’°å¢ƒã§å‹•ä½œ
- çµ±åˆãƒ†ã‚¹ãƒˆ100%æˆåŠŸ

### 8.2 Phase 5-4ã®å€™è£œæ©Ÿèƒ½

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ã‹ã‚‰ã®ææ¡ˆ**:

#### 8.2.1 äººäº‹éƒ¨æ©Ÿèƒ½ã®å¼·åŒ–

1. **æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ©Ÿèƒ½**
   - è¤‡æ•°æ®µéšæ‰¿èªï¼ˆç›´å±ä¸Šå¸ â†’ äººäº‹éƒ¨é•· â†’ ç†äº‹é•·ï¼‰
   - æ‰¿èªæœŸé™ã‚¢ãƒ©ãƒ¼ãƒˆ
   - æ‰¿èªä¾é ¼é€šçŸ¥

2. **ç”³è«‹ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**
   - ç”³è«‹ä»¶æ•°ã®çµ±è¨ˆã‚°ãƒ©ãƒ•
   - æ‰¿èªå¾…ã¡ä»¶æ•°ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º
   - ã‚³ãƒ¼ã‚¹åˆ¥ã®ç”³è«‹å‚¾å‘åˆ†æ

3. **ã‚³ãƒ¼ã‚¹å®šç¾©ç®¡ç†æ©Ÿèƒ½**
   - E/Fã‚³ãƒ¼ã‚¹ã®è¿½åŠ 
   - ã‚³ãƒ¼ã‚¹å®šç¾©ã®ç·¨é›†ãƒ»ç„¡åŠ¹åŒ–
   - çµ¦ä¸ä¿‚æ•°ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

#### 8.2.2 è·å“¡æ©Ÿèƒ½ã®å¼·åŒ–

1. **ã‚³ãƒ¼ã‚¹å¤‰æ›´ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**
   - ã‚³ãƒ¼ã‚¹å¤‰æ›´ã«ã‚ˆã‚‹çµ¦ä¸å¤‰å‹•ã®è©¦ç®—
   - æ¬¡å›å¤‰æ›´å¯èƒ½æ—¥ã®è¨ˆç®—
   - éå»ã®å¤‰æ›´å±¥æ­´ã‚°ãƒ©ãƒ•

2. **ç”³è«‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½**
   - ã‚ˆãä½¿ã†ç†ç”±ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¿å­˜
   - éå»ã®ç”³è«‹å†…å®¹ã®å†åˆ©ç”¨
   - ç”³è«‹ä¸‹æ›¸ãä¿å­˜

3. **é€šçŸ¥æ©Ÿèƒ½ã®å¼·åŒ–**
   - ãƒ¡ãƒ¼ãƒ«é€šçŸ¥
   - LINEé€šçŸ¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
   - ç”³è«‹çŠ¶æ³ã®é€±æ¬¡ã‚µãƒãƒªãƒ¼

#### 8.2.3 åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½

1. **äººäº‹ãƒ‡ãƒ¼ã‚¿åˆ†æ**
   - ã‚³ãƒ¼ã‚¹åˆ¥ã®è·å“¡åˆ†å¸ƒ
   - å¹´é½¢å±¤åˆ¥ã®ã‚³ãƒ¼ã‚¹å‚¾å‘
   - æ–½è¨­åˆ¥ã®ã‚³ãƒ¼ã‚¹æ¯”ç‡

2. **çµ¦ä¸ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**
   - ã‚³ãƒ¼ã‚¹å¤‰æ›´ã«ã‚ˆã‚‹ç·äººä»¶è²»ã®å¤‰å‹•äºˆæ¸¬
   - éƒ¨ç½²åˆ¥ã®çµ¦ä¸åˆ†å¸ƒ
   - æ˜‡çµ¦ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

3. **ãƒ¬ãƒãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆ**
   - æœˆæ¬¡ç”³è«‹ã‚µãƒãƒªãƒ¼ãƒ¬ãƒãƒ¼ãƒˆ
   - å››åŠæœŸã‚³ãƒ¼ã‚¹å¤‰æ›´ãƒ¬ãƒãƒ¼ãƒˆ
   - å¹´æ¬¡äººäº‹ãƒ‡ãƒ¼ã‚¿ãƒ¬ãƒãƒ¼ãƒˆ

### 8.3 Phase 5-4ã®ã‚¹ã‚³ãƒ¼ãƒ—æ±ºå®šãƒ—ãƒ­ã‚»ã‚¹

**ææ¡ˆ**:
1. åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ãŒå€™è£œæ©Ÿèƒ½ãƒªã‚¹ãƒˆã‚’ä½œæˆ
2. VoiceDriveãƒãƒ¼ãƒ ã¨å„ªå…ˆé †ä½ã‚’å”è­°
3. å®Ÿè£…å·¥æ•°ã®è¦‹ç©ã‚‚ã‚Š
4. Phase 5-4ã®ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ç¢ºå®š
5. é–‹ç™ºã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ç­–å®š

**å”è­°ã®å ´**:
- Slack: #phase5-planning
- ãƒ“ãƒ‡ã‚ªä¼šè­°: é€±1å›ï¼ˆæ¯é€±é‡‘æ›œæ—¥15:00-16:00ï¼‰
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: MCPå…±æœ‰ãƒ•ã‚©ãƒ«ãƒ€

---

## 9. ã¾ã¨ã‚

### 9.1 å…±é€šDBæ§‹ç¯‰å¾Œã®ä½œæ¥­ã‚µãƒãƒªãƒ¼

**æœŸé–“**: 6-10æ—¥ï¼ˆãƒãƒƒãƒ•ã‚¡å«ã‚€ï¼‰

**ä½œæ¥­å†…å®¹**:
1. âœ… å®Ÿãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆï¼ˆ2-3æ—¥ï¼‰
2. âœ… æœ¬ç•ªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ çµ±åˆï¼ˆ1-2æ—¥ï¼‰
3. âœ… ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Ÿè£…ï¼ˆ2-3æ—¥ï¼‰
4. âœ… å®Ÿãƒ‡ãƒ¼ã‚¿ã§ã®çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆ1-2æ—¥ï¼‰

**æˆæœç‰©**:
- å®Ÿãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šæ¸ˆã¿ã‚·ã‚¹ãƒ†ãƒ 
- æœ¬ç•ªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ çµ±åˆæ¸ˆã¿ã‚·ã‚¹ãƒ†ãƒ 
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
- çµ±åˆãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆï¼ˆ100%æˆåŠŸï¼‰

### 9.2 Phase 5-4ã¸ã®ç§»è¡Œ

**ææ¡ˆã™ã‚‹å€™è£œæ©Ÿèƒ½**:
- äººäº‹éƒ¨æ©Ÿèƒ½ã®å¼·åŒ–ï¼ˆæ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼‰
- è·å“¡æ©Ÿèƒ½ã®å¼·åŒ–ï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰
- åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆãƒ‡ãƒ¼ã‚¿åˆ†æã€è‡ªå‹•ãƒ¬ãƒãƒ¼ãƒˆï¼‰

**å”è­°æ–¹æ³•**:
- å„ªå…ˆé †ä½ã®å”è­°
- å®Ÿè£…å·¥æ•°ã®è¦‹ç©ã‚‚ã‚Š
- ã‚¹ã‚³ãƒ¼ãƒ—ã®ç¢ºå®š

### 9.3 é€£çµ¡å…ˆ

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ **:
- Slack: #phase5-medical-system
- Email: medical-system-dev@example.com
- æ‹…å½“: Claude Code (AIé–‹ç™ºæ”¯æ´)

**VoiceDriveãƒãƒ¼ãƒ **:
- Slack: #phase5-voicedrive
- Email: voicedrive-dev@example.com
- æ‹…å½“: Claude Code (AIé–‹ç™ºæ”¯æ´)

**Phase 5-4 ä¼ç”»ãƒãƒ£ãƒãƒ«**:
- Slack: #phase5-4-planning

---

## ä»˜éŒ²A: ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### A.1 å…±é€šDBæ§‹ç¯‰å‰ã®ç¢ºèªäº‹é …

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´**:
- [ ] Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®è¨­è¨ˆå®Œäº†
- [ ] ç’°å¢ƒå¤‰æ•°ã®æº–å‚™
- [ ] ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æº–å‚™
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ•´å‚™

**VoiceDriveå´**:
- [ ] Supabase Clientã®æº–å‚™
- [ ] ç’°å¢ƒå¤‰æ•°ã®æº–å‚™
- [ ] ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤è¨ˆç”»
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–è¨ˆç”»

### A.2 å…±é€šDBæ§‹ç¯‰å¾Œã®ç¢ºèªäº‹é …

**Day 1çµ‚äº†æ™‚**:
- [ ] DBæ¥ç¶šæˆåŠŸ
- [ ] åˆæœŸãƒ‡ãƒ¼ã‚¿æŠ•å…¥å®Œäº†
- [ ] APIå‹•ä½œç¢ºèªå®Œäº†

**Day 2çµ‚äº†æ™‚**:
- [ ] èªè¨¼å‡¦ç†å®Ÿè£…å®Œäº†
- [ ] ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—æˆåŠŸ
- [ ] èªè¨¼ãƒ†ã‚¹ãƒˆå®Œäº†

**Day 4çµ‚äº†æ™‚**:
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Ÿè£…å®Œäº†
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å®Ÿè£…å®Œäº†
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ãƒ†ã‚¹ãƒˆå®Œäº†

**Day 6çµ‚äº†æ™‚**:
- [ ] å®Ÿãƒ‡ãƒ¼ã‚¿ã§ã®çµ±åˆãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] æœ€çµ‚ãƒ¬ãƒãƒ¼ãƒˆä½œæˆå®Œäº†

---

**åŒ»ç™‚è·å“¡ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºãƒãƒ¼ãƒ **
ä½œæˆæ—¥: 2025å¹´10æœˆ1æ—¥
æœ€çµ‚æ›´æ–°: 2025å¹´10æœˆ1æ—¥ 16:00
ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.0

*Phase 5-3ã®çµ±åˆãƒ†ã‚¹ãƒˆå®Œäº†ã€ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼å¼•ãç¶šãã€å…±é€šDBæ§‹ç¯‰å¾Œã®ä½œæ¥­ã¨Phase 5-4ã§ã‚‚ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚ğŸ‰*
