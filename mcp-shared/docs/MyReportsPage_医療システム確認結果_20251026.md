# MyReportsPage åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ç¢ºèªçµæœ

**æ–‡æ›¸ç•ªå·**: MED-CONFIRM-2025-1026-007
**ä½œæˆæ—¥**: 2025å¹´10æœˆ26æ—¥
**ä½œæˆè€…**: ClaudeCodeï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ï¼‰
**å®›å…ˆ**: VoiceDriveé–‹ç™ºãƒãƒ¼ãƒ 
**å‚ç…§æ–‡æ›¸**: MyReportsPage æš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆï¼ˆVD-MASTER-2025-1026-007ï¼‰

---

## ğŸ“‹ ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

VoiceDriveãƒãƒ¼ãƒ ã‹ã‚‰æä¾›ã•ã‚ŒãŸã€ŒMyReportsPage æš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆã€ã‚’è©³ç´°ã«åˆ†æã—ã¾ã—ãŸã€‚

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ã®çµè«–

âœ… **å®Ÿè£…å¯¾å¿œãŒå¿…è¦ã§ã™**

MyReportsPageã¯è·å“¡ã®ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹é€šå ±å±¥æ­´ã‚’ç®¡ç†ã™ã‚‹ãƒšãƒ¼ã‚¸ã§ã‚ã‚Šã€åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã§ä»¥ä¸‹ã®å¯¾å¿œãŒå¿…è¦ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã—ãŸï¼š

1. âœ… **Webhookå—ä¿¡ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…** - VoiceDriveã‹ã‚‰ã®é€šå ±å—ä¿¡
2. âœ… **Webhooké€ä¿¡ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…** - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°ãƒ»èª¿æŸ»å®Œäº†é€šçŸ¥
3. âœ… **ã‚±ãƒ¼ã‚¹ç•ªå·ç™ºè¡Œãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…** - MED-YYYY-NNNNå½¢å¼
4. âœ… **å—ä»˜ç¢ºèªé€šçŸ¥Webhookå®Ÿè£…** - æ—¢å­˜å®Ÿè£…ã®ç¢ºèªã¨æ‹¡å¼µ
5. âš ï¸ **å†…éƒ¨èª¿æŸ»ç®¡ç†æ©Ÿèƒ½** - Phase 2ã§æ¤œè¨ï¼ˆVoiceDriveå´ã«èª¿æŸ»ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã‚ã‚Šï¼‰

---

## ğŸ” è©³ç´°åˆ†æçµæœ

### 1. ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»ã®åˆ†æ

VoiceDriveæä¾›ã®è³‡æ–™ã«ã‚ˆã‚‹ã¨ã€ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«åˆ†æ‹…ã•ã‚Œã¦ã„ã¾ã™ï¼š

| ã‚«ãƒ†ã‚´ãƒª | VoiceDriveè²¬ä»» | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ è²¬ä»» |
|---------|---------------|----------------|
| é€šå ±ãƒ‡ãƒ¼ã‚¿ç®¡ç† | 100% | 0% |
| å—ä»˜ç¢ºèªé€šçŸ¥ | 50%ï¼ˆå—ä¿¡ãƒ»è¡¨ç¤ºï¼‰ | 50%ï¼ˆé€ä¿¡ï¼‰ |
| èª¿æŸ»çŠ¶æ³æ›´æ–° | 0% | 100% |
| çµ±è¨ˆé›†è¨ˆ | 100% | 0% |

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®çµè«–**:
- âœ… **æ‰¿èªã—ã¾ã™** - é€šå ±ãƒ‡ãƒ¼ã‚¿ã¯VoiceDriveå´ã§ä¸€å…ƒç®¡ç†
- âœ… **åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¯èª¿æŸ»ãƒ»å¯¾å¿œç®¡ç†ã«ç‰¹åŒ–** - é©åˆ‡ãªè²¬ä»»åˆ†æ‹…ã§ã™

---

### 2. WhistleblowingReport ãƒ†ãƒ¼ãƒ–ãƒ«ã®åˆ†æ

VoiceDriveå´ã§ç®¡ç†ã•ã‚Œã‚‹25ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã†ã¡ã€åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãŒ**ãƒ‡ãƒ¼ã‚¿æ›¸ãè¾¼ã¿è²¬ä»»**ã‚’æŒã¤ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ è²¬ä»» | å®Ÿè£…å¿…è¦æ€§ |
|------------|----------------|----------|
| status | 50% | âœ… WebhookçµŒç”±ã§æ›´æ–° |
| assignedInvestigators | 100% | âœ… WebhookçµŒç”±ã§æ›´æ–° |
| escalationReason | 100% | âœ… WebhookçµŒç”±ã§æ›´æ–° |
| resolutionSummary | 100% | âœ… WebhookçµŒç”±ã§æ›´æ–° |
| followUpRequired | 100% | âœ… WebhookçµŒç”±ã§æ›´æ–° |
| priority | 100% | âœ… WebhookçµŒç”±ã§æ›´æ–° |
| medicalSystemCaseNumber | 100% | âœ… ã‚±ãƒ¼ã‚¹ç•ªå·ç™ºè¡Œå¿…é ˆ |
| acknowledgementReceived | 50% | âœ… å—ä»˜ç¢ºèªæ™‚ã«æ›´æ–° |
| acknowledgementDate | 100% | âœ… å—ä»˜ç¢ºèªæ™‚ã«æ›´æ–° |
| estimatedResponseTime | 100% | âœ… å—ä»˜ç¢ºèªæ™‚ã«è¨­å®š |

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®çµè«–**:
- âœ… **WebhookçµŒç”±ã§ã®ãƒ‡ãƒ¼ã‚¿é€£æºãŒå¿…é ˆ**
- âœ… **10ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ›´æ–°è²¬ä»»** - å®Ÿè£…ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ç¢ºèªã—ã¾ã—ãŸ

---

### 3. InvestigationNote ãƒ†ãƒ¼ãƒ–ãƒ«ã®åˆ†æ

VoiceDriveå´ã§ç®¡ç†ã•ã‚Œã‚‹èª¿æŸ»ãƒãƒ¼ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆ9ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰ã¯ã€**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãŒ100%ãƒ‡ãƒ¼ã‚¿è²¬ä»»**ã‚’æŒã¡ã¾ã™ã€‚

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®çµè«–**:
- âš ï¸ **Phase 2ã§æ¤œè¨** - èª¿æŸ»ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã¯ç¾åœ¨ã®åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã«ã¯å­˜åœ¨ã—ãªã„
- ğŸ”„ **ä»£æ›¿æ¡ˆ**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å†…éƒ¨ã§èª¿æŸ»è¨˜éŒ²ã‚’ç®¡ç†ã—ã€ã‚µãƒãƒªãƒ¼ã®ã¿VoiceDriveã«é€ä¿¡
- ğŸ“‹ **å°†æ¥å¯¾å¿œ**: InvestigationNote APIã‚’å®Ÿè£…ã™ã‚‹å ´åˆã€Phase 2.10ã¨ã—ã¦è¨ˆç”»

---

### 4. ComplianceAcknowledgement ãƒ†ãƒ¼ãƒ–ãƒ«ã®åˆ†æ

**æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ã®ç¢ºèªçµæœ**:
- âœ… **æ—¢ã«å®Ÿè£…æ¸ˆã¿** - `prisma/schema.prisma`ã«å­˜åœ¨
- âœ… **ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ§‹æˆ**: VoiceDriveä»•æ§˜ã¨100%ä¸€è‡´
- âœ… **Webhookå—ä¿¡ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /api/webhooks/voicedrive/compliance/acknowledgement` å®Ÿè£…æ¸ˆã¿

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®çµè«–**:
- âœ… **è¿½åŠ å®Ÿè£…ä¸è¦** - ç¾çŠ¶ã®ã¾ã¾ä½¿ç”¨å¯èƒ½

---

## ğŸ”Œ APIå®Ÿè£…è¦ä»¶ã®ç¢ºèª

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã§å®Ÿè£…ãŒå¿…è¦ãªAPI

#### 1. é€šå ±å—ä¿¡Webhookï¼ˆæ–°è¦å®Ÿè£…å¿…é ˆï¼‰

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /api/webhooks/voicedrive/whistleblowing/report`

**VoiceDriveã‹ã‚‰é€ä¿¡ã•ã‚Œã‚‹ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰**:
```json
{
  "reportId": "RPT-2025-004",
  "anonymousId": "ANON-9E4C3D",
  "category": "harassment",
  "severity": "high",
  "title": "ãƒ‘ãƒ¯ãƒ¼ãƒãƒ©ã‚¹ãƒ¡ãƒ³ãƒˆã®ç›¸è«‡",
  "submittedAt": "2025-10-26T15:00:00Z",
  "isAnonymous": true,
  "priority": 8
}
```

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®å‡¦ç†**:
1. âœ… ã‚±ãƒ¼ã‚¹ç•ªå·ç™ºè¡Œï¼ˆ`MED-2025-NNNN`å½¢å¼ï¼‰
2. âœ… å†…éƒ¨ç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜ï¼ˆä»»æ„ï¼‰
3. âœ… ç·Šæ€¥åº¦ã«å¿œã˜ãŸæ‹…å½“è€…ã‚¢ã‚µã‚¤ãƒ³
4. âœ… å¯¾å¿œäºˆå®šæ™‚é–“ã‚’è¨ˆç®—ï¼ˆç·Šæ€¥åº¦ãƒ™ãƒ¼ã‚¹ï¼‰
5. âœ… å—ä»˜ç¢ºèªWebhookã‚’å³åº§ã«è¿”é€

**æœŸå¾…ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "caseNumber": "MED-2025-0004",
  "estimatedResponseTime": "å½“æ—¥ä¸­",
  "receivedAt": "2025-10-26T15:01:00Z"
}
```

**å®Ÿè£…å„ªå…ˆåº¦**: ğŸ”´ **æœ€å„ªå…ˆ** - Phase 2.9å®Ÿè£…å¿…é ˆ

---

#### 2. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°Webhookï¼ˆæ–°è¦å®Ÿè£…å¿…é ˆï¼‰

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  â†’ VoiceDrive

**é€ä¿¡å…ˆURL**: `https://voicedrive-v100.vercel.app/api/webhooks/medical-system/whistleblowing/status-update`

**ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰**:
```json
{
  "reportId": "RPT-2025-001",
  "caseNumber": "MED-2025-0001",
  "status": "investigating",
  "assignedInvestigators": ["hr_specialist", "management"],
  "updatedAt": "2025-10-26T16:00:00Z",
  "nextSteps": "æ‹…å½“è€…ã«ã‚ˆã‚‹èãå–ã‚Šèª¿æŸ»ã‚’å®Ÿæ–½ã—ã¾ã™",
  "priority": 8
}
```

**é€ä¿¡ã‚¿ã‚¤ãƒŸãƒ³ã‚°**:
- èª¿æŸ»å“¡ãŒã‚¢ã‚µã‚¤ãƒ³ã•ã‚ŒãŸæ™‚
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒå¤‰æ›´ã•ã‚ŒãŸæ™‚ï¼ˆreceived â†’ triaging â†’ investigating â†’ escalated â†’ resolved â†’ closedï¼‰
- ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã•ã‚ŒãŸæ™‚

**å®Ÿè£…å„ªå…ˆåº¦**: ğŸ”´ **æœ€å„ªå…ˆ** - Phase 2.9å®Ÿè£…å¿…é ˆ

---

#### 3. èª¿æŸ»å®Œäº†é€šçŸ¥Webhookï¼ˆæ–°è¦å®Ÿè£…å¿…é ˆï¼‰

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  â†’ VoiceDrive

**é€ä¿¡å…ˆURL**: `https://voicedrive-v100.vercel.app/api/webhooks/medical-system/whistleblowing/resolution`

**ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰**:
```json
{
  "reportId": "RPT-2025-001",
  "caseNumber": "MED-2025-0001",
  "status": "resolved",
  "resolutionSummary": "ä¸Šå¸ã¨ã®é¢è«‡ã‚’å®Ÿæ–½ã—ã€å†ç™ºé˜²æ­¢ç­–ã‚’è¬›ã˜ã¾ã—ãŸã€‚ã”å ±å‘Šã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚",
  "resolvedAt": "2025-10-30T10:00:00Z",
  "followUpRequired": false
}
```

**é€ä¿¡ã‚¿ã‚¤ãƒŸãƒ³ã‚°**:
- èª¿æŸ»ãŒå®Œäº†ã—ã€å¯¾å¿œçµæœãŒç¢ºå®šã—ãŸæ™‚

**å®Ÿè£…å„ªå…ˆåº¦**: ğŸ”´ **æœ€å„ªå…ˆ** - Phase 2.9å®Ÿè£…å¿…é ˆ

---

#### 4. å—ä»˜ç¢ºèªWebhookï¼ˆæ—¢å­˜ç¢ºèª + æ‹¡å¼µï¼‰

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  â†’ VoiceDrive

**é€ä¿¡å…ˆURL**: `https://voicedrive-v100.vercel.app/api/webhooks/compliance/acknowledgement`

**ç¾åœ¨ã®ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ï¼ˆæ—¢å­˜ï¼‰**:
```json
{
  "reportId": "RPT-2025-003",
  "medicalSystemCaseNumber": "MED-2025-0003",
  "anonymousId": "ANON-2A7F4C",
  "severity": "critical",
  "category": "ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹",
  "receivedAt": "2025-10-03T08:30:00Z",
  "estimatedResponseTime": "1æ™‚é–“ä»¥å†…",
  "requiresImmediateAction": true,
  "currentStatus": "ç·Šæ€¥å¯¾å¿œãƒãƒ¼ãƒ ã«ã‚ˆã‚‹åˆå‹•èª¿æŸ»ã‚’é–‹å§‹",
  "nextSteps": "æ‹…å½“è€…ã«ã‚ˆã‚‹èãå–ã‚Šèª¿æŸ»ã‚’å®Ÿæ–½äºˆå®šã§ã™ã€‚"
}
```

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®ç¢ºèªçµæœ**:
- âœ… **æ—¢ã«å®Ÿè£…æ¸ˆã¿** - Phase 2.4ã§å®Ÿè£…å®Œäº†
- âœ… **ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ§‹æˆ**: VoiceDriveä»•æ§˜ã¨100%ä¸€è‡´
- âœ… **è¿½åŠ å®Ÿè£…ä¸è¦**

**å®Ÿè£…å„ªå…ˆåº¦**: âœ… **å®Œäº†æ¸ˆã¿**

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶ã®ç¢ºèª

### VoiceDriveã‹ã‚‰æç¤ºã•ã‚ŒãŸã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶

1. **åŒ¿åæ€§ã®ä¿è­·**:
   - åŒ¿åIDç”Ÿæˆæ–¹å¼: `ANON-XXXXXX`ï¼ˆ6æ¡è‹±æ•°å­—ï¼‰
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‹ã‚‰æ¨æ¸¬ä¸å¯èƒ½
   - åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã§ã¯åŒ¿åIDã®ã¿ã§ç®¡ç†

2. **ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**:
   - è·å“¡ã¯è‡ªåˆ†ã®é€šå ±ã®ã¿é–²è¦§å¯èƒ½ï¼ˆVoiceDriveå´ã§åˆ¶å¾¡ï¼‰
   - ç®¡ç†è€…ï¼ˆLevel 99ï¼‰ã¯å…¨é€šå ±ã‚’é–²è¦§å¯èƒ½ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã§åˆ¶å¾¡ï¼‰
   - èª¿æŸ»å“¡ã¯å‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸé€šå ±ã®ã¿é–²è¦§å¯èƒ½ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã§åˆ¶å¾¡ï¼‰

3. **ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–**:
   - è¨¼æ‹ ãƒ•ã‚¡ã‚¤ãƒ«ã¯S3ç­‰ã«æš—å·åŒ–ä¿å­˜ï¼ˆVoiceDriveå´ï¼‰
   - é€£çµ¡å…ˆæƒ…å ±ã¯æš—å·åŒ–ã—ã¦DBä¿å­˜ï¼ˆVoiceDriveå´ï¼‰

4. **ç›£æŸ»ãƒ­ã‚°**:
   - é€šå ±ã®é–²è¦§å±¥æ­´ã‚’è¨˜éŒ²ï¼ˆVoiceDriveå´ï¼‰
   - èª¿æŸ»ãƒãƒ¼ãƒˆã®ç·¨é›†å±¥æ­´ã‚’è¨˜éŒ²ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã€Phase 2ã§æ¤œè¨ï¼‰

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®çµè«–**:
- âœ… **æ‰¿èªã—ã¾ã™** - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶ã‚’éµå®ˆã—ã¾ã™
- âœ… **Webhookç½²å**: HMAC-SHA256ç½²åã‚’å®Ÿè£…æ¸ˆã¿ï¼ˆæ—¢å­˜å®Ÿè£…ã‚’å†åˆ©ç”¨ï¼‰
- âœ… **åŒ¿åIDç®¡ç†**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å†…éƒ¨ã§ã¯ã‚±ãƒ¼ã‚¹ç•ªå·ã®ã¿ã§ç®¡ç†

---

## ğŸ¯ å®Ÿè£…ã‚¹ã‚³ãƒ¼ãƒ—ã®ç¢ºå®š

### Phase 2.9: ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹é€šå ±é€£æºï¼ˆæ–°è¦ãƒ•ã‚§ãƒ¼ã‚ºï¼‰

**å®Ÿè£…æœŸé–“**: 2025å¹´11æœˆ18æ—¥ï¼ˆæœˆï¼‰ã€œ 11æœˆ22æ—¥ï¼ˆé‡‘ï¼‰ï¼ˆ5å–¶æ¥­æ—¥ï¼‰

#### å®Ÿè£…é …ç›®

| # | é …ç›® | å„ªå…ˆåº¦ | æ¨å®šå·¥æ•° | æ‹…å½“ |
|---|------|--------|---------|------|
| 1 | POST /api/webhooks/voicedrive/whistleblowing/report å®Ÿè£… | ğŸ”´ æœ€å„ªå…ˆ | 0.5æ—¥ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  |
| 2 | ã‚±ãƒ¼ã‚¹ç•ªå·ç™ºè¡Œãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…ï¼ˆMED-YYYY-NNNNå½¢å¼ï¼‰ | ğŸ”´ æœ€å„ªå…ˆ | 0.25æ—¥ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  |
| 3 | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°Webhooké€ä¿¡å®Ÿè£… | ğŸ”´ æœ€å„ªå…ˆ | 0.5æ—¥ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  |
| 4 | èª¿æŸ»å®Œäº†é€šçŸ¥Webhooké€ä¿¡å®Ÿè£… | ğŸ”´ æœ€å„ªå…ˆ | 0.5æ—¥ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  |
| 5 | ç·Šæ€¥åº¦ãƒ™ãƒ¼ã‚¹ã®å¯¾å¿œäºˆå®šæ™‚é–“è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ | ğŸ”´ æœ€å„ªå…ˆ | 0.25æ—¥ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  |
| 6 | å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè£… | ğŸ”´ æœ€å„ªå…ˆ | 0.5æ—¥ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  |
| 7 | çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆVoiceDriveé€£æºï¼‰ | ğŸ”´ æœ€å„ªå…ˆ | 1æ—¥ | ä¸¡ãƒãƒ¼ãƒ  |

**åˆè¨ˆå·¥æ•°**: 3.5æ—¥ï¼ˆå®Ÿè£…2.5æ—¥ + ãƒ†ã‚¹ãƒˆ1æ—¥ï¼‰

---

### Phase 2.10: èª¿æŸ»ãƒãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆå°†æ¥å¯¾å¿œï¼‰

**å®Ÿè£…æœŸé–“**: æœªå®šï¼ˆPhase 2.9å®Œäº†å¾Œã«æ¤œè¨ï¼‰

#### æ¤œè¨é …ç›®

| # | é …ç›® | æ¤œè¨å†…å®¹ |
|---|------|---------|
| 1 | å†…éƒ¨èª¿æŸ»ç®¡ç†UI | èª¿æŸ»å“¡å°‚ç”¨ã®ç®¡ç†ç”»é¢ |
| 2 | InvestigationNote APIå®Ÿè£… | VoiceDriveå´APIã¨ã®é€£æº |
| 3 | èª¿æŸ»å“¡æ¨©é™ç®¡ç† | Level 98-99ã§ã®åˆ¶å¾¡ |
| 4 | èª¿æŸ»å±¥æ­´ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ | PDFå‡ºåŠ›æ©Ÿèƒ½ |

**å„ªå…ˆåº¦**: ğŸŸ¡ **ä½å„ªå…ˆ** - Phase 2.9å®Œäº†å¾Œã«åˆ¤æ–­

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®ç¢ºèª

### 1. é€šå ±å—ä¿¡ãƒ•ãƒ­ãƒ¼

```
VoiceDriveï¼ˆè·å“¡ãŒé€šå ±é€ä¿¡ï¼‰
  â†“
VoiceDrive DBï¼ˆWhistleblowingReportä½œæˆï¼‰
  â†“ POST /api/webhooks/voicedrive/whistleblowing/report
åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ 
  â†“ ã‚±ãƒ¼ã‚¹ç•ªå·ç™ºè¡Œï¼ˆMED-2025-0004ï¼‰
  â†“ å¯¾å¿œäºˆå®šæ™‚é–“è¨ˆç®—
  â†“ ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¿”å´ { caseNumber, estimatedResponseTime }
VoiceDrive
  â†“ WhistleblowingReportæ›´æ–°
  â†“ å³åº§ã«POST /api/webhooks/compliance/acknowledgement
åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ 
  â†“ ComplianceAcknowledgementä½œæˆ
  â†“ ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¿”å´
VoiceDrive
  â†“ è·å“¡ã¸å—ä»˜ç¢ºèªé€šçŸ¥
```

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®ç¢ºèªçµæœ**:
- âœ… **æ‰¿èªã—ã¾ã™** - ã“ã®ãƒ•ãƒ­ãƒ¼ã§å®Ÿè£…ã—ã¾ã™
- âœ… **ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ ç›®æ¨™**: 3ç§’ä»¥å†…

---

### 2. èª¿æŸ»çŠ¶æ³æ›´æ–°ãƒ•ãƒ­ãƒ¼

```
åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ï¼ˆèª¿æŸ»é€²è¡Œï¼‰
  â†“ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°ï¼ˆreceived â†’ triaging â†’ investigatingï¼‰
  â†“ POST /api/webhooks/medical-system/whistleblowing/status-update
VoiceDrive
  â†“ WhistleblowingReportæ›´æ–°
  â†“ è·å“¡ã¸ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
```

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®ç¢ºèªçµæœ**:
- âœ… **æ‰¿èªã—ã¾ã™** - ã“ã®ãƒ•ãƒ­ãƒ¼ã§å®Ÿè£…ã—ã¾ã™
- âœ… **é€ä¿¡ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´æ™‚ã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€ä¿¡

---

### 3. èª¿æŸ»å®Œäº†é€šçŸ¥ãƒ•ãƒ­ãƒ¼

```
åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ï¼ˆèª¿æŸ»å®Œäº†ï¼‰
  â†“ POST /api/webhooks/medical-system/whistleblowing/resolution
VoiceDrive
  â†“ WhistleblowingReportæ›´æ–°ï¼ˆstatus='resolved'ï¼‰
  â†“ resolutionSummaryä¿å­˜
  â†“ è·å“¡ã¸ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
```

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®ç¢ºèªçµæœ**:
- âœ… **æ‰¿èªã—ã¾ã™** - ã“ã®ãƒ•ãƒ­ãƒ¼ã§å®Ÿè£…ã—ã¾ã™
- âœ… **resolutionSummary**: 0-1000æ–‡å­—ã§å¯¾å¿œçµæœã‚’è¨˜è¼‰

---

## âš ï¸ VoiceDriveãƒãƒ¼ãƒ ã¸ã®è³ªå•ãƒ»ç¢ºèªäº‹é …

### 1. Webhookä»•æ§˜ã®è©³ç´°ç¢ºèª

**è³ªå•**: Webhookç½²åæ–¹å¼ã®è©³ç´°ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®æ—¢å­˜å®Ÿè£…**:
```typescript
// æ—¢å­˜ã®Webhookç½²åæ–¹å¼ï¼ˆPhase 2.4ã§å®Ÿè£…æ¸ˆã¿ï¼‰
import crypto from 'crypto';

function generateWebhookSignature(
  payload: any,
  timestamp: string,
  secret: string
): string {
  const message = `${timestamp}.${JSON.stringify(payload)}`;
  return crypto.createHmac('sha256', secret).update(message).digest('hex');
}
```

**ç¢ºèªäº‹é …**:
- âœ… ã“ã®ç½²åæ–¹å¼ã§MyReportsPageé€£æºã‚‚å•é¡Œãªã„ã‹ï¼Ÿ
- âœ… Webhookç§˜å¯†éµã¯æ—¢å­˜ã® `VOICEDRIVE_WEBHOOK_SECRET` ã‚’å†åˆ©ç”¨å¯èƒ½ã‹ï¼Ÿ

---

### 2. ãƒªãƒˆãƒ©ã‚¤ãƒãƒªã‚·ãƒ¼ã®ç¢ºèª

**è³ªå•**: Webhooké€ä¿¡å¤±æ•—æ™‚ã®ãƒªãƒˆãƒ©ã‚¤ãƒãƒªã‚·ãƒ¼ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®æ—¢å­˜å®Ÿè£…**ï¼ˆPhase 2.5ã§å®Ÿè£…æ¸ˆã¿ï¼‰:
- æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•æ–¹å¼: 1åˆ† â†’ 5åˆ† â†’ 30åˆ†
- æœ€å¤§3å›ãƒªãƒˆãƒ©ã‚¤
- ãƒªãƒˆãƒ©ã‚¤ã‚­ãƒ¥ãƒ¼ç®¡ç†

**ç¢ºèªäº‹é …**:
- âœ… MyReportsPageé€£æºã§ã‚‚åŒã˜ãƒªãƒˆãƒ©ã‚¤ãƒãƒªã‚·ãƒ¼ã‚’é©ç”¨ã—ã¦è‰¯ã„ã‹ï¼Ÿ
- âœ… VoiceDriveå´ã§ã‚‚ãƒªãƒˆãƒ©ã‚¤æ©Ÿæ§‹ã‚’å®Ÿè£…ã™ã‚‹äºˆå®šã‹ï¼Ÿ

---

### 3. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»ã®åˆ¶ç´„

**è³ªå•**: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»ã«åˆ¶ç´„ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ

**VoiceDriveã®ä»•æ§˜**:
```
received â†’ triaging â†’ investigating â†’ resolved â†’ closed
                â†“           â†“
              escalated ----â”˜
```

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®ç¢ºèª**:
- âœ… ã“ã®é·ç§»ãƒ«ãƒ¼ãƒ«ã‚’éµå®ˆã—ã¾ã™
- âš ï¸ `triaging`ï¼ˆåˆ†é¡ä¸­ï¼‰ã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã§è‡ªå‹•å‡¦ç†ã™ã‚‹ãŸã‚ã€å³åº§ã«`investigating`ã«é·ç§»ã—ã¾ã™
  - ã¤ã¾ã‚Š: `received` â†’ `triaging`ï¼ˆæ•°ç§’ï¼‰ â†’ `investigating`
  - å•é¡Œãªã„ã‹ï¼Ÿ

---

### 4. ç·Šæ€¥åº¦ã®è‡ªå‹•åˆ¤å®š

**è³ªå•**: VoiceDriveå´ã§ç·Šæ€¥åº¦ï¼ˆseverityï¼‰ã‚’è‡ªå‹•åˆ¤å®šã—ã¾ã™ã‹ï¼Ÿ

**VoiceDriveã®ä»•æ§˜**:
```typescript
function detectSeverity(content: string, category: string): ReportSeverity {
  // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®è‡ªå‹•åˆ¤å®š
  // critical/high/medium/lowã‚’åˆ¤å®š
}
```

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®ç¢ºèª**:
- âœ… VoiceDriveå´ã§åˆ¤å®šã—ãŸç·Šæ€¥åº¦ã‚’ä¿¡é ¼ã—ã¾ã™
- âš ï¸ åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã§ç·Šæ€¥åº¦ã‚’å†è©•ä¾¡ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã‹ï¼Ÿ
  - ä¾‹: `medium` â†’ `high`ã«å¼•ãä¸Šã’
  - å¼•ãä¸Šã’ãŸå ´åˆã€VoiceDriveå´ã«é€šçŸ¥ãŒå¿…è¦ã‹ï¼Ÿ

---

### 5. èª¿æŸ»ãƒãƒ¼ãƒˆï¼ˆInvestigationNoteï¼‰ã®é‹ç”¨

**è³ªå•**: InvestigationNoteã¯è·å“¡ã«å…¬é–‹ã—ã¾ã™ã‹ï¼Ÿ

**VoiceDriveã®ä»•æ§˜**:
- InvestigationNoteã¯æ©Ÿå¯†æ‰±ã„
- è·å“¡ã«ã¯éå…¬é–‹
- èª¿æŸ»å“¡ã®ã¿é–²è¦§å¯èƒ½

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®ç¢ºèª**:
- âœ… è·å“¡éå…¬é–‹ã§äº†æ‰¿
- âš ï¸ Phase 2.10ã§å®Ÿè£…ã‚’æ¤œè¨ã™ã‚‹å ´åˆã€VoiceDriveå´ã®APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ï¼Ÿ
  - ä¾‹: `POST /api/whistleblowing/investigation-notes`

---

### 6. çµ±åˆãƒ†ã‚¹ãƒˆã®æ—¥ç¨‹èª¿æ•´

**è³ªå•**: Phase 2.9ã®çµ±åˆãƒ†ã‚¹ãƒˆæ—¥ç¨‹ã‚’èª¿æ•´ã•ã›ã¦ãã ã•ã„ã€‚

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®ææ¡ˆ**:

| æ—¥ä»˜ | ãƒ†ã‚¹ãƒˆå†…å®¹ | æ‹…å½“ |
|------|----------|------|
| 2025-11-21 (æœ¨) | API 1: é€šå ±å—ä¿¡Webhookæ¥ç¶šç¢ºèª | ä¸¡ãƒãƒ¼ãƒ  |
| 2025-11-21 (æœ¨) | API 2: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°Webhookæ¥ç¶šç¢ºèª | ä¸¡ãƒãƒ¼ãƒ  |
| 2025-11-22 (é‡‘) | API 3: èª¿æŸ»å®Œäº†é€šçŸ¥Webhookæ¥ç¶šç¢ºèª | ä¸¡ãƒãƒ¼ãƒ  |
| 2025-11-22 (é‡‘) | E2Eãƒ†ã‚¹ãƒˆ: é€šå ±é€ä¿¡â†’å—ä»˜â†’èª¿æŸ»â†’å®Œäº†ã®ä¸€é€£ãƒ•ãƒ­ãƒ¼ | ä¸¡ãƒãƒ¼ãƒ  |

**ç¢ºèªäº‹é …**:
- âœ… ã“ã®æ—¥ç¨‹ã§å•é¡Œãªã„ã‹ï¼Ÿ
- âœ… ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆURLã¯ï¼Ÿ

---

## ğŸ“ åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®å®Ÿè£…è¨ˆç”»ï¼ˆè©³ç´°ï¼‰

### Week 1: APIå®Ÿè£…ï¼ˆ11/18-11/20ï¼‰

#### Day 1ï¼ˆ11/18 æœˆï¼‰: Webhookå—ä¿¡ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/api/webhooks/voicedrive/whistleblowing/report/route.ts`

**å®Ÿè£…å†…å®¹**:
```typescript
import { NextRequest, NextResponse } from 'next/server';
import { verifyWebhookSignature } from '@/lib/webhookVerifier';
import { prisma } from '@/lib/prisma';

export async function POST(request: NextRequest) {
  try {
    // 1. Webhookç½²åæ¤œè¨¼
    const signature = request.headers.get('x-voicedrive-signature');
    const timestamp = request.headers.get('x-voicedrive-timestamp');

    if (!signature || !timestamp) {
      return NextResponse.json({ error: 'Missing signature' }, { status: 401 });
    }

    const payload = await request.json();

    const isValid = verifyWebhookSignature(
      payload,
      timestamp,
      signature,
      process.env.VOICEDRIVE_WEBHOOK_SECRET!
    );

    if (!isValid) {
      return NextResponse.json({ error: 'Invalid signature' }, { status: 401 });
    }

    // 2. ã‚±ãƒ¼ã‚¹ç•ªå·ç™ºè¡Œ
    const caseNumber = await generateCaseNumber();

    // 3. å¯¾å¿œäºˆå®šæ™‚é–“è¨ˆç®—
    const estimatedResponseTime = calculateEstimatedResponseTime(payload.severity);

    // 4. å†…éƒ¨ç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
    // await saveWhistleblowingReport(payload, caseNumber);

    // 5. æ‹…å½“è€…ã‚¢ã‚µã‚¤ãƒ³ï¼ˆç·Šæ€¥åº¦ãƒ™ãƒ¼ã‚¹ï¼‰
    const assignedInvestigators = assignInvestigators(payload.severity, payload.category);

    // 6. å—ä»˜ç¢ºèªWebhookã‚’å³åº§ã«é€ä¿¡
    await sendAcknowledgementWebhook({
      reportId: payload.reportId,
      medicalSystemCaseNumber: caseNumber,
      anonymousId: payload.anonymousId,
      severity: payload.severity,
      category: mapCategoryToJapanese(payload.category),
      receivedAt: new Date().toISOString(),
      estimatedResponseTime,
      requiresImmediateAction: payload.severity === 'critical',
      currentStatus: getInitialStatus(payload.severity),
      nextSteps: getNextSteps(payload.severity, payload.category)
    });

    // 7. ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¿”å´
    return NextResponse.json({
      success: true,
      caseNumber,
      estimatedResponseTime,
      receivedAt: new Date().toISOString(),
      assignedInvestigators
    });

  } catch (error) {
    console.error('[Webhook] é€šå ±å—ä¿¡ã‚¨ãƒ©ãƒ¼:', error);
    return NextResponse.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}

// ã‚±ãƒ¼ã‚¹ç•ªå·ç™ºè¡Œ
async function generateCaseNumber(): Promise<string> {
  const year = new Date().getFullYear();
  const count = await prisma.whistleblowingCase.count({
    where: {
      caseNumber: {
        startsWith: `MED-${year}-`
      }
    }
  });

  return `MED-${year}-${String(count + 1).padStart(4, '0')}`;
}

// å¯¾å¿œäºˆå®šæ™‚é–“è¨ˆç®—
function calculateEstimatedResponseTime(severity: string): string {
  switch (severity) {
    case 'critical': return '1æ™‚é–“ä»¥å†…';
    case 'high': return 'å½“æ—¥ä¸­';
    case 'medium': return '3å–¶æ¥­æ—¥ä»¥å†…';
    case 'low': return '1é€±é–“ä»¥å†…';
    default: return '3å–¶æ¥­æ—¥ä»¥å†…';
  }
}

// ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®æ—¥æœ¬èªå¤‰æ›
function mapCategoryToJapanese(category: string): string {
  const categoryMap: Record<string, string> = {
    harassment: 'ãƒãƒ©ã‚¹ãƒ¡ãƒ³ãƒˆ',
    safety: 'å®‰å…¨ç®¡ç†',
    financial: 'è²¡å‹™ãƒ»ä¼šè¨ˆ',
    compliance: 'ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹',
    discrimination: 'å·®åˆ¥ãƒ»ä¸å…¬æ­£',
    other: 'ãã®ä»–'
  };
  return categoryMap[category] || 'ãã®ä»–';
}

// åˆæœŸã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å–å¾—
function getInitialStatus(severity: string): string {
  if (severity === 'critical') {
    return 'ç·Šæ€¥å¯¾å¿œãƒãƒ¼ãƒ ã«ã‚ˆã‚‹åˆå‹•èª¿æŸ»ã‚’é–‹å§‹';
  }
  return 'æ‹…å½“è€…ã¸ã®æŒ¯ã‚Šåˆ†ã‘ã‚’å®Ÿæ–½ä¸­';
}

// æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—å–å¾—
function getNextSteps(severity: string, category: string): string {
  if (severity === 'critical') {
    return 'ç·Šæ€¥å¯¾å¿œãƒãƒ¼ãƒ ãŒå³åº§ã«çŠ¶æ³ç¢ºèªã‚’å®Ÿæ–½ã—ã¾ã™ã€‚';
  }

  const categorySteps: Record<string, string> = {
    harassment: 'äººäº‹å°‚é–€å®¶ã«ã‚ˆã‚‹èãå–ã‚Šèª¿æŸ»ã‚’å®Ÿæ–½äºˆå®šã§ã™ã€‚',
    safety: 'å®‰å…¨ç®¡ç†è€…ã«ã‚ˆã‚‹ç¾å ´ç¢ºèªã‚’å®Ÿæ–½äºˆå®šã§ã™ã€‚',
    financial: 'æ³•å‹™æ‹…å½“ã«ã‚ˆã‚‹è©³ç´°èª¿æŸ»ã‚’å®Ÿæ–½äºˆå®šã§ã™ã€‚',
    compliance: 'ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹æ‹…å½“ã«ã‚ˆã‚‹äº‹å®Ÿç¢ºèªã‚’å®Ÿæ–½äºˆå®šã§ã™ã€‚',
    discrimination: 'äººäº‹å°‚é–€å®¶ã¨æ³•å‹™æ‹…å½“ã«ã‚ˆã‚‹èª¿æŸ»ã‚’å®Ÿæ–½äºˆå®šã§ã™ã€‚',
    other: 'æ‹…å½“è€…ã«ã‚ˆã‚‹çŠ¶æ³ç¢ºèªã‚’å®Ÿæ–½äºˆå®šã§ã™ã€‚'
  };

  return categorySteps[category] || 'æ‹…å½“è€…ã«ã‚ˆã‚‹èª¿æŸ»ã‚’å®Ÿæ–½äºˆå®šã§ã™ã€‚';
}

// æ‹…å½“è€…ã‚¢ã‚µã‚¤ãƒ³
function assignInvestigators(severity: string, category: string): string[] {
  const investigators: string[] = [];

  // ç·Šæ€¥åº¦ãƒ™ãƒ¼ã‚¹
  if (severity === 'critical' || severity === 'high') {
    investigators.push('management');
  }

  // ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ™ãƒ¼ã‚¹
  const categoryInvestigators: Record<string, string> = {
    harassment: 'hr_specialist',
    safety: 'safety_officer',
    financial: 'legal_counsel',
    compliance: 'legal_counsel',
    discrimination: 'hr_specialist'
  };

  const investigator = categoryInvestigators[category];
  if (investigator && !investigators.includes(investigator)) {
    investigators.push(investigator);
  }

  return investigators.length > 0 ? investigators : ['hr_specialist'];
}
```

**æ¨å®šå·¥æ•°**: 0.5æ—¥ï¼ˆ4æ™‚é–“ï¼‰

---

#### Day 2ï¼ˆ11/19 ç«ï¼‰: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°Webhookå®Ÿè£…

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/lib/webhookSender-whistleblowing.ts`

**å®Ÿè£…å†…å®¹**:
```typescript
import { sendWebhook, generateWebhookSignature } from './webhookSender';

const VOICEDRIVE_STATUS_UPDATE_WEBHOOK =
  'https://voicedrive-v100.vercel.app/api/webhooks/medical-system/whistleblowing/status-update';

export async function sendStatusUpdateWebhook(data: {
  reportId: string;
  caseNumber: string;
  status: 'received' | 'triaging' | 'investigating' | 'escalated' | 'resolved' | 'closed';
  assignedInvestigators?: string[];
  updatedAt: string;
  nextSteps?: string;
  priority?: number;
}): Promise<void> {
  const payload = {
    reportId: data.reportId,
    caseNumber: data.caseNumber,
    status: data.status,
    assignedInvestigators: data.assignedInvestigators || [],
    updatedAt: data.updatedAt,
    nextSteps: data.nextSteps || '',
    priority: data.priority || 5
  };

  await sendWebhook(VOICEDRIVE_STATUS_UPDATE_WEBHOOK, payload);

  console.log(`[Webhook] ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°é€ä¿¡æˆåŠŸ: reportId=${data.reportId}, status=${data.status}`);
}
```

**æ¨å®šå·¥æ•°**: 0.5æ—¥ï¼ˆ4æ™‚é–“ï¼‰

---

#### Day 3ï¼ˆ11/20 æ°´ï¼‰: èª¿æŸ»å®Œäº†é€šçŸ¥Webhookå®Ÿè£…

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/lib/webhookSender-whistleblowing.ts`ï¼ˆæ‹¡å¼µï¼‰

**å®Ÿè£…å†…å®¹**:
```typescript
const VOICEDRIVE_RESOLUTION_WEBHOOK =
  'https://voicedrive-v100.vercel.app/api/webhooks/medical-system/whistleblowing/resolution';

export async function sendResolutionWebhook(data: {
  reportId: string;
  caseNumber: string;
  status: 'resolved' | 'closed';
  resolutionSummary: string;
  resolvedAt: string;
  followUpRequired?: boolean;
}): Promise<void> {
  const payload = {
    reportId: data.reportId,
    caseNumber: data.caseNumber,
    status: data.status,
    resolutionSummary: data.resolutionSummary,
    resolvedAt: data.resolvedAt,
    followUpRequired: data.followUpRequired || false
  };

  await sendWebhook(VOICEDRIVE_RESOLUTION_WEBHOOK, payload);

  console.log(`[Webhook] èª¿æŸ»å®Œäº†é€šçŸ¥é€ä¿¡æˆåŠŸ: reportId=${data.reportId}`);
}
```

**æ¨å®šå·¥æ•°**: 0.5æ—¥ï¼ˆ4æ™‚é–“ï¼‰

---

### Week 2: ãƒ†ã‚¹ãƒˆï¼ˆ11/21-11/22ï¼‰

#### Day 4ï¼ˆ11/21 æœ¨ï¼‰: å˜ä½“ãƒ†ã‚¹ãƒˆ

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**:
- `tests/api/webhooks/whistleblowing-report.test.ts`
- `tests/lib/webhookSender-whistleblowing.test.ts`

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**:
1. âœ… é€šå ±å—ä¿¡Webhookã®ç½²åæ¤œè¨¼
2. âœ… ã‚±ãƒ¼ã‚¹ç•ªå·ç™ºè¡Œãƒ­ã‚¸ãƒƒã‚¯
3. âœ… å¯¾å¿œäºˆå®šæ™‚é–“è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
4. âœ… ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°Webhooké€ä¿¡
5. âœ… èª¿æŸ»å®Œäº†é€šçŸ¥Webhooké€ä¿¡
6. âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

**æ¨å®šå·¥æ•°**: 0.5æ—¥ï¼ˆ4æ™‚é–“ï¼‰

---

#### Day 5ï¼ˆ11/22 é‡‘ï¼‰: çµ±åˆãƒ†ã‚¹ãƒˆ

**ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª**:
1. âœ… VoiceDrive â†’ åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ : é€šå ±å—ä¿¡
2. âœ… åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  â†’ VoiceDrive: å—ä»˜ç¢ºèªé€ä¿¡
3. âœ… åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  â†’ VoiceDrive: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°é€ä¿¡
4. âœ… åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  â†’ VoiceDrive: èª¿æŸ»å®Œäº†é€šçŸ¥é€ä¿¡
5. âœ… E2Eãƒ†ã‚¹ãƒˆ: é€šå ±é€ä¿¡ã‹ã‚‰å®Œäº†ã¾ã§ã®ä¸€é€£ãƒ•ãƒ­ãƒ¼

**æ¨å®šå·¥æ•°**: 1æ—¥ï¼ˆ8æ™‚é–“ï¼‰

---

## ğŸ“… å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆç¢ºå®šç‰ˆï¼‰

| æ—¥ä»˜ | ä½œæ¥­å†…å®¹ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ æ‹…å½“ | VoiceDriveæ‹…å½“ | çŠ¶æ…‹ |
|------|---------|----------------|---------------|------|
| **2025-11-18 (æœˆ)** | Webhookå—ä¿¡ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£… | APIå®Ÿè£… | - | â³ å¾…æ©Ÿä¸­ |
| **2025-11-19 (ç«)** | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°Webhookå®Ÿè£… | Webhooké€ä¿¡å®Ÿè£… | - | â³ å¾…æ©Ÿä¸­ |
| **2025-11-20 (æ°´)** | èª¿æŸ»å®Œäº†é€šçŸ¥Webhookå®Ÿè£… | Webhooké€ä¿¡å®Ÿè£… | - | â³ å¾…æ©Ÿä¸­ |
| **2025-11-21 (æœ¨)** | å˜ä½“ãƒ†ã‚¹ãƒˆ + APIæ¥ç¶šç¢ºèª | ãƒ†ã‚¹ãƒˆå®Ÿæ–½ | æ¥ç¶šç¢ºèªã‚µãƒãƒ¼ãƒˆ | â³ å¾…æ©Ÿä¸­ |
| **2025-11-22 (é‡‘)** | çµ±åˆãƒ†ã‚¹ãƒˆ + E2Eãƒ†ã‚¹ãƒˆ | ãƒ†ã‚¹ãƒˆå®Ÿæ–½ | ãƒ†ã‚¹ãƒˆå®Ÿæ–½ | â³ å¾…æ©Ÿä¸­ |

**ãƒªãƒªãƒ¼ã‚¹äºˆå®šæ—¥**: 2025å¹´11æœˆ25æ—¥ï¼ˆæœˆï¼‰

---

## âœ… åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ã®æ‰¿èªäº‹é …

### æ‰¿èªäº‹é …ã‚µãƒãƒªãƒ¼

1. âœ… **Phase 2.9ã¨ã—ã¦æ–°è¦å®Ÿè£…**: ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹é€šå ±é€£æº
2. âœ… **å®Ÿè£…ã‚¹ã‚³ãƒ¼ãƒ—**: 3ã¤ã®Webhook + ã‚±ãƒ¼ã‚¹ç•ªå·ç™ºè¡Œãƒ­ã‚¸ãƒƒã‚¯
3. âœ… **å®Ÿè£…æœŸé–“**: 2025å¹´11æœˆ18æ—¥ã€œ22æ—¥ï¼ˆ5å–¶æ¥­æ—¥ï¼‰
4. âœ… **æ¨å®šå·¥æ•°**: 3.5æ—¥ï¼ˆå®Ÿè£…2.5æ—¥ + ãƒ†ã‚¹ãƒˆ1æ—¥ï¼‰
5. âœ… **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: æ—¢å­˜ã®Webhookç½²åæ–¹å¼ã‚’å†åˆ©ç”¨
6. âœ… **åŒ¿åæ€§ä¿è­·**: åŒ¿åIDã®ã¿ã§ç®¡ç†ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã¯ä¿å­˜ã—ãªã„
7. âš ï¸ **Phase 2.10æ¤œè¨**: InvestigationNoteæ©Ÿèƒ½ã¯å°†æ¥å¯¾å¿œ

---

## ğŸ“ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ã®å¯¾å¿œï¼ˆå³åº§ã«å®Ÿæ–½ï¼‰

1. âœ… **æœ¬ç¢ºèªçµæœã‚’VoiceDriveãƒãƒ¼ãƒ ã¸é€ä»˜** - 2025å¹´10æœˆ26æ—¥
2. â³ **VoiceDriveãƒãƒ¼ãƒ ã‹ã‚‰ã®è³ªå•å›ç­”å¾…ã¡** - 11æœˆ1æ—¥ã¾ã§ã«å›ç­”å¸Œæœ›
3. â³ **å®Ÿè£…é–‹å§‹** - 11æœˆ18æ—¥ï¼ˆæœˆï¼‰ã‹ã‚‰é–‹å§‹

### VoiceDriveãƒãƒ¼ãƒ ã¸ã®æœŸå¾…

1. â³ **æœ¬ç¢ºèªçµæœã®ãƒ¬ãƒ“ãƒ¥ãƒ¼** - 10æœˆ31æ—¥ï¼ˆæœ¨ï¼‰ã¾ã§ã«ç¢ºèª
2. â³ **è³ªå•äº‹é …ã¸ã®å›ç­”** - 11æœˆ1æ—¥ï¼ˆé‡‘ï¼‰ã¾ã§ã«å›ç­”
3. â³ **çµ±åˆãƒ†ã‚¹ãƒˆæ—¥ç¨‹ã®æœ€çµ‚æ‰¿èª** - 11æœˆ15æ—¥ï¼ˆé‡‘ï¼‰ã¾ã§ã«æ‰¿èª

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

1. [MyReportsPage æš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆ](VD-MASTER-2025-1026-007) - VoiceDriveæä¾›è³‡æ–™
2. [organization-analytics_åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ç¢ºèªçµæœ_20251010.md](./organization-analytics_åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ç¢ºèªçµæœ_20251010.md) - å‚è€ƒ: éå»ã®ç¢ºèªçµæœ
3. [Phase2.5_å®Œå…¨å®Ÿè£…å®Œäº†å ±å‘Šæ›¸_20251026.md](./Phase2.5_å®Œå…¨å®Ÿè£…å®Œäº†å ±å‘Šæ›¸_20251026.md) - å‚è€ƒ: Webhookå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³
4. [lightsail-integration-master-plan-20251005-updated.md](./lightsail-integration-master-plan-20251005-updated.md) - ãƒã‚¹ã‚¿ãƒ¼ãƒ—ãƒ©ãƒ³ï¼ˆPhase 2.9è¿½åŠ äºˆå®šï¼‰

---

**æ–‡æ›¸çµ‚äº†**

æœ€çµ‚æ›´æ–°: 2025å¹´10æœˆ26æ—¥
ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.0
æ‰¿èª: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ æ‰¿èªæ¸ˆã¿
æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼: VoiceDriveãƒãƒ¼ãƒ ã‹ã‚‰ã®å›ç­”å—é ˜å¾Œ

---

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ä¸€åŒã€VoiceDriveãƒãƒ¼ãƒ ã®è©³ç´°ãªæš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆä½œæˆã«æ„Ÿè¬ç”³ã—ä¸Šã’ã¾ã™ã€‚**

å¼•ãç¶šãã€Phase 2.9 MyReportsPageé€£æºã®æˆåŠŸã«å‘ã‘ã¦å…¨åŠ›ã§å–ã‚Šçµ„ã¿ã¾ã™ã€‚

---

**é€£çµ¡å…ˆ**:
- Slack: #phase2-integration
- Email: medical-system-dev@kousei-kai.jp
- æ‹…å½“: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºãƒãƒ¼ãƒ 
