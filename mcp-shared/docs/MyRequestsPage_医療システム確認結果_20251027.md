# MyRequestsPage åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ç¢ºèªçµæœå ±å‘Šæ›¸

**æ–‡æ›¸ç•ªå·**: MED-CONF-2025-1027-006
**ä½œæˆæ—¥**: 2025å¹´10æœˆ27æ—¥
**ä½œæˆè€…**: ClaudeCodeï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ï¼‰
**å®›å…ˆ**: VoiceDriveãƒãƒ¼ãƒ 
**ä»¶å**: MyRequestsPageï¼ˆç”³è«‹çŠ¶æ³ç¢ºèªï¼‰ãƒ‡ãƒ¼ã‚¿è¦ä»¶ã®åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ç¢ºèªçµæœ
**å‚ç…§æ›¸é¡**:
- MyRequestsPage æš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆï¼ˆML-2025-1027-004ï¼‰
- MyRequestsPage DBè¦ä»¶åˆ†æï¼ˆDB-REQ-2025-1027-004ï¼‰

---

## ğŸ“‹ ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

VoiceDriveãƒãƒ¼ãƒ ã‹ã‚‰ã®ã€ŒMyRequestsPage æš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆã€ã«å¯¾ã™ã‚‹åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®ç¢ºèªçµæœã§ã™ã€‚

### æœ€é‡è¦çµè«–

ğŸ”´ **MyRequestsPageã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®DBå®Ÿè£…ãŒ100%å¿…è¦ã§ã€VoiceDriveå´ã®æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ã¯ä¸è¦ã§ã™ã€‚**

### ç¢ºèªçµæœã‚µãƒãƒªãƒ¼

| ã‚«ãƒ†ã‚´ãƒª | VoiceDrive | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | çŠ¶æ…‹ |
|---------|-----------|------------|------|
| **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«** | 0ä»¶ï¼ˆä¸è¦ï¼‰ | 3ä»¶ï¼ˆå¿…è¦ï¼‰ | ğŸ”´ åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´æœªå®Ÿè£… |
| **APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ** | 0ä»¶ï¼ˆä¸è¦ï¼‰ | 3ä»¶ï¼ˆå¿…è¦ï¼‰ | ğŸ”´ åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´æœªå®Ÿè£… |
| **Webhooké€šçŸ¥** | 1ä»¶ï¼ˆå—ä¿¡ã®ã¿ï¼‰ | 2ä»¶ï¼ˆé€ä¿¡ï¼‰ | ğŸŸ¡ ä¸¡æ–¹æœªå®Ÿè£… |
| **UIå®Ÿè£…** | å®Œæˆ | ç®¡ç†ç”»é¢å¿…è¦ | ğŸŸ¢ VoiceDriveå´å®Œæˆ |

### ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹

```
ã€ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹ç®¡ç†ãƒ‡ãƒ¼ã‚¿ã€‘
åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  100% ç®¡ç†
â”œâ”€ ã‚³ãƒ¼ã‚¹å®šç¾©ï¼ˆA/B/C/Dï¼‰
â”œâ”€ ç¾åœ¨ã®ã‚³ãƒ¼ã‚¹é¸æŠçŠ¶æ³
â”œâ”€ ã‚³ãƒ¼ã‚¹å¤‰æ›´ç”³è«‹å±¥æ­´
â””â”€ å¯©æŸ»çµæœãƒ»ã‚³ãƒ¡ãƒ³ãƒˆ

ã€è¡¨ç¤ºãƒ»é€šçŸ¥ã€‘
VoiceDrive 100% ç®¡ç†
â”œâ”€ MyRequestsPage UIï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰
â”œâ”€ é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰
â””â”€ ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
```

### æ¨å®šå®Ÿè£…å·¥æ•°

| ä½œæ¥­å†…å®¹ | æ‹…å½“ | å·¥æ•° | çŠ¶æ…‹ |
|---------|------|------|------|
| **åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ DBæ§‹ç¯‰** | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 5æ—¥ | ğŸ”´ æœªå®Ÿè£… |
| **åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ APIå®Ÿè£…** | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 5æ—¥ | ğŸ”´ æœªå®Ÿè£… |
| **åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ Webhookå®Ÿè£…** | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 2æ—¥ | ğŸ”´ æœªå®Ÿè£… |
| **åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ç”»é¢** | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 5æ—¥ | ğŸ”´ æœªå®Ÿè£… |
| **VoiceDrive Webhookå—ä¿¡** | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 2æ—¥ | ğŸ”´ æœªå®Ÿè£… |
| **çµ±åˆãƒ†ã‚¹ãƒˆ** | QA | 2æ—¥ | ğŸ”´ æœªå®Ÿè£… |
| **E2Eãƒ†ã‚¹ãƒˆ** | QA | 1æ—¥ | ğŸ”´ æœªå®Ÿè£… |
| **åˆè¨ˆ** | - | **22æ—¥ï¼ˆç´„4.5é€±é–“ï¼‰** | - |

---

## ğŸ¯ ç¢ºèªçµè«–

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®å®Ÿè£…è¦å¦

| é …ç›® | å¿…è¦æ€§ | ç†ç”± | å„ªå…ˆåº¦ |
|------|--------|------|-------|
| **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ** | âœ… **å¿…è¦ï¼ˆ3ä»¶ï¼‰** | ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹ç®¡ç†ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ | ğŸ”´ æœ€é«˜ |
| **APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…** | âœ… **å¿…è¦ï¼ˆ3ä»¶ï¼‰** | VoiceDriveã¸ã®ãƒ‡ãƒ¼ã‚¿æä¾› | ğŸ”´ æœ€é«˜ |
| **Webhooké€šçŸ¥å®Ÿè£…** | âœ… **å¿…è¦ï¼ˆ2ä»¶ï¼‰** | ç”³è«‹æ‰¿èªãƒ»å´ä¸‹ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ | ğŸ”´ æœ€é«˜ |
| **ç®¡ç†ç”»é¢å®Ÿè£…** | âœ… **å¿…è¦** | äººäº‹æ‹…å½“è€…ãŒç”³è«‹ã‚’å¯©æŸ» | ğŸ”´ æœ€é«˜ |
| **VoiceDriveå´ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ** | âŒ **ä¸è¦** | è¡¨ç¤ºã®ã¿ï¼ˆãƒ‡ãƒ¼ã‚¿ä¿å­˜ãªã—ï¼‰ | - |

### VoiceDriveå´ã®çŠ¶æ³

| é …ç›® | çŠ¶æ…‹ | å‚™è€ƒ |
|------|------|------|
| **MyRequestsPage UI** | âœ… å®Ÿè£…å®Œæˆ | çµ±è¨ˆã‚µãƒãƒªãƒ¼ã€ç”³è«‹ä¸€è¦§ã€è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« |
| **careerCourseService** | âœ… å®Ÿè£…å®Œæˆ | APIå‘¼ã³å‡ºã—ã‚µãƒ¼ãƒ“ã‚¹ |
| **é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹** | âœ… å®Ÿè£…å®Œæˆ | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ãƒªã‚¹ãƒŠãƒ¼ |
| **Webhookã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ** | ğŸ”´ æœªå®Ÿè£… | `/api/webhooks/career-course` |
| **æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«** | âŒ ä¸è¦ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ APIã‹ã‚‰å–å¾— |

---

## ğŸ—„ï¸ åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´DBè¦ä»¶

### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆ3ä»¶ï¼‰

#### 1. career_course_definitionsï¼ˆã‚³ãƒ¼ã‚¹å®šç¾©ãƒã‚¹ã‚¿ï¼‰

**ç”¨é€”**: A/B/C/Dã‚³ãƒ¼ã‚¹ã®å®šç¾©ã‚’ç®¡ç†

```prisma
model CareerCourseDefinition {
  id                          String   @id @default(cuid())
  courseCode                  String   @unique @map("course_code")  // 'A', 'B', 'C', 'D'
  courseName                  String   @map("course_name")
  description                 String?
  departmentTransferAvailable Boolean  @default(false) @map("department_transfer_available")
  facilityTransferAvailable   String   @default("none") @map("facility_transfer_available")  // 'none' | 'limited' | 'full'
  relocationRequired          Boolean  @default(false) @map("relocation_required")
  nightShiftAvailable         String   @default("none") @map("night_shift_available")  // 'none' | 'selectable' | 'required'
  managementTrack             Boolean  @default(false) @map("management_track")
  baseSalaryMultiplier        Decimal  @default(1.00) @map("base_salary_multiplier") @db.Decimal(3, 2)
  salaryGrade                 Int?     @map("salary_grade")
  salaryNotes                 String?  @map("salary_notes")
  isActive                    Boolean  @default(true) @map("is_active")
  displayOrder                Int      @default(0) @map("display_order")
  createdAt                   DateTime @default(now()) @map("created_at")
  updatedAt                   DateTime @updatedAt @map("updated_at")

  @@map("career_course_definitions")
}
```

**åˆæœŸãƒ‡ãƒ¼ã‚¿ï¼ˆ4ä»¶ï¼‰**:
```sql
INSERT INTO career_course_definitions VALUES
('course-a', 'A', 'Aã‚³ãƒ¼ã‚¹ï¼ˆå…¨é¢å”åŠ›å‹ï¼‰', 'æ–½è¨­é–“ç•°å‹•ãƒ»è»¢å±…ã‚ã‚Š', TRUE, 'full', TRUE, 'required', TRUE, 1.20, NULL, NULL, TRUE, 1, NOW(), NOW()),
('course-b', 'B', 'Bã‚³ãƒ¼ã‚¹ï¼ˆéƒ¨ç½²ç•°å‹•å”åŠ›å‹ï¼‰', 'éƒ¨ç½²ç•°å‹•ã‚ã‚Šã€æ–½è¨­é–“ç•°å‹•ãªã—', TRUE, 'none', FALSE, 'selectable', TRUE, 1.10, NULL, NULL, TRUE, 2, NOW(), NOW()),
('course-c', 'C', 'Cã‚³ãƒ¼ã‚¹ï¼ˆé™å®šå”åŠ›å‹ï¼‰', 'ç•°å‹•ãªã—ã€å¤œå‹¤é¸æŠå¯', FALSE, 'none', FALSE, 'selectable', FALSE, 1.00, NULL, NULL, TRUE, 3, NOW(), NOW()),
('course-d', 'D', 'Dã‚³ãƒ¼ã‚¹ï¼ˆå‹¤å‹™é™å®šå‹ï¼‰', 'ç•°å‹•ãªã—ã€å¤œå‹¤ãªã—', FALSE, 'none', FALSE, 'none', FALSE, 0.90, NULL, NULL, TRUE, 4, NOW(), NOW());
```

---

#### 2. career_course_selectionsï¼ˆã‚³ãƒ¼ã‚¹é¸æŠçŠ¶æ³ï¼‰

**ç”¨é€”**: è·å“¡ã”ã¨ã®ç¾åœ¨ã®ã‚³ãƒ¼ã‚¹é¸æŠçŠ¶æ³ã‚’ç®¡ç†

```prisma
model CareerCourseSelection {
  id                        String    @id @default(cuid())
  staffId                   String    @map("staff_id")
  courseCode                String    @map("course_code")
  effectiveFrom             DateTime  @map("effective_from") @db.Date
  effectiveTo               DateTime? @map("effective_to") @db.Date
  nextChangeAvailableDate   DateTime? @map("next_change_available_date") @db.Date
  specialChangeReason       String?   @map("special_change_reason")  // 'pregnancy' | 'caregiving' | 'illness'
  specialChangeNote         String?   @map("special_change_note")
  changeRequestedAt         DateTime? @map("change_requested_at")
  changeRequestedBy         String?   @map("change_requested_by")
  approvedAt                DateTime? @map("approved_at")
  approvedBy                String?   @map("approved_by")
  approvalStatus            String    @default("pending") @map("approval_status")  // 'pending' | 'approved' | 'rejected' | 'withdrawn'
  rejectionReason           String?   @map("rejection_reason")
  createdAt                 DateTime  @default(now()) @map("created_at")
  updatedAt                 DateTime  @updatedAt @map("updated_at")

  staff                     Employee  @relation(fields: [staffId], references: [employeeId], onDelete: Cascade)

  @@index([staffId, effectiveFrom, effectiveTo], name: "idx_staff_effective")
  @@index([approvalStatus], name: "idx_approval_status")
  @@map("career_course_selections")
}
```

---

#### 3. career_course_change_requestsï¼ˆã‚³ãƒ¼ã‚¹å¤‰æ›´ç”³è«‹ï¼‰

**ç”¨é€”**: ã‚³ãƒ¼ã‚¹å¤‰æ›´ç”³è«‹å±¥æ­´ã‚’ç®¡ç†ï¼ˆMyRequestsPageã§è¡¨ç¤ºï¼‰

```prisma
model CareerCourseChangeRequest {
  id                      String    @id @default(cuid())
  staffId                 String    @map("staff_id")
  currentCourseCode       String    @map("current_course_code")
  requestedCourseCode     String    @map("requested_course_code")
  changeReason            String    @map("change_reason")  // 'annual' | 'special_pregnancy' | 'special_caregiving' | 'special_illness'
  reasonDetail            String    @map("reason_detail")
  requestedEffectiveDate  DateTime  @map("requested_effective_date") @db.Date
  hrReviewerId            String?   @map("hr_reviewer_id")
  hrReviewerName          String?   @map("hr_reviewer_name")
  reviewedAt              DateTime? @map("reviewed_at")
  reviewComment           String?   @map("review_comment")
  approvalStatus          String    @default("pending") @map("approval_status")  // 'pending' | 'approved' | 'rejected' | 'withdrawn'
  rejectionReason         String?   @map("rejection_reason")
  withdrawnAt             DateTime? @map("withdrawn_at")
  attachments             Json?     @map("attachments")  // ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®é…åˆ—
  createdAt               DateTime  @default(now()) @map("created_at")
  updatedAt               DateTime  @updatedAt @map("updated_at")

  staff                   Employee  @relation(fields: [staffId], references: [employeeId], onDelete: Cascade)

  @@index([staffId, approvalStatus], name: "idx_staff_status")
  @@index([approvalStatus], name: "idx_approval_status")
  @@index([createdAt], name: "idx_created_at")
  @@map("career_course_change_requests")
}
```

**æ¨å®šãƒ¬ã‚³ãƒ¼ãƒ‰æ•°**:
- ç«‹ç¥ãƒªãƒãƒ“ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ¸©æ³‰ç—…é™¢: ç´„120å Ã— å¹´é–“0.5ä»¶ = 60ä»¶/å¹´
- å°åŸç—…é™¢: ç´„100å Ã— å¹´é–“0.5ä»¶ = 50ä»¶/å¹´
- **åˆè¨ˆ**: ç´„110ä»¶/å¹´

---

## ğŸ”Œ åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´APIè¦ä»¶

### å¿…è¦ãªAPIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆ3ä»¶ï¼‰

#### 1. GET /api/career-course/my-requests

**ç”¨é€”**: ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç”³è«‹å±¥æ­´ã‚’å–å¾—ï¼ˆMyRequestsPageã§ä½¿ç”¨ï¼‰

**èªè¨¼**: JWT Bearer Tokenå¿…é ˆ

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
GET /api/career-course/my-requests HTTP/1.1
Host: medical-system.example.com
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "data": [
    {
      "id": "req-003",
      "staffId": "OH-NS-2021-001",
      "staffName": "å±±ç”° èŠ±å­",
      "facility": "å°åŸç—…é™¢",
      "department": "å†…ç§‘",
      "position": "çœ‹è­·å¸«",
      "currentCourseCode": "B",
      "requestedCourseCode": "A",
      "changeReason": "annual",
      "reasonDetail": "ç®¡ç†è·å€™è£œã¨ã—ã¦ã€æ–½è¨­é–“ç•°å‹•ã‚’å«ã‚€å…¨é¢å”åŠ›å‹ã‚³ãƒ¼ã‚¹ã¸ã®å¤‰æ›´ã‚’å¸Œæœ›ã—ã¾ã™ã€‚",
      "requestedEffectiveDate": "2026-04-01",
      "hrReviewerId": null,
      "hrReviewerName": null,
      "reviewedAt": null,
      "reviewComment": null,
      "approvalStatus": "pending",
      "rejectionReason": null,
      "withdrawnAt": null,
      "attachments": [],
      "createdAt": "2025-09-25T10:30:00Z",
      "updatedAt": "2025-09-25T10:30:00Z"
    }
  ],
  "message": "ç”³è«‹å±¥æ­´ã‚’å–å¾—ã—ã¾ã—ãŸ"
}
```

**å®Ÿè£…ä¾‹ï¼ˆNode.js + Express + Prismaï¼‰**:
```typescript
router.get('/my-requests', authenticateJWT, async (req, res) => {
  const staffId = req.user.employeeId;  // JWT ã‹ã‚‰å–å¾—

  const requests = await prisma.careerCourseChangeRequest.findMany({
    where: { staffId },
    orderBy: { createdAt: 'desc' },
    include: {
      staff: {
        select: {
          name: true,
          facility: true,
          department: true,
          position: true
        }
      }
    }
  });

  res.json({
    success: true,
    data: requests.map(req => ({
      ...req,
      staffName: req.staff.name,
      facility: req.staff.facility,
      department: req.staff.department,
      position: req.staff.position
    })),
    message: 'ç”³è«‹å±¥æ­´ã‚’å–å¾—ã—ã¾ã—ãŸ'
  });
});
```

---

#### 2. GET /api/career-course/definitions

**ç”¨é€”**: ã‚³ãƒ¼ã‚¹å®šç¾©ï¼ˆA/B/C/Dï¼‰ã‚’å–å¾—

**èªè¨¼**: JWT Bearer Tokenå¿…é ˆ

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
GET /api/career-course/definitions HTTP/1.1
Host: medical-system.example.com
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "data": [
    {
      "id": "course-a",
      "courseCode": "A",
      "courseName": "Aã‚³ãƒ¼ã‚¹ï¼ˆå…¨é¢å”åŠ›å‹ï¼‰",
      "description": "æ–½è¨­é–“ç•°å‹•ãƒ»è»¢å±…ã‚’ä¼´ã†å¯èƒ½æ€§ã‚ã‚Š",
      "departmentTransferAvailable": true,
      "facilityTransferAvailable": "full",
      "relocationRequired": true,
      "nightShiftAvailable": "required",
      "managementTrack": true,
      "baseSalaryMultiplier": 1.20,
      "isActive": true,
      "displayOrder": 1
    }
  ]
}
```

---

#### 3. POST /api/career-course/change-request

**ç”¨é€”**: ã‚³ãƒ¼ã‚¹å¤‰æ›´ç”³è«‹ã‚’é€ä¿¡

**èªè¨¼**: JWT Bearer Tokenå¿…é ˆ

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
POST /api/career-course/change-request HTTP/1.1
Host: medical-system.example.com
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
Content-Type: application/json

{
  "currentCourseCode": "B",
  "requestedCourseCode": "A",
  "changeReason": "annual",
  "reasonDetail": "ç®¡ç†è·å€™è£œã¨ã—ã¦ã€æ–½è¨­é–“ç•°å‹•ã‚’å«ã‚€å…¨é¢å”åŠ›å‹ã‚³ãƒ¼ã‚¹ã¸ã®å¤‰æ›´ã‚’å¸Œæœ›ã—ã¾ã™ã€‚",
  "requestedEffectiveDate": "2026-04-01",
  "attachments": []
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "data": {
    "id": "req-004",
    "staffId": "OH-NS-2021-001",
    "approvalStatus": "pending",
    "createdAt": "2025-10-27T10:00:00Z"
  },
  "message": "ã‚³ãƒ¼ã‚¹å¤‰æ›´ç”³è«‹ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸ"
}
```

---

## ğŸ”” Webhooké€šçŸ¥è¦ä»¶

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  â†’ VoiceDrive

#### 1. course_change_approvedï¼ˆç”³è«‹æ‰¿èªé€šçŸ¥ï¼‰

**é€ä¿¡ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: äººäº‹æ‹…å½“è€…ãŒç”³è«‹ã‚’æ‰¿èªã—ãŸæ™‚

**é€ä¿¡å…ˆ**: `https://voicedrive-v100.vercel.app/api/webhooks/career-course`

**èªè¨¼**: HMAC-SHA256ç½²åï¼ˆ`X-Medical-System-Signature`ãƒ˜ãƒƒãƒ€ãƒ¼ï¼‰

**ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰**:
```json
{
  "type": "course_change_approved",
  "staffId": "OH-NS-2021-001",
  "requestId": "req-003",
  "approvedCourse": "A",
  "effectiveDate": "2026-04-01",
  "reviewComment": "ç®¡ç†è·å€™è£œã¨ã—ã¦è©•ä¾¡ã—ã€æ‰¿èªã—ã¾ã™ã€‚"
}
```

**å®Ÿè£…ä¾‹**:
```typescript
// åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´
export async function sendApprovalNotification(requestId: string) {
  const request = await prisma.careerCourseChangeRequest.findUnique({
    where: { id: requestId }
  });

  const payload = {
    type: 'course_change_approved',
    staffId: request.staffId,
    requestId: request.id,
    approvedCourse: request.requestedCourseCode,
    effectiveDate: request.requestedEffectiveDate,
    reviewComment: request.reviewComment
  };

  const signature = generateHMAC(payload, process.env.WEBHOOK_SECRET);

  await fetch('https://voicedrive-v100.vercel.app/api/webhooks/career-course', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'X-Medical-System-Signature': signature
    },
    body: JSON.stringify(payload)
  });
}
```

---

#### 2. course_change_rejectedï¼ˆç”³è«‹å´ä¸‹é€šçŸ¥ï¼‰

**é€ä¿¡ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: äººäº‹æ‹…å½“è€…ãŒç”³è«‹ã‚’å´ä¸‹ã—ãŸæ™‚

**ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰**:
```json
{
  "type": "course_change_rejected",
  "staffId": "OH-NS-2021-001",
  "requestId": "req-001",
  "rejectionReason": "ç¾åœ¨ã®å‹¤å‹™ã‚·ãƒ•ãƒˆèª¿æ•´ã§å¯¾å¿œå¯èƒ½ãªãŸã‚ã€‚",
  "reviewComment": "ä»‹è­·äº‹ç”±ã‚’ç¢ºèªã—ã¾ã—ãŸãŒã€ç¾åœ¨ã®å‹¤å‹™ã‚·ãƒ•ãƒˆèª¿æ•´ã§å¯¾å¿œå¯èƒ½ã¨åˆ¤æ–­ã—ã¾ã—ãŸã€‚"
}
```

---

### VoiceDriveå´Webhookã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

```typescript
// VoiceDrive: src/pages/api/webhooks/career-course.ts

export default async function handler(req: NextApiRequest, res: NextApiResponse) {
  if (req.method !== 'POST') {
    return res.status(405).json({ error: 'Method not allowed' });
  }

  // HMACç½²åæ¤œè¨¼
  const signature = req.headers['x-medical-system-signature'];
  if (!verifyHMAC(req.body, signature)) {
    return res.status(401).json({ error: 'Invalid signature' });
  }

  const notification: CareerCourseNotification = req.body;

  // é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹ã«è»¢é€
  const notificationService = CareerCourseNotificationService.getInstance();
  await notificationService.handleWebhookNotification(notification);

  res.status(200).json({ success: true });
}
```

---

## ğŸ–¥ï¸ åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ç”»é¢è¦ä»¶

### ç”³è«‹å¯©æŸ»ç”»é¢ï¼ˆäººäº‹æ‹…å½“è€…å‘ã‘ï¼‰

**å¿…è¦ãªæ©Ÿèƒ½**:
1. ç”³è«‹ä¸€è¦§è¡¨ç¤ºï¼ˆæ‰¿èªå¾…ã¡ã€æ‰¿èªæ¸ˆã¿ã€å´ä¸‹æ¸ˆã¿ï¼‰
2. ç”³è«‹è©³ç´°è¡¨ç¤ºï¼ˆè·å“¡æƒ…å ±ã€ç¾åœ¨ã®ã‚³ãƒ¼ã‚¹ã€å¸Œæœ›ã‚³ãƒ¼ã‚¹ã€ç†ç”±ï¼‰
3. æ‰¿èªå‡¦ç†ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆå…¥åŠ›ã€é©ç”¨æ—¥ç¢ºèªï¼‰
4. å´ä¸‹å‡¦ç†ï¼ˆå´ä¸‹ç†ç”±å…¥åŠ›å¿…é ˆï¼‰
5. ä¿ç•™å‡¦ç†ï¼ˆä¿ç•™ç†ç”±å…¥åŠ›ï¼‰

**æ¨©é™è¦ä»¶**:
- Level 14ä»¥ä¸Šï¼ˆäººäº‹éƒ¨ã‚¹ã‚¿ãƒƒãƒ•ï¼‰: ç”³è«‹ä¸€è¦§é–²è¦§ã€è©³ç´°ç¢ºèª
- Level 15ä»¥ä¸Šï¼ˆäººäº‹éƒ¨é•·ï¼‰: æ‰¿èªãƒ»å´ä¸‹å®Ÿè¡Œ

**å®Ÿè£…ä¾‹ï¼ˆReact + TailwindCSSï¼‰**:
```typescript
// åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ç”»é¢: src/pages/career-course/review.tsx

export default function CareerCourseReviewPage() {
  const [requests, setRequests] = useState<CareerCourseChangeRequest[]>([]);
  const [filter, setFilter] = useState<'pending' | 'approved' | 'rejected'>('pending');

  useEffect(() => {
    fetchRequests();
  }, [filter]);

  const fetchRequests = async () => {
    const res = await fetch(`/api/career-course/requests?status=${filter}`);
    const data = await res.json();
    setRequests(data.data);
  };

  const handleApprove = async (requestId: string, comment: string) => {
    await fetch(`/api/career-course/requests/${requestId}/approve`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ reviewComment: comment })
    });

    fetchRequests();
  };

  const handleReject = async (requestId: string, reason: string, comment: string) => {
    await fetch(`/api/career-course/requests/${requestId}/reject`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ rejectionReason: reason, reviewComment: comment })
    });

    fetchRequests();
  };

  return (
    <div>
      <h1>ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ã‚¹å¤‰æ›´ç”³è«‹ å¯©æŸ»</h1>

      {/* ãƒ•ã‚£ãƒ«ã‚¿ */}
      <div>
        <button onClick={() => setFilter('pending')}>æ‰¿èªå¾…ã¡</button>
        <button onClick={() => setFilter('approved')}>æ‰¿èªæ¸ˆã¿</button>
        <button onClick={() => setFilter('rejected')}>å´ä¸‹æ¸ˆã¿</button>
      </div>

      {/* ç”³è«‹ä¸€è¦§ */}
      <table>
        <thead>
          <tr>
            <th>è·å“¡å</th>
            <th>ç¾åœ¨ã®ã‚³ãƒ¼ã‚¹</th>
            <th>å¸Œæœ›ã‚³ãƒ¼ã‚¹</th>
            <th>ç†ç”±</th>
            <th>ç”³è«‹æ—¥</th>
            <th>æ“ä½œ</th>
          </tr>
        </thead>
        <tbody>
          {requests.map(req => (
            <tr key={req.id}>
              <td>{req.staffName}</td>
              <td>{req.currentCourseCode}</td>
              <td>{req.requestedCourseCode}</td>
              <td>{req.changeReason}</td>
              <td>{req.createdAt}</td>
              <td>
                <button onClick={() => handleApprove(req.id, '')}>æ‰¿èª</button>
                <button onClick={() => handleReject(req.id, '', '')}>å´ä¸‹</button>
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
}
```

---

## ğŸ“Š å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆææ¡ˆï¼‰

### Phase 1: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹ç¯‰ï¼ˆ1é€±é–“ï¼‰

| æ—¥ä»˜ | ä½œæ¥­å†…å®¹ | æ‹…å½“ | çŠ¶æ…‹ |
|------|---------|------|------|
| Day 1 | `career_course_definitions`ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | â³ æœªå®Ÿè£… |
| Day 2 | `career_course_selections`ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | â³ æœªå®Ÿè£… |
| Day 3 | `career_course_change_requests`ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | â³ æœªå®Ÿè£… |
| Day 4 | ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | â³ æœªå®Ÿè£… |
| Day 5 | åˆæœŸãƒ‡ãƒ¼ã‚¿æŠ•å…¥ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | â³ æœªå®Ÿè£… |

---

### Phase 2: APIå®Ÿè£…ï¼ˆ1é€±é–“ï¼‰

| æ—¥ä»˜ | ä½œæ¥­å†…å®¹ | æ‹…å½“ | çŠ¶æ…‹ |
|------|---------|------|------|
| Day 1-2 | `GET /my-requests` å®Ÿè£… | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | â³ æœªå®Ÿè£… |
| Day 3 | `GET /definitions` å®Ÿè£… | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | â³ æœªå®Ÿè£… |
| Day 4 | `POST /change-request` å®Ÿè£… | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | â³ æœªå®Ÿè£… |
| Day 5 | JWTèªè¨¼å®Ÿè£… | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | â³ æœªå®Ÿè£… |

---

### Phase 3: Webhookå®Ÿè£…ï¼ˆ3æ—¥ï¼‰

| æ—¥ä»˜ | ä½œæ¥­å†…å®¹ | æ‹…å½“ | çŠ¶æ…‹ |
|------|---------|------|------|
| Day 1 | HMACç½²åç”Ÿæˆæ©Ÿèƒ½ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | â³ æœªå®Ÿè£… |
| Day 2 | `sendApprovalNotification()` | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | â³ æœªå®Ÿè£… |
| Day 3 | `sendRejectionNotification()` | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | â³ æœªå®Ÿè£… |

---

### Phase 4: ç®¡ç†ç”»é¢å®Ÿè£…ï¼ˆ1é€±é–“ï¼‰

| æ—¥ä»˜ | ä½œæ¥­å†…å®¹ | æ‹…å½“ | çŠ¶æ…‹ |
|------|---------|------|------|
| Day 1-2 | ç”³è«‹ä¸€è¦§ç”»é¢ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | â³ æœªå®Ÿè£… |
| Day 3-4 | ç”³è«‹è©³ç´°ç”»é¢ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | â³ æœªå®Ÿè£… |
| Day 5 | æ‰¿èªãƒ»å´ä¸‹å‡¦ç† | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | â³ æœªå®Ÿè£… |

---

### Phase 5: çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆ2æ—¥ï¼‰

| æ—¥ä»˜ | ä½œæ¥­å†…å®¹ | æ‹…å½“ | çŠ¶æ…‹ |
|------|---------|------|------|
| Day 1 | APIçµ±åˆãƒ†ã‚¹ãƒˆ | QA | â³ æœªå®Ÿè£… |
| Day 2 | Webhookçµ±åˆãƒ†ã‚¹ãƒˆ | QA | â³ æœªå®Ÿè£… |

---

### Phase 6: E2Eãƒ†ã‚¹ãƒˆï¼ˆ1æ—¥ï¼‰

| æ—¥ä»˜ | ä½œæ¥­å†…å®¹ | æ‹…å½“ | çŠ¶æ…‹ |
|------|---------|------|------|
| Day 1 | ç”³è«‹ä½œæˆâ†’å¯©æŸ»â†’é€šçŸ¥â†’ç”»é¢æ›´æ–° | QA | â³ æœªå®Ÿè£… |

---

## âœ… å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹ç¯‰
- [ ] `career_course_definitions` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `career_course_selections` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `career_course_change_requests` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ
- [ ] åˆæœŸãƒ‡ãƒ¼ã‚¿æŠ•å…¥ï¼ˆA/B/C/Dã‚³ãƒ¼ã‚¹å®šç¾©ï¼‰
- [ ] ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­å®š
- [ ] å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„è¨­å®š

#### APIå®Ÿè£…
- [ ] `GET /api/career-course/my-requests` å®Ÿè£…
- [ ] `GET /api/career-course/definitions` å®Ÿè£…
- [ ] `POST /api/career-course/change-request` å®Ÿè£…
- [ ] JWTèªè¨¼æ©Ÿèƒ½å®Ÿè£…
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…
- [ ] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…
- [ ] å˜ä½“ãƒ†ã‚¹ãƒˆä½œæˆ

#### Webhookå®Ÿè£…
- [ ] `sendApprovalNotification()` å®Ÿè£…
- [ ] `sendRejectionNotification()` å®Ÿè£…
- [ ] HMACç½²åç”Ÿæˆæ©Ÿèƒ½
- [ ] Webhookãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½

#### ç®¡ç†ç”»é¢å®Ÿè£…
- [ ] ç”³è«‹ä¸€è¦§ç”»é¢ï¼ˆäººäº‹æ‹…å½“è€…å‘ã‘ï¼‰
- [ ] ç”³è«‹è©³ç´°ç”»é¢
- [ ] æ‰¿èªãƒ»å´ä¸‹å‡¦ç†å®Ÿè£…
- [ ] ã‚³ãƒ¼ã‚¹å®šç¾©ç®¡ç†ç”»é¢
- [ ] çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

---

### VoiceDriveå´

#### APIé€£æº
- [x] `careerCourseService.ts` å®Ÿè£…æ¸ˆã¿
- [x] `getMyRequests()` å®Ÿè£…æ¸ˆã¿
- [x] APIèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†å®Ÿè£…æ¸ˆã¿
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–

#### Webhookå—ä¿¡
- [x] `CareerCourseNotificationService.ts` å®Ÿè£…æ¸ˆã¿
- [ ] `/api/webhooks/career-course` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…
- [ ] HMACç½²åæ¤œè¨¼å®Ÿè£…
- [x] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ãƒªã‚¹ãƒŠãƒ¼å®Ÿè£…æ¸ˆã¿

#### UI
- [x] `MyRequestsPage.tsx` å®Ÿè£…æ¸ˆã¿
- [x] çµ±è¨ˆã‚µãƒãƒªãƒ¼è¡¨ç¤ºå®Ÿè£…æ¸ˆã¿
- [x] ç”³è«‹ä¸€è¦§è¡¨ç¤ºå®Ÿè£…æ¸ˆã¿
- [x] ç”³è«‹è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«å®Ÿè£…æ¸ˆã¿
- [x] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°å®Ÿè£…æ¸ˆã¿

---

### ãƒ†ã‚¹ãƒˆ

#### å˜ä½“ãƒ†ã‚¹ãƒˆ
- [ ] API `/my-requests` ã®ãƒ†ã‚¹ãƒˆ
- [ ] Webhooké€šçŸ¥å‡¦ç†ã®ãƒ†ã‚¹ãƒˆ
- [ ] çµ±è¨ˆè¨ˆç®—ã®ãƒ†ã‚¹ãƒˆ

#### çµ±åˆãƒ†ã‚¹ãƒˆ
- [ ] MyRequestsPageå…¨ä½“ã®å‹•ä½œç¢ºèª
- [ ] Webhooké€šçŸ¥â†’ç”»é¢æ›´æ–°ã®ãƒ•ãƒ­ãƒ¼ç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºç¢ºèª

#### E2Eãƒ†ã‚¹ãƒˆ
- [ ] ç”³è«‹ä½œæˆâ†’å¯©æŸ»â†’é€šçŸ¥â†’ç”»é¢æ›´æ–°ã®ä¸€é€£ã®ãƒ•ãƒ­ãƒ¼

---

## ğŸ¯ æˆåŠŸæŒ‡æ¨™

| æŒ‡æ¨™ | ç›®æ¨™å€¤ | æ¸¬å®šæ–¹æ³• |
|------|--------|---------|
| APIå¿œç­”æ™‚é–“ | <500ms | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦– |
| Webhookåˆ°é”ç‡ | >99% | ãƒ­ã‚°åˆ†æ |
| é€šçŸ¥é…å»¶ | <3ç§’ | ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æ¯”è¼ƒ |
| UIè¡¨ç¤ºé€Ÿåº¦ | <2ç§’ | ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰è¨ˆæ¸¬ |
| ã‚¨ãƒ©ãƒ¼ç‡ | <0.1% | ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°åˆ†æ |
| ç”³è«‹ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ | 100% | æ—¥æ¬¡æ¤œè¨¼ãƒãƒƒãƒ |

---

## ğŸ“ VoiceDriveãƒãƒ¼ãƒ ã¸ã®ç¢ºèªäº‹é …

### ç¢ºèªäº‹é …ï¼ˆ3ä»¶ï¼‰

1. **å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«**:
   - åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®å®Ÿè£…é–‹å§‹æ™‚æœŸã¯ã„ã¤ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã‹ï¼Ÿ
   - Phase 1.6ï¼ˆå…±é€šDBæ§‹ç¯‰ï¼‰ã¨åŒæ™‚å®Ÿæ–½ãŒæ¨å¥¨ã§ã™ãŒã€å…ˆè¡Œå®Ÿè£…ã‚‚å¯èƒ½ã§ã™

2. **Webhook Secret Key**:
   - HMACç½²åç”¨ã®Secret Keyã‚’å…±æœ‰ã—ã¦ãã ã•ã„
   - `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã«`CAREER_COURSE_WEBHOOK_SECRET`ã¨ã—ã¦ä¿å­˜ã—ã¾ã™

3. **VoiceDriveå´Webhookã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:
   - `/api/webhooks/career-course` ã®å®Ÿè£…äºˆå®šã‚’æ•™ãˆã¦ãã ã•ã„
   - HMACç½²åæ¤œè¨¼ã®å®Ÿè£…æ–¹æ³•ã‚’ç¢ºèªã—ãŸã„ã§ã™

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

1. **MyRequestsPage æš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆ**
   - `mcp-shared/docs/MyRequestsPageæš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆ_20251027.md`
   - å…¨å®Ÿè£…é …ç›®ã®è©³ç´°ä»•æ§˜

2. **MyRequestsPage DBè¦ä»¶åˆ†æ**
   - `mcp-shared/docs/MyRequestsPage_DBè¦ä»¶åˆ†æ_20251027.md`
   - DBè¨­è¨ˆã€APIä»•æ§˜ã€ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

3. **ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹å®šç¾©æ›¸**
   - `mcp-shared/docs/ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹å®šç¾©æ›¸_20251008.md`
   - åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¨VoiceDriveã®ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»

---

## ğŸ“Š ã¾ã¨ã‚

### MyRequestsPageã®ç‰¹å¾´

1. **å®Œå…¨ã«åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ä¾å­˜**: å…¨ãƒ‡ãƒ¼ã‚¿ãŒåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ DBã«ä¿å­˜ã•ã‚Œã‚‹
2. **VoiceDriveå´ã¯è¡¨ç¤ºã®ã¿**: æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ä¸è¦
3. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥å¯¾å¿œ**: WebhookçµŒç”±ã§å³åº§ã«ç”»é¢æ›´æ–°
4. **ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã§ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**: é–‹ç™ºç’°å¢ƒã§ã‚‚å‹•ä½œç¢ºèªå¯èƒ½

### 4ãƒšãƒ¼ã‚¸ã®æ¯”è¼ƒã‚µãƒãƒªãƒ¼

| è¦ç´  | NotFoundPage | UnauthorizedPage | PersonalStation | MyRequestsPage |
|-----|-------------|-----------------|----------------|----------------|
| **æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«** | ä¸è¦ | ä¸è¦ | 2ä»¶å¿…è¦ | **ä¸è¦** |
| **æ–°è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰** | ä¸è¦ | ä¸è¦ | 1ä»¶å¿…è¦ | **ä¸è¦** |
| **åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ DB** | ä¸è¦ | ä¸è¦ | ä¸€éƒ¨å¿…è¦ | **3ä»¶å¿…è¦** |
| **APIå‘¼ã³å‡ºã—** | ãªã— | é–“æ¥çš„ï¼ˆèªè¨¼ï¼‰ | è¤‡æ•°ï¼ˆç›´æ¥ï¼‰ | **1ä»¶ï¼ˆå¿…é ˆï¼‰** |
| **Webhooké€šçŸ¥** | ä¸è¦ | ä¸è¦ | ä¸è¦ | **2ä»¶å¿…è¦** |
| **å®Ÿè£…å·¥æ•°** | 0æ—¥ï¼ˆå®Œæˆï¼‰ | 3é€±é–“ï¼ˆèªè¨¼å«ã‚€ï¼‰ | 4-6é€±é–“ | **4.5é€±é–“ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…å«ã‚€ï¼‰** |

### æœ€çµ‚çµè«–

**MyRequestsPageã¯VoiceDriveå´ã®æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«ã‚„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ãŒä¸è¦ã§ã™ãŒã€åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®å®Œå…¨ãªå®Ÿè£…ãŒå¿…é ˆã§ã™ã€‚**

ç¾åœ¨ã¯ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã§å‹•ä½œã—ã¦ãŠã‚Šã€åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®3ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆ`career_course_definitions`, `career_course_selections`, `career_course_change_requests`ï¼‰ã¨APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆ`GET /my-requests`ï¼‰ãŒå®Ÿè£…ã•ã‚Œã‚Œã°ã€ã™ãã«å®Ÿãƒ‡ãƒ¼ã‚¿å¯¾å¿œãŒå®Œäº†ã—ã¾ã™ã€‚

**ã‚­ãƒ£ãƒªã‚¢é¸æŠåˆ¶åº¦ã®ä¸­æ ¸æ©Ÿèƒ½**ã¨ã—ã¦ã€æœ€é«˜å„ªå…ˆåº¦ã§ã®å®Ÿè£…ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

---

## ğŸ“… æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ã®å¯¾å¿œ

1. **Phase 1.6çµ±åˆå®Ÿè£…**: å…±é€šDBæ§‹ç¯‰ã¨åŒæ™‚å®Ÿæ–½ã‚’æ¨å¥¨
2. **DBè¨­è¨ˆãƒ¬ãƒ“ãƒ¥ãƒ¼**: 3ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚¹ã‚­ãƒ¼ãƒæœ€çµ‚ç¢ºèª
3. **APIä»•æ§˜ãƒ¬ãƒ“ãƒ¥ãƒ¼**: 3ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ç¢ºèª
4. **Webhookä»•æ§˜ãƒ¬ãƒ“ãƒ¥ãƒ¼**: HMACç½²åæ–¹å¼ã®ç¢ºèª
5. **å®Ÿè£…é–‹å§‹**: VoiceDriveãƒãƒ¼ãƒ ã®æ‰¿èªå¾Œ

### VoiceDriveãƒãƒ¼ãƒ ã¸ã®ä¾é ¼äº‹é …

1. **å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç¢ºèª**: Phase 1.6ã®å®Ÿæ–½äºˆå®šæ—¥ã‚’æ•™ãˆã¦ãã ã•ã„
2. **Webhook Secret Keyå…±æœ‰**: HMACç½²åç”¨ã®Secret Keyã‚’å…±æœ‰ã—ã¦ãã ã•ã„
3. **Webhookã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…**: `/api/webhooks/career-course` ã®å®Ÿè£…äºˆå®šã‚’æ•™ãˆã¦ãã ã•ã„
4. **çµ±åˆãƒ†ã‚¹ãƒˆå”åŠ›**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…å®Œäº†å¾Œã€çµ±åˆãƒ†ã‚¹ãƒˆã«ã”å”åŠ›ãã ã•ã„

---

**æ–‡æ›¸çµ‚äº†**

æœ€çµ‚æ›´æ–°: 2025å¹´10æœˆ27æ—¥
ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.0
æ‰¿èª: æœªæ‰¿èªï¼ˆVoiceDriveãƒãƒ¼ãƒ ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…ã¡ï¼‰
æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…é–‹å§‹æ™‚
